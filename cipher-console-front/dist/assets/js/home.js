(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["home","NotFound"],{"0089":function(t,e,a){},"0128":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"visitor-add formed-wrap"},[a("div",{staticClass:"formed-header"},[a("div",{staticClass:"formed-header-title"},[t._v("添加访客")]),a("div",{staticClass:"formed-header-btn"},[a("myButton",{on:{click:t.cancel}},[t._v("取消")])],1)]),a("div",{staticClass:"formed-container"},[a("Form",{ref:"formValidate",staticClass:"formed-form",attrs:{model:t.formItem,"label-width":100,rules:t.ruleValidate}},[a("div",{staticClass:"formed-form-part"},[a("div",{staticClass:"formed-form-part-title"},[t._v("账号基本信息")]),a("FormItem",{attrs:{label:"访客姓名：",prop:"name"}},[a("Input",{attrs:{placeholder:"请输入"},model:{value:t.formItem.name,callback:function(e){t.$set(t.formItem,"name","string"===typeof e?e.trim():e)},expression:"formItem.name"}})],1),a("FormItem",{attrs:{label:"手机号：",prop:"phone"}},[a("Input",{attrs:{placeholder:"请输入"},model:{value:t.formItem.phone,callback:function(e){t.$set(t.formItem,"phone","string"===typeof e?e.trim():e)},expression:"formItem.phone"}})],1),a("FormItem",{attrs:{label:"登录密码：",prop:"pwd"}},[a("Input",{attrs:{placeholder:"请输入"},model:{value:t.formItem.pwd,callback:function(e){t.$set(t.formItem,"pwd","string"===typeof e?e.trim():e)},expression:"formItem.pwd"}})],1),a("FormItem",{attrs:{label:"登访客单位：",prop:"unit"}},[a("Input",{attrs:{placeholder:"请输入"},model:{value:t.formItem.unit,callback:function(e){t.$set(t.formItem,"unit","string"===typeof e?e.trim():e)},expression:"formItem.unit"}})],1)],1),a("div",{staticClass:"formed-form-part"},[a("div",{staticClass:"formed-form-part-title"},[t._v("账号有效期")]),a("FormItem",{attrs:{label:"开始时间：",prop:"startTime"}},[a("date-picker",{attrs:{type:"datetime",placeholder:"请选择开始时间"},model:{value:t.formItem.startTime,callback:function(e){t.$set(t.formItem,"startTime",e)},expression:"formItem.startTime"}})],1),a("FormItem",{attrs:{label:"结束时间：",prop:"endTime"}},[a("date-picker",{attrs:{type:"datetime",placeholder:"请选择结束时间"},model:{value:t.formItem.endTime,callback:function(e){t.$set(t.formItem,"endTime",e)},expression:"formItem.endTime"}})],1)],1)]),a("div",{staticClass:"formed-footer"},[a("myButton",{attrs:{btnType:"info"},on:{click:function(e){t.handleSubmit("formValidate")}}},[t._v("保存")]),a("myButton",{on:{click:t.cancel}},[t._v("取消")])],1)],1)])},s=[],o={name:"VisitorAdd",data:function(){var t=this,e=function(t,e,a){var i=/^[1][3,4,5,7,8][0-9]{9}$/;i.test(e)||a(new Error("手机号不正确，请重新输入")),a()},a=function(t,e,a){var i=new Date;e<=i&&a(new Error("开始时间不能小于或等于目前时间")),a()},i=function(e,a,i){a<t.formItem.startTime&&i(new Error("结束时间不能小于开始时间")),i()};return{formItem:{name:"",phone:"",pwd:"",unit:"",startTime:"",endTime:"",startTimeOption:{},endTimeOption:{}},ruleValidate:{name:[{required:!0,message:"访客姓名不能为空",trigger:"blur"},{type:"string",max:20,message:"不能超过20个字符",trigger:"blur"}],phone:[{required:!0,message:" 手机号不能为空",trigger:"blur"},{validator:e,trigger:"blur"}],pwd:[{required:!0,message:"登录密码不能为空",trigger:"blur"},{type:"string",min:6,message:"密码不能小于6位",trigger:"blur"},{type:"string",max:20,message:"密码不能超过20个字符",trigger:"blur"}],unit:[{type:"string",max:30,message:"不能超过30个字符",trigger:"blur"}],startTime:[{type:"date",required:!0,message:" 账号有效期不能为空",trigger:"blur"},{validator:a,trigger:"blur"}],endTime:[{type:"date",required:!0,message:" 账号有效期不能为空",trigger:"blur"},{validator:i,trigger:"blur"}]}}},mounted:function(){this.formItem.startTime=new Date,this.formItem.endTime=new Date+1},methods:{cancel:function(){this.$router.push({path:"/netAccessServiceWVM"})},handleSubmit:function(t){var e=this;this.$refs[t].validate(function(t){t?e.saveData():e.$myMessage.error("表单验证失败，请重试")})},saveData:function(){var t=this,e={loginName:this.formItem.name,password:this.formItem.pwd,mobile:this.formItem.phone,unit:this.formItem.unit,startTime:this.$common.formatDate(this.formItem.startTime),endTime:this.$common.formatDate(this.formItem.endTime)};this.axios({method:"post",url:"/cipher/vistor/add",data:e}).then(function(e){1===e.data.return_code?(t.$myMessage.success(e.data.return_msg),setTimeout(function(){t.$router.push("/netAccessServiceWVM")},1e3)):t.$myMessage.error(e.data.return_msg)}).catch(function(e){t.$Notice.warning({title:"网络未知错误！",desc:e})})}}},r=o,n=(a("bce1"),a("2877")),l=Object(n["a"])(r,i,s,!1,null,"31a0aac6",null);e["default"]=l.exports},"0167":function(t,e,a){},"026e":function(t,e,a){},"02b8":function(t,e,a){"use strict";var i=a("89ef"),s=a.n(i);s.a},"02c1":function(t,e,a){"use strict";var i=a("a780"),s=a.n(i);s.a},"03d9":function(t,e,a){},"04d1":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"portal tabled-wrap"},[a("div",{staticClass:"tabled-header portal-header"},[a("myButton",{attrs:{btnType:"info"},on:{click:t.addPortal}},[t._v("添加Portal设置")])],1),a("div",{staticClass:"tabled-table"},[a("Table",{staticClass:"portalTitle",attrs:{border:"",columns:t.portalTitle,data:t.portalList},scopedSlots:t._u([{key:"description",fn:function(e){var i=e.row;return[a("strong",[a("a",{attrs:{size:"small"},on:{click:function(e){t.editPortal(i.id)}}},[t._v(t._s(i.description))])])]}},{key:"action",fn:function(e){var i=e.row;return[a("a",{on:{click:function(e){t.editPortal(i.id)}}},[t._v("编辑")]),a("a",{on:{click:function(e){t.showDeleteModal(i.id)}}},[t._v("删除")])]}}])})],1),a("Page",{staticClass:"tabled-page",attrs:{total:t.total,current:t.current,"show-elevator":"","show-sizer":"","show-total":""},on:{"on-change":t.changePage,"on-page-size-change":t.changePageSize}})],1)},s=[],o=(a("ac6a"),a("96cf"),a("1da1")),r=a("a9d8"),n={data:function(){return{pageSize:10,total:0,current:1,portalTitle:[{type:"index",width:60,align:"center"},{title:"Portal描述",key:"description",slot:"description"},{title:"portal地址",key:"portalAddress"},{title:"类型",key:"portalType",render:function(t,e){var a=0===e.row.portalType?"员工portal":"访客portal";return t("div",[t("span",a)])}},{title:"操作",slot:"action",minwidth:250,align:"center"}],portalList:[]}},mounted:function(){var t={page:1,rows:this.pageSize};this.getList(t)},methods:{addPortal:function(){this.$router.push({name:"PortalAdd"})},editPortal:function(t){this.$router.push({name:"portalDetails",query:{id:t}})},showDeleteModal:function(t){var e=this;this.$myModal.confirm({title:"确定要删除吗"}).then(function(){var a=Object(o["a"])(regeneratorRuntime.mark(function a(i){return regeneratorRuntime.wrap(function(a){while(1)switch(a.prev=a.next){case 0:e.deletePortal(t);case 1:case"end":return a.stop()}},a,this)}));return function(t){return a.apply(this,arguments)}}()).catch(function(){})},deletePortal:function(t){var e=this;this.axios({method:"post",data:{id:t},url:r["a"].deletePortal}).then(function(t){if(1===t.data.return_code){e.$myMessage.success(t.data.return_msg);var a=Math.ceil((e.total-1)/e.PageSize);e.current=a<e.current?a:e.current;var i={page:e.current,rows:e.pageSize};e.getList(i)}else e.$myMessage.error(t.data.return_msg)}).catch(function(t){console.log(t)})},getList:function(t){var e=this;this.axios({method:"post",data:t,url:r["a"].wifiportalList}).then(function(t){if(0===t.data.code){var a=t.data.msg.rows;e.total=t.data.msg.total,a.forEach(function(t){0===t.protalType?t.protalType="员工Portal":1===t.protalType&&(t.protalType="访客Portal")}),e.portalList=a}}).catch(function(t){this.axios.error.handlingErrors(t)})},changePageSize:function(t){var e={rows:t,page:1};this.getList(e),this.pageSize=t},changePage:function(t){var e={rows:this.pageSize,page:t};this.current=t,this.getList(e)}}},l=n,c=(a("edf3"),a("2877")),u=Object(c["a"])(l,i,s,!1,null,"2e4babae",null);e["default"]=u.exports},"0691":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("transition",[a("router-view")],1)},s=[],o={},r=o,n=a("2877"),l=Object(n["a"])(r,i,s,!1,null,"4ecce690",null);e["default"]=l.exports},"06b7":function(t,e,a){"use strict";var i=a("f622"),s=a.n(i);s.a},"0721":function(t,e,a){"use strict";var i=a("2cdd"),s=a.n(i);s.a},"0754":function(t,e,a){"use strict";var i=a("a167"),s=a.n(i);s.a},"0918":function(t,e,a){},"09a8":function(t,e,a){"use strict";var i=a("b567"),s=a.n(i);s.a},"0a55":function(t,e,a){},"0ae9":function(t,e,a){"use strict";var i=a("4f64"),s=a.n(i);s.a},"0dc6":function(t,e,a){},1089:function(t,e,a){"use strict";var i=a("6bf2"),s=a.n(i);s.a},"10c4":function(t,e,a){},1276:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"formed-wrap"},[a("div",{staticClass:"formed-header"},[a("div",{staticClass:"formed-header-title"},[t._v(t._s(t.showData.devicename))]),a("div",{staticClass:"formed-header-btn"},[t.isEditStatus?t._e():a("myButton",{attrs:{btnType:"info"},on:{click:t.edit}},[t._v("编辑")])],1)]),a("div",{staticClass:"formed-container"},[t.isEditStatus?a("Form",{ref:"formValidate",staticClass:"formed-form",attrs:{model:t.formItem,"label-width":120,rules:t.ruleValidate}},[a("FormItem",{attrs:{label:"设备名称：",prop:"devicename"}},[a("Input",{attrs:{placeholder:"请输入"},model:{value:t.formItem.devicename,callback:function(e){t.$set(t.formItem,"devicename","string"===typeof e?e.trim():e)},expression:"formItem.devicename"}})],1),a("FormItem",{attrs:{label:"设备地址：",prop:"equipAddr"}},[a("Input",{attrs:{placeholder:"请输入"},model:{value:t.formItem.equipAddr,callback:function(e){t.$set(t.formItem,"equipAddr","string"===typeof e?e.trim():e)},expression:"formItem.equipAddr"}})],1),a("FormItem",{attrs:{label:"描述：",prop:"describee"}},[a("Input",{attrs:{placeholder:"请输入",type:"textarea",rows:4},model:{value:t.formItem.describee,callback:function(e){t.$set(t.formItem,"describee","string"===typeof e?e.trim():e)},expression:"formItem.describee"}})],1),a("FormItem",{attrs:{label:"状态：",prop:"status"}},[a("RadioGroup",{model:{value:t.formItem.status,callback:function(e){t.$set(t.formItem,"status",e)},expression:"formItem.status"}},t._l(t.statusList,function(e){return a("Radio",{key:e.value,attrs:{label:e.value}},[t._v(t._s(e.label))])}),1)],1),a("FormItem",{attrs:{label:"认证源：",prop:"authOrigin"}},[a("Select",{model:{value:t.formItem.authOrigin,callback:function(e){t.$set(t.formItem,"authOrigin",e)},expression:"formItem.authOrigin"}},t._l(t.authOriginList,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}),1)],1),a("FormItem",{attrs:{label:"认证方式：",prop:"authType"}},[a("Select",{model:{value:t.formItem.authType,callback:function(e){t.$set(t.formItem,"authType",e)},expression:"formItem.authType"}},t._l(t.authTypeList,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}),1)],1),a("FormItem",{attrs:{label:"二次认证：",prop:"towAuthWay"}},[a("Checkbox",{model:{value:t.formItem.towAuthWay,callback:function(e){t.$set(t.formItem,"towAuthWay",e)},expression:"formItem.towAuthWay"}},[t._v("钉钉Push认证")])],1),a("FormItem",{attrs:{label:"Radius服务器：",prop:"radiusServer"}},[a("Input",{attrs:{placeholder:"请输入"},model:{value:t.formItem.radiusServer,callback:function(e){t.$set(t.formItem,"radiusServer","string"===typeof e?e.trim():e)},expression:"formItem.radiusServer"}})],1),a("FormItem",{attrs:{label:"认证端口：",prop:"authPort"}},[a("Input",{attrs:{placeholder:"请输入",number:""},model:{value:t.formItem.authPort,callback:function(e){t.$set(t.formItem,"authPort","string"===typeof e?e.trim():e)},expression:"formItem.authPort"}})],1),a("FormItem",{attrs:{label:"shareKey：",prop:"shareKey"}},[a("Input",{attrs:{placeholder:"请输入"},model:{value:t.formItem.shareKey,callback:function(e){t.$set(t.formItem,"shareKey","string"===typeof e?e.trim():e)},expression:"formItem.shareKey"}})],1)],1):a("div",{staticClass:"formed-form"},[a("p",{staticClass:"formed-form-item"},[a("span",[t._v("设备名称：")]),a("span",[t._v(" "+t._s(t.showData.devicename))])]),a("p",{staticClass:"formed-form-item"},[a("span",[t._v("设备地址：")]),a("span",[t._v(" "+t._s(t.showData.equipAddr))])]),a("p",{staticClass:"formed-form-item"},[a("span",[t._v("描述：")]),a("span",[t._v(" "+t._s(t.showData.describee))])]),a("p",{staticClass:"formed-form-item"},[a("span",[t._v("状态：")]),0===t.showData.status?a("span",[a("Badge",{attrs:{status:"success"}}),t._v("已启用")],1):a("span",[a("Badge",{attrs:{status:"error"}}),t._v("已停用\n        ")],1)]),a("p",{staticClass:"formed-form-item"},[a("span",[t._v("认证源：")]),a("span",[t._v(" "+t._s(t.getAuthOrigin))])]),a("p",{staticClass:"formed-form-item"},[a("span",[t._v("认证方式：")]),a("span",[t._v(" "+t._s(t.getauthType))])]),a("p",{staticClass:"formed-form-item"},[a("span",[t._v("二次认证：")]),a("span",[t._v(" "+t._s(0===t.showData.towAuthWay?"钉钉Push认证":"无"))])]),a("p",{staticClass:"formed-form-item"},[a("span",[t._v("Radius服务器：")]),a("span",[t._v(" "+t._s(t.showData.radiusServer))])]),a("p",{staticClass:"formed-form-item"},[a("span",[t._v("认证端口：")]),a("span",[t._v(" "+t._s(t.showData.authPort))])]),a("p",{staticClass:"formed-form-item"},[a("span",[t._v("shareKey：")]),a("span",[t._v(" "+t._s(t.showData.shareKey))])])]),t.isEditStatus?a("div",{staticClass:"formed-footer"},[a("myButton",{attrs:{btnType:"info"},on:{click:function(e){t.handleSubmit("formValidate")}}},[t._v("保存")]),a("myButton",{on:{click:t.cancel}},[t._v("取消")])],1):t._e()],1)])},s=[],o=a("8f5b"),r={data:function(){var t=function(t,e,a){e.length>15&&a(new Error("请输入长度少于15个字的名称")),a()},e=function(t,e,a){if(e.length>0){var i=o["a"].IPv4,s=o["a"].IPv6;i.test(e)||s.test(e)||""===e||a(new Error("IP格式不正确"))}a()},a=function(t,e,a){e&&e.length>50&&a(new Error("请输入长度少于50个字的描述")),a()};return{isEditStatus:!1,uuid:"",showData:{},formItem:{devicename:"",equipAddr:"",describee:"",status:0,authOrigin:0,authType:1,towAuthWay:!0,radiusServer:"",authPort:"",shareKey:""},ruleValidate:{devicename:[{required:!0,message:"设备名不能为空",trigger:"blur"},{validator:t,trigger:"blur"}],equipAddr:[{validator:e,trigger:"blur"}],describee:[{validator:a,trigger:"blur"}],radiusServer:[{required:!0,message:"radius服务器不能为空",trigger:"blur"}],authPort:[{required:!0,type:"number",message:"认证端口不能为空",trigger:"blur"}],shareKey:[{required:!0,message:"shareKey不能为空",trigger:"blur"}]},statusList:[{value:0,label:"启用"},{value:1,label:"停用"}],authOriginList:[{value:0,label:"本地认证"},{value:1,label:"AD认证"},{value:2,label:"JLT"}],authTypeList:[{value:1,label:"用户名+密码+动态密码"},{value:2,label:"用户名+密码"},{value:3,label:"用户名+动态密码"}]}},computed:{getAuthOrigin:function(){var t=this.showData.authOrigin;if("undefined"!==typeof t)return this.authOriginList[t].label},getauthType:function(){if("undefined"!==typeof this.showData.authType){var t=this.showData.authType-1;return this.authTypeList[t].label}}},created:function(){this.uuid=this.$route.query.uuid,this.getData()},methods:{getData:function(){var t=this;this.axios({method:"post",url:"/cipher/equip/details",data:{uuid:this.uuid}}).then(function(e){0===e.data.return_code?(t.showData=JSON.parse(JSON.stringify(e.data.return_result)),t.formItem=JSON.parse(JSON.stringify(e.data.return_result)),t.formItem.towAuthWay=0===t.formItem.towAuthWay):t.$myMessage.error(e.data.return_msg)}).catch(function(e){t.$Notice.warning({title:"网络未知错误！",desc:e})})},edit:function(){this.isEditStatus=!0},cancel:function(){this.isEditStatus=!1,this.$refs["formValidate"].resetFields()},handleSubmit:function(t){var e=this;this.$refs[t].validate(function(t){t?e.saveData():e.$myMessage.error("表单验证失败，请重试")})},saveData:function(){var t=this,e={uuid:this.uuid,devicename:this.formItem.devicename,equipAddr:this.formItem.equipAddr,describee:this.formItem.describee,status:this.formItem.status,authOrigin:this.formItem.authOrigin,authType:this.formItem.authType,towAuthWay:this.formItem.towAuthWay?0:1,radiusServer:this.formItem.radiusServer,authPort:this.formItem.authPort,shareKey:this.formItem.shareKey};this.axios({method:"post",url:"/cipher/equip/compile",data:e}).then(function(e){0===e.data.return_code?(t.$myMessage.success(e.data.return_msg),t.getData(),setTimeout(function(){t.isEditStatus=!1},1e3)):t.$myMessage.error(e.data.return_msg)}).catch(function(e){t.$Notice.warning({title:"网络未知错误！",desc:e})})}}},n=r,l=(a("dc6a"),a("2877")),c=Object(l["a"])(n,i,s,!1,null,"541df980",null);e["default"]=c.exports},1371:function(t,e,a){},1394:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"AD tabled-wrap"},[a("div",{staticClass:"tabled-header"},[a("div",{staticClass:"tabled-header-search"},[a("Tooltip",{attrs:{content:"请输入AD目录中的ip地址",theme:"light"}},[a("myInput",{attrs:{placeholder:"请输入AD域地址",radius:"half",search:!0},on:{handleClick:t.querynamebtn},model:{value:t.queryName,callback:function(e){t.queryName=e},expression:"queryName"}})],1)],1),a("div",{staticClass:"tabled-header-btn"},[a("myButton",{attrs:{btnType:"info"},on:{click:t.addad}},[t._v("加AD活动目录")])],1)]),a("div",{staticClass:"tabled-table"},[a("Table",{attrs:{border:"",columns:t.columns7,data:t.data6}})],1),a("Page",{staticClass:"tabled-page",attrs:{total:t.total,current:t.curentPage,"show-elevator":"","show-sizer":"","show-total":""},on:{"on-change":t.changePage,"on-page-size-change":t.pageSizeChange}}),a("Modal",{staticClass:"tip-modal",attrs:{closable:!1,width:"528"},on:{"on-ok":t.deletead2},model:{value:t.modal1,callback:function(e){t.modal1=e},expression:"modal1"}},[a("p",{staticClass:"header-confirm",attrs:{slot:"header"},slot:"header"},[a("Icon",{attrs:{type:"md-alert"}}),a("span",[t._v("确定要删除这个AD目录吗")])],1),a("div",{staticClass:"tip-modal-content",staticStyle:{width:"326px"}},[a("myInput",{attrs:{placeholder:"确认删除，请输入DELETE"},model:{value:t.ifdelcode,callback:function(e){t.ifdelcode=e},expression:"ifdelcode"}})],1),t.viladateInput?a("div",{staticStyle:{width:"326px","text-align":"left","margin-top":"10px",color:"red"}},[a("span",[t._v("请输入字符DELETE")])]):t._e()]),a("Modal",{staticClass:"tip-modal",attrs:{closable:!1,width:"400"},model:{value:t.modal2,callback:function(e){t.modal2=e},expression:"modal2"}},[a("p",{staticClass:"header-confirm",attrs:{slot:"header"},slot:"header"},[a("Icon",{attrs:{type:"md-alert"}}),a("span",[t._v("删除失败 请输入字符DELETE")])],1)])],1)},s=[],o={data:function(){var t=this;return{modal2:!1,viladateInput:!1,id:0,ifdelcode:"",modal1:!1,queryName:"",total:0,curentPage:1,size:10,columns7:[{title:"AD目录",key:"ip",width:300,render:function(e,a){return e("a",[e("span",{on:{click:function(){t.toadactivity(a.index)}}},t.data6[a.index].ip)])}},{title:"最后同步时间",key:"createTime"},{title:"操作",key:"oper",width:300,align:"center",render:function(e,a){return e("span",[e("a",{on:{click:function(){t.adset(a.index)}}},"配置目录 "),e("a",{on:{click:function(){t.deletead(a.index)}}}," 删除")])}}],data6:[]}},mounted:function(){var t=this,e={rows:t.size,page:1};t.finddata(e)},methods:{deletead2:function(){var t=this;"DELETE"===t.ifdelcode?(t.deletead3(),t.ifdelcode=""):this.modal2=!0},deletead3:function(){var t=this,e={id:t.id};this.axios({method:"post",url:"/cipher/ldap/deleteAd",data:e}).then(function(e){if(0===e.data.code){t.$myMessage.success(e.data.msg);var a={rows:t.size,page:1};t.finddata(a)}else t.$myMessage.error(e.data.msg)}).catch(function(t){console.log(t)})},deletead:function(t){var e=this;e.id=e.data6[t].id,e.modal1=!0},querynamebtn:function(){var t={queryName:this.queryName,page:1,rows:this.size};this.finddata(t)},finddata:function(t){var e=this;this.axios({method:"post",url:"/cipher/ldap/list?json",data:t}).then(function(t){e.data6=t.data.rows,e.total=t.data.total}).catch(function(t){console.log(t)})},pageSizeChange:function(t){var e={rows:t,page:1};this.finddata(e),this.size=t},changePage:function(t){var e={rows:this.size,page:t};this.curentPage=t,this.finddata(e)},adset:function(t){this.$router.push({name:"adSet",query:{adId:this.data6[t].id}})},addad:function(){this.$router.push({name:"adAdd"})},toadactivity:function(t){this.$router.push({name:"adList",query:{adId:this.data6[t].id}})}}},r=o,n=(a("8c0b"),a("2877")),l=Object(n["a"])(r,i,s,!1,null,"5c3898c4",null);e["default"]=l.exports},1577:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._v("\n    账号属性设置\n")])},s=[],o={},r=o,n=a("2877"),l=Object(n["a"])(r,i,s,!1,null,"32ec8c20",null);e["default"]=l.exports},"15e3":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"formed-wrap"},[a("div",{staticClass:"formed-header"},[a("div",{staticClass:"formed-header-title"},[t._v("添加活动目录")]),a("myButton",{staticClass:"formed-header-btn",on:{click:t.cancel}},[t._v("取消")])],1),a("div",{staticClass:"formed-container"},[a("div",{staticClass:"formed-form"},[a("div",{staticClass:"formed-form-part-title"},[a("Steps",{attrs:{current:t.currentStep,direction:"vertical"}},[a("Step",{attrs:{title:"连接配置",content:"配置连接活动目录的方式和参数"}}),a("Step",{attrs:{title:"同步选项",content:"配置同步组织结构"}}),a("Step",{attrs:{title:"属性映射",content:"配置与AD的属性映射关系"}})],1)],1),0===t.currentStep?a("Form",{ref:"formdata",attrs:{model:t.formdata,rules:t.ruleValidate,"label-width":120}},[a("FormItem",{attrs:{label:"地址：",prop:"ip"}},[a("Input",{model:{value:t.formdata.ip,callback:function(e){t.$set(t.formdata,"ip","string"===typeof e?e.trim():e)},expression:"formdata.ip"}})],1),a("FormItem",{attrs:{label:"端口：",prop:"port"}},[a("Input",{model:{value:t.formdata.port,callback:function(e){t.$set(t.formdata,"port","string"===typeof e?e.trim():e)},expression:"formdata.port"}})],1),a("FormItem",{attrs:{label:"用户名：",prop:"userName"}},[a("Input",{model:{value:t.formdata.userName,callback:function(e){t.$set(t.formdata,"userName","string"===typeof e?e.trim():e)},expression:"formdata.userName"}})],1),a("FormItem",{attrs:{label:"密码：",prop:"password"}},[a("Input",{attrs:{type:t.pwdType},model:{value:t.formdata.password,callback:function(e){t.$set(t.formdata,"password","string"===typeof e?e.trim():e)},expression:"formdata.password"}}),a("img",{staticClass:"img",attrs:{src:t.src,draggable:"false"},on:{click:t.changeType}})],1)],1):t._e(),1===t.currentStep?a("Form",{ref:"formdata",attrs:{model:t.formdata,rules:t.ruleValidate,"label-width":120}},[a("FormItem",{attrs:{label:"组织结构："}},[a("RadioGroup",{model:{value:t.formdata.syncOu,callback:function(e){t.$set(t.formdata,"syncOu",e)},expression:"formdata.syncOu"}},[a("Radio",{attrs:{label:"1"}},[t._v("同步组织结构")]),a("Tooltip",{attrs:{content:"同步时会将AD组织结构与账号一并同步进来",placement:"bottom",theme:"light"}},[a("Icon",{staticClass:"iconInterVal",attrs:{type:"md-alert",size:"24",color:"rgba(24, 144, 255, 1)"}})],1),a("Radio",{attrs:{label:"0"}},[t._v("不同步组织结构")]),a("Tooltip",{attrs:{content:"同步时只将AD中的账号同步进来",placement:"bottom",theme:"light"}},[a("Icon",{staticClass:"iconInterVal",attrs:{type:"md-alert",size:"24",color:"rgba(24, 144, 255, 1)"}})],1)],1)],1),a("FormItem",{staticClass:"syncTarget",attrs:{label:"同步目标：",prop:"syncTarget"}},[a("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"请选择同步目标"},model:{value:t.formdata.syncTarget,callback:function(e){t.$set(t.formdata,"syncTarget",e)},expression:"formdata.syncTarget"}}),a("span",{staticClass:"link",on:{click:function(e){t.showOUModal()}}},[t._v("选择需要同步的OU")])],1),a("FormItem",{attrs:{label:"自动同步：",prop:"isAutoSync"}},[a("RadioGroup",{model:{value:t.formdata.isAutoSync,callback:function(e){t.$set(t.formdata,"isAutoSync",e)},expression:"formdata.isAutoSync"}},t._l(t.isAutoSyncList,function(e){return a("Radio",{key:e.value,attrs:{label:e.value}},[t._v(t._s(e.label))])}),1)],1),a("FormItem",{attrs:{label:"同步开始时间：",prop:"autoSyncDate"}},[a("TimePicker",{attrs:{type:"time",placeholder:"请选择开始时间"},model:{value:t.formdata.autoSyncDate,callback:function(e){t.$set(t.formdata,"autoSyncDate",e)},expression:"formdata.autoSyncDate"}})],1),a("FormItem",{attrs:{label:"每隔：",prop:"interval"}},[a("mySelect",{attrs:{dataList:t.intervalList,width:"326px",showString:"请选择时间间隔"},model:{value:t.formdata.interval,callback:function(e){t.$set(t.formdata,"interval",e)},expression:"formdata.interval"}})],1)],1):t._e(),2===t.currentStep?a("Form",{attrs:{model:t.formdata,"label-width":100}},[a("p",{staticStyle:{"font-size":"14px","font-weight":"bold","text-align":"left","margin-left":"50px"}},[t._v("本地属性       应用属性")]),a("FormItem",{attrs:{label:"账号："}},[a("div",{attrs:{id:"input3"}},[a("Input",{model:{value:t.formdata.adMap2LocalDomainList[0].adKey,callback:function(e){t.$set(t.formdata.adMap2LocalDomainList[0],"adKey",e)},expression:"formdata.adMap2LocalDomainList[0].adKey"}})],1)]),a("FormItem",{attrs:{label:"姓名："}},[a("div",{attrs:{id:"input3"}},[a("Input",{attrs:{placeholder:""},model:{value:t.formdata.adMap2LocalDomainList[1].adKey,callback:function(e){t.$set(t.formdata.adMap2LocalDomainList[1],"adKey",e)},expression:"formdata.adMap2LocalDomainList[1].adKey"}})],1)]),a("FormItem",{attrs:{label:"邮箱："}},[a("div",{attrs:{id:"input3"}},[a("Input",{attrs:{placeholder:""},model:{value:t.formdata.adMap2LocalDomainList[2].adKey,callback:function(e){t.$set(t.formdata.adMap2LocalDomainList[2],"adKey",e)},expression:"formdata.adMap2LocalDomainList[2].adKey"}})],1)]),a("FormItem",{attrs:{label:"手机："}},[a("div",{attrs:{id:"input3"}},[a("Input",{attrs:{placeholder:""},model:{value:t.formdata.adMap2LocalDomainList[3].adKey,callback:function(e){t.$set(t.formdata.adMap2LocalDomainList[3],"adKey",e)},expression:"formdata.adMap2LocalDomainList[3].adKey"}})],1)]),a("FormItem",{attrs:{label:"职位："}},[a("div",{attrs:{id:"input3"}},[a("Input",{attrs:{placeholder:""},model:{value:t.formdata.adMap2LocalDomainList[4].adKey,callback:function(e){t.$set(t.formdata.adMap2LocalDomainList[4],"adKey",e)},expression:"formdata.adMap2LocalDomainList[4].adKey"}})],1)]),a("FormItem",{attrs:{label:"工号："}},[a("div",{attrs:{id:"input3"}},[a("Input",{attrs:{placeholder:""},model:{value:t.formdata.adMap2LocalDomainList[5].adKey,callback:function(e){t.$set(t.formdata.adMap2LocalDomainList[5],"adKey",e)},expression:"formdata.adMap2LocalDomainList[5].adKey"}})],1)]),a("FormItem",{attrs:{label:"性别："}},[a("div",{attrs:{id:"input3"}},[a("Input",{attrs:{placeholder:""},model:{value:t.formdata.adMap2LocalDomainList[6].adKey,callback:function(e){t.$set(t.formdata.adMap2LocalDomainList[6],"adKey",e)},expression:"formdata.adMap2LocalDomainList[6].adKey"}})],1)])],1):t._e()],1),a("div",{staticClass:"formed-footer"},[0!==t.currentStep?a("myButton",{on:{click:t.tolast}},[t._v("上一步")]):t._e(),2!==t.currentStep?a("myButton",{attrs:{btnType:"info"},on:{click:function(e){t.tonext("formdata")}}},[t._v("下一步")]):t._e(),0===t.currentStep?a("myButton",{on:{click:t.testConnect}},[t._v("测试连接")]):t._e(),2===t.currentStep?a("myButton",{attrs:{btnType:"info"},on:{click:function(e){t.tosave("formdata")}}},[t._v("保存")]):t._e(),a("myButton",{on:{click:t.cancel}},[t._v("取消")])],1)]),a("Modal",{on:{"on-cancel":t.OUCancel},model:{value:t.OUModal,callback:function(e){t.OUModal=e},expression:"OUModal"}},[a("p",{staticClass:"OUModalTitle",attrs:{slot:"header"},slot:"header"},[t._v("\n      选择需要同步的OU\n    ")]),a("div",{staticClass:"OUModal"},[a("p",{staticClass:"OUModalContentTitle"},[t._v("\n        选择OU\n      ")]),a("div",{staticClass:"OUModalContentBody"},[a("Input",{attrs:{search:"","enter-button":"",placeholder:"搜索应用"},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}}),a("div",{staticClass:"OUTree"},[0!==t.OUData.length?a("Tree",{ref:"OUTree",attrs:{data:t.OUData,"show-checkbox":""}}):t._e()],1)],1)]),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"primary"},on:{click:t.OUSave}},[t._v("保存")]),a("Button",{on:{click:t.OUReset}},[t._v("重置")])],1)])],1)},s=[],o=(a("c5f6"),a("8a94")),r={data:function(){var t=function(t,e,a){var i=/^([a-zA-Z]|[a-zA-Z0-9_]|[a-zA-Z0-9_*])+@[a-zA-Z0-9]+\.([a-zA-Z]{2,4})$/;i.test(e)||a(new Error("请输入合法用户名:如name@domain.com")),a()};return{src:a("bf8b"),pwdType:"password",buttonSize:"large",options:[{type:"userPrincipalName",desc:"userPrincipalName"},{type:"samAccountName",desc:"samAccountName"}],isAutoSyncList:[{value:0,label:"开启"},{value:1,label:"关闭"}],intervalList:[{value:0,label:"15分钟"},{value:1,label:"1小时"},{value:2,label:"6小时"},{value:3,label:"12小时"},{value:4,label:"24小时"}],currentStep:0,syncTarget:[],formdata:{ip:"",password:"",syncTarget:"",port:389,syncOu:"1",userName:"",isAutoSync:1,autoSyncDate:"00:00:00",interval:null,adMap2LocalDomainList:[{adKey:"userPrincipalName",localVal:"accountNumber"},{adKey:"givenName",localVal:"userName"},{adKey:"mail",localVal:"mail"},{adKey:"mobile",localVal:"phoneNumber"},{adKey:"title",localVal:"title"},{adKey:"ID",localVal:"ID"},{adKey:"sex",localVal:"sex"}]},ruleValidate:{ip:[{required:!0,message:"输入ip地址",trigger:"blur"}],port:[{required:!0,message:"输入端口号"}],userName:[{required:!0,trigger:"blur",validator:t}],password:[{required:!0,message:"输入密码",trigger:"blur"}],syncTarget:[{required:!0,message:"请选择同步目标",trigger:"blur"}]},keyword:"",OUModal:!1,OUData:[],OUDataBak:[]}},watch:{keyword:function(t,e){o["a"].keyword(this)}},methods:{changeType:function(){this.pwdType="password"===this.pwdType?"text":"password",this.src=this.src===a("bf8b")?a("9864"):a("bf8b")},testConnect:function(){var t=this,e={ip:this.formdata.ip,port:this.formdata.port,userName:this.formdata.userName,password:this.formdata.password};this.axios({method:"post",url:"/cipher/ldap/testConnect",data:e}).then(function(e){1===e.data.return_code?t.$myMessage.success(e.data.return_msg):t.$Modal.error({title:"提示",content:e.data.return_msg})}).catch(function(t){console.log(t)})},tonext:function(t){var e=this;this.$refs[t].validate(function(t){t?e.currentStep++:e.$myMessage.error("表单验证失败")})},tolast:function(){this.currentStep--},cancel:function(){this.$router.push("/userCatalogAD")},tosave:function(t){var e=this,a={ip:this.formdata.ip,port:this.formdata.port,userName:this.formdata.userName,password:this.formdata.password,ous:JSON.stringify(this.syncTarget),syncOu:Number(this.formdata.syncOu),isAutoSync:this.formdata.isAutoSync,autoSyncDate:this.formdata.autoSyncDate,interval:this.formdata.interval,"adMap2LocalDomainList[0].localVal":this.formdata.adMap2LocalDomainList[0].localVal,"adMap2LocalDomainList[0].adKey":this.formdata.adMap2LocalDomainList[0].adKey,"adMap2LocalDomainList[1].localVal":this.formdata.adMap2LocalDomainList[1].localVal,"adMap2LocalDomainList[1].adKey":this.formdata.adMap2LocalDomainList[1].adKey,"adMap2LocalDomainList[2].localVal":this.formdata.adMap2LocalDomainList[2].localVal,"adMap2LocalDomainList[2].adKey":this.formdata.adMap2LocalDomainList[2].adKey,"adMap2LocalDomainList[3].localVal":this.formdata.adMap2LocalDomainList[3].localVal,"adMap2LocalDomainList[3].adKey":this.formdata.adMap2LocalDomainList[3].adKey,"adMap2LocalDomainList[4].localVal":this.formdata.adMap2LocalDomainList[4].localVal,"adMap2LocalDomainList[4].adKey":this.formdata.adMap2LocalDomainList[4].adKey,"adMap2LocalDomainList[5].localVal":this.formdata.adMap2LocalDomainList[5].localVal,"adMap2LocalDomainList[5].adKey":this.formdata.adMap2LocalDomainList[5].adKey,"adMap2LocalDomainList[6].localVal":this.formdata.adMap2LocalDomainList[6].localVal,"adMap2LocalDomainList[6].adKey":this.formdata.adMap2LocalDomainList[6].adKey};this.axios({method:"post",url:"/cipher/ldap/add",data:a}).then(function(t){0===t.data.code?(e.cancel(),e.$myMessage.success("添加成功")):e.$myMessage.error(t.data.msg)}).catch(function(t){console.log(t)})},showOUModal:function(){var t=this;this.formdata.syncTarget=" ",this.$refs["formdata"].validate(function(e){e?o["a"].showOUModal(t):(t.formdata.syncTarget="",t.$myMessage.error("表单验证失败"))})},OUSave:function(){o["a"].OUSave(this)},OUCancel:function(){this.formdata.syncTarget="",o["a"].OUCancel(this)},OUReset:function(){o["a"].OUReset(this)}}},n=r,l=(a("1089"),a("2877")),c=Object(l["a"])(n,i,s,!1,null,"2db3cda6",null);e["default"]=c.exports},1696:function(t,e,a){"use strict";var i=a("1bd3"),s=a.n(i);s.a},"174b":function(t,e,a){},1811:function(t,e,a){"use strict";var i=a("8e9b"),s=a.n(i);s.a},"18e8":function(t,e,a){},"1ab1":function(t,e,a){"use strict";var i=a("fb8a"),s=a.n(i);s.a},"1ade":function(t,e,a){},"1bd3":function(t,e,a){},"1cbc":function(t,e,a){},"1da1":function(t,e,a){"use strict";function i(t,e,a,i,s,o,r){try{var n=t[o](r),l=n.value}catch(c){return void a(c)}n.done?e(l):Promise.resolve(l).then(i,s)}function s(t){return function(){var e=this,a=arguments;return new Promise(function(s,o){var r=t.apply(e,a);function n(t){i(r,s,o,n,l,"next",t)}function l(t){i(r,s,o,n,l,"throw",t)}n(void 0)})}}a.d(e,"a",function(){return s})},"1e91":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"formed-wrap"},[a("div",{staticClass:"formed-header"},[a("p",{staticClass:"formed-header-title"},[t._v("添加"+t._s(t.appType)+"应用")])]),a("div",{staticClass:"formed-container"},[a("div",{staticClass:"formed-form "},[a("div",{staticClass:"app-add-form clearfix"},[a("div",{staticClass:"choose-img"},[a("img",{staticClass:"default-img",attrs:{src:t.applicationIconUrl}}),a("div",{staticClass:"choose-img__text"},[a("div",{staticClass:"link",on:{click:t.showChooseIconList}},[t._v("系统图标")]),a("Upload",{ref:"upload",staticClass:"uploadClass",attrs:{"show-upload-list":!1,"on-success":t.handleSuccess,format:["jpg","jpeg","png"],"max-size":2048,"on-format-error":t.handleFormatError,"on-exceeded-size":t.handleMaxSize,type:"drag",action:"/cipher/app/imgUpload"}},[a("div",{staticClass:"link"},[t._v("本地上传")])])],1)]),a("Form",{ref:"formValidate",staticClass:"left",attrs:{"label-width":225,model:t.formValidate,rules:t.ruleValidate}},[a("FormItem",{attrs:{label:"应用名称：",prop:"applicationName"}},[a("Input",{attrs:{maxlength:14,placeholder:"请输入应用名称"},model:{value:t.formValidate.applicationName,callback:function(e){t.$set(t.formValidate,"applicationName","string"===typeof e?e.trim():e)},expression:"formValidate.applicationName"}})],1),a("FormItem",{attrs:{label:"应用描述：",prop:"applicationDescription"}},[a("Input",{attrs:{maxlength:24,placeholder:"请输入应用名称"},model:{value:t.formValidate.applicationDescription,callback:function(e){t.$set(t.formValidate,"applicationDescription","string"===typeof e?e.trim():e)},expression:"formValidate.applicationDescription"}})],1),a("FormItem",{attrs:{label:"认证方式：",prop:"applicationType"}},[a("RadioGroup",{model:{value:t.formValidate.applicationType,callback:function(e){t.$set(t.formValidate,"applicationType",e)},expression:"formValidate.applicationType"}},t._l(t.getApplicationIconTypeList,function(e){return a("Radio",{key:e.value,attrs:{label:e.value}},[t._v("\n                "+t._s(e.label)+"\n                "),e.tip?a("Tooltip",{attrs:{placement:"top",content:e.tip}},[a("Icon",{staticClass:"tip-icon",attrs:{type:"md-information-circle"}})],1):t._e()],1)}),1)],1),"新"!=t.appType?a("FormItem",{attrs:{label:"子账号：",prop:"subAccountConfig"}},[a("RadioGroup",{model:{value:t.formValidate.subAccountConfig,callback:function(e){t.$set(t.formValidate,"subAccountConfig",e)},expression:"formValidate.subAccountConfig"}},t._l(t.subAccountConfigList,function(e){return a("Radio",{key:e.value,attrs:{label:e.value}},[t._v("\n                "+t._s(e.label)+"\n              ")])}),1)],1):t._e(),"新"===t.appType||"CAS"===t.appType?a("FormItem",{attrs:{label:"DSG网关地址：",prop:"xdsgUrl"}},[a("Input",{attrs:{placeholder:"请输入集成应用的DSG网关地址与端口号"},model:{value:t.formValidate.xdsgUrl,callback:function(e){t.$set(t.formValidate,"xdsgUrl",e)},expression:"formValidate.xdsgUrl"}})],1):t._e(),"CAS"===t.appType?a("FormItem",{attrs:{label:"应用地址：",prop:"applicationUrl"}},[a("Input",{attrs:{placeholder:"请输入应用地址"},model:{value:t.formValidate.applicationUrl,callback:function(e){t.$set(t.formValidate,"applicationUrl",e)},expression:"formValidate.applicationUrl"}})],1):t._e(),"SAML"===t.appType?[a("FormItem",{attrs:{label:"用户登录地址:",prop:"applicationType"}},[a("Input",{attrs:{placeholder:"请输入用户登录地址"},model:{value:t.formValidate.applicationUrl,callback:function(e){t.$set(t.formValidate,"applicationUrl",e)},expression:"formValidate.applicationUrl"}})],1),a("FormItem",{attrs:{label:"relayState地址：",prop:"relayState"}},[a("Input",{attrs:{placeholder:"请输入认证成功后的跳转地址"},model:{value:t.formValidate.relayState,callback:function(e){t.$set(t.formValidate,"relayState",e)},expression:"formValidate.relayState"}})],1),a("FormItem",{attrs:{label:"AssertionConsumerServiceUrl：",prop:"AssertionConsumerServiceUrl："}},[a("Input",{attrs:{placeholder:"请输入sp接受saml地址"},model:{value:t.formValidate.assertionConsumerServiceUrl,callback:function(e){t.$set(t.formValidate,"assertionConsumerServiceUrl",e)},expression:"formValidate.assertionConsumerServiceUrl"}})],1),a("FormItem",{attrs:{label:"断言有效期：",prop:"exitTime"}},[a("Input",{attrs:{placeholder:"请输入断言存活的周期（秒）"},model:{value:t.formValidate.exitTime,callback:function(e){t.$set(t.formValidate,"exitTime",e)},expression:"formValidate.exitTime"}})],1),a("FormItem",{attrs:{label:"entityId:",prop:"entityId"}},[a("Input",{attrs:{placeholder:"请输入idp的MetaData地址"},model:{value:t.formValidate.idpEntityId,callback:function(e){t.$set(t.formValidate,"idpEntityId",e)},expression:"formValidate.idpEntityId"}})],1)]:t._e(),"OAUTH"===t.appType?[a("FormItem",{attrs:{label:"重定向地址：",prop:"applicationUrl"}},[a("Tooltip",{attrs:{placement:"right","max-width":"300",content:"重定向地址，http，https or APP-Schemep"}},[a("Input",{attrs:{placeholder:"请输入重定向地址"},model:{value:t.formValidate.applicationUrl,callback:function(e){t.$set(t.formValidate,"applicationUrl",e)},expression:"formValidate.applicationUrl"}})],1)],1)]:t._e()],2)],1)]),a("div",{staticClass:"formed-footer"},[a("myButton",{attrs:{btnType:"info"},on:{click:function(e){t.saveAdd("formValidate")}}},[t._v("保存")]),a("myButton",{on:{click:t.goBack}},[t._v("返回")])],1)]),a("Modal",{attrs:{width:"700px"},model:{value:t.iconModal,callback:function(e){t.iconModal=e},expression:"iconModal"}},[a("p",{staticClass:"modalHeadr",attrs:{slot:"header"},slot:"header"},[a("Icon",{attrs:{type:"ios-add"}}),a("span",[t._v("选择图片")])],1),a("p",{staticClass:"addApplication"},[a("Row",{attrs:{gutter:16,align:"top"}},t._l(t.imageList,function(e,i){return a("div",{key:i,staticClass:"imgList",on:{click:function(e){t.chooseIcon(i)}}},[a("Col",{staticStyle:{height:"210px"},attrs:{span:"6"}},[a("div",[a("img",{staticClass:"app-col-class",attrs:{src:e.imageUrl,size:"30"}}),e.choose?a("Icon",{staticClass:"iconClass",attrs:{type:"md-checkmark",size:"30"}}):t._e()],1)])],1)}),0)],1),a("p",{staticClass:"footerDemo",attrs:{slot:"footer"},slot:"footer"},[a("myButton",{attrs:{btnType:"info"},on:{click:t.confirmIcon}},[t._v("确定")]),a("myButton",{staticStyle:{"margin-left":"8px","vertical-align":"top"},on:{click:function(e){t.iconModal=!1}}},[t._v("取消")])],1)])],1)},s=[],o=(a("ac6a"),a("be94")),r=(a("cadf"),a("551c"),a("097d"),a("2f62")),n={name:"AddAppType",data:function(){return{appType:"",chooseIconIndex:null,imageList:[],applicationIcontypeList:[{type:"新",label:"安全代理",value:1,tip:"通过DSG网关代理到应用类型"},{type:"新",label:"非SSO应用",value:6,tip:"通过超链接进行网页跳转的网站"},{type:"CAS",label:"CAS应用",value:7},{type:"SAML",label:"SAML协议",value:10},{type:"OAUTH",label:"OAUTH协议",value:11}],subAccountConfigList:[{label:"手动配置",value:"assManual"},{label:"账号",value:"assPrimaryAccount"},{label:"邮箱",value:"assEmail"},{label:"邮箱前缀",value:"assEmailPrefix"},{label:"手机号",value:"assTelephone"},{label:"工号",value:"assWorkers"}],authTypeList:[{label:"授权码模式",value:0},{label:"简化模式",value:1}],id:"",uploadList:[],applicationIconUrl:"/static/img/img-01.png",iconModal:!1,formValidate:{applicationType:null,applicationName:"",subAccountConfig:"assManual",applicationUrl:"",xdsgUrl:"",applicationIconUrl:"",authType:"",applicationDescription:""},ruleValidate:{applicationName:[{required:!0,message:"请输入应用名称",trigger:"blur"}],applicationUrl:[{required:!0,message:"请输入应用地址",trigger:"blur"}]}}},computed:{getApplicationIconTypeList:function(){var t=this;return this.applicationIcontypeList.filter(function(e){return e.type===t.appType})}},mounted:function(){this.appType=this.$route.query.type,this.formValidate.applicationType=this.getApplicationIconTypeList[0].value},methods:Object(o["a"])({showChooseIconList:function(){var t=this;this.axios({method:"post",data:{},url:"/cipher/app/add"}).then(function(e){t.imageList=e.data.imageList,t.iconModal=!0}).catch(function(t){console.log(t)})},chooseIcon:function(t){this.imageList.forEach(function(e,a){e.choose=a===t}),this.$forceUpdate(),this.chooseIconIndex=t},confirmIcon:function(){this.applicationIconUrl=this.imageList[this.chooseIconIndex].imageUrl,this.iconModal=!1},handleSuccess:function(t,e){0===t.status?(this.applicationIconUrl=t.imgName,this.$myModal.success({title:"上传成功",content:"图片上传成功"})):this.$myModal.error({title:"上传失败",content:"图片上传失败"})},handleFormatError:function(t){this.$Notice.warning({title:"请选择一张图片！",desc:"文件不正确！ "+t.name+" 该文件不是一个图片"})},handleMaxSize:function(t){this.$Notice.warning({title:"大小超过2M",desc:"该文件  "+t.name+"太大，不能超过2M"})},saveAdd:function(t){var e=this;this.$refs[t].validate(function(t){if(t){e.applicationIconUrl="/assets/img/img-01.png"===e.applicationIconUrl?"":e.applicationIconUrl;var a={applicationName:e.formValidate.applicationName,applicationType:e.formValidate.applicationType,applicationIconUrl:e.applicationIconUrl,xdsgUrl:e.formValidate.xdsgUrl,applicationUrl:e.formValidate.applicationUrl,assManual:"assManual"===e.formValidate.subAccountConfig?0:1,assPrimaryAccount:"assPrimaryAccount"===e.formValidate.subAccountConfig?0:1,assEmail:"assEmail"===e.formValidate.subAccountConfig?0:1,assEmailPrefix:"assEmailPrefix"===e.formValidate.subAccountConfig?0:1,assTelephone:"assTelephone"===e.formValidate.subAccountConfig?0:1,assWorkers:"assWorkers"===e.formValidate.subAccountConfig?0:1,relayState:e.formValidate.relayState,assertionConsumerServiceUrl:e.formValidate.assertionConsumerServiceUrl,exitTime:e.formValidate.exitTime,entityId:e.formValidate.entityId,applicationDescription:e.formValidate.applicationDescription};e.axios({method:"post",url:"/cipher/app/add?json",data:a}).then(function(t){0===t.data.return_code?(e.id=t.data.return_result,e.$myMessage.success("保存成功!"),e.changeAppId(e.id),e.$router.push({name:"appDetails"})):e.$myModal.error(t.data.return_msg)}).catch(function(t){e.$Notice.warning({title:"网络未知错误！",desc:t})})}})},goBack:function(){this.$router.push({name:"appAddList"})}},Object(r["b"])(["changeAppId"]))},l=n,c=(a("62b8"),a("2877")),u=Object(c["a"])(l,i,s,!1,null,"733981b8",null);e["default"]=u.exports},2104:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("transition",{attrs:{name:"fade",mode:"out-in"}},[a("router-view")],1)},s=[],o={},r=o,n=a("2877"),l=Object(n["a"])(r,i,s,!1,null,"5cc58e66",null);e["default"]=l.exports},2113:function(t,e,a){},"21f0":function(t,e,a){t.exports=a.p+"assets/img/cas.png"},2377:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mail-auth wrap"},[t.isShowEdit?a("myButton",{staticClass:"mail-auth-change__btn",attrs:{btnType:"info"},on:{click:t.changeStatus}},[t._v("编辑")]):t._e(),a("myComplexTabs",{staticClass:"mail-auth-tab",model:{value:t.mailAuth,callback:function(e){t.mailAuth=e},expression:"mailAuth"}},[a("myPane",{attrs:{label:"基本配置",name:"base"}},[a("MailBase",{ref:"base",on:{statusChange:t.getChildStatus}})],1),a("myPane",{attrs:{label:"随机码配置",name:"randomCode"}},[a("MailRandomCode",{ref:"randomCode",on:{statusChange:t.getChildStatus}})],1),a("myPane",{attrs:{label:"开通账号通知",name:"setUpAccount"}},[a("MailSetUp",{ref:"setUpAccount",on:{statusChange:t.getChildStatus}})],1),a("myPane",{attrs:{label:"下发种子秘钥",name:"sentDownKey"}},[a("MailSentDownKey",{ref:"sentDownKey",on:{statusChange:t.getChildStatus}})],1)],1)],1)},s=[],o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mail-base formed-wrap"},[t.isEdit?a("div",{staticClass:"formed-form"},[a("Form",{ref:"formItem",staticClass:"mail-base-form",attrs:{model:t.formItem,rules:t.ruleValidate,"label-width":130}},[a("FormItem",{attrs:{label:"smtp服务器：",prop:"smtp"}},[a("Input",{model:{value:t.formItem.smtp,callback:function(e){t.$set(t.formItem,"smtp","string"===typeof e?e.trim():e)},expression:"formItem.smtp"}})],1),a("FormItem",{attrs:{label:"端口：",prop:"port"}},[a("div",{staticClass:"text"},[a("Input",{staticClass:"port",staticStyle:{width:"270px"},model:{value:t.formItem.port,callback:function(e){t.$set(t.formItem,"port","string"===typeof e?e.trim():e)},expression:"formItem.port"}}),a("Checkbox",{staticClass:"ssl",model:{value:t.formItem.isSSL,callback:function(e){t.$set(t.formItem,"isSSL",e)},expression:"formItem.isSSL"}},[t._v("SSL")])],1)]),a("FormItem",{attrs:{label:"邮箱账号：",prop:"account"}},[a("Input",{model:{value:t.formItem.account,callback:function(e){t.$set(t.formItem,"account","string"===typeof e?e.trim():e)},expression:"formItem.account"}})],1),a("FormItem",{attrs:{label:"邮箱密码：",prop:"pwd"}},[a("Input",{attrs:{type:"password"},model:{value:t.formItem.pwd,callback:function(e){t.$set(t.formItem,"pwd","string"===typeof e?e.trim():e)},expression:"formItem.pwd"}})],1)],1)],1):a("div",{staticClass:"formed-form"},[a("div",{staticClass:"formed-form-item"},[a("span",[t._v("smtp服务器：")]),a("span",[t._v(t._s(t.showItem.smtp))])]),a("div",{staticClass:"formed-form-item"},[a("span",[t._v("端口：")]),a("span",[a("span",[t._v(t._s(t.showItem.port))]),a("Checkbox",{staticClass:"ssl",attrs:{disabled:""},model:{value:t.showItem.isSSL,callback:function(e){t.$set(t.showItem,"isSSL",e)},expression:"showItem.isSSL"}},[t._v("SSL")])],1)]),a("div",{staticClass:"formed-form-item"},[a("span",[t._v("邮箱账号：")]),a("span",[t._v(t._s(t.showItem.account))])]),t._m(0)]),t.isEdit?a("div",{staticClass:"formed-footer"},[a("myButton",{attrs:{btnType:"info"},on:{click:function(e){t.handleSubmit("formItem")}}},[t._v("保存")]),a("myButton",{on:{click:function(e){t.cancel("formItem")}}},[t._v("取消")])],1):t._e()])},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"formed-form-item"},[a("span",[t._v("邮箱密码：")]),a("span",[t._v("**************")])])}],n={data:function(){return{isEdit:!1,showItem:{smtp:"",port:"",account:"",pwd:"****************",isSSL:!1},formItem:{smtp:"",port:"",account:"",pwd:"****************",isSSL:!1},ruleValidate:{smtp:[{required:!0,message:"smtp服务器不能为空",trigger:"blur"}],port:[{required:!0,message:"端口不能为空",trigger:"blur",transform:function(t){return String(t)}}],account:[{required:!0,message:"邮箱账号不能为空",trigger:"blur"}],pwd:[{required:!0,message:"邮箱密码不能为空",trigger:"blur"}]}}},mounted:function(){this.getBasedata()},methods:{editStatus:function(){this.getBasedata(),this.isEdit=!0,this.$emit("statusChange",{isEdit:this.isEdit,name:"base"})},cancel:function(t){this.isEdit=!1,this.$emit("statusChange",{isEdit:this.isEdit,name:"base"}),this.$refs[t].resetFields()},getBasedata:function(){var t=this;this.axios({method:"post",url:"/cipher/mail/basicConfigEcho",data:{}}).then(function(e){0===e.data.return_code?(t.showItem=JSON.parse(JSON.stringify(e.data.return_result)),t.showItem.isSSL=1===t.showItem.isSSL,t.formItem=e.data.return_result,t.formItem.isSSL=1===t.formItem.isSSL):t.$myMessage.error(e.data.return_msg)}).catch(function(e){t.$Notice.error({title:e})})},handleSubmit:function(t){var e=this;this.$refs[t].validate(function(a){if(a){var i={smtp:e.formItem.smtp,account:e.formItem.account,isSSL:e.formItem.isSSL?1:0,port:e.formItem.port,pwd:e.formItem.pwd};e.axios({method:"post",url:"/cipher/mail/basicConfig",data:i}).then(function(a){0===a.data.return_code?(e.$myMessage.success(a.data.return_msg),e.cancel(t),e.getBasedata()):e.$myMessage.error(a.data.return_msg)}).catch(function(t){e.$myMessage.error(t)})}else e.$myMessage.error("表单验证失败，请重试！")})}}},l=n,c=(a("5b78"),a("2877")),u=Object(c["a"])(l,o,r,!1,null,"50e2a8ab",null),d=u.exports,m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mail-random-code formed-wrap"},[t.isEdit?a("div",{staticClass:"formed-form mail-random-code-form"},[a("Form",{ref:"formItem",attrs:{model:t.formItem,rules:t.ruleValidate,"label-width":130}},[a("FormItem",{attrs:{label:"邮件主题：",prop:"title"}},[a("Input",{model:{value:t.formItem.title,callback:function(e){t.$set(t.formItem,"title","string"===typeof e?e.trim():e)},expression:"formItem.title"}})],1),a("FormItem",{attrs:{label:"邮件文案：",prop:"writer"}},[a("Input",{model:{value:t.formItem.writer,callback:function(e){t.$set(t.formItem,"writer","string"===typeof e?e.trim():e)},expression:"formItem.writer"}})],1),a("FormItem",{attrs:{label:"随机码发送倒计时：",prop:"intervalTime"}},[a("div",{staticClass:"text"},[a("InputNumber",{attrs:{min:0,step:1,precision:0},model:{value:t.formItem.intervalTime,callback:function(e){t.$set(t.formItem,"intervalTime","string"===typeof e?e.trim():e)},expression:"formItem.intervalTime"}}),t._v(" 分钟\n        ")],1)]),a("FormItem",{attrs:{label:"安全选项："}},[a("div",{staticClass:"text"},[a("InputNumber",{staticClass:"effectiveTime",attrs:{min:0,step:1,precision:0},model:{value:t.formItem.effectiveTime,callback:function(e){t.$set(t.formItem,"effectiveTime","string"===typeof e?e.trim():e)},expression:"formItem.effectiveTime"}}),t._v(" 分钟内连续验证失败\n          "),a("InputNumber",{staticClass:"sendTime",attrs:{min:1,step:1,precision:0},model:{value:t.formItem.sendTime,callback:function(e){t.$set(t.formItem,"sendTime","string"===typeof e?e.trim():e)},expression:"formItem.sendTime"}}),t._v(" 次后，\n          "),a("br"),t._v("随机码发送间隔为\n          "),a("InputNumber",{staticClass:"extendTime",attrs:{min:0,step:1,precision:0},model:{value:t.formItem.extendTime,callback:function(e){t.$set(t.formItem,"extendTime","string"===typeof e?e.trim():e)},expression:"formItem.extendTime"}}),t._v(" 分钟\n        ")],1)]),a("FormItem",{attrs:{label:"邮箱地址："}},[a("div",{attrs:{id:"emailaddress"}},[a("Input",{staticStyle:{width:"270px"},model:{value:t.emailAddress,callback:function(e){t.emailAddress="string"===typeof e?e.trim():e},expression:"emailAddress"}}),a("myButton",{staticStyle:{"margin-left":"16px","vertical-align":"top"},on:{click:t.testemailaddress}},[t._v("测试")])],1)])],1)],1):a("div",{staticClass:"formed-form"},[a("div",{staticClass:"formed-form-item"},[a("span",[t._v("邮件主题：")]),a("span",[t._v(t._s(t.showItem.title))])]),a("div",{staticClass:"formed-form-item"},[a("span",[t._v("邮件文案：")]),a("span",[t._v(t._s(t.showItem.writer))])]),a("div",{staticClass:"formed-form-item"},[a("span",[t._v("随机码发送倒计时：")]),a("span",[a("i",[t._v(t._s(t.showItem.intervalTime))]),t._v(" 分钟")])]),a("div",{staticClass:"formed-form-item"},[a("span",[t._v("安全选项：")]),a("span",[a("i",[t._v(t._s(t.showItem.effectiveTime))]),t._v("\n        分钟内连续验证失败\n        "),a("i",[t._v(t._s(t.showItem.sendTime))]),t._v("\n        次后，随机码发送间隔为\n        "),a("i",[t._v(t._s(t.showItem.extendTime))]),t._v("\n        分钟\n      ")])])]),t.isEdit?a("div",{staticClass:"formed-footer"},[a("myButton",{attrs:{btnType:"info"},on:{click:function(e){t.handleSubmit("formItem")}}},[t._v("保存")]),a("myButton",{on:{click:function(e){t.cancel("formItem")}}},[t._v("取消")])],1):t._e()])},p=[],h=(a("cadf"),a("551c"),a("097d"),{data:function(){return{isEdit:!1,emailAddress:"",showItem:{title:"",writer:"",effectiveTime:0,intervalTime:0,sendTime:0,extendTime:0},formItem:{title:"",writer:"",effectiveTime:0,intervalTime:0,sendTime:0,extendTime:0,emailAddr:""},ruleValidate:{title:[{required:!0,message:"邮件主题不能为空",trigger:"blur"}],writer:[{required:!0,message:"邮件文案不能为空",trigger:"blur"}]}}},mounted:function(){this.getBasedata()},methods:{editStatus:function(){this.getBasedata(),this.isEdit=!0,this.$emit("statusChange",{isEdit:this.isEdit,name:"randomCode"})},cancel:function(t){this.isEdit=!1,this.$emit("statusChange",{isEdit:this.isEdit,name:"randomCode"})},getBasedata:function(){var t=this;this.axios({method:"post",url:"/cipher/mail/randomCodeEcho",data:{}}).then(function(e){0===e.data.return_code?(t.showItem=JSON.parse(JSON.stringify(e.data.return_result)),t.formItem=e.data.return_result):t.$myMessage.error(e.data.return_msg)}).catch(function(e){t.$Notice.error({title:e})})},testemailaddress:function(){var t=this,e={title:this.formItem.title,writer:this.formItem.writer,emailAddr:this.emailAddress};this.axios({method:"post",url:"/cipher/mail/sendMsg",data:e}).then(function(e){0===e.data.return_code?t.$Modal.success({title:"提示",content:"邮件发送成功"}):t.$Modal.error({title:"操作失败",content:e.data.return_msg})}).catch(function(e){t.$myMessage.error(e)})},handleSubmit:function(t){var e=this;this.$refs[t].validate(function(a){if(a){var i={title:e.formItem.title,writer:e.formItem.writer,effectiveTime:e.formItem.effectiveTime,intervalTime:e.formItem.intervalTime,sendTime:e.formItem.sendTime,extendTime:e.formItem.extendTime};e.axios({method:"post",url:"/cipher/mail/randomCode",data:i}).then(function(a){0===a.data.return_code?(e.$myMessage.success(a.data.return_msg),e.getBasedata(),e.cancel(t)):e.$myMessage.error(a.data.return_msg)}).catch(function(t){e.$myMessage.error(t)})}else e.$myMessage.error("表单验证失败，请重试！")})}}}),f=h,g=(a("aced"),Object(c["a"])(f,m,p,!1,null,"2c76b497",null)),v=g.exports,b=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mail-setup formed-wrap"},[t.isEdit?a("div",{staticClass:"formed-form mail-setup-form"},[a("Form",{ref:"formItem",attrs:{model:t.formItem,rules:t.ruleValidate,"label-width":130}},[a("FormItem",{attrs:{label:"服务状态：",prop:"serviceState"}},[a("RadioGroup",{model:{value:t.formItem.serviceState,callback:function(e){t.$set(t.formItem,"serviceState",e)},expression:"formItem.serviceState"}},t._l(t.switchList,function(e){return a("Radio",{key:e.value,attrs:{label:e.value}},[a("span",[t._v(t._s(e.label))])])}),1)],1),a("FormItem",{attrs:{label:"邮件主题：",prop:"title"}},[a("Input",{model:{value:t.formItem.title,callback:function(e){t.$set(t.formItem,"title","string"===typeof e?e.trim():e)},expression:"formItem.title"}})],1),a("FormItem",{attrs:{label:"邮件文案：",prop:"writer"}},[a("Input",{attrs:{type:"textarea",rows:8},model:{value:t.formItem.writer,callback:function(e){t.$set(t.formItem,"writer","string"===typeof e?e.trim():e)},expression:"formItem.writer"}})],1),a("FormItem",{attrs:{label:"邮箱地址："}},[a("div",{attrs:{id:"emailaddress"}},[a("Input",{staticStyle:{width:"255px"},model:{value:t.emailAddress,callback:function(e){t.emailAddress="string"===typeof e?e.trim():e},expression:"emailAddress"}}),a("myButton",{staticStyle:{"margin-left":"16px","vertical-align":"top"},on:{click:t.testEmail}},[t._v("测试")])],1)])],1)],1):a("div",{staticClass:"formed-form"},[a("div",{staticClass:"formed-form-item"},[a("span",[t._v("邮件主题：")]),a("span",[t._v(t._s(t.showItem.title))])]),a("div",{staticClass:"formed-form-item"},[a("span",[t._v("邮件文案：")]),a("span",{staticClass:"mail-setup-writer",domProps:{innerHTML:t._s(t.getWritter)}})])]),t.isEdit?a("div",{staticClass:"formed-footer"},[a("myButton",{attrs:{btnType:"info"},on:{click:function(e){t.handleSubmit("formItem")}}},[t._v("保存")]),a("myButton",{on:{click:function(e){t.cancel("formItem")}}},[t._v("取消")])],1):t._e()])},y=[],I=(a("a481"),{data:function(){return{isEdit:!1,emailAddress:"",switchList:[{value:0,label:"开启"},{value:1,label:"关闭"}],showItem:{serviceState:0,title:"",writer:""},formItem:{serviceState:0,title:"",writer:""},ruleValidate:{title:[{required:!0,message:"邮件主题不能为空",trigger:"blur"}],writer:[{required:!0,message:"邮件文案不能为空",trigger:"blur"}]}}},computed:{getWritter:function(){return this.showItem.writer.replace(/(\r\n|\n|\r)/gm,"<br />")}},mounted:function(){this.getBasedata()},methods:{editStatus:function(){this.getBasedata(),this.isEdit=!0,this.$emit("statusChange",{isEdit:this.isEdit,name:"setUpAccount"})},cancel:function(t){this.isEdit=!1,this.$emit("statusChange",{isEdit:this.isEdit,name:"setUpAccount"}),this.$refs[t].resetFields()},getBasedata:function(){var t=this;this.axios({method:"post",url:"/cipher/mail/createAccountEcho",data:{}}).then(function(e){0===e.data.return_code?(t.showItem=JSON.parse(JSON.stringify(e.data.return_result)),t.formItem=e.data.return_result):t.$myMessage.error(e.data.return_msg)}).catch(function(e){t.$Notice.error({title:e})})},testEmail:function(){var t=this,e={title:this.formItem.title,writer:this.formItem.writer,emailAddr:this.emailAddress};this.axios({method:"post",url:"/cipher/mail/sendMsg",data:e}).then(function(e){0===e.data.return_code?t.$myModal.success({title:"提示",content:"邮件发送成功"}):t.$myModal.error({title:"操作失败",content:e.data.return_msg})}).catch(function(e){t.$myMessage.error(e)})},handleSubmit:function(t){var e=this;this.$refs[t].validate(function(a){if(a){var i={title:e.formItem.title,writer:e.formItem.writer,serviceState:e.formItem.serviceState};e.axios({method:"post",url:"/cipher/mail/createAccount",data:i}).then(function(a){0===a.data.return_code?(e.$myMessage.success(a.data.return_msg),e.getBasedata(),e.cancel(t)):e.$myMessage.error(a.data.return_msg)}).catch(function(t){e.$myMessage.error(t)})}else e.$myMessage.error("表单验证失败，请重试！")})}}}),w=I,A=(a("6e30"),Object(c["a"])(w,b,y,!1,null,"250547e8",null)),C=A.exports,_=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mail-sent-down-key formed-wrap"},[t.isEdit?a("div",{staticClass:"formed-form mail-sent-down-key-form"},[a("Form",{ref:"formItem",attrs:{model:t.formItem,rules:t.ruleValidate,"label-width":130}},[a("FormItem",{attrs:{label:"邮件主题：",prop:"title"}},[a("Input",{model:{value:t.formItem.title,callback:function(e){t.$set(t.formItem,"title","string"===typeof e?e.trim():e)},expression:"formItem.title"}})],1),a("FormItem",{attrs:{label:"邮件文案：",prop:"writer"}},[a("Input",{attrs:{type:"textarea",rows:8},model:{value:t.formItem.writer,callback:function(e){t.$set(t.formItem,"writer","string"===typeof e?e.trim():e)},expression:"formItem.writer"}})],1),a("FormItem",{attrs:{label:"邮箱地址："}},[a("div",{attrs:{id:"emailaddress"}},[a("Input",{staticStyle:{width:"255px"},model:{value:t.emailAddress,callback:function(e){t.emailAddress="string"===typeof e?e.trim():e},expression:"emailAddress"}}),a("myButton",{staticStyle:{"margin-left":"16px","vertical-align":"top"},on:{click:t.testEmail}},[t._v("测试")])],1)])],1)],1):a("div",{staticClass:"formed-form"},[a("div",{staticClass:"formed-form-item"},[a("span",[t._v("邮件主题：")]),a("span",[t._v(t._s(t.showItem.title))])]),a("div",{staticClass:"formed-form-item"},[a("span",[t._v("邮件文案：")]),a("span",{staticClass:"mail-sent-down-key-writer",domProps:{innerHTML:t._s(t.getWritter)}})])]),t.isEdit?a("div",{staticClass:"formed-footer"},[a("myButton",{attrs:{btnType:"info"},on:{click:function(e){t.handleSubmit("formItem")}}},[t._v("保存")]),a("myButton",{on:{click:function(e){t.cancel("formItem")}}},[t._v("取消")])],1):t._e()])},x=[],S={data:function(){return{isEdit:!1,emailAddress:"",switchList:[{value:0,label:"开启"},{value:1,label:"关闭"}],showItem:{title:"",writer:""},formItem:{title:"",writer:""},ruleValidate:{title:[{required:!0,message:"邮件主题不能为空",trigger:"blur"}],writer:[{required:!0,message:"邮件文案不能为空",trigger:"blur"}]}}},computed:{getWritter:function(){return this.showItem.writer.replace(/(\r\n|\n|\r)/gm,"<br />")}},mounted:function(){this.getBasedata()},methods:{editStatus:function(){this.getBasedata(),this.isEdit=!0,this.$emit("statusChange",{isEdit:this.isEdit,name:"sentDownkey"})},cancel:function(t){this.isEdit=!1,this.$emit("statusChange",{isEdit:this.isEdit,name:"sentDownkey"}),this.$refs[t].resetFields()},getBasedata:function(){var t=this;this.axios({method:"post",url:"/cipher/mail/seedkeyEcho",data:{}}).then(function(e){0===e.data.return_code?(t.showItem=JSON.parse(JSON.stringify(e.data.return_result)),t.formItem=e.data.return_result):t.$myMessage.error(e.data.return_msg)}).catch(function(e){t.$Notice.error({title:e})})},testEmail:function(){var t=this,e={title:this.formItem.title,writer:this.formItem.writer,emailAddr:this.emailAddress};this.axios({method:"post",url:"/cipher/mail/sendMsg",data:e}).then(function(e){0===e.data.return_code?t.$myModal.success({title:"提示",content:"邮件发送成功"}):t.$myModal.error({title:"操作失败",content:e.data.return_msg})}).catch(function(e){t.$myMessage.error(e)})},handleSubmit:function(t){var e=this;this.$refs[t].validate(function(a){if(a){var i={title:e.formItem.title,writer:e.formItem.writer,serviceState:e.formItem.serviceState};e.axios({method:"post",url:"/cipher/mail/seedkey",data:i}).then(function(a){0===a.data.return_code?(e.$myMessage.success(a.data.return_msg),e.getBasedata(),e.cancel(t)):e.$myMessage.error(a.data.return_msg)}).catch(function(t){e.$myMessage.error(t)})}else e.$myMessage.error("表单验证失败，请重试！")})}}},D=S,k=(a("4450"),Object(c["a"])(D,_,x,!1,null,"59acbaab",null)),T=k.exports,L={components:{MailBase:d,MailRandomCode:v,MailSetUp:C,MailSentDownKey:T},data:function(){return{mailAuth:"base",componentStatus:{isBaseEdit:!1,isRandomCodeEdit:!1,isSetUpAccountEdit:!1,isSentDownKeyEdit:!1}}},computed:{isShowEdit:function(){var t;return"base"===this.mailAuth&&(t=!this.componentStatus.isBaseEdit),"randomCode"===this.mailAuth&&(t=!this.componentStatus.isRandomCodeEdit),"setUpAccount"===this.mailAuth&&(t=!this.componentStatus.isSetUpAccountEdit),"sentDownKey"===this.mailAuth&&(t=!this.componentStatus.isSetDownKeyEdit),t}},methods:{changeStatus:function(){this.$refs[this.mailAuth].editStatus()},getChildStatus:function(t){"base"===t.name?this.componentStatus.isBaseEdit=t.isEdit:"randomCode"===t.name?this.componentStatus.isRandomCodeEdit=t.isEdit:"setUpAccount"===t.name?this.componentStatus.isSetUpAccountEdit=t.isEdit:"sentDownKey"===t.name&&(this.componentStatus.isSentDownKeyEdit=t.isEdit)}}},M=L,N=(a("b1f9"),Object(c["a"])(M,i,s,!1,null,"7a7850c7",null));e["default"]=N.exports},2383:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("transition",[a("router-view")],1)],1)},s=[],o={},r=o,n=a("2877"),l=Object(n["a"])(r,i,s,!1,null,"bf77b3b2",null);e["default"]=l.exports},"23e8":function(t,e,a){"use strict";var i=a("eed9"),s=a.n(i);s.a},2406:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("transition",[a("router-view")],1)],1)},s=[],o={},r=o,n=a("2877"),l=Object(n["a"])(r,i,s,!1,null,"7e9516da",null);e["default"]=l.exports},2492:function(t,e,a){},"26f5":function(t,e,a){"use strict";var i=a("3177"),s=a.n(i);s.a},2925:function(t,e,a){},"2cdd":function(t,e,a){},"2fe3":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tabled-wrap"},[a("div",{staticClass:"tabled-header"},[a("div",{staticClass:"tabled-header-right"},[a("myButton",{on:{click:t.doClickDemo}},[t._v("扫描目录")]),a("myButton",{on:{click:t.doSure}},[t._v("同步已选")]),a("myButton",{on:{click:function(e){t.doall(!0)}}},[t._v("同步全部")]),a("mySelect",{attrs:{dataList:t.statusList,showString:"请选择"},on:{"on-change":t.changeStatus},model:{value:t.checkNumber,callback:function(e){t.checkNumber=e},expression:"checkNumber"}})],1)]),a("div",{staticClass:"tabled-table"},[a("Table",{ref:"selection",attrs:{border:"",columns:t.columns7,data:t.data6},on:{"on-selection-change":function(e){t.handleSelectRow()}}})],1),a("Page",{staticClass:"tabled-page",attrs:{total:t.total,current:t.curentPage,"show-elevator":"","show-sizer":"","show-total":"","page-size":10,"page-size-opts":[10,50,100,200]},on:{"on-change":t.changePage,"on-page-size-change":t.pageSizeChange}}),a("Modal",{attrs:{width:"400"},on:{"on-ok":t.ok},model:{value:t.modal1,callback:function(e){t.modal1=e},expression:"modal1"}},[a("p",{staticClass:"header",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("扫描目录")]),a("span",{staticClass:"sub-title"},[t._v("（请选择你要的更新）")])]),a("div",{staticClass:"radiogroup"},[a("RadioGroup",{model:{value:t.valup,callback:function(e){t.valup=e},expression:"valup"}},[a("Radio",{attrs:{label:"lastTime"}},[t._v("从上一次时间点扫描")]),a("Radio",{attrs:{label:"anew"}},[t._v("重新扫描此AD目录")])],1)],1)])],1)},s=[],o=(a("ac6a"),a("96cf"),a("1da1")),r={data:function(){return{ids:[],muldata:[],valup:"lastTime",modal1:!1,modal2:!1,curentPage:1,querytype:0,checkNumber:"",statusList:[{value:null,label:"全部"},{value:"1",label:"新增"},{value:"2",label:"更新"}],size:10,adId:0,total:0,columns7:[{type:"selection",width:60,align:"center"},{title:"用户名",key:"accountNumber",width:400},{title:"姓名",key:"username"},{title:"邮箱",key:"mail"},{title:"电话",key:"phoneNumber"},{title:"同步选项",key:"checkNumber"}],data6:[]}},created:function(){this.adId=this.$route.query.adId},mounted:function(){this.getData()},methods:{getData:function(){var t={rows:this.size,page:1,adId:this.adId,sidx:"",sord:"asc"};this.finddata(t)},syncSelected:function(){var t=this;this.axios({method:"post",url:"/cipher/syncBuffer2User",data:{bufferIdList:this.ids.join(",")}}).then(function(e){1===e.data.return_code?t.$Modal.success({title:"同步成功",content:"添加"+e.data.add+"条更新"+e.data.update+"条",onOk:function(){t.getData()}}):t.$Modal.error({title:"失败",content:e.data.return_msg})}).catch(function(t){console.log(t)})},syncAll:function(){var t=this;this.axios({method:"post",url:"/cipher/syncAll",data:{bufferIdList:this.ids.join(",")}}).then(function(e){1===e.data.return_code?t.$Modal.success({title:"同步成功",content:"添加"+e.data.add+"条更新"+e.data.update+"条",onOk:function(){t.getData()}}):t.$Modal.error({title:"失败",content:e.data.return_msg})}).catch(function(t){console.log(t)})},doall:function(t){var e=this;this.$myModal.confirm({title:"同步全部",content:"将当前扫描结果下的全部用户同步到当前组织结构，没有的将新建，存在的将更新。"}).then(function(){var t=Object(o["a"])(regeneratorRuntime.mark(function t(a){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:e.syncAll();case 1:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()).catch(function(){})},doSure:function(){var t=this;0!==this.muldata.length?(this.muldata.forEach(function(e){t.ids.push(e.id)}),this.$myModal.confirm({title:"同步已选",content:"将选中的用户同步到当前组织结构下，没有的将新建，存在的将更新。"}).then(function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(a){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t.syncSelected();case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()).catch(function(){})):this.$myModal.error({title:"请先选择一个要同步的选项"})},changeStatus:function(){var t={rows:this.size,page:1,adId:this.adId,sidx:"",sord:"asc",checkNumber:this.checkNumber};this.finddata(t)},handleSelectRow:function(t,e){this.muldata=this.$refs.selection.getSelection()},finddata:function(t){var e=this;this.axios({method:"post",url:"/cipher/aduserbuffer/list?json",data:t}).then(function(t){t.data.rows.forEach(function(t){null===t.checkNumber?t.checkNumber="新增":t.checkNumber="更新"}),e.data6=t.data.rows,e.total=t.data.total}).catch(function(t){console.log(t)})},docancel:function(){this.$router.go(-1)},changePage:function(t){var e=this,a={rows:e.size,page:t,adId:e.adId,sidx:"",sord:"asc",checkNumber:e.checkNumber};e.curentPage=t,e.finddata(a)},pageSizeChange:function(t){var e=this,a={rows:t,page:1,adId:e.adId,sidx:"",sord:"asc",checkNumber:e.checkNumber};e.finddata(a),e.size=t},doClickDemo:function(){this.modal1=!0},ok:function(){"lastTime"===this.valup&&this.doClick(),"anew"===this.valup&&this.doAllClick()},doClick:function(){var t=this,e={adId:this.adId};this.axios({method:"post",url:"/cipher/depart_sync",data:e}).then(function(e){t.$myMessage.success("更新成功");var a={rows:t.size,page:1,sidx:"",sord:"asc",adId:t.adId};t.finddata(a)}).catch(function(e){console.log(e),t.$Modal.error({title:"提示",content:"扫描错误"})})},doAllClick:function(){var t=this,e={adId:this.adId};this.axios({method:"post",url:"/cipher/all_sync",data:e}).then(function(e){t.$myMessage.success("更新成功");var a={rows:t.size,page:1,sidx:"",sord:"asc",adId:t.adId};t.finddata(a)}).catch(function(e){console.log(e),t.$Modal.error({title:"提示",content:"扫描错误"})})}}},n=r,l=(a("b1cb"),a("2877")),c=Object(l["a"])(n,i,s,!1,null,"475b92d3",null);e["default"]=c.exports},3177:function(t,e,a){},"317a":function(t,e,a){"use strict";var i=a("d148"),s=a.n(i);s.a},3322:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"appManage-list tabled-wrap"},[a("div",{staticClass:"tabled-header"},[a("div",{staticClass:"tabled-header-search"},[a("myInput",{attrs:{placeholder:"请输入应用名称...",radius:"half",search:!0},on:{handleClick:t.searchApplicatioName},model:{value:t.searchAppName,callback:function(e){t.searchAppName=e},expression:"searchAppName"}})],1),a("div",{staticClass:"tabled-header-btn"},[a("myButton",{attrs:{btnType:"info"},on:{click:t.addApp}},[t._v("添加应用")])],1)]),a("div",{staticClass:"tabled-table appManage-list-table"},[a("Table",{attrs:{data:t.appList,columns:t.appListTitle},scopedSlots:t._u([{key:"applicationUrl",fn:function(e){var i=e.row;return[a("img",{staticStyle:{border:"1px solid #eee","border-radius":"50%","vertical-align":"middle"},attrs:{src:i.applicationIconUrl?i.applicationIconUrl:t.imgTitle,width:"60"}})]}},{key:"applicationName",fn:function(e){var i=e.row;return[a("a",{on:{click:function(e){t.skipDetail(i.id)}}},[t._v(t._s(i.applicationName))])]}},{key:"userCount",fn:function(e){var a=e.row;return[t._v(t._s(a.userCount)+"人")]}},{key:"opration",fn:function(e){var i=e.row;return[a("a",{staticClass:"auth",on:{click:function(e){t.authrization(i.id,i.applicationName)}}},[t._v("授权")]),a("a",{on:{click:function(e){t.onDeleteApp(i.id)}}},[t._v("删除应用")])]}}])})],1),a("div",{staticClass:"tabled-page"},[a("Page",{attrs:{total:t.total,current:t.current,"show-elevator":"","show-sizer":"","show-total":"","page-size":20},on:{"on-change":t.changePage,"on-page-size-change":t.changePageSize}})],1),a("Modal",{staticClass:"tree-transfer",attrs:{width:"668"},on:{"on-cancel":t.closeAuthModal},model:{value:t.showAuthMadal,callback:function(e){t.showAuthMadal=e},expression:"showAuthMadal"}},[a("p",{staticClass:"header",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("授权")]),a("span",{staticClass:"sub-title"},[t._v("("+t._s(t.applicatinName)+")")])]),a("myComplexTabs",{staticClass:"tabs",on:{"on-click":t.changetabs},model:{value:t.authType,callback:function(e){t.authType=e},expression:"authType"}},[a("myPane",{attrs:{label:"用户",name:"authUserTab"}},[a("TreeTransfer",{attrs:{leftTreeData:t.authUserData,leftDataType:t.dataType,placeholder:"请输入用户或部门"},on:{rightData:t.getRightData}},[a("span",{attrs:{slot:"leftText"},slot:"leftText"},[t._v("授权用户")]),a("span",{attrs:{slot:"rightText"},slot:"rightText"},[t._v("已授权用户")])])],1),a("myPane",{attrs:{label:"部门",name:"authGroupTab"}},[a("TreeTransfer",{attrs:{leftTreeData:t.authGroupData,leftDataType:t.dataType,placeholder:"请输入部门"},on:{rightData:t.getRightData}},[a("span",{attrs:{slot:"leftText"},slot:"leftText"},[t._v("授权部门")]),a("span",{attrs:{slot:"rightText"},slot:"rightText"},[t._v("已授权部门")])])],1),a("myPane",{attrs:{label:"安全组",name:"authTeamTab"}},[a("TreeTransfer",{attrs:{leftTreeData:t.authTeamData,leftDataType:t.dataType,placeholder:"请输入安全组"},on:{rightData:t.getRightData}},[a("span",{attrs:{slot:"leftText"},slot:"leftText"},[t._v("授权安全组")]),a("span",{attrs:{slot:"rightText"},slot:"rightText"},[t._v("已授权安全组")])])],1)],1),a("div",{staticClass:"textAlain",attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"info"},on:{click:t.saveAuth}},[t._v("保存")]),a("Button",{on:{click:t.resetAuth}},[t._v("重置")])],1)],1)],1)},s=[],o=(a("96cf"),a("1da1")),r=a("be94"),n=a("2f62"),l=a("c791"),c={title:{target:"title",original:"text"},children:{target:"children",original:"nodes"}},u={name:"ApplicationList",components:{TreeTransfer:l["a"]},data:function(){return{searchAppName:"",authType:"authUserTab",showAuthMadal:!1,dataType:0,authUserData:[],authGroupData:[],authTeamData:[],applicationType:0,applicationId:0,applicatinName:"",current:1,pageSize:20,total:1,imgTitle:"/static/img/img-01.png",appList:[],appListTitle:[{title:"序号",key:"applicationIndex",align:"center"},{title:"应用图标",slot:"applicationUrl",align:"center"},{title:"应用名称",slot:"applicationName",align:"center"},{title:"授权用户",slot:"userCount",align:"center"},{title:"操作",slot:"opration",align:"center"}]}},mounted:function(){var t={rows:this.pageSize,page:1};this.getList(t)},computed:Object(r["a"])({},n["c"]["appId"]),methods:Object(r["a"])({searchApplicatioName:function(){var t={rows:this.pageSize,page:1,sidx:"",sord:"asc",applicationName:this.searchAppName};this.getList(t)},changePageSize:function(t){var e={rows:t,page:1,sidx:"",sord:"asc",applicationName:this.searchAppName};this.getList(e),this.pageSize=t},changePage:function(t){var e={rows:this.pageSize,page:t,sidx:"",sord:"asc",applicationName:this.searchAppName};this.current=t,this.getList(e)},getList:function(t){var e=this;this.axios({method:"post",url:"/cipher/app/list?json",data:t}).then(function(t){e.appList=t.data.rows,e.total=t.data.total}).catch(function(t){console.log(t)})},addApp:function(){this.$router.push({name:"appAddList"})},resetAuth:function(){switch(this.dataType=0,this.authType){case"authUserTab":this.changeAuthUser();break;case"authGroupTab":this.changeAuthGroup();break;case"authTeamTab":this.changeAuthTeam();break;default:break}},closeAuthModal:function(){this.showAuthMadal=!1,this.dataType=0;var t={rows:this.pageSize,page:1};this.getList(t)},saveAuth:function(){switch(this.authType){case"authUserTab":this.authUser();break;case"authGroupTab":this.authGroup();break;case"authTeamTab":this.authTeam();break;default:break}},authUser:function(){for(var t=this,e=[],a=[],i=0;i<this.AuthData.length;i++)e.push(this.AuthData[i].accountNumber),a.push(this.AuthData[i].uuid);var s=e.join(",");a=a.join(",");var o={applicationId:this.applicationId,accountNumber:s,uuid:a};this.axios({method:"post",url:"/cipher/appAuth/addUser",data:o}).then(function(e){0===e.data.code?t.$myModal.success({title:"授权成功",content:"授权用户成功"}).then(function(){t.changeAuthUser()}):t.$myModal.error({title:"授权失败",content:"请稍后重试"})}).catch(function(){})},authGroup:function(){for(var t=this,e=[],a=0;a<this.AuthData.length;a++)e.push(this.AuthData[a].groupId);var i=e.join(","),s={applicationId:this.applicationId,groupId:i};this.axios({method:"post",url:"/cipher/appAuth/addGroup",data:s}).then(function(e){0===e.data.code?t.$myModal.success({title:"授权成功",content:"授权部门成功"}).then(function(){t.changeAuthGroup()}):t.$myModal.error({title:"授权失败",content:"请稍后重试"})}).catch(function(){})},authTeam:function(){for(var t=this,e=[],a=0;a<this.AuthData.length;a++)e.push(this.AuthData[a].id);var i=e.join(","),s={applicationId:this.applicationId,teamId:i};this.axios({method:"post",url:"/cipher/appAuth/addTeam",data:s}).then(function(e){0===e.data.code?t.$myModal.success({title:"授权成功",content:"授权安全组成功"}).then(function(){t.changeAuthTeam()}):t.$myModal.error({title:"授权失败",content:"请稍后重试"})}).catch(function(){})},getRightData:function(t){this.AuthData=t},changetabs:function(t){"authUserTab"===t?this.changeAuthUser():"authGroupTab"===t?this.changeAuthGroup():"authTeamTab"===t&&this.changeAuthTeam()},changeAuthUser:function(){var t=this;this.dataType=1;var e={applicationId:this.applicationId};this.axios({method:"post",url:"/cipher/app/authorizationUser",data:e}).then(function(e){var a=t.$common.cloneAssemblyAssignData(e.data.trees,c,!0);t.authUserData=t.$common.initSelect(a)}).catch(function(){})},changeAuthGroup:function(){var t=this;this.dataType=4;var e={applicationId:this.applicationId};this.axios({method:"post",url:"/cipher/app/getAuthGroup",data:e}).then(function(e){var a=t.$common.cloneAssemblyAssignData(e.data.trees,c,!0);t.authGroupData=t.$common.initSelect(a)}).catch(function(){})},changeAuthTeam:function(){var t=this;this.dataType=3;var e={applicationId:this.applicationId};this.axios({method:"post",url:"/cipher/app/getAuthTeam",data:e}).then(function(e){t.authTeamData=e.data.msg.list}).catch(function(t){console.log(t)})},skipDetail:function(t){this.changeAppId(t),this.$router.push({name:"appDetails"})},authrization:function(t,e){this.showAuthMadal=!0,this.applicationId=t,this.applicatinName=e,this.authType="authUserTab",this.dataType=1,this.changeAuthUser()},onDeleteApp:function(t){var e=this;this.applicationId=t,this.$myModal.confirm({title:"确认删除该应用吗"}).then(function(){var t=Object(o["a"])(regeneratorRuntime.mark(function t(a){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:e.deleteApp();case 1:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()).catch(function(){})},deleteApp:function(){var t=this;this.axios({method:"post",url:"/cipher/app/delApplication",data:{id:this.applicationId}}).then(function(e){if(0===e.data.return_code){t.$myMessage.success("删除成功!");var a=Math.ceil((t.total-1)/t.pageSize);t.current=a<t.current?a:t.current;var i={rows:t.pageSize,page:t.current,sidx:"",sord:"asc",applicationName:t.searchAppName};t.getList(i)}else t.$myModal.error("删除失败")}).catch(function(t){console.log(t)})}},Object(n["b"])(["changeAppId"]))},d=u,m=(a("c640"),a("2877")),p=Object(m["a"])(d,i,s,!1,null,"1086995e",null);e["default"]=p.exports},"347f6":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ips tabled-wrap"},[a("div",{staticClass:"tabled-header"},[a("myButton",{attrs:{btnType:"info"},on:{click:t.addStrategy}},[t._v("添加策略")])],1),a("div",{staticClass:"tabled-table"},[a("Table",{attrs:{columns:t.columns7,data:t.data6}})],1),a("Page",{staticClass:"tabled-page",attrs:{total:t.total,current:t.curentPage,"show-elevator":"","show-sizer":"","show-total":""},on:{"on-change":t.changePage,"on-page-size-change":t.pageSizeChange}})],1)},s=[],o=(a("96cf"),a("1da1")),r={data:function(){var t=this;return{queryName:"",total:0,size:10,curentPage:1,columns7:[{title:"策略名称",key:"strategyName",render:function(e,a){return e("a",[e("span",{on:{click:function(){t.toEdit(a.index)}}},t.data6[a.index].strategyName)])}},{title:"优先级",key:"priority"},{title:"认证源",key:"authType",render:function(e,a){var i=0===t.data6[a.index].authType?"本地认证":1===t.data6[a.index].authType?"AD域":"JLT_ERP";return e("div",[e("span",i)])}},{title:"二次认证",key:"secondAuth",render:function(e,a){var i="",s=[];if(0===t.data6[a.index].secondAuth){var o=t.data6[a.index].secondAuthType;0===o.twoAuthDt&&s.push("动态密码"),0===o.twoAuthDd&&s.push("钉钉扫码"),0===o.twoAuthDingPush&&s.push("钉钉PUSH认证"),0===o.twoAuthDb&&t.data6[a.index].switches&&s.push("大白扫码"),0===o.twoAuthWx&&0===t.data6[a.index].switches&&s.push("企业微信扫码"),0===o.twoAuthNum&&s.push("手机随机码"),0===o.twoAuthMail&&t.data6[a.index].switches&&s.push("邮件随机码")}else i="关闭";return s.length&&(i=s.join(",")),e("div",[e("span",i)])}},{title:"生效范围",key:"groupNames"},{title:"操作",key:"edit",width:150,align:"center",render:function(e,a){if(1!==t.data6[a.index].id)return e("a",[e("span",{on:{click:function(){t.delete(a.index)}}},"删除")])}}],data6:[]}},mounted:function(){var t=this,e={rows:t.size,page:1,sord:"asc",sidx:"priority"};t.finddata(e)},methods:{toEdit:function(t){this.$router.push({name:"strategyDetail",query:{id:this.data6[t].id,strategyName:this.data6[t].strategyName}})},addStrategy:function(){this.$router.push({name:"strategyAdd"})},finddata:function(t){var e=this;this.axios({method:"post",url:"/cipher/identityStrategy/list",data:t}).then(function(t){e.data6=t.data.rows,e.total=t.data.total}).catch(function(t){console.log(t)})},pageSizeChange:function(t){var e={rows:t,page:1,sord:"asc",sidx:"priority"};this.finddata(e),this.size=t},changePage:function(t){var e={rows:this.size,page:t,sord:"asc",sidx:"priority"};this.curentPage=t,this.finddata(e)},edit:function(t){this.$router.push({path:this.editurl,query:{id:this.data6[t].id}})},delete:function(t){var e=this;this.$myModal.confirm({title:"确定要删除这条策略信息吗",content:"删除后将无法恢复,确认删除?"}).then(function(){var a=Object(o["a"])(regeneratorRuntime.mark(function a(i){return regeneratorRuntime.wrap(function(a){while(1)switch(a.prev=a.next){case 0:e.dodelete(t);case 1:case"end":return a.stop()}},a,this)}));return function(t){return a.apply(this,arguments)}}()).catch(function(){})},dodelete:function(t){var e=this,a={id:this.data6[t].id};this.axios({method:"post",url:"/cipher/identityStrategy/delete",data:a}).then(function(a){1===a.data.return_code?(e.$myMessage.success(a.data.return_msg),e.data6.splice(t,1)):0===a.data.return_code&&e.$myMessage.error(a.data.return_msg)}).catch(function(t){e.$Notice.warning({title:"网络未知错误！",desc:t})})}}},n=r,l=(a("98f7"),a("2877")),c=Object(l["a"])(n,i,s,!1,null,"3054bdaf",null);e["default"]=c.exports},3794:function(t,e,a){"use strict";var i=a("589d"),s=a.n(i);s.a},"37c8":function(t,e,a){e.f=a("2b4c")},"39cb":function(t,e,a){"use strict";var i=a("8778"),s=a.n(i);s.a},"39f6":function(t,e,a){"use strict";var i=a("68ff"),s=a.n(i);s.a},"3a72":function(t,e,a){var i=a("7726"),s=a("8378"),o=a("2d00"),r=a("37c8"),n=a("86cc").f;t.exports=function(t){var e=s.Symbol||(s.Symbol=o?{}:i.Symbol||{});"_"==t.charAt(0)||t in e||n(e,t,{value:r.f(t)})}},"3b85":function(t,e,a){},"3efe":function(t,e,a){"use strict";var i=a("2925"),s=a.n(i);s.a},"3f44":function(t,e,a){},"3f93":function(t,e,a){},4046:function(t,e,a){"use strict";var i=a("c633"),s=a.n(i);s.a},"41cc":function(t,e,a){},4450:function(t,e,a){"use strict";var i=a("efaa"),s=a.n(i);s.a},"453e":function(t,e,a){"use strict";var i=a("8b64"),s=a.n(i);s.a},4709:function(t,e,a){"use strict";var i=a("8aea"),s=a.n(i);s.a},"470a":function(t,e,a){},"47a1":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("transition",{attrs:{name:"fade",mode:"out-in"}},[a("router-view")],1)},s=[],o={},r=o,n=a("2877"),l=Object(n["a"])(r,i,s,!1,null,"faddaaaa",null);e["default"]=l.exports},"485d":function(t,e,a){"use strict";var i=a("bc0b"),s=a.n(i);s.a},"486b":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAWUAAAFECAYAAAD/dS8oAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAA0TSURBVHhe7d3Nj1RVGsDh+bNdzGYS125cuZP4B7Byw4K0MegGtBOaIcaWGNOMDQoJMYpGyJ0696O7btU5Vefe+npn8jzJm6GrL1WmOefH5VTD/KMBIAxRBghElAECEWWAQEQZIBBRBghElAECEWWAQEQZIBBRBghElAECEWWAQEQZIBBRBghElAECEWWAQEQZIBBRBghElAECEWWAQEQZIBBRBghElAECEWWAQEQZIBBRBghElAECEWWAQEQZIBBRBghElAECEWWAQEQZIBBRBghElAECEWWAQEQZIBBRBghElAECEWWAQEQZIBBRBghElAECEWWAQEQZIBBRBghElAECEWWAQESZk3ry8FHz8dnyPG2eLB5/+fi8+fjhVXfRjavmbv/55vJpe/2dx6/az9xK1yyeJ/3cmmsgGFEmjuvL5k4pyn1g7172Hy90Qe8j3Wsfe3DZvFz+eMs1EIkoE0chyrmwdlbueDPhrrsG4hBlTquP5O2Mo9wGefmOeUV73dl5c3b9qjl7kL+25hqIQpQ5qbVjil7p8XV9aNugp/D2D4/UXAMxiDInleI7eiOuPcIYAlqY1VgX39BbUnMNBCDKnFR3Xrw0/RtwN3fKKdIb35TrzozvPBiOKPqHR2qugRhEmTjS3Wx/F3x7fNEdPZTemGuva8+h+yOKTMBrroEoRJk4slFeSI/nQtofddwEuz+iGAW85hoIRJQJI4V4OPO9iXKK6uJ/178LI3/XO/72uZprIBZRJowUy1GUF3e0a4Htw9yFNXM+PLxROIR8yzUQjShzUrfxTTMO8PoRwzjM8P9IlAECEWWAQEQZIBBRBghElAECEWWAQEQZIBBRBghElAECEWWAQEQZIBBRBghElAECEWWAQEQZIBBRBghElAECEWWAQEQZIBBRBghElAECEWWAQEQZIBBRBghElAECEWWAQEQZIBBRBghElAECEWUmetWcPXjUfHz2tHnSPzJyfdncOUuf7+buZf94wZOHt9fmnvPl4/ONn9/3641cPl269rw5u+4f742fq5+HV/1nYR5RptIQ42HKgbwJYxu19ZgNUtSWI9oF+PZ5Vz9uI/jgsnnZf7zv1xu7au4uBTZ3bfvfI8LsmSgzXRu/9ZitR6oL+Z3Hr/qPt2gjO0R1EcXl4Cajz+/79bbIXCvKHIIoM102yvkgtneYy3e3myyHLxvM5dfY8+ttI8ociSgzXTbKmTvbhSmRHB0RbA3/nl9vi1yA28cW/w3Ok9knUWa6Q0S5vRNd+vmHjvLq62V00e6Cu3pHvqZ/vq3XwRaizHR7j3L3c0dBO2iUM6+3RRfozUcd3TV1d95QIspMtyGY2Uhu/GN99/PWrmnvPDe9xp5fr8LWM+Ts1wWmEWWmK8RnPVpdAMt3pJsCmbkTXnmzbb+vt116vU1313V36bCZKDNd6Y5wJZqr163+8b6N6oaIrUZuLcJ7fb3xkUb6uaPfENrnXj6+WFy//FzOlNkTUaZaG7VFeFZnPV7D58bhHkVydN3yjM9tR6+Zu8Pd2+utnjP3d9Vr1y1Zec7VoxSYQ5QBAhFlgEBEGSAQUQYIRJQBAhFlgEBEGSAQUQYIRJQBAhFlgEBEGSAQUQYIRJQBAhFlgEBEGSAQUQYIRJQBAhFlgEBEGSAQUQYIRJQBAhFlgEBEGSAQUQYIRJQBAhFlgEBEGSAQUQYIRJQBAhFlgEBEGSAQUQYIRJQBAhFlgEBEGSAQUQYIRJS3ePz6j+bT739tPjz/ufnXt/8xxmyZtFfSnkl7h+lEeYN7z99kF50xpm7SHmIaUS5Iv8vnFpkxZtq4Y55GlAvSH79yC8wYM23SXqKeKBc4QzZmP5P2EvVEuSC3uIwx84Z6olyQW1jGmHlDPVEuyC0sY8y8oZ4oF+QWljFm3lBPlAtyC8sYM2+oJ8oFuYVljJk31BPlgtzCMsbMG+qJckFuYRlj5g31RLkgt7CMMfOGeqJckFtYxph5Qz1RLsgtLHPEufqrebv4dfjlVeZzU6Z9nvfNs6vFj1/93TTv/mru5a4zBx3qiXJBbmGZ4869397vIaK/N7/0Ub539aZ7ziHS2evNIYZ6olyQW1jmANPfEU9XG9bbKN88dvV7840oH3WoJ8oFuYVlDjBtlP9uvsl9rjgroZ0b9re/rzyvOdRQT5QLcgvLBJ2NYc/cKZujD/VEuSC3sMzhpjvrrbR6h7sxym+aZ+/28Iah2WmoJ8oFuYVlgk7p+KKN93qUv0kXO7o46lBPlAtyC8sEncydcgrv29+6/+Pb5R+33xbnOOPoQz1RLsgtLHOAaSM5z83d75Yot0cj7Z1xOl9eCrQ52lBPlAtyC8scY1bfmOtCuvFMeO0vhXRHFqt3x28Xj/nLI6cZ6olyQW5hmSNMG9Dlu958lJfPhW/vhEs/p/t49Lxrr2MOOdQT5YLcwjKHni6e4+OFbVG+fSNv9B0cS3fEN4+vPuau+WhDPVEuyC0sc7gZwrl+3puL8tLxxMY73u667o29/m65v6MevflnDj7UE+WC3MIy+5+bu9jR8UPhmpEuxCmuq3fR3Ywj3M0Q6cR3YBxzqCfKBbmFZYyZN9QT5YLcwjLGzBvqiXJBbmEZY+YN9US5ILewjDHzhnqiXJBbWMaYeUM9US7ILSxjzLyhnigX5BaWMWbeUE+UC3ILyxgzb6gnygW5hWWMmTfUE+WC3MIyxswb6olywYfnP2cXlzFm2qS9RD1RLvj0+1+zC8wYM23SXqKeKBc8fv1HdoEZY6ZN2kvUE+UN7j33Tzsas8ukPcQ0orxF+l0+/fHLGbMxdZP2Stoz7pDnEWWAQEQZIBBRBghElAECEWWAQEQZIBBRBghElAECEWWAQEQZIBBRBghElAECEWWAQEQZIBBRBghElAECEWWAQEQZIBBRBghElAECEWWAQEQZIBBRBghElLf49sWb5pPzH5t/fvm0+eCLfxtjtkzaK2nPpL3DdKK8wec/XGcXnTGmbtIeYhpRLki/yw8L6+vnr5s/373vPwNskvZK2jPD/nHHPI0oF6Q/fg1BBqYbwpz2EvVEuWA4Q3aHDPOkvZP2UNpL1BPlgrSY0gDz2UfTiXKBxQS7s4+mE+UCiwl2Zx9NJ8oFFhPszj6aTpQLLCbYnX00nSgXWEywO/toOlEusJhgd/bRdKJcYDHB7uyj6US5wGKC3dlH04lygcUEu7OPphPlAosJdmcfTSfKBRYT7M4+mk6UCyym/zXXzWeLX6+PLlb+mcjLZ80HX/3UvFj88OJR92v6wRffNff9M79HYR9NJ8oFFtNxvLj47uZrPXke3Za1fZ4+viMpyl88ay76Dzmu4deKeqJcYDGdVhfr2pimu+T+7jdFeCnWQ5TvZ+L/2WV/DQczfK2pJ8oFFtNpTYlyOpYYji0uHi3ifJFCPA5w9i6agxu+/tQT5QKL6bSqo7x0Ztxc/9R8tHyXnKTHHF+cjH00nSgXWEyn1UX5u+ajrzbf5d6+eZcmE982yt7YOxX7aDpRLrCYTmuI8v3rN839FOZtYb38qfD57rsyhl/P0azeVbN3w9eaeqJcYDGd1urxRfdx5lvektVji/bNvaX4pnGmfBLD1596olxgMZ1W/ky5v+sdBXb9Tng13MtvBHJc9tF0olxgMZ1WPspJf5wx3BkPd8UbjiLa51r6/OrHHI59NJ0oF1hMp1WO8gz99ypfDAF3lHE09tF0olxgMZ3W1Ch313e/ZuvRvT3iuPkLI8vfSsfB2EfTiXKBxXRatVG++Za4zHHEKNT9dGfLK0cgHMzwdaeeKBdYTKc1//hi+Ba6THTb71nuP+d7l4/CPppOlAssptOaH2UisY+mE+UCiwl2Zx9NJ8oFFhPszj6aTpQLLCbYnX00nSgXWEywO/toOlEusJhgd/bRdKJcYDHB7uyj6US5wGKC3dlH04lywT+/fNoupj/fve8fAaZIeyftobSXqCfKBZ+c/9guqK+fv+4fAaZIeyftobSXqCfKBd++eNMuqCHM7pihTtorQ5DTpL1EPVHe4PMfrm8WljFm+qQ9xDSivEX6XT798Ws4YzbGbJ60V9KecYc8jygDBCLKAIGIMkAgogwQiCgDBCLKAIGIMkAgogwQiCgDBCLKAIGIMkAgogwQiCgDBCLKAIGIMkAgogwQiCgDBCLKAIGIMkAgogwQiCgDBCLKAIGIMkAgogwQiCgDBCLKAIGIMkAgogwQiCgDBCLKAIGIMkAgogwQiCgDBCLKAIGIMkAgogwQiCgDBCLKAIGIMkAgogwQiCgDBCLKAIGIMkAgogwQiCgDBCLKAIGIMkAgogwQiCgDBCLKAIGIMkAgogwQiCgDBCLKAIGIMkAgogwQiCgDBCLKAIGIMkAgogwQiCgDBCLKAIGIMkAgogwQiCgDBCLKAIGIMkAgogwQiCgDBCLKAIGIMkAgogwQiCgDBCLKAIGIMkAgogwQiCgDhNE0/wU3Yn/7gVHd+AAAAABJRU5ErkJggg=="},4902:function(t,e,a){"use strict";var i=a("3b85"),s=a.n(i);s.a},4909:function(t,e,a){},"4bae":function(t,e,a){},"4c01":function(t,e,a){},"4c91":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"WX-syn"},[a("myButton",{staticClass:"WX-syn-header--config",attrs:{btnType:"info"},on:{click:function(e){t.$router.push("/userCatalogWX/WXConfig")}}},[t._v("企业微信配置")]),a("myTabs",{attrs:{tabList:t.tabList,tabIndex:t.tabIndex},on:{changeTab:t.changeTab}},[a("keep-alive",[a(t.currentContent,{tag:"component"})],1)],1)],1)},s=[],o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ding-syn-department tabled-wrap"},[a("div",{staticClass:"ding-syn-department-header tabled-header"},[a("myButton",{on:{click:function(e){t.onConfirm(1)}}},[t._v("扫描组织结构")]),a("myButton",{on:{click:function(e){t.onConfirm(2)}}},[t._v("同步组织结构")])],1),a("div",{staticClass:"tabled-table"},[a("Table",{attrs:{columns:t.title,data:t.list}})],1),a("div",{staticClass:"tabled-page"},[a("Page",{attrs:{total:t.total,"page-size":t.pageSize,current:t.current,"show-sizer":"","show-elevator":"","show-total":""},on:{"on-change":t.changePage,"on-page-size-change":t.changePageSize}})],1),t.confirm.flag?a("Confirm",{attrs:{flag:t.confirm.flag,title:t.confirm.title,content:t.confirm.content,onOk:t.confirm.onOk,onClose:t.confirm.onClose}}):t._e(),t.isLoaading?a("Loading"):t._e()],1)},r=[],n=a("6a6b"),l=a("c154"),c={components:{Confirm:n["a"],Loading:l["default"]},data:function(){return{confirm:{flag:!1,title:"",content:"",onOk:this.onConfirmOk,onClose:this.onConfirmClose},type:1,isLoaading:!1,title:[{title:"部门 / 完整路径",key:"path",align:"center"},{title:"状态",key:"status",align:"center"}],list:[],total:0,pageSize:10,current:1}},mounted:function(){this.getAllList()},methods:{getAllList:function(){var t={page:this.current,rows:this.pageSize};this.getDepartmentList(t)},changePageSize:function(t){var e={rows:t,page:1};this.pageSize=t,this.getDepartmentList(e)},changePage:function(t){var e={rows:this.pageSize,page:t};this.current=t,this.getDepartmentList(e)},getDepartmentList:function(t){var e=this;this.axios({method:"post",url:"/cipher/wxGroup/getGroupList",data:t}).then(function(t){e.total=t.data.total,e.list=t.data.rows}).catch(function(t){e.$Notice.warning({title:"网络未知错误！",desc:t})})},onConfirm:function(t){this.type=t,this.confirm.title=1===t?"确认扫描吗？":"确认同步组织结构吗？",this.confirm.content=1===t?"重新从企业微信中扫描组织结构，扫描后，使用同步功能，才会改变现有的组织结构。":"将当前扫描结果下的全部部门进行同步，没有的将新建，存在的将更新。",this.confirm.flag=!0},onConfirmClose:function(){this.confirm.flag=!1},onConfirmOk:function(){this.confirm.flag=!1,this.isLoaading=!0,1===this.type?this.scan():this.sync()},scan:function(){var t=this;this.axios({method:"post",url:"/cipher/wxGroup/scanWxGroup",data:{}}).then(function(e){t.isLoaading=!1,0===e.data.return_code?(t.getAllList(),t.$myModal.success({title:"扫描成功",content:"扫描到".concat(e.data.add,"条新数据")})):t.$myModal.error({title:"扫描失败",content:"请稍后重试"})}).catch(function(e){t.$Notice.warning({title:"网络未知错误！",desc:e})})},sync:function(){var t=this;this.axios({method:"post",url:"/cipher/wxGroup/sync",data:{}}).then(function(e){t.isLoaading=!1,0===e.data.return_code?(t.getAllList(),t.$emit("changeLeftTree"),t.$myModal.success({title:"同步成功",content:"".concat(e.data.sync_length,"条数据同步成功")})):t.$myModal.error({title:"同步失败",content:"请稍后重试"})}).catch(function(e){t.isLoaading=!1,t.$Notice.warning({title:"网络未知错误！",desc:e})})}}},u=c,d=(a("453e"),a("2877")),m=Object(d["a"])(u,o,r,!1,null,"6f99bf09",null),p=m.exports,h=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ding-syn-user tabled-wrap"},[a("div",{staticClass:"ding-syn-user-header tabled-header"},[a("div",{staticClass:"tabled-header-search"},[a("myInput",{attrs:{placeholder:"请输入姓名 / 账号",radius:"half",search:!0},on:{handleClick:function(e){t.getSearchList()}},model:{value:t.searchWord,callback:function(e){t.searchWord=e},expression:"searchWord"}})],1),a("div",{staticClass:"tabled-header-right"},[a("myButton",{on:{click:function(e){t.onConfirm(1)}}},[t._v("扫描用户")]),a("myButton",{on:{click:function(e){t.onConfirm(2)}}},[t._v("同步已选")]),a("myButton",{on:{click:function(e){t.onConfirm(3)}}},[t._v("同步全部")]),a("mySelect",{attrs:{dataList:t.statusList,showString:"显示"},on:{"on-change":t.changeState},model:{value:t.status,callback:function(e){t.status=e},expression:"status"}})],1)]),a("div",{staticClass:"tabled-table"},[a("Table",{ref:"selection",attrs:{columns:t.title,data:t.list},on:{"on-selection-change":function(e){t.handleSelectRow()}}})],1),a("div",{staticClass:"tabled-page"},[a("Page",{attrs:{total:t.total,"page-size":t.pageSize,current:t.current,"show-sizer":"","show-elevator":"","show-total":""},on:{"on-change":t.changePage,"on-page-size-change":t.changePageSize}})],1),t.confirm.flag?a("Confirm",{attrs:{flag:t.confirm.flag,title:t.confirm.title,titleStyle:t.confirm.titleStyle,content:t.confirm.content,onOk:t.confirm.onOk,onClose:t.confirm.onClose}}):t._e(),t.isLoaading?a("Loading"):t._e()],1)},f=[],g=(a("28a5"),a("ac4d"),a("8a81"),a("ac6a"),{components:{Confirm:n["a"],Loading:l["default"]},data:function(){var t=this;return{confirm:{flag:!1,title:"",titleStyle:{fontSize:"14px",fontWeight:"600"},content:"",onOk:this.onConfirmOk,onClose:this.onConfirmClose},type:1,isLoaading:!1,status:0,statusList:[{value:0,label:"全部"},{value:1,label:"新增"},{value:2,label:"待绑定"}],title:[{type:"selection",width:60,align:"center"},{title:"姓名",key:"name"},{title:"手机",key:"mobile"},{title:"邮箱",key:"email"},{title:"状态",key:"status",width:100},{title:"同步操作",key:"action",width:100,align:"center",render:function(e,a){return e("div",[e("a",{on:{click:function(){t.onConfirm(4,a.row.userid)}}},"同步")])}}],searchWord:"",queryStr:"",list:[],total:0,pageSize:10,current:1,selectList:[]}},created:function(){this.getList()},methods:{getList:function(){var t;t={status:this.status,queryStr:this.queryStr,page:this.current,rows:this.pageSize},this.getUserList(t)},getSearchList:function(){var t;t={status:this.status,queryStr:this.searchWord,page:1,rows:this.pageSize},this.getUserList(t),this.current=1,this.queryStr=this.searchWord},changeState:function(t){var e;e={status:this.status,queryStr:this.searchWord,page:1,rows:this.pageSize},this.getUserList(e)},changePageSize:function(t){var e={status:this.status,queryStr:this.queryStr,rows:t,page:1};this.getUserList(e),this.pageSize=t},changePage:function(t){var e={status:this.status,queryStr:this.queryStr,rows:this.pageSize,page:t};this.current=t,this.getUserList(e)},getUserList:function(t){var e=this;this.axios({method:"post",url:"/cipher/wxUser/getUserList",data:t}).then(function(t){e.total=t.data.total,e.list=t.data.rows}).catch(function(t){e.$Notice.warning({title:"网络未知错误！",desc:t})})},handleSelectRow:function(t,e){this.selectList=[];var a=this.$refs.selection.getSelection(),i=!0,s=!1,o=void 0;try{for(var r,n=a[Symbol.iterator]();!(i=(r=n.next()).done);i=!0){var l=r.value;this.selectList.push(l.userid)}}catch(c){s=!0,o=c}finally{try{i||null==n.return||n.return()}finally{if(s)throw o}}},onConfirm:function(t,e){var a,i;switch(this.type=t,t){case 1:a="确认扫描吗？",i="重新从企业微信中扫描用户，扫描后，使用同步功能，才会改变现有的用户。";break;case 2:a="确认同步已选账号？",i="将选中的用户同步到当前组织结构，没有的将新建，存在的将更新。";break;case 3:a="确认同步全部账号？",i="将当前扫描结果下的全部用户同步到当前组织结构，没有的将新建，存在的将更新。";break;case 4:a="确认同步当前账号？",i="将当前用户同步到当前组织结构，没有的将新建，存在的将更新。",this.selectList=e.split(" ");break;default:break}this.confirm.title=a,this.confirm.content=i,this.confirm.flag=!0},onConfirmClose:function(){this.confirm.flag=!1},onConfirmOk:function(){switch(this.confirm.flag=!1,this.isLoaading=!0,this.type){case 1:this.scan();break;case 2:case 4:this.sync();break;case 3:this.syncAll();break}},scan:function(){var t=this;this.axios({method:"post",url:"/cipher/wxUser/scanWxUser",data:{}}).then(function(e){t.isLoaading=!1,0===e.data.return_code?(t.getList(),t.$myModal.success({title:"扫描成功",content:"扫描到".concat(e.data.add,"条新数据")})):t.$myModal.error({title:"扫描失败",content:"请稍后重试"})}).catch(function(e){t.isLoaading=!1,t.$Notice.warning({title:"网络未知错误！",desc:e})})},sync:function(){var t=this;if(0===this.selectList.length)return this.isLoaading=!1,void this.$myMessage.error("未勾选数据");this.selectList=this.selectList.join(",");var e={userIdList:this.selectList};this.axios({method:"post",url:"/cipher/wxUser/sync",data:e}).then(function(e){t.isLoaading=!1,0===e.data.return_code?(t.getList(),t.$myModal.success({title:"同步成功",content:"".concat(e.data.sync_length,"条数据同步成功")})):t.$myModal.error({title:"同步失败",content:"请稍后重试"})}).catch(function(e){t.isLoaading=!1,t.$Notice.warning({title:"网络未知错误！",desc:e})})},syncAll:function(){var t=this;this.axios({method:"post",url:"/cipher/wxUser/syncAll",data:{}}).then(function(e){t.isLoaading=!1,0===e.data.return_code?(t.getList(),t.$myModal.success({title:"同步成功",content:"".concat(e.data.sync_length,"条数据同步成功")})):t.$myModal.error({title:"同步失败",content:"请稍后重试"})}).catch(function(e){t.isLoaading=!1,t.$Notice.warning({title:"网络未知错误！",desc:e})})}}}),v=g,b=(a("773d"),Object(d["a"])(v,h,f,!1,null,"121df5d2",null)),y=b.exports,I={components:{department:p,SynUser:y},data:function(){return{tabIndex:0,currentContent:"department",tabList:[{index:0,name:"同步部门",component:"department"},{index:1,name:"同步用户",component:"SynUser"}]}},methods:{changeTab:function(t){this.tabIndex=t.index,this.currentContent=t.component}}},w=I,A=(a("c354"),Object(d["a"])(w,i,s,!1,null,"62739738",null));e["default"]=A.exports},"4f14":function(t,e,a){"use strict";var i=a("743c"),s=a.n(i);s.a},"4f64":function(t,e,a){},"4f8a":function(t,e,a){},"50dc":function(t,e,a){},5118:function(t,e,a){(function(t){var i="undefined"!==typeof t&&t||"undefined"!==typeof self&&self||window,s=Function.prototype.apply;function o(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new o(s.call(setTimeout,i,arguments),clearTimeout)},e.setInterval=function(){return new o(s.call(setInterval,i,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(i,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},a("6017"),e.setImmediate="undefined"!==typeof self&&self.setImmediate||"undefined"!==typeof t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!==typeof self&&self.clearImmediate||"undefined"!==typeof t&&t.clearImmediate||this&&this.clearImmediate}).call(this,a("c8ba"))},"518c":function(t,e,a){"use strict";var i=a("80b0"),s=a.n(i);s.a},5246:function(t,e,a){"use strict";var i=a("6b79"),s=a.n(i);s.a},"52da":function(t,e,a){"use strict";var i=a("4909"),s=a.n(i);s.a},"539f":function(t,e,a){"use strict";var i=a("1ade"),s=a.n(i);s.a},5899:function(t,e,a){"use strict";var i=a("f4bd"),s=a.n(i);s.a},"589d":function(t,e,a){},"5b78":function(t,e,a){"use strict";var i=a("03d9"),s=a.n(i);s.a},"5c51":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"formed-wrap"},[t._m(0),a("div",{staticClass:"formed-container"},[a("Form",{staticClass:"formed-form",attrs:{"label-width":130}},[a("FormItem",{attrs:{label:"异地登录验证："}},[a("RadioGroup",{model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}},[a("Radio",{attrs:{label:"open"}},[t._v("开启")]),a("Radio",{attrs:{label:"close"}},[t._v("关闭")])],1)],1),a("FormItem",{attrs:{label:"异地登录验证方式："}},[a("mySelect",{attrs:{dataList:t.options2,showString:"请选择随机码",valueKey:"type",labelKey:"desc"},model:{value:t.selected2,callback:function(e){t.selected2=e},expression:"selected2"}})],1)],1),a("div",{staticClass:"formed-footer"},[a("myButton",{attrs:{btnType:"info"},on:{click:t.save}},[t._v("保存")]),a("myButton",{on:{click:t.cancel}},[t._v("取消")])],1)],1)])},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"formed-header"},[a("div",{staticClass:"formed-header-title"},[t._v("异常登录设置")])])}],o={data:function(){return{options2:[{type:1,desc:"邮件随机码"},{type:2,desc:"短信随机码"}],selected:"",selected2:""}},mounted:function(){var t=this;t.finddata()},methods:{cancel:function(){this.$router.go(-1)},finddata:function(){var t=this;this.axios({method:"post",url:"/cipher/exceptionLogin/preList",data:{}}).then(function(e){1===e.data.exceptionLogin.status?t.selected="open":0===e.data.exceptionLogin.status&&(t.selected="close"),t.selected2=e.data.exceptionLogin.type}).catch(function(t){console.log(t)})},save:function(){var t=this,e={status:t.status,type:t.selected2};this.axios({method:"post",url:"/cipher/exceptionLogin/update",data:e}).then(function(e){t.cancel(),1===e.data.return_code?t.$myMessage.success(e.data.return_msg):t.$Modal.error({title:"提示",content:e.data.return_msg})}).catch(function(t){console.log(t)})}}},r=o,n=(a("5fba"),a("2877")),l=Object(n["a"])(r,i,s,!1,null,"15acab48",null);e["default"]=l.exports},"5c71":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"system-auth wrap"},[t.isShowEdit?a("myButton",{staticClass:"system-auth-change__btn",attrs:{btnType:"info"},on:{click:t.changeStatus}},[t._v("编辑")]):t._e(),a("myTabs",{attrs:{tabList:t.tabList,tabIndex:t.tabIndex},on:{changeTab:t.changeTab}},[a("keep-alive",[a(t.currentContent,{ref:t.currentContent,tag:"component",on:{statusChange:t.getChildStatus}})],1)],1)],1)},s=[],o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"portal-auth formed-wrap"},[t.isEdit?a("Form",{ref:"portalVal",staticClass:"formed-form",attrs:{"label-width":140}},[a("div",{staticClass:"formed-form-part"},[a("h3",{staticClass:"formed-form-part-title"},[t._v("身份认证")]),a("FormItem",{attrs:{label:"认证方式："}},[a("span",[t._v("用户名+密码")])]),a("FormItem",{attrs:{label:"其他认证方式："}},[a("CheckboxGroup",{model:{value:t.formItem.otherAuth,callback:function(e){t.$set(t.formItem,"otherAuth",e)},expression:" formItem.otherAuth"}},t._l(t.otherAuthList,function(e,i){return a("Checkbox",{key:i,attrs:{label:e.value}},[a("span",[t._v(t._s(e.label))])])}),1)],1),a("FormItem",{attrs:{label:"首次登陆："}},[a("Checkbox",{model:{value:t.formItem.firstLogin,callback:function(e){t.$set(t.formItem,"firstLogin",e)},expression:"formItem.firstLogin"}},[t._v("首次登录强制修改密码")])],1),a("FormItem",{attrs:{label:"信息采集："}},[a("div",[a("Checkbox",{model:{value:t.formItem.infoCollection,callback:function(e){t.$set(t.formItem,"infoCollection",e)},expression:"formItem.infoCollection"}},[t._v("强制录入手机号")])],1),a("div",[a("Checkbox",{model:{value:t.formItem.infoCollectionMail,callback:function(e){t.$set(t.formItem,"infoCollectionMail",e)},expression:"formItem.infoCollectionMail"}},[t._v("强制录入邮箱")])],1)])],1),a("div",{staticClass:"formed-form-part"},[a("h3",{staticClass:"formed-form-part-title"},[t._v("账号注册")]),a("FormItem",{attrs:{label:"是否开启注册："}},[a("RadioGroup",{model:{value:t.formItem.isOpenRegister,callback:function(e){t.$set(t.formItem,"isOpenRegister",e)},expression:"formItem.isOpenRegister"}},t._l(t.switchList,function(e){return a("Radio",{key:e.value,attrs:{label:e.value}},[a("span",[t._v(t._s(e.label))])])}),1)],1),0===t.formItem.isOpenRegister?[a("FormItem",{staticClass:"skip-model",attrs:{label:"手机验证："}},[a("RadioGroup",{on:{"on-change":t.changeisOpenNumReg},model:{value:t.formItem.isOpenNumReg,callback:function(e){t.$set(t.formItem,"isOpenNumReg",e)},expression:"formItem.isOpenNumReg"}},t._l(t.switchList,function(e){return a("Radio",{key:e.value,attrs:{label:e.value}},[a("span",[t._v(t._s(e.label))])])}),1),a("Checkbox",{attrs:{disabled:1===t.formItem.isOpenNumReg},model:{value:t.formItem.isSkipNumReg,callback:function(e){t.$set(t.formItem,"isSkipNumReg",e)},expression:"formItem.isSkipNumReg"}},[t._v("手机验证可跳过")])],1),a("FormItem",{attrs:{label:"邮箱验证："}},[a("RadioGroup",{on:{"on-change":t.changeisOpenMailReg},model:{value:t.formItem.isOpenMailReg,callback:function(e){t.$set(t.formItem,"isOpenMailReg",e)},expression:"formItem.isOpenMailReg"}},t._l(t.switchList,function(e){return a("Radio",{key:e.value,attrs:{label:e.value}},[a("span",[t._v(t._s(e.label))])])}),1),a("Checkbox",{attrs:{disabled:1===t.formItem.isOpenMailReg},model:{value:t.formItem.isSkipMailReg,callback:function(e){t.$set(t.formItem,"isSkipMailReg",e)},expression:"formItem.isSkipMailReg"}},[t._v("邮箱验证可跳过")])],1)]:t._e()],2),a("div",{staticClass:"formed-form-part"},[a("h3",{staticClass:"formed-form-part-title"},[t._v("账号绑定")]),a("FormItem",{attrs:{label:"绑定应用："}},[a("div",[a("Checkbox",{on:{"on-change":function(e){t.formItem.bindAppWxAuto=!1}},model:{value:t.formItem.bindAppWx,callback:function(e){t.$set(t.formItem,"bindAppWx",e)},expression:"formItem.bindAppWx"}},[t._v("企业微信认证")]),a("Checkbox",{staticClass:"auto",attrs:{disabled:!t.formItem.bindAppWx},model:{value:t.formItem.bindAppWxAuto,callback:function(e){t.$set(t.formItem,"bindAppWxAuto",e)},expression:"formItem.bindAppWxAuto"}},[t._v("自动绑定（需要配置对接企业微信的接口参数）")])],1),a("div",[a("Checkbox",{on:{"on-change":function(e){t.formItem.bindAppDdAuto=!1}},model:{value:t.formItem.bindAppDd,callback:function(e){t.$set(t.formItem,"bindAppDd",e)},expression:"formItem.bindAppDd"}},[t._v("钉钉认证")]),a("Checkbox",{staticClass:"auto",attrs:{disabled:!t.formItem.bindAppDd},model:{value:t.formItem.bindAppDdAuto,callback:function(e){t.$set(t.formItem,"bindAppDdAuto",e)},expression:"formItem.bindAppDdAuto"}},[t._v("自动绑定（需要配置对接钉钉的接口参数）")])],1),a("div",[a("Checkbox",{on:{"on-change":function(e){t.formItem.bindAppDbAuto=!1}},model:{value:t.formItem.bindAppDb,callback:function(e){t.$set(t.formItem,"bindAppDb",e)},expression:"formItem.bindAppDb"}},[t._v("大白认证")]),a("Checkbox",{staticClass:"auto",attrs:{disabled:!t.formItem.bindAppDb},model:{value:t.formItem.bindAppDbAuto,callback:function(e){t.$set(t.formItem,"bindAppDbAuto",e)},expression:"formItem.bindAppDbAuto"}},[t._v("自动绑定（需要配置对接大白的接口参数）")])],1)]),a("FormItem",{attrs:{label:"手机验证："}},[a("RadioGroup",{model:{value:t.formItem.isOpenNumBind,callback:function(e){t.$set(t.formItem,"isOpenNumBind",e)},expression:"formItem.isOpenNumBind"}},t._l(t.switchList,function(e){return a("Radio",{key:e.value,attrs:{label:e.value}},[a("span",[t._v(t._s(e.label))])])}),1)],1),a("FormItem",{attrs:{label:"邮箱验证："}},[a("RadioGroup",{model:{value:t.formItem.isOpenMailBind,callback:function(e){t.$set(t.formItem,"isOpenMailBind",e)},expression:"formItem.isOpenMailBind"}},t._l(t.switchList,function(e){return a("Radio",{key:e.value,attrs:{label:e.value}},[a("span",[t._v(t._s(e.label))])])}),1)],1)],1),a("div",{staticClass:"formed-form-part"},[a("h3",{staticClass:"formed-form-part-title"},[t._v("忘记密码：")]),a("FormItem",{attrs:{label:"是否开启忘记密码："}},[a("RadioGroup",{model:{value:t.formItem.isOpenForgetPwd,callback:function(e){t.$set(t.formItem,"isOpenForgetPwd",e)},expression:"formItem.isOpenForgetPwd"}},t._l(t.switchList,function(e){return a("Radio",{key:e.value,attrs:{label:e.value}},[a("span",[t._v(t._s(e.label))])])}),1)],1),0===t.formItem.isOpenForgetPwd?[a("FormItem",{attrs:{label:"手机验证："}},[a("RadioGroup",{model:{value:t.formItem.isOpenNumForget,callback:function(e){t.$set(t.formItem,"isOpenNumForget",e)},expression:"formItem.isOpenNumForget"}},t._l(t.switchList,function(e){return a("Radio",{key:e.value,attrs:{label:e.value}},[a("span",[t._v(t._s(e.label))])])}),1)],1),a("FormItem",{attrs:{label:"邮箱验证："}},[a("RadioGroup",{model:{value:t.formItem.isOpenMailForget,callback:function(e){t.$set(t.formItem,"isOpenMailForget",e)},expression:"formItem.isOpenMailForget"}},t._l(t.switchList,function(e){return a("Radio",{key:e.value,attrs:{label:e.value}},[a("span",[t._v(t._s(e.label))])])}),1)],1),a("FormItem",{attrs:{label:"二次认证："}},[a("CheckboxGroup",{model:{value:t.formItem.secondAuth,callback:function(e){t.$set(t.formItem,"secondAuth",e)},expression:" formItem.secondAuth"}},t._l(t.secondAuthList,function(e,i){return a("Checkbox",{key:i,attrs:{label:e.value}},[a("span",[t._v(t._s(e.label))])])}),1)],1)]:t._e()],2)]):a("div",{staticClass:"formed-form"},[t.showData.ident_auth?a("div",{staticClass:"formed-form-part"},[a("h3",{staticClass:"formed-form-part-title"},[t._v("身份认证")]),t._m(0),t.showOtherAuthList.length?a("div",{staticClass:"formed-form-item"},[a("span",[t._v("其他认证方式：")]),a("span",t._l(t.showOtherAuthList,function(e,i){return a("span",{key:i,staticStyle:{"margin-right":"16px"}},[t._v("\n            "+t._s(e)+"\n          ")])}),0)]):t._e(),0===t.showData.ident_auth.firstLogin?a("div",{staticClass:"formed-form-item"},[a("span",[t._v("首次登陆：")]),a("span",[t._v("首次登陆强制修改密码")])]):t._e(),0===t.showData.ident_auth.infoCollection||0===t.showData.ident_auth.infoCollectionMail?a("div",{staticClass:"formed-form-item"},[a("span",[t._v("信息采集：")]),a("span",[0===t.showData.ident_auth.infoCollection?a("div",[t._v("强制录入手机号")]):t._e(),0===t.showData.ident_auth.infoCollectionMail?a("div",[t._v("强制录入邮箱")]):t._e()])]):t._e()]):t._e(),t.showData.acco_regi?a("div",{staticClass:"formed-form-part"},[a("h3",{staticClass:"formed-form-part-title"},[t._v("账号注册")]),a("div",{staticClass:"formed-form-item"},[a("span",[t._v("是否开启注册：")]),a("span",[a("span",[t._v("\n            "+t._s(t.isOpenRegisterIcon.status?"已启用":"未启用")+"\n            "),a("Icon",{class:t.isOpenRegisterIcon.class,attrs:{type:t.isOpenRegisterIcon.type}})],1)])]),t.isOpenRegisterIcon.status?a("div",{staticClass:"formed-form-item"},[a("span",[t._v("手机验证：")]),a("span",[t._v("\n          "+t._s(t.isOpenNumRegIcon.status?0===t.showData.acco_regi.isSkipNumReg?"已启用  （可跳过）":"已启用":"未启用")+"\n          "),a("Icon",{class:t.isOpenNumRegIcon.class,attrs:{type:t.isOpenNumRegIcon.type}})],1)]):t._e(),t.isOpenRegisterIcon.status?a("div",{staticClass:"formed-form-item"},[a("span",[t._v("邮箱验证：")]),a("span",[t._v("\n          "+t._s(t.isOpenMailRegIcon.status?0===t.showData.acco_regi.isSkipMailReg?"已启用 （可跳过）":"已启用":"未启用")+"\n          "),a("Icon",{class:t.isOpenMailRegIcon.class,attrs:{type:t.isOpenMailRegIcon.type}})],1)]):t._e()]):t._e(),t.showData.acco_bind?a("div",{staticClass:"formed-form-part"},[a("h3",{staticClass:"formed-form-part-title"},[t._v("账号绑定")]),a("div",{staticClass:"formed-form-item"},[a("span",[t._v("绑定应用：")]),a("span",[0===t.showData.acco_bind.bindingAppWx?a("div",[t._v("\n            企业微信认证"+t._s(0===t.showData.acco_bind.autoBindingWx?" （已启用自动绑定）":"")+"\n          ")]):t._e(),0===t.showData.acco_bind.bindingAppDd?a("div",[t._v("\n            钉钉认证"+t._s(0===t.showData.acco_bind.autoBindingDd?" （已启用自动绑定）":"")+"\n          ")]):t._e(),0===t.showData.acco_bind.bindingAppDb?a("div",[t._v("\n            大白认证"+t._s(0===t.showData.acco_bind.autoBindingDb?" （已启用自动绑定）":"")+"\n          ")]):t._e()])]),a("div",{staticClass:"formed-form-item"},[a("span",[t._v("手机验证：")]),a("span",[t._v("\n          "+t._s(t.isOpenNumBindIcon.status?"已启用":"未启用")+"\n          "),a("Icon",{class:t.isOpenNumBindIcon.class,attrs:{type:t.isOpenNumBindIcon.type}})],1)]),a("div",{staticClass:"formed-form-item"},[a("span",[t._v("邮箱验证：")]),a("span",[t._v("\n          "+t._s(t.isOpenMailBindIcon.status?"已启用":"未启用")+"\n          "),a("Icon",{class:t.isOpenMailBindIcon.class,attrs:{type:t.isOpenMailBindIcon.type}})],1)])]):t._e(),t.showData.forg_pass?a("div",{staticClass:"formed-form-part"},[a("h3",{staticClass:"formed-form-part-title"},[t._v("忘记密码")]),a("div",{staticClass:"formed-form-item"},[a("span",[t._v("是否开启忘记密码：")]),a("span",[t._v("\n          "+t._s(t.isOpenForgetPwdIcon.status?"已启用":"未启用")+"\n          "),a("Icon",{class:t.isOpenForgetPwdIcon.class,attrs:{type:t.isOpenForgetPwdIcon.type}})],1)]),0===t.showData.forg_pass.isOpenForgetPwd?a("div",{staticClass:"formed-form-item"},[a("span",[t._v("手机验证：")]),a("span",[t._v("\n          "+t._s(t.isOpenNumForgetIcon.status?"已启用":"未启用")+"\n          "),a("Icon",{class:t.isOpenNumForgetIcon.class,attrs:{type:t.isOpenNumForgetIcon.type}})],1)]):t._e(),0===t.showData.forg_pass.isOpenForgetPwd?a("div",{staticClass:"formed-form-item"},[a("span",[t._v("邮箱验证：")]),a("span",[t._v("\n          "+t._s(t.isOpenMailForgetIcon.status?"已启用":"未启用")+"\n          "),a("Icon",{class:t.isOpenMailForgetIcon.class,attrs:{type:t.isOpenMailForgetIcon.type}})],1)]):t._e(),t.showSecondAuth.length>0?a("div",{staticClass:"formed-form-item"},[a("span",[t._v("二次认证：")]),a("span",t._l(t.showSecondAuth,function(e,i){return a("span",{key:i,staticStyle:{"margin-right":"16px"}},[t._v(t._s(e))])}),0)]):t._e()]):t._e()]),t.isEdit?a("div",{staticClass:"formed-footer"},[a("myButton",{attrs:{btnType:"info"},on:{click:function(e){t.handleSubmit()}}},[t._v("保存")]),a("myButton",{staticStyle:{"margin-left":"8px"},on:{click:t.cancel}},[t._v("取消")])],1):t._e()],1)},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"formed-form-item"},[a("span",[t._v("认证方式：")]),a("span",[t._v("用户名+密码")])])}],n=a("e5d6"),l={data:function(){return{isEdit:!1,showData:{},showOtherAuthList:[],isOpenRegisterIcon:null,isOpenNumRegIcon:null,isOpenMailRegIcon:null,isOpenNumBindIcon:null,isOpenMailBindIcon:null,isOpenForgetPwdIcon:null,isOpenNumForgetIcon:null,isOpenMailForgetIcon:null,isShowBindApp:!1,showSecondAuth:[],otherAuthList:[{label:"钉钉扫码",value:2},{label:"企业微信扫码",value:6},{label:"大白扫码",value:3},{label:"手机随机码",value:4},{label:"动态密码",value:5}],switchList:[{label:"开启",value:0},{label:"关闭",value:1}],secondAuthList:[{label:"企业微信扫码",value:1},{label:"钉钉扫码",value:2},{label:"大白扫码",value:3}],formItem:{otherAuth:[],firstLogin:!1,infoCollection:!1,infoCollectionMail:!1,isOpenRegister:0,isOpenNumReg:null,isSkipNumReg:!1,isOpenMailReg:null,isSkipMailReg:!1,isOpenNumBind:null,isOpenMailBind:null,bindAppWx:!1,bindAppWxAuto:!1,bindAppDd:!1,bindAppDdAuto:!1,bindAppDb:!1,bindAppDbAuto:!1,isOpenForgetPwd:0,isOpenNumForget:null,isOpenMailForget:null,secondAuth:[],isSave:!1}}},mounted:function(){this.getPortalAuthData()},methods:{editStatus:function(){this.getPortalAuthData(),this.isEdit=!0,this.$emit("statusChange",{isEdit:this.isEdit,name:"portal"})},cancel:function(){this.isEdit=!1,this.$emit("statusChange",{isEdit:this.isEdit,name:"portal"})},changeisOpenNumReg:function(){1===this.formItem.isOpenNumReg&&(this.formItem.isSkipNumReg=!1)},changeisOpenMailReg:function(){1===this.formItem.isOpenMailReg&&(this.formItem.isSkipMailReg=!1)},handleSubmit:function(t){for(var e=this,a={otherAuthSf:1,otherAuthDd:1,otherAuthDb:1,otherAuthNum:1,otherAuthDt:1,otherAuthWx:1},i={twoAuthForgetWx:1,twoAuthForgetDd:1,twoAuthForgetDb:1},s=0;s<this.formItem.otherAuth.length;s++)switch(this.formItem.otherAuth[s]){case 1:a.otherAuthSf=0;break;case 2:a.otherAuthDd=0;break;case 3:a.otherAuthDb=0;break;case 4:a.otherAuthNum=0;break;case 5:a.otherAuthDt=0;break;case 6:a.otherAuthWx=0;break}for(var o=0;o<this.formItem.secondAuth.length;o++)switch(this.formItem.secondAuth[o]){case 1:i.twoAuthForgetWx=0;break;case 2:i.twoAuthForgetDd=0;break;case 3:i.twoAuthForgetDb=0;break}var r={otherAuthSf:1,otherAuthDd:a.otherAuthDd,otherAuthDb:a.otherAuthDb,otherAuthNum:a.otherAuthNum,otherAuthDt:a.otherAuthDt,otherAuthWx:a.otherAuthWx,firstLogin:this.formItem.firstLogin?0:1,infoCollection:this.formItem.infoCollection?0:1,infoCollectionMail:this.formItem.infoCollectionMail?0:1,isOpenRegister:this.formItem.isOpenRegister,isOpenMailReg:this.formItem.isOpenMailReg,isSkipMailReg:this.formItem.isSkipMailReg?0:1,isOpenNumReg:this.formItem.isOpenNumReg,isSkipNumReg:this.formItem.isSkipNumReg?0:1,bindingAppWx:this.formItem.bindAppWx?0:1,autoBindingWx:this.formItem.bindAppWxAuto?0:1,bindingAppDd:this.formItem.bindAppDd?0:1,autoBindingDd:this.formItem.bindAppDdAuto?0:1,bindingAppDb:this.formItem.bindAppDb?0:1,autoBindingDb:this.formItem.bindAppDbAuto?0:1,isOpenMailBind:this.formItem.isOpenMailBind,isOpenNumBind:this.formItem.isOpenNumBind,isOpenForgetPwd:this.formItem.isOpenForgetPwd,isOpenMailForget:this.formItem.isOpenMailForget,isOpenNumForget:this.formItem.isOpenNumForget,twoAuthForgetWx:i.twoAuthForgetWx,twoAuthForgetDd:i.twoAuthForgetDd,twoAuthForgetDb:i.twoAuthForgetDb};this.axios({method:"post",data:r,url:"/cipher/setting/doorAuth"}).then(function(t){0===t.data.return_code?(e.$myMessage.success(t.data.return_msg),e.cancel(),e.getPortalAuthData()):e.$myMessage.error(t.data.return_msg)}).catch(function(t){this.$Notice.warning({title:"网络未知错误！",desc:t})})},getPortalAuthData:function(){var t=this;this.axios({method:"post",data:{},url:"/cipher/setting/doorAuthEcho"}).then(function(e){0===e.data.return_code?(t.showData=e.data.return_result,t.isOpenRegisterIcon=0===t.showData.acco_regi.isOpenRegister?n["a"].openIcon:n["a"].closeIcon,t.isOpenNumRegIcon=0===t.showData.acco_regi.isOpenNumReg?n["a"].openIcon:n["a"].closeIcon,t.isOpenMailRegIcon=0===t.showData.acco_regi.isOpenMailReg?n["a"].openIcon:n["a"].closeIcon,t.isOpenNumBindIcon=0===t.showData.acco_bind.isOpenNumBind?n["a"].openIcon:n["a"].closeIcon,t.isOpenMailBindIcon=0===t.showData.acco_bind.isOpenMailBind?n["a"].openIcon:n["a"].closeIcon,t.isOpenForgetPwdIcon=0===t.showData.forg_pass.isOpenForgetPwd?n["a"].openIcon:n["a"].closeIcon,t.isOpenNumForgetIcon=0===t.showData.forg_pass.isOpenNumForget?n["a"].openIcon:n["a"].closeIcon,t.isOpenMailForgetIcon=0===t.showData.forg_pass.isOpenMailForget?n["a"].openIcon:n["a"].closeIcon,t.showOtherAuthList=[],t.formItem.otherAuth=[],0===t.showData.ident_auth.otherAuthDd&&(t.showOtherAuthList.push("钉钉扫码"),t.formItem.otherAuth.push(2)),0===t.showData.ident_auth.otherAuthWx&&(t.showOtherAuthList.push("企业微信扫码"),t.formItem.otherAuth.push(6)),0===t.showData.ident_auth.otherAuthDb&&(t.showOtherAuthList.push("大白扫码"),t.formItem.otherAuth.push(3)),0===t.showData.ident_auth.otherAuthNum&&(t.showOtherAuthList.push("手机随机码"),t.formItem.otherAuth.push(4)),0===t.showData.ident_auth.otherAuthDt&&(t.showOtherAuthList.push("动态密码"),t.formItem.otherAuth.push(5)),t.formItem.firstLogin=0===t.showData.ident_auth.firstLogin,t.formItem.infoCollection=0===t.showData.ident_auth.infoCollection,t.formItem.infoCollectionMail=0===t.showData.ident_auth.infoCollectionMail,t.formItem.isOpenRegister=t.showData.acco_regi.isOpenRegister,t.formItem.isOpenNumReg=t.showData.acco_regi.isOpenNumReg,t.formItem.isSkipNumReg=0===t.showData.acco_regi.isSkipNumReg,t.formItem.isOpenMailReg=t.showData.acco_regi.isOpenMailReg,t.formItem.isSkipMailReg=0===t.showData.acco_regi.isSkipMailReg,t.formItem.isOpenNumBind=t.showData.acco_bind.isOpenNumBind,t.formItem.isOpenMailBind=t.showData.acco_bind.isOpenMailBind,t.isShowBindApp=0===t.showData.acco_bind.bindingAppSf||0===t.showData.acco_bind.bindingAppDd||0===t.showData.acco_bind.bindingAppDb,t.formItem.bindAppSf=0===t.showData.acco_bind.bindingAppSf,t.formItem.bindAppSfAuto=0===t.showData.acco_bind.autoBindingSf,t.formItem.bindAppDd=0===t.showData.acco_bind.bindingAppDd,t.formItem.bindAppDdAuto=0===t.showData.acco_bind.autoBindingDd,t.formItem.bindAppDb=0===t.showData.acco_bind.bindingAppDb,t.formItem.bindAppDbAuto=0===t.showData.acco_bind.autoBindingDb,t.formItem.isOpenForgetPwd=t.showData.forg_pass.isOpenForgetPwd,t.formItem.isOpenNumForget=t.showData.forg_pass.isOpenNumForget,t.formItem.isOpenMailForget=t.showData.forg_pass.isOpenMailForget,t.showSecondAuth=[],t.formItem.secondAuth=[],0===t.showData.forg_pass.twoAuthForgetWx&&(t.showSecondAuth.push("企业微信扫码"),t.formItem.secondAuth.push(1)),0===t.showData.forg_pass.twoAuthForgetDd&&(t.showSecondAuth.push("钉钉扫码"),t.formItem.secondAuth.push(2)),0===t.showData.forg_pass.twoAuthForgetDb&&(t.showSecondAuth.push("大白扫码"),t.formItem.secondAuth.push(3))):t.$myMessage.error(0===e.data.return_msg)}).catch(function(t){this.$Notice.warning({title:"网络未知错误！",desc:t})})}}},c=l,u=(a("4709"),a("2877")),d=Object(u["a"])(c,o,r,!1,null,"a406fd62",null),m=d.exports,p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"admin-auth formed-wrap"},[t.isEdit?a("Form",{staticClass:"formed-form",attrs:{"label-width":130}},[a("div",{staticClass:"formed-form-part"},[a("h3",{staticClass:"formed-form-part-title"},[t._v("身份认证")]),a("FormItem",{attrs:{label:"认证方式："}},[a("span",[t._v("用户名+密码")])]),a("FormItem",{attrs:{label:"其他认证方式："}},[a("CheckboxGroup",{model:{value:t.formItem.otherAuth,callback:function(e){t.$set(t.formItem,"otherAuth",e)},expression:" formItem.otherAuth"}},t._l(t.otherAuthList,function(e,i){return a("Checkbox",{key:i,attrs:{label:e.value}},[a("span",[t._v(t._s(e.label))])])}),1)],1),a("FormItem",{attrs:{label:"首次登陆："}},[a("Checkbox",{model:{value:t.formItem.firstLogin,callback:function(e){t.$set(t.formItem,"firstLogin",e)},expression:"formItem.firstLogin"}},[t._v("首次登录强制修改密码")])],1)],1),a("div",{staticClass:"formed-form-part"},[a("h3",{staticClass:"formed-form-part-title"},[t._v("账号绑定")]),a("FormItem",{attrs:{label:"绑定应用："}},[a("div",[a("Checkbox",{on:{"on-change":function(e){t.formItem.bindAppWxAuto=!1}},model:{value:t.formItem.bindAppWx,callback:function(e){t.$set(t.formItem,"bindAppWx",e)},expression:"formItem.bindAppWx"}},[t._v("企业微信认证")]),a("Checkbox",{staticClass:"auto",attrs:{disabled:!t.formItem.bindAppWx},model:{value:t.formItem.bindAppWxAuto,callback:function(e){t.$set(t.formItem,"bindAppWxAuto",e)},expression:"formItem.bindAppWxAuto"}},[t._v("自动绑定（需要配置对接企业微信的接口参数）")])],1),a("div",[a("Checkbox",{on:{"on-change":function(e){t.formItem.bindAppDdAuto=!1}},model:{value:t.formItem.bindAppDd,callback:function(e){t.$set(t.formItem,"bindAppDd",e)},expression:"formItem.bindAppDd"}},[t._v("钉钉认证")]),a("Checkbox",{staticClass:"auto",attrs:{disabled:!t.formItem.bindAppDd},model:{value:t.formItem.bindAppDdAuto,callback:function(e){t.$set(t.formItem,"bindAppDdAuto",e)},expression:"formItem.bindAppDdAuto"}},[t._v("自动绑定（需要配置对接钉钉的接口参数）")])],1),a("div",[a("Checkbox",{on:{"on-change":function(e){t.formItem.bindAppDbAuto=!1}},model:{value:t.formItem.bindAppDb,callback:function(e){t.$set(t.formItem,"bindAppDb",e)},expression:"formItem.bindAppDb"}},[t._v("大白认证")]),a("Checkbox",{staticClass:"auto",attrs:{disabled:!t.formItem.bindAppDb},model:{value:t.formItem.bindAppDbAuto,callback:function(e){t.$set(t.formItem,"bindAppDbAuto",e)},expression:"formItem.bindAppDbAuto"}},[t._v("自动绑定（需要配置对接大白的接口参数）")])],1)]),a("FormItem",{attrs:{label:"手机验证："}},[a("RadioGroup",{on:{"on-change":t.changeisOpenNumBind},model:{value:t.formItem.isOpenNumBind,callback:function(e){t.$set(t.formItem,"isOpenNumBind",e)},expression:"formItem.isOpenNumBind"}},t._l(t.switchList,function(e){return a("Radio",{key:e.value,attrs:{label:e.value}},[a("span",[t._v(t._s(e.label))])])}),1)],1),a("FormItem",{attrs:{label:"邮箱验证："}},[a("RadioGroup",{on:{"on-change":t.changeisOpenMailBind},model:{value:t.formItem.isOpenMailBind,callback:function(e){t.$set(t.formItem,"isOpenMailBind",e)},expression:"formItem.isOpenMailBind"}},t._l(t.switchList,function(e){return a("Radio",{key:e.value,attrs:{label:e.value}},[a("span",[t._v(t._s(e.label))])])}),1)],1)],1)]):a("div",{staticClass:"formed-form"},[t.showData.ident_auth?a("div",{staticClass:"formed-form-part"},[a("h3",{staticClass:"formed-form-part-title"},[t._v("身份认证")]),t._m(0),t.showOtherAuthList.length?a("div",{staticClass:"formed-form-item"},[a("span",[t._v("其他认证方式：")]),a("span",t._l(t.showOtherAuthList,function(e,i){return a("span",{key:i,staticStyle:{"margin-right":"16px"}},[t._v("\n            "+t._s(e)+"\n          ")])}),0)]):t._e(),0===t.showData.ident_auth.firstLogin?a("div",{staticClass:"formed-form-item"},[a("span",[t._v("首次登陆：")]),a("span",[t._v("首次登陆强制修改密码")])]):t._e()]):t._e(),t.showData.acco_bind?a("div",{staticClass:"formed-form-part"},[a("h3",{staticClass:"formed-form-part-title"},[t._v("账号绑定")]),a("div",{staticClass:"formed-form-item"},[a("span",[t._v("绑定应用：")]),a("span",[0===t.showData.acco_bind.bindingAppWx?a("div",[t._v("\n            企业微信认证"+t._s(0===t.showData.acco_bind.autoBindingWx?" （已启用自动绑定）":"")+"\n          ")]):t._e(),0===t.showData.acco_bind.bindingAppDd?a("div",[t._v("\n            钉钉认证"+t._s(0===t.showData.acco_bind.autoBindingDd?" （已启用自动绑定）":"")+"\n          ")]):t._e(),0===t.showData.acco_bind.bindingAppDb?a("div",[t._v("\n            大白认证"+t._s(0===t.showData.acco_bind.autoBindingDb?" （已启用自动绑定）":"")+"\n          ")]):t._e()])]),a("div",{staticClass:"formed-form-item"},[a("span",[t._v("手机验证：")]),a("span",[t._v("\n          "+t._s(t.isOpenNumBindIcon.status?"已启用":"未启用")+"\n          "),a("Icon",{class:t.isOpenNumBindIcon.class,attrs:{type:t.isOpenNumBindIcon.type}})],1)]),a("div",{staticClass:"formed-form-item"},[a("span",[t._v("邮箱验证：")]),a("span",[t._v("\n          "+t._s(t.isOpenMailBindIcon.status?"已启用":"未启用")+"\n          "),a("Icon",{class:t.isOpenMailBindIcon.class,attrs:{type:t.isOpenMailBindIcon.type}})],1)])]):t._e()]),t.isEdit?a("div",{staticClass:"formed-footer"},[a("myButton",{attrs:{btnType:"info"},on:{click:function(e){t.handleSubmit()}}},[t._v("保存")]),a("myButton",{staticStyle:{"margin-left":"8px"},on:{click:t.cancel}},[t._v("取消")])],1):t._e()],1)},h=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"formed-form-item"},[a("span",[t._v("认证方式：")]),a("span",[t._v("用户名+密码")])])}],f={data:function(){return{isEdit:!1,showData:{},showOtherAuthList:[],isOpenNumBindIcon:null,isOpenMailBindIcon:null,isShowBindApp:!1,otherAuthList:[{label:"钉钉扫码",value:2},{label:"企业微信扫码",value:6},{label:"大白扫码",value:3},{label:"手机随机码",value:4},{label:"动态密码",value:5}],switchList:[{label:"开启",value:0},{label:"关闭",value:1}],formItem:{otherAuth:[],firstLogin:!1,isOpenNumBind:null,isOpenMailBind:null,bindAppWx:!1,bindAppWxAuto:!1,bindAppDd:!1,bindAppDdAuto:!1,bindAppDb:!1,bindAppDbAuto:!1}}},mounted:function(){this.getAdminAuthData()},methods:{editStatus:function(){this.getAdminAuthData(),this.isEdit=!0,this.$emit("statusChange",{isEdit:this.isEdit,name:"admin"})},cancel:function(){this.isEdit=!1,this.$emit("statusChange",{isEdit:this.isEdit,name:"admin"})},changeisOpenNumBind:function(){0===!this.formItem.isOpenNumBind&&(this.formItem.isOpenNumBindSkip=!1)},changeisOpenMailBind:function(){0===!this.formItem.isOpenMailBind&&(this.formItem.isOpenMailBindSkip=!1)},handleSubmit:function(t){for(var e=this,a={otherAuthSf:1,otherAuthDd:1,otherAuthDb:1,otherAuthNum:1,otherAuthDt:1,otherAuthWx:1},i=0;i<this.formItem.otherAuth.length;i++)switch(this.formItem.otherAuth[i]){case 2:a.otherAuthDd=0;break;case 3:a.otherAuthDb=0;break;case 4:a.otherAuthNum=0;break;case 5:a.otherAuthDt=0;break;case 6:a.otherAuthWx=0;break}var s={otherAuthWx:a.otherAuthWx,otherAuthDd:a.otherAuthDd,otherAuthDb:a.otherAuthDb,otherAuthNum:a.otherAuthNum,otherAuthDt:a.otherAuthDt,firstLogin:this.formItem.firstLogin?0:1,bindingAppWx:this.formItem.bindAppWx?0:1,autoBindingWx:this.formItem.bindAppWxAuto?0:1,bindingAppDd:this.formItem.bindAppDd?0:1,autoBindingDd:this.formItem.bindAppDdAuto?0:1,bindingAppDb:this.formItem.bindAppDb?0:1,autoBindingDb:this.formItem.bindAppDbAuto?0:1,isOpenMailBind:this.formItem.isOpenMailBind,isOpenNumBind:this.formItem.isOpenNumBind};this.axios({method:"post",data:s,url:"/cipher/setting/extManAuth"}).then(function(t){0===t.data.return_code?(e.$myMessage.success(t.data.return_msg),e.cancel(),e.getAdminAuthData()):e.$myMessage.error(t.data.return_msg)}).catch(function(t){this.$Notice.warning({title:"网络未知错误！",desc:t})})},getAdminAuthData:function(){var t=this;this.axios({method:"post",data:{},url:"/cipher/setting/extManAuthEcho"}).then(function(e){0===e.data.return_code?(t.showData=e.data.return_result,t.isOpenNumBindIcon=0===t.showData.acco_bind.isOpenNumBind?n["a"].openIcon:n["a"].closeIcon,t.isOpenMailBindIcon=0===t.showData.acco_bind.isOpenMailBind?n["a"].openIcon:n["a"].closeIcon,t.showOtherAuthList=[],t.formItem.otherAuth=[],0===t.showData.ident_auth.otherAuthDd&&(t.showOtherAuthList.push("钉钉扫码"),t.formItem.otherAuth.push(2)),0===t.showData.ident_auth.otherAuthDb&&(t.showOtherAuthList.push("大白扫码"),t.formItem.otherAuth.push(3)),0===t.showData.ident_auth.otherAuthNum&&(t.showOtherAuthList.push("手机随机码"),t.formItem.otherAuth.push(4)),0===t.showData.ident_auth.otherAuthDt&&(t.showOtherAuthList.push("动态密码"),t.formItem.otherAuth.push(5)),0===t.showData.ident_auth.otherAuthWx&&(t.showOtherAuthList.push("企业微信扫码"),t.formItem.otherAuth.push(6)),t.formItem.firstLogin=0===t.showData.ident_auth.firstLogin,t.formItem.isOpenNumBind=t.showData.acco_bind.isOpenNumBind,t.formItem.isOpenMailBind=t.showData.acco_bind.isOpenMailBind,t.isShowBindApp=0===t.showData.acco_bind.bindingAppSf||0===t.showData.acco_bind.bindingAppDd||0===t.showData.acco_bind.BindingDb,t.formItem.bindAppWx=0===t.showData.acco_bind.bindingAppWx,t.formItem.bindAppWxAuto=0===t.showData.acco_bind.autoBindingWx,t.formItem.bindAppDd=0===t.showData.acco_bind.bindingAppDd,t.formItem.bindAppDdAuto=0===t.showData.acco_bind.autoBindingDd,t.formItem.bindAppDb=0===t.showData.acco_bind.bindingAppDb,t.formItem.bindAppDbAuto=0===t.showData.acco_bind.autoBindingDb):t.$myMessage.error(e.data.return_msg)}).catch(function(t){this.$Notice.warning({title:"网络未知错误！",desc:t})})}}},g=f,v=(a("8d0d"),Object(u["a"])(g,p,h,!1,null,"7b32ff5a",null)),b=v.exports,y={components:{portal:m,admin:b},data:function(){return{componentStatus:{isPortalEdit:!1,isAdminEdit:!1},tabIndex:0,currentContent:"portal",tabList:[{index:0,name:"门户认证设置",component:"portal"}]}},computed:{isShowEdit:function(){return"portal"===this.currentContent?!this.componentStatus.isPortalEdit:!this.componentStatus.isAdminEdit}},methods:{changeTab:function(t){this.tabIndex=t.index,this.currentContent=t.component},changeStatus:function(){this.$refs[this.currentContent].editStatus()},getChildStatus:function(t){"portal"===t.name?this.componentStatus.isPortalEdit=t.isEdit:this.componentStatus.isAdminEdit=t.isEdit}}},I=y,w=(a("3efe"),Object(u["a"])(I,i,s,!1,null,"66fb3291",null));e["default"]=w.exports},"5d41":function(t,e,a){},"5d5e":function(t,e,a){},"5f39":function(t,e,a){"use strict";var i=a("aebc"),s=a.n(i);s.a},"5f9a":function(t,e,a){"use strict";var i=a("ec1a"),s=a.n(i);s.a},"5fba":function(t,e,a){"use strict";var i=a("8ff6"),s=a.n(i);s.a},6017:function(t,e,a){(function(t,e){(function(t,a){"use strict";if(!t.setImmediate){var i,s=1,o={},r=!1,n=t.document,l=Object.getPrototypeOf&&Object.getPrototypeOf(t);l=l&&l.setTimeout?l:t,"[object process]"==={}.toString.call(t.process)?p():h()?f():t.MessageChannel?g():n&&"onreadystatechange"in n.createElement("script")?v():b(),l.setImmediate=c,l.clearImmediate=u}function c(t){"function"!==typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),a=0;a<e.length;a++)e[a]=arguments[a+1];var r={callback:t,args:e};return o[s]=r,i(s),s++}function u(t){delete o[t]}function d(t){var e=t.callback,i=t.args;switch(i.length){case 0:e();break;case 1:e(i[0]);break;case 2:e(i[0],i[1]);break;case 3:e(i[0],i[1],i[2]);break;default:e.apply(a,i);break}}function m(t){if(r)setTimeout(m,0,t);else{var e=o[t];if(e){r=!0;try{d(e)}finally{u(t),r=!1}}}}function p(){i=function(t){e.nextTick(function(){m(t)})}}function h(){if(t.postMessage&&!t.importScripts){var e=!0,a=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=a,e}}function f(){var e="setImmediate$"+Math.random()+"$",a=function(a){a.source===t&&"string"===typeof a.data&&0===a.data.indexOf(e)&&m(+a.data.slice(e.length))};t.addEventListener?t.addEventListener("message",a,!1):t.attachEvent("onmessage",a),i=function(a){t.postMessage(e+a,"*")}}function g(){var t=new MessageChannel;t.port1.onmessage=function(t){var e=t.data;m(e)},i=function(e){t.port2.postMessage(e)}}function v(){var t=n.documentElement;i=function(e){var a=n.createElement("script");a.onreadystatechange=function(){m(e),a.onreadystatechange=null,t.removeChild(a),a=null},t.appendChild(a)}}function b(){i=function(t){setTimeout(m,0,t)}}})("undefined"===typeof self?"undefined"===typeof t?this:t:self)}).call(this,a("c8ba"),a("4362"))},6039:function(t,e,a){"use strict";var i=a("c86f"),s=a.n(i);s.a},6252:function(t,e,a){"use strict";var i=a("db62"),s=a.n(i);s.a},"62b8":function(t,e,a){"use strict";var i=a("0089"),s=a.n(i);s.a},"62c4":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Modal",{attrs:{"footer-hide":!0,width:"360"},on:{"on-visible-change":t.visibleChange},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[a("div",{staticClass:"header"},[a("Icon",{attrs:{type:"ios-close-circle"}}),a("span",[t._v(t._s(t.title))])],1),a("div",{staticClass:"center"},[t._v(t._s(t.content))]),a("div",{staticClass:"footer"},[a("Button",{attrs:{type:"primary"},on:{click:t.ok}},[t._v("确定")])],1)])],1)},s=[],o={data:function(){return{showModal:this.flag}},props:{flag:{type:Boolean,default:!1},title:{type:String,default:"失败"},content:{type:String,default:"请稍后重试"},onOk:{type:Function}},methods:{ok:function(){this.showModal=!1,this.onOk()},visibleChange:function(){this.ok()}}},r=o,n=(a("1811"),a("2877")),l=Object(n["a"])(r,i,s,!1,null,"862735bc",null);e["a"]=l.exports},"62e4":function(t,e,a){},6343:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-set formed-wrap"},[t.isShowEdit?a("myButton",{staticClass:"portal-detail-change__btn",attrs:{btnType:"info"},on:{click:t.changeStatus}},[t._v("编辑")]):t._e(),a("myComplexTabs",{model:{value:t.PageSet,callback:function(e){t.PageSet=e},expression:"PageSet"}},[a("myPane",{attrs:{label:"Portal基本配置",name:"base"}},[t.isGetData?a("Base",{ref:"base",attrs:{data:t.showData},on:{statusChange:t.getChildStatus,ListenChild:t.reGetData}}):t._e()],1),a("myPane",{attrs:{label:"网络配置",name:"ac"}},[t.isGetData?a("Ac",{ref:"ac",attrs:{data:t.showData},on:{statusChange:t.getChildStatus,ListenChild:t.reGetData}}):t._e()],1),a("myPane",{attrs:{label:"Portal页面配置",name:"page"}},[t.isGetData?a("Page",{ref:"page",attrs:{data:t.showData},on:{statusChange:t.getChildStatus,ListenChild:t.reGetData}}):t._e()],1)],1)],1)},s=[],o=(a("f751"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"formed-wrap"},[a("transition",{attrs:{name:"fade",mode:"out-in"}},[t.isEdit?a("div",{key:"edit",staticClass:"formed-form"},[a("Form",{ref:"formValidate",attrs:{model:t.formValidate,rules:t.ruleValidate,"label-width":120}},[a("FormItem",{attrs:{label:"Portal类型："}},[a("RadioGroup",{model:{value:t.formValidate.portalType,callback:function(e){t.$set(t.formValidate,"portalType",e)},expression:"formValidate.portalType"}},t._l(t.portalTypeList,function(e){return a("Radio",{key:e.value,attrs:{label:e.value}},[t._v(t._s(e.label))])}),1)],1),a("FormItem",{attrs:{label:"portal描述：",prop:"description"}},[a("Input",{attrs:{placeholder:"请输入描述"},model:{value:t.formValidate.description,callback:function(e){t.$set(t.formValidate,"description","string"===typeof e?e.trim():e)},expression:"formValidate.description"}})],1),a("div",{staticClass:"address"},[a("FormItem",{attrs:{label:"portal地址：",prop:"ip"}},[a("span",[t._v("http:// ")]),a("Input",{staticStyle:{width:"180px"},attrs:{placeholder:"请输入IP地址或域名"},on:{"on-focus":function(e){t.portalAddress="ip"}},model:{value:t.formValidate.ip,callback:function(e){t.$set(t.formValidate,"ip","string"===typeof e?e.trim():e)},expression:"formValidate.ip"}})],1),a("FormItem",{attrs:{prop:"port","label-width":0}},[a("span",[t._v(" ： ")]),a("Input",{staticStyle:{width:"100px"},attrs:{placeholder:"请输入端口号"},on:{"on-focus":function(e){t.portalAddress="port"}},model:{value:t.formValidate.port,callback:function(e){t.$set(t.formValidate,"port","string"===typeof e?e.trim():e)},expression:"formValidate.port"}})],1)],1),a("FormItem",{attrs:{label:"portal序号：",prop:"portalNum"}},[a("Input",{attrs:{placeholder:"请输入1-99"},model:{value:t.formValidate.portalNum,callback:function(e){t.$set(t.formValidate,"portalNum","string"===typeof e?e.trim():e)},expression:"formValidate.portalNum"}})],1)],1)],1):a("div",{key:!t.isEdit,staticClass:"formed-form"},[a("div",{staticClass:"formed-form-item"},[a("span",[t._v("Portal类型：")]),a("span",[t._v(t._s(0===t.showData.portalType?"员工":"访客"))])]),a("div",{staticClass:"formed-form-item"},[a("span",[t._v("portal描述：")]),a("span",[t._v(t._s(t.showData.description))])]),a("div",{staticClass:"formed-form-item"},[a("span",[t._v("portal地址：")]),a("span",[t._v(t._s(t.showData.portalAddress))])]),a("div",{staticClass:"formed-form-item"},[a("span",[t._v("portal序号：")]),a("span",[t._v(t._s(t.showData.portalNum))])])])]),t.isEdit?a("div",{staticClass:"formed-footer"},[a("myButton",{attrs:{btnType:"info"},on:{click:function(e){t.handleSubmit("formValidate")}}},[t._v("保存")]),a("myButton",{on:{click:t.cancel}},[t._v("取消")])],1):t._e()],1)}),r=[],n={data:function(){var t=function(t,e,a){e<1||e>99?a(new Error("请输入1-99")):a()};return{isEdit:!1,showData:{portal:""},portalTypeList:[{label:"员工Portal",value:0},{label:"访客Portal",value:1}],formValidate:{portalType:"",description:"",ip:"",port:"",portalNum:""},ruleValidate:{description:[{required:!0,message:"请输入描述",trigger:"blur"}],ip:[{required:!0,message:"请输入地址",trigger:"blur"}],port:[{required:!0,message:"请输入地址",trigger:"blur"}],portalNum:[{required:!0,message:"请输入1-99",trigger:"blur"},{validator:t,trigger:"blur"}]}}},props:["data"],created:function(){var t=this.$props.data.wifiPotalPageSettingInfo;this.getData(t)},methods:{edit:function(){this.isEdit=!0,this.$emit("statusChange",{isEdit:this.isEdit,name:"base"}),this.getData(this.$props.data.wifiPotalPageSettingInfo)},cancel:function(){this.isEdit=!1,this.$emit("statusChange",{isEdit:this.isEdit,name:"base"})},getData:function(t){this.showData=Object.assign({},t),this.formValidate.portalType=t.portalType,this.formValidate.description=t.description,this.formValidate.ip=t.ip,this.formValidate.port=t.port,this.formValidate.portalNum=t.portalNum},handleSubmit:function(t){var e=this;this.$refs[t].validate(function(t){t&&e.saveData()})},saveData:function(){var t=this,e={id:this.showData.id,portalType:this.formValidate.portalType,portalAddress:"http://".concat(this.formValidate.ip,":").concat(this.formValidate.port),description:this.formValidate.description,portalNum:this.formValidate.portalNum};this.axios({method:"post",data:e,url:"/cipher/wifiportal/updateOne"}).then(function(e){0===e.data.return_code?(t.$myMessage.success(e.data.return_msg),t.cancel(),t.$emit("ListenChild",t.formValidate)):t.$myMessage.error(e.data.return_msg)}).catch(function(t){console.log(t)})}}},l=n,c=(a("b86c"),a("2877")),u=Object(c["a"])(l,o,r,!1,null,"4b9f23f9",null),d=u.exports,m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"formed-wrap"},[a("transition",{attrs:{name:"fade",mode:"out-in"}},[t.isEdit?a("div",{key:"edit",staticClass:"formed-form"},[a("Form",{ref:"formValidate",staticClass:"formed-form-part",attrs:{model:t.formValidate,rules:t.ruleValidate,"label-width":120}},[a("div",{staticClass:"formed-form-part-title"},[t._v("设备参数：")]),a("FormItem",{attrs:{label:"设备型号：",prop:"acDeviceId"}},[a("Select",{attrs:{placeholder:"请选择AC设备型号"},model:{value:t.formValidate.acDeviceId,callback:function(e){t.$set(t.formValidate,"acDeviceId","string"===typeof e?e.trim():e)},expression:"formValidate.acDeviceId"}},t._l(t.acDeviceIdList,function(t){return a("Option",{key:t.value,attrs:{value:t.value,label:t.label}})}),1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:3!==t.formValidate.acDeviceId&&4!==t.formValidate.acDeviceId,expression:"formValidate.acDeviceId !==3&&formValidate.acDeviceId !==4"}]},[a("FormItem",{attrs:{label:"AC设备地址：",prop:"deviceAddress"}},[a("Input",{attrs:{placeholder:"请输入设备地址"},model:{value:t.formValidate.deviceAddress,callback:function(e){t.$set(t.formValidate,"deviceAddress","string"===typeof e?e.trim():e)},expression:"formValidate.deviceAddress"}})],1),a("FormItem",{attrs:{label:"AC监听端口：",prop:"monitorPort"}},[a("Input",{attrs:{placeholder:"请输入监听端口"},model:{value:t.formValidate.monitorPort,callback:function(e){t.$set(t.formValidate,"monitorPort","string"===typeof e?e.trim():e)},expression:"formValidate.monitorPort"}})],1),a("FormItem",{attrs:{label:"协议版本号：",prop:"protocolVersion"}},[a("Input",{attrs:{placeholder:"请输入协议版本号"},model:{value:t.formValidate.protocolVersion,callback:function(e){t.$set(t.formValidate,"protocolVersion","string"===typeof e?e.trim():e)},expression:"formValidate.protocolVersion"}})],1),a("FormItem",{attrs:{label:"认证类型：",prop:"authType"}},[a("Input",{attrs:{placeholder:"请输入认证类型"},model:{value:t.formValidate.authType,callback:function(e){t.$set(t.formValidate,"authType","string"===typeof e?e.trim():e)},expression:"formValidate.authType"}})],1),a("FormItem",{attrs:{label:"超时等待时间：",prop:"timeOut"}},[a("Input",{attrs:{placeholder:"请输入超时等待时间"},model:{value:t.formValidate.timeOut,callback:function(e){t.$set(t.formValidate,"timeOut","string"===typeof e?e.trim():e)},expression:"formValidate.timeOut"}})],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:3===t.formValidate.acDeviceId,expression:"formValidate.acDeviceId ===3"}]},[a("FormItem",{attrs:{label:"switch_url："}},[a("Input",{attrs:{placeholder:"请输入switch_url"},model:{value:t.formValidate.switchUrlAruba,callback:function(e){t.$set(t.formValidate,"switchUrlAruba","string"===typeof e?e.trim():e)},expression:"formValidate.switchUrlAruba"}})],1),a("FormItem",{attrs:{label:"orig_url："}},[a("Input",{attrs:{placeholder:"请输入orig_url"},model:{value:t.formValidate.origUrl,callback:function(e){t.$set(t.formValidate,"origUrl","string"===typeof e?e.trim():e)},expression:"formValidate.origUrl"}})],1),a("FormItem",{attrs:{label:"opcode："}},[a("Input",{attrs:{placeholder:"请输入opcode"},model:{value:t.formValidate.opcode,callback:function(e){t.$set(t.formValidate,"opcode","string"===typeof e?e.trim():e)},expression:"formValidate.opcode"}})],1),a("FormItem",{attrs:{label:"agree："}},[a("Input",{attrs:{placeholder:"请输入agree"},model:{value:t.formValidate.agree,callback:function(e){t.$set(t.formValidate,"agree","string"===typeof e?e.trim():e)},expression:"formValidate.agree"}})],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:4===t.formValidate.acDeviceId,expression:"formValidate.acDeviceId ===4"}]},[a("FormItem",{attrs:{label:"switch_url："}},[a("Input",{model:{value:t.formValidate.switchUrlCisco,callback:function(e){t.$set(t.formValidate,"switchUrlCisco","string"===typeof e?e.trim():e)},expression:"formValidate.switchUrlCisco"}})],1),a("FormItem",{attrs:{label:"buttonClicked："}},[a("Input",{model:{value:t.formValidate.buttonClicked,callback:function(e){t.$set(t.formValidate,"buttonClicked","string"===typeof e?e.trim():e)},expression:"formValidate.buttonClicked"}})],1),a("FormItem",{attrs:{label:"err_flag："}},[a("Input",{model:{value:t.formValidate.errFlag,callback:function(e){t.$set(t.formValidate,"errFlag","string"===typeof e?e.trim():e)},expression:"formValidate.errFlag"}})],1),a("FormItem",{attrs:{label:"err_msg："}},[a("Input",{model:{value:t.formValidate.errMsg,callback:function(e){t.$set(t.formValidate,"errMsg","string"===typeof e?e.trim():e)},expression:"formValidate.errMsg"}})],1),a("FormItem",{attrs:{label:"info_flag："}},[a("Input",{model:{value:t.formValidate.infoFlag,callback:function(e){t.$set(t.formValidate,"infoFlag","string"===typeof e?e.trim():e)},expression:"formValidate.infoFlag"}})],1),a("FormItem",{attrs:{label:"info_msg："}},[a("Input",{model:{value:t.formValidate.infoMsg,callback:function(e){t.$set(t.formValidate,"infoMsg","string"===typeof e?e.trim():e)},expression:"formValidate.infoMsg"}})],1),a("FormItem",{attrs:{label:"redirect_url："}},[a("Input",{model:{value:t.formValidate.redirectUrl,callback:function(e){t.$set(t.formValidate,"redirectUrl","string"===typeof e?e.trim():e)},expression:"formValidate.redirectUrl"}})],1),a("FormItem",{attrs:{label:"network_name："}},[a("Input",{model:{value:t.formValidate.networkName,callback:function(e){t.$set(t.formValidate,"networkName","string"===typeof e?e.trim():e)},expression:"formValidate.networkName"}})],1)],1)],1),a("Form",{ref:"formValidateRadius",staticClass:"formed-form-part",attrs:{model:t.formValidate,rules:t.ruleValidateRadius,"label-width":120}},[a("div",{staticClass:"formed-form-title"},[t._v("Radius配置：")]),a("FormItem",{attrs:{label:"协议类型：",prop:"protocolType"}},[a("RadioGroup",{model:{value:t.formValidate.protocolType,callback:function(e){t.$set(t.formValidate,"protocolType",e)},expression:"formValidate.protocolType"}},t._l(t.protocolTypeList,function(e){return a("Radio",{key:e.value,attrs:{label:e.value}},[t._v(t._s(e.label))])}),1)],1),a("FormItem",{attrs:{label:"Radius地址：：",prop:"ip"}},[a("Input",{attrs:{placeholder:"请输入Radius地址"},model:{value:t.formValidate.ip,callback:function(e){t.$set(t.formValidate,"ip","string"===typeof e?e.trim():e)},expression:"formValidate.ip"}})],1),a("FormItem",{attrs:{label:"认证端口：",prop:"authPort"}},[a("Input",{attrs:{placeholder:"请输入认证端口"},model:{value:t.formValidate.authPort,callback:function(e){t.$set(t.formValidate,"authPort","string"===typeof e?e.trim():e)},expression:"formValidate.authPort"}})],1),a("FormItem",{attrs:{label:"计费端口：",prop:"feePort"}},[a("Input",{attrs:{placeholder:"请输入计费端口"},model:{value:t.formValidate.feePort,callback:function(e){t.$set(t.formValidate,"feePort","string"===typeof e?e.trim():e)},expression:"formValidate.feePort"}})],1),a("FormItem",{attrs:{label:"共享密钥：",prop:"sharedKey"}},[a("Input",{attrs:{placeholder:"请输入共享密钥"},model:{value:t.formValidate.sharedKey,callback:function(e){t.$set(t.formValidate,"sharedKey","string"===typeof e?e.trim():e)},expression:"formValidate.sharedKey"}})],1)],1)],1):a("div",{key:!t.isEdit,staticClass:"formed-form"},[a("div",{staticClass:"formed-form-part"},[a("div",{staticClass:"formed-form-part-title"},[t._v("设备参数")]),a("div",{staticClass:"formed-form-item"},[a("span",[t._v("设备型号：")]),a("span",[t._v(t._s(t.acDeviceIdList[t.showData.acDeviceId-1].label))])]),3!==t.showData.acDeviceId&&4!==t.showData.acDeviceId?[a("div",{staticClass:"formed-form-item"},[a("span",[t._v("AC设备地址：")]),a("span",[t._v(t._s(t.showData.deviceConfig.deviceAddress))])]),a("div",{staticClass:"formed-form-item"},[a("span",[t._v("AC监听端口：")]),a("span",[t._v(t._s(t.showData.deviceConfig.monitorPort))])]),a("div",{staticClass:"formed-form-item"},[a("span",[t._v("协议版本号：")]),a("span",[t._v(t._s(t.showData.deviceConfig.protocolVersion))])]),a("div",{staticClass:"formed-form-item"},[a("span",[t._v("认证类型：")]),a("span",[t._v(t._s(t.showData.deviceConfig.authType))])]),a("div",{staticClass:"formed-form-item"},[a("span",[t._v("超时等待时间：")]),a("span",[t._v(t._s(t.showData.deviceConfig.timeOut))])])]:t._e(),3===t.showData.acDeviceId?[a("div",{staticClass:"formed-form-item"},[a("span",[t._v("switch_url：")]),a("span",[t._v(t._s(t.showData.deviceConfig.switchUrl))])]),a("div",{staticClass:"formed-form-item"},[a("span",[t._v("orig_url：")]),a("span",[t._v(t._s(t.showData.deviceConfig.origUrl))])]),a("div",{staticClass:"formed-form-item"},[a("span",[t._v("opcode：")]),a("span",[t._v(t._s(t.showData.deviceConfig.opcode))])]),a("div",{staticClass:"formed-form-item"},[a("span",[t._v("agree：")]),a("span",[t._v(t._s(t.showData.deviceConfig.agree))])])]:t._e(),4===t.showData.acDeviceId?[a("div",{staticClass:"formed-form-item"},[a("span",[t._v("switch_url：")]),a("span",[t._v(t._s(t.showData.deviceConfig.switchUrl))])]),a("div",{staticClass:"formed-form-item"},[a("span",[t._v("buttonClicked：")]),a("span",[t._v(t._s(t.showData.deviceConfig.buttonClicked))])]),a("div",{staticClass:"formed-form-item"},[a("span",[t._v("err_flag：")]),a("span",[t._v(t._s(t.showData.deviceConfig.errFlag))])]),a("div",{staticClass:"formed-form-item"},[a("span",[t._v("err_msg：")]),a("span",[t._v(t._s(t.showData.deviceConfig.errMsg))])]),a("div",{staticClass:"formed-form-item"},[a("span",[t._v("info_flag：")]),a("span",[t._v(t._s(t.showData.deviceConfig.infoFlag))])]),a("div",{staticClass:"formed-form-item"},[a("span",[t._v("info_msg：")]),a("span",[t._v(t._s(t.showData.deviceConfig.infoMsg))])]),a("div",{staticClass:"formed-form-item"},[a("span",[t._v("redirect_url：")]),a("span",[t._v(t._s(t.showData.deviceConfig.redirectUrl))])]),a("div",{staticClass:"formed-form-item"},[a("span",[t._v("network_name：")]),a("span",[t._v(t._s(t.showData.deviceConfig.networkName))])])]:t._e()],2),a("div",{staticClass:"formed-form-part"},[a("div",{staticClass:"formed-form-part-title"},[t._v("Radius配置")]),a("div",{staticClass:"formed-form-item"},[a("span",[t._v("协议类型：")]),a("span",[t._v(t._s(1===t.showData.radiusConfigDomain.protocolType?"CHAP":"PAP"))])]),a("div",{staticClass:"formed-form-item"},[a("span",[t._v("Radius地址：")]),a("span",[t._v(t._s(t.showData.radiusConfigDomain.ip))])]),a("div",{staticClass:"formed-form-item"},[a("span",[t._v("认证端口：")]),a("span",[t._v(t._s(t.showData.radiusConfigDomain.port))])]),a("div",{staticClass:"formed-form-item"},[a("span",[t._v("计费端口：")]),a("span",[t._v(t._s(t.showData.radiusConfigDomain.feePort))])]),a("div",{staticClass:"formed-form-item"},[a("span",[t._v("共享密钥：")]),a("span",[t._v(t._s(t.showData.radiusConfigDomain.sharedKey))])])])])]),t.isEdit?a("div",{staticClass:"formed-footer"},[a("myButton",{attrs:{btnType:"info"},on:{click:function(e){t.handleSubmit("formValidate")}}},[t._v("保存")]),a("myButton",{on:{click:t.cancel}},[t._v("取消")])],1):t._e()],1)},p=[],h=(a("6b54"),{data:function(){return{isEdit:!1,message:{text:"保存成功!",show:!1,duration:1,onClose:this.close},selectType:"",showData:{},formValidate:{id:"",acDeviceId:"",deviceAddress:"",monitorPort:"",protocolVersion:"",authType:"",timeOut:"",switchUrlAruba:"",origUrl:"",opcode:"",agree:"",switchUrlCisco:"",buttonClicked:"",errFlag:"",errMsg:"",infoFlag:"",infoMsg:"",redirectUrl:"",networkName:"",protocolType:"",ip:"",authPort:"",feePort:"",sharedKey:""},ruleValidate:{acDeviceId:[{required:!0,message:"请选择AC设备型号",trigger:"blue",type:"number"}],deviceAddress:[{required:!0,message:"请输入设备地址",trigger:"blur"}],monitorPort:[{required:!0,message:"输入监听端口",trigger:"blur"}],authType:[{required:!0,message:"请输入认证类型",trigger:"blur"}],timeOut:[{required:!0,message:"请输入超时等待时间",trigger:"blur"}]},ruleValidateRadius:{protocolType:[{required:!0,message:"请选择协议类型",trigger:"blur",type:"number"}],ip:[{required:!0,message:"请输入Radius地址",trigger:"blur"}],authPort:[{required:!0,message:"请输入认证端口",trigger:"blur"}],feePort:[{required:!0,message:"请输入计费端口",trigger:"blur"}],sharedKey:[{required:!0,message:"请输入共享秘钥",trigger:"blur"}]},acDeviceIdList:[{label:"HUAWEI",value:1},{label:"H3C",value:2},{label:"Aruba",value:3},{label:"Cisco",value:4},{label:"锐捷",value:5}],protocolTypeList:[{label:"CHAP",value:1},{label:"PAP",value:2}]}},props:["data"],created:function(){var t=this.$props.data;this.getData(t)},methods:{edit:function(){this.isEdit=!0,this.$emit("statusChange",{isEdit:this.isEdit,name:"ac"}),this.getData(this.$props.data)},cancel:function(){this.isEdit=!1,this.$emit("statusChange",{isEdit:this.isEdit,name:"ac"})},getData:function(t){var e={acDeviceId:"",acId:"",deviceConfig:{},radiusConfigDomain:""};e.acDeviceId=t.acSetInfo.acDeviceId,e.deviceConfig=JSON.parse(t.acSetInfo.deviceConfig),e.radiusConfigDomain=t.radiusConfigDomain,this.showData=JSON.parse(JSON.stringify(e)),this.formValidate.id=t.wifiPotalPageSettingInfo.id,this.formValidate.acDeviceId=t.acSetInfo.acDeviceId,this.formValidate.acId=t.wifiPotalPageSettingInfo.acId;var a=JSON.parse(t.acSetInfo.deviceConfig);3===this.formValidate.acDeviceId?(this.formValidate.switchUrlAruba=a.switchUrl,this.formValidate.origUrl=a.origUrl,this.formValidate.opcode=a.opcode,this.formValidate.agree=a.agree):4===this.formValidate.acDeviceId?(this.formValidate.switchUrlCisco=a.switchUrl,this.formValidate.buttonClicked=a.buttonClicked,this.formValidate.errFlag=a.errFlag,this.formValidate.errMsg=a.errMsg,this.formValidate.infoFlag=a.infoFlag,this.formValidate.infoMsg=a.infoMsg,this.formValidate.redirectUrl=a.redirectUrl,this.formValidate.networkName=a.networkName):(this.formValidate.deviceAddress=a.deviceAddress,this.formValidate.monitorPort=a.monitorPort,this.formValidate.protocolVersion=a.protocolVersion,this.formValidate.authType=a.authType,this.formValidate.timeOut=a.timeOut),this.formValidate.radiusId=t.radiusConfigDomain.id,this.formValidate.protocolType=t.radiusConfigDomain.protocolType,this.formValidate.ip=t.radiusConfigDomain.ip,this.formValidate.authPort=t.radiusConfigDomain.port.toString(),this.formValidate.feePort=t.radiusConfigDomain.feePort.toString(),this.formValidate.sharedKey=t.radiusConfigDomain.sharedKey},handleSubmit:function(){var t=this,e=null;this.$refs["formValidateRadius"].validate(function(a){e=a;var i=!0;3!==t.formValidate.acDeviceId&&4!==t.formValidate.acDeviceId&&t.$refs["formValidate"].validate(function(t){i=t}),e=e&&i}),e?this.saveData():this.$myMessage.error("表单验证失败，请重试")},saveData:function(){var t=this,e={};e=3===this.formValidate.acDeviceId?{switchUrl:this.formValidate.switchUrlAruba,origUrl:this.formValidate.origUrl,opcode:this.formValidate.opcode,agree:this.formValidate.agree}:4===this.formValidate.acDeviceId?{switchUrl:this.formValidate.switchUrlCisco,buttonClicked:this.formValidate.buttonClicked,errFlag:this.formValidate.errFlag,errMsg:this.formValidate.errMsg,infoFlag:this.formValidate.infoFlag,infoMsg:this.formValidate.infoMsg,redirectUrl:this.formValidate.redirectUrl,networkName:this.formValidate.networkName}:{deviceAddress:this.formValidate.deviceAddress,monitorPort:this.formValidate.monitorPort,protocolVersion:this.formValidate.protocolVersion,authType:this.formValidate.authType,timeOut:this.formValidate.timeOut};var a={portalId:this.formValidate.id,acId:this.formValidate.acId,radiusId:this.formValidate.radiusId,acDeviceId:this.formValidate.acDeviceId,deviceConfig:JSON.stringify(e),protocolType:this.formValidate.protocolType,ip:this.formValidate.ip,port:this.formValidate.authPort,feePort:this.formValidate.feePort,sharedKey:this.formValidate.sharedKey};this.axios({method:"post",data:a,url:"/cipher/wifiportal/updateTwo"}).then(function(e){0===e.data.return_code?(t.$myMessage.success(e.data.return_msg),t.cancel(),t.$emit("ListenChild",t.formValidate)):t.$myMessage.error(e.data.return_msg)}).catch(function(t){console.log(t)})}}}),f=h,g=(a("8b2f"),Object(c["a"])(f,m,p,!1,null,"a8c959a6",null)),v=g.exports,b=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-portal formed-wrap"},[a("transition",{attrs:{name:"fade",mode:"out-in"}},[t.isEdit?a("div",{key:"edit",staticClass:"formed-form"},[a("Form",{ref:"formValidate",attrs:{model:t.formValidate,rules:t.ruleValidate}},[a("div",{staticClass:"formed-form-part"},[a("div",{staticClass:"formed-form-part-title"},[t._v("配置登录页")]),a("div",{staticClass:"formed-form-item page clearfix"},[a("div",{staticClass:"page-top clearfix"},[a("FormItem",{staticClass:"img"},[a("Upload",{ref:"upload",staticStyle:{width:"50px",height:"48px",display:"inline-block"},attrs:{"show-upload-list":!1,"on-success":t.handleSuccessLogo,format:["jpg","jpeg","png"],"max-size":2048,"on-format-error":t.handleFormatError,"on-exceeded-size":t.handleMaxSize,type:"drag",action:"/cipher/app/imgUpload"}},[a("img",{attrs:{src:t.logo}})])],1),a("FormItem",{staticClass:"text",attrs:{prop:"topText"}},[a("Input",{model:{value:t.formValidate.topText,callback:function(e){t.$set(t.formValidate,"topText","string"===typeof e?e.trim():e)},expression:"formValidate.topText"}})],1)],1),a("div",{staticClass:"page-center"},[0===t.type?a("FormItem",{staticClass:"pageleft"},[a("Upload",{ref:"upload",staticStyle:{height:"350px"},attrs:{"show-upload-list":!1,format:["jpg","jpeg","png"],"max-size":2048,"on-format-error":t.handleFormatError,type:"drag",action:"/cipher/app/imgUpload","on-success":t.handleSuccessLogoDraw}},[t.loginDraw?a("img",{staticClass:"pageleft",attrs:{src:t.loginDraw}}):t._e()])],1):t._e(),a("div",{staticClass:"pageright"},[a("FormItem",{staticClass:"page-right-title",attrs:{prop:"loginText"}},[a("Input",{model:{value:t.formValidate.loginText,callback:function(e){t.$set(t.formValidate,"loginText","string"===typeof e?e.trim():e)},expression:"formValidate.loginText"}})],1),a("img",{attrs:{src:t.loginUrl}})],1)],1),a("div",{staticClass:"page-bottom"},[t._v("©2019 CipherChina.com All rights reserved.")])])]),a("div",{staticClass:"formed-form-part"},[a("div",{staticClass:"formed-form-part-title"},[t._v("配置登录成功页")]),a("div",{staticClass:"formed-form-item page clearfix"},[a("div",{staticClass:"page-top clearfix"},[a("FormItem",{staticClass:"img"},[a("img",{attrs:{src:t.logo}})]),a("FormItem",{staticClass:"text",attrs:{prop:"leftTitle"}},[t._v("\n                "+t._s(t.formValidate.topText)+"\n              ")])],1),a("div",{staticClass:"page-center"},[a("div",{staticClass:"pageright"},[a("FormItem",{staticClass:"page-right-title page-right-success-title",attrs:{prop:"successText"}},[a("Input",{model:{value:t.formValidate.successText,callback:function(e){t.$set(t.formValidate,"successText","string"===typeof e?e.trim():e)},expression:"formValidate.successText"}})],1),a("img",{attrs:{src:t.loginSuccessUrl}})],1)]),a("div",{staticClass:"page-bottom"},[t._v("©2019 CipherChina.com All rights reserved.")])])])]),t.isEdit?a("div",{staticClass:"formed-footer"},[a("myButton",{attrs:{btnType:"info"},on:{click:function(e){t.handleSubmit("formValidate")}}},[t._v("保存")]),a("myButton",{on:{click:t.cancel}},[t._v("取消")])],1):t._e()],1):a("div",{key:!t.isEdit,staticClass:"formed-form"},[a("div",{staticClass:"formed-form-part"},[a("div",{staticClass:"formed-form-part-title"},[t._v("配置登录页")]),a("div",{staticClass:"formed-form-item page clearfix"},[a("div",{staticClass:"page-top clearfix"},[a("div",{staticClass:"img"},[a("img",{attrs:{src:t.showData.logo}})]),a("div",{staticClass:"text"},[t._v(t._s(t.showData.topText))])]),a("div",{staticClass:"page-center"},[0===t.type?a("div",{staticClass:"pageleft"},[a("img",{staticClass:"pageleft",attrs:{src:t.showData.loginDraw}})]):t._e(),a("div",{staticClass:"pageright"},[a("div",{staticClass:"page-right-title"},[t._v("\n                "+t._s(t.showData.loginText)+"\n              ")]),a("img",{attrs:{src:t.loginUrl}})])]),a("div",{staticClass:"page-bottom"},[t._v("©2019 CipherChina.com All rights reserved.")])])]),a("div",{staticClass:"formed-form-part"},[a("div",{staticClass:"formed-form-part-title"},[t._v("配置登录成功页")]),a("div",{staticClass:"formed-form-item page clearfix"},[a("div",{staticClass:"page-top clearfix"},[a("div",{staticClass:"img"},[a("img",{attrs:{src:t.showData.logo}})]),a("div",{staticClass:"text",attrs:{prop:"leftTitle"}},[t._v("\n              "+t._s(t.showData.topText)+"\n            ")])]),a("div",{staticClass:"page-center"},[a("div",{staticClass:"pageright"},[a("div",{staticClass:"page-right-title page-right-success-title"},[t._v("\n                "+t._s(t.showData.successText)+"\n              ")]),a("img",{attrs:{src:t.loginSuccessUrl}})])]),a("div",{staticClass:"page-bottom"},[t._v("©2019 CipherChina.com All rights reserved.")])])])])])],1)},y=[],I=a("2c82"),w={data:function(){return{isEdit:!1,showData:{},loginUrl:a("8be3"),loginSuccessUrl:a("486b"),logo:"",loginDraw:"",type:"",formValidate:{logo:"",topText:"",loginDraw:"",loginText:"",successText:""},ruleValidate:{topText:[{type:"string",max:30,message:"标题不能超过30个字符",trigger:"blur"}],loginText:[{type:"string",max:30,message:"标题不能超过30个字符",trigger:"blur"}],successText:[{type:"string",max:30,message:"标题不能超过30个字符",trigger:"blur"}]}}},props:["data"],created:function(){var t=this.$props.data.wifiPotalPageSettingInfo;this.getData(t)},methods:{edit:function(){this.isEdit=!0,this.getData(this.$props.data.wifiPotalPageSettingInfo)},cancel:function(){this.isEdit=!1},getData:function(t){this.showData=Object.assign({},t),this.type=t.portalType,this.formValidate.logo=t.logo,this.formValidate.topText=t.topText,this.formValidate.loginDraw=t.loginDraw,this.formValidate.loginText=t.loginText,this.formValidate.successText=t.successText},handleSubmit:function(t){var e=this;this.$refs[t].validate(function(t){t&&e.saveData()})},saveData:function(){var t=this,e={id:this.showData.id,logo:this.logo,topText:this.formValidate.topText,loginDraw:this.loginDraw,loginText:this.formValidate.loginText,successText:this.formValidate.successText};this.axios({method:"post",data:e,url:"/cipher/wifiportal/updateOne"}).then(function(e){0===e.data.return_code?(t.$myMessage.success(e.data.return_msg),t.isEdit=!1,t.$emit("ListenChild",t.formValidate)):t.$myMessage.error(e.data.return_msg)}).catch(function(t){console.log(t)})},handleSuccessLogo:function(t,e){0===t.status?(this.logo=t.imgName,this.updateSuccessModal()):this.updateFailModal()},handleSuccessLogoDraw:function(t,e){0===t.status?(this.loginDraw=t.imgName,this.updateSuccessModal()):this.updateFailModal()},updateSuccessModal:function(){this.$Modal.success({title:"上传成功",content:"图片上传成功",width:I["a"].simpleModal.width})},updateFailModal:function(){this.$Modal.error({title:"上传失败",content:"图片上传失败",width:I["a"].simpleModal.width})},handleFormatError:function(t){this.$Modal.error({title:"请选择一张图片！",content:"文件不正确！ "+t.name+" 该文件不是一个图片"})},handleMaxSize:function(t){this.$Notice.warning({title:"大小超过2M",desc:"该文件  "+t.name+"太大，不能超过2M"})}}},A=w,C=(a("821c"),Object(c["a"])(A,b,y,!1,null,"44aeb90a",null)),_=C.exports,x={components:{Base:d,Ac:v,Page:_},data:function(){return{PageSet:"base",id:"",componentStatus:{isPortalBaseEdit:!1,isPortalAcEdit:!1,isPortalPageEdit:!1},showData:{},isGetData:!1}},computed:{isShowEdit:function(){var t;switch(this.PageSet){case"base":t=!this.componentStatus.isPortalBaseEdit;break;case"ac":t=!this.componentStatus.isPortalAcEdit;break;case"page":t=!this.componentStatus.isPortalPageEdit;break}return t}},created:function(){this.id=this.$route.query.id,this.getData()},methods:{changeStatus:function(){this.$refs[this.PageSet].edit()},getChildStatus:function(t){"base"===t.name?this.componentStatus.isPortalBaseEdit=t.isEdit:"ac"===t.name?this.componentStatus.isPortalAcEdit=t.isEdit:this.componentStatus.isPortalPageEdit=t.isEdit},getData:function(){var t=this;this.axios({method:"post",data:{id:this.id},url:"/cipher/wifiportal/wifiShow"}).then(function(e){0===e.data.return_code?(t.showData=Object.assign({},e.data),t.isGetData=!0):t.$myMessage.error(e.data.return_msg)}).catch(function(t){console.log(t)})},reGetData:function(t){this.isGetData=!1,this.getData()}}},S=x,D=(a("95ab"),Object(c["a"])(S,i,s,!1,null,"3df5ea98",null));e["default"]=D.exports},6452:function(t,e,a){"use strict";var i=a("ab04"),s=a.n(i);s.a},"65c5":function(t,e,a){},"67ab":function(t,e,a){var i=a("ca5a")("meta"),s=a("d3f4"),o=a("69a8"),r=a("86cc").f,n=0,l=Object.isExtensible||function(){return!0},c=!a("79e5")(function(){return l(Object.preventExtensions({}))}),u=function(t){r(t,i,{value:{i:"O"+ ++n,w:{}}})},d=function(t,e){if(!s(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,i)){if(!l(t))return"F";if(!e)return"E";u(t)}return t[i].i},m=function(t,e){if(!o(t,i)){if(!l(t))return!0;if(!e)return!1;u(t)}return t[i].w},p=function(t){return c&&h.NEED&&l(t)&&!o(t,i)&&u(t),t},h=t.exports={KEY:i,NEED:!1,fastKey:d,getWeak:m,onFreeze:p}},"68ff":function(t,e,a){},"6a6b":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Modal",{staticClass:"synModal",attrs:{closable:!1,"footer-hide":!0,width:"528"},on:{"on-visible-change":t.visibleChange},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[a("div",{staticClass:"header"},[a("Icon",{attrs:{type:"md-alert"}}),a("span",[t._v(t._s(t.title))])],1),a("div",{staticClass:"center"},[t._v(t._s(t.content))]),a("div",{staticClass:"footer"},[a("Button",{attrs:{type:"primary"},on:{click:t.ok}},[t._v(t._s(t.okString))]),a("Button",{on:{click:t.close}},[t._v("取消")])],1)])],1)},s=[],o={data:function(){return{showModal:this.flag}},props:{flag:{type:Boolean,default:!1},title:{type:String,default:"失败"},content:{type:String,default:"请稍后重试"},onOk:{type:Function},onClose:{type:Function},okString:{type:String,default:"确认"}},methods:{ok:function(){this.showModal=!1,this.onOk()},close:function(){this.showModal=!1,this.onClose()},visibleChange:function(){this.close()}}},r=o,n=(a("d180"),a("2877")),l=Object(n["a"])(r,i,s,!1,null,"0ea2a471",null);e["a"]=l.exports},"6a7a":function(t,e,a){},"6b03":function(t,e,a){"use strict";var i=a("9d18"),s=a.n(i);s.a},"6b79":function(t,e,a){},"6bf2":function(t,e,a){},"6d0d":function(t,e,a){"use strict";var i=a("0dc6"),s=a.n(i);s.a},"6e30":function(t,e,a){"use strict";var i=a("3f93"),s=a.n(i);s.a},"6ebf":function(t,e,a){"use strict";var i=a("0a55"),s=a.n(i);s.a},7059:function(t,e,a){},"70e7":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"custom-test"},[t._v("\n  按钮：\n  "),a("myButton",[t._v("default")]),a("myButton",{attrs:{btnType:"primary"}},[t._v("primary")]),a("myButton",{attrs:{btnType:"info"}},[t._v("info")]),a("myButton",{attrs:{btnType:"secondary"}},[t._v("secondary")]),a("myButton",{attrs:{btnType:"dark"}},[t._v("dark")]),a("myButton",{attrs:{btnType:"secondary",btnRadius:"none"}},[t._v("无圆角")]),a("myButton",{attrs:{btnType:"secondary",btnRadius:"half"}},[t._v("圆角")]),a("myButton",{on:{click:t.test}},[t._v("default 点击事件")]),a("myButton",{attrs:{disabled:""},on:{click:t.test}},[t._v("禁用")]),a("myDropBtn",[t._v("下拉按钮")]),a("br"),a("br"),t._v("\n  下拉框：\n  "),a("mySelect",{attrs:{dataList:t.list1,showString:"请选择数字"},on:{"on-change":t.getData},model:{value:t.value1,callback:function(e){t.value1=e},expression:"value1"}}),a("mySelect",{attrs:{dataList:t.list2,showString:"请选择数字",valueKey:"type",labelKey:"desc"},on:{"on-change":t.getData},model:{value:t.value1,callback:function(e){t.value1=e},expression:"value1"}}),t._v("\n  "+t._s(t.value1)+"\n  "),a("br"),a("br"),t._v("\n  输入框："),a("br"),t._v("\n  默认-值1："+t._s(t.value1)+"\n  "),a("myInput",{attrs:{width:"500px",placeholder:"请输入"},model:{value:t.value1,callback:function(e){t.value1=e},expression:"value1"}}),t._v("\n  半圆角-值1："+t._s(t.value1)+"\n  "),a("myInput",{attrs:{width:"200px",radius:"half"},model:{value:t.value1,callback:function(e){t.value1=e},expression:"value1"}}),t._v("\n  无圆角-值1："+t._s(t.value1)+"\n  "),a("myInput",{attrs:{radius:"none"},model:{value:t.value1,callback:function(e){t.value1=e},expression:"value1"}}),t._v("\n  文本域-值2:"+t._s(t.value2)+"\n  "),a("myInput",{attrs:{width:"200px",type:"textarea",radius:"none"},model:{value:t.value2,callback:function(e){t.value2=e},expression:"value2"}}),t._v("\n  文字按钮-值3:\n  "),a("myInput",{attrs:{btnText:"获取验证码",width:"200px"},on:{handleClick:t.test},model:{value:t.value3,callback:function(e){t.value3=e},expression:"value3"}}),t._v("\n  search按钮-值3:\n  "),a("myInput",{attrs:{radius:"half",search:!0,width:"200px"},on:{handleClick:t.test},model:{value:t.value3,callback:function(e){t.value3=e},expression:"value3"}}),t._v("\n  只读-值3\n  "),a("myInput",{attrs:{width:"200px",readonly:!0},model:{value:t.value3,callback:function(e){t.value3=e},expression:"value3"}}),t._v("\n  数字-值4:\n  "),a("myInput",{attrs:{min:0,max:99,precision:0,width:"200px",type:"number"},model:{value:t.value4,callback:function(e){t.value4=e},expression:"value4"}}),t._v("\n  报错：\n  "),a("myInput",{attrs:{width:"200px",error:"出错"},model:{value:t.value4,callback:function(e){t.value4=e},expression:"value4"}})],1)},s=[],o={data:function(){return{list1:[{value:"0",label:"选项一"},{value:"1",label:"选项二"},{value:"2",label:"选项三"}],list2:[{type:"0",desc:"选项一"},{type:"1",desc:"选项二"},{type:"2",desc:"选项三"}],value1:"test1",value2:"test2",value3:"test3",value4:1}},methods:{test:function(){this.$myMessage.success("操作")},getData:function(t){console.log(t)}}},r=o,n=(a("99c2"),a("2877")),l=Object(n["a"])(r,i,s,!1,null,"13bfd426",null);e["default"]=l.exports},7123:function(t,e,a){},7340:function(t,e,a){"use strict";e["a"]={orgList:"/cipher/organization/list?json",newUserGetlist:"/cipher/newUser/getlist?json",userGetlist:"/cipher/newUser/userlist?json",createDepartment:"/cipher/group/adding",parentDepart:"/cipher/group/common?json",elseDepart:"/cipher/group/commons",groupEditEcho:"/cipher/group/editEcho",groupEdit:"/cipher/group/edited",groupDelete:"/cipher/newUser/groupDelete",setStatus:"/cipher/user/status",unlock:"/cipher/newUser/unlock",resetPW:"/cipher/user/reset/password",delete:"/cipher/newUser/delete",appList:"/cipher/group/appList",addApp:"cipher/group/addApp",groupTreeList:"/cipher/group/treeList",securityGroup:"/cipher/team/teamList",add:"/cipher/newUser/add",getUserDetails:"/cipher/userMsg/modifyUser",updateUserDetails:"/cipher/user/updateNewUser",newList:"/cipher/welcomeuser/newList?json",getStrategy:"/cipher/resetPwd/getCode",getADComplexRate:"/cipher/auth/management/password/info",resetAdPwd:"/cipher/resetPwd/resetAdPwd",getOuTree:"/cipher/ldap/getOuTree",ldapAdd:"/cipher/ldap/add",statusOk:200,successOk:1,returnOk:0}},"743c":function(t,e,a){},"756c":function(t,e,a){},"76b5":function(t,e,a){"use strict";var i=a("174b"),s=a.n(i);s.a},"773d":function(t,e,a){"use strict";var i=a("4f8a"),s=a.n(i);s.a},7769:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wrap"},[a("div",{staticClass:"formed-header"},[a("div",{staticClass:"formed-header-title"},[a("span",[t._v(t._s(t.teamName))]),a("span",[t._v("(安全组ID："+t._s(t.dsgTeamId)+")")])]),a("div",{staticClass:"formed-header-btn"},[a("myButton",{attrs:{btnType:"info"},on:{click:t.rename}},[t._v("重命名安全组")])],1)]),a("div",{staticClass:"formed-container"},[a("myComplexTabs",{staticClass:"tabs"},[a("myPane",{attrs:{label:"成员列表",name:"user"}},[a("userList")],1),a("myPane",{attrs:{label:"应用权限",name:"app"}},[a("appList")],1),a("myPane",{attrs:{label:"用户导入设置",name:"rule"}},[a("ruleList")],1)],1)],1),a("Modal",{staticClass:"create-modal",attrs:{width:"528"},on:{"on-ok":t.dosaveteamName},model:{value:t.modal1,callback:function(e){t.modal1=e},expression:"modal1"}},[a("p",{attrs:{slot:"header"},slot:"header"},[a("span",{staticClass:"title"},[t._v("重命名安全组")]),a("span",{staticClass:"sub-title"},[t._v("（"+t._s(t.teamName)+"）")])]),a("div",{staticClass:"create-modal-content"},[a("span",{staticStyle:{"font-size":"14px"}},[t._v("新的安全组名称：")]),a("myInput",{model:{value:t.teamName1,callback:function(e){t.teamName1=e},expression:"teamName1"}})],1)])],1)},s=[],o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tabled-wrap"},[a("div",{staticClass:"tabled-header"},[a("div",{staticClass:"tabled-header-search"},[a("myInput",{attrs:{placeholder:"请输入姓名 / 账号",radius:"half",search:!0},on:{handleClick:t.queryNamebtn},model:{value:t.queryName,callback:function(e){t.queryName=e},expression:"queryName"}})],1),a("div",{staticClass:"tabled-header-btn"},[a("myButton",{attrs:{btnType:"info"},on:{click:t.addpeople}},[t._v("添加成员")])],1)]),a("div",{staticClass:"tabled-table"},[a("Table",{attrs:{border:"",columns:t.columns7,data:t.data6}})],1),a("Page",{staticClass:"tabled-page",attrs:{total:t.total,current:t.curentPage,"show-elevator":"","show-sizer":"","show-total":""},on:{"on-change":t.changePage,"on-page-size-change":t.pageSizeChange}}),a("Modal",{staticClass:"tree-transfer",attrs:{width:"668"},model:{value:t.showMadal,callback:function(e){t.showMadal=e},expression:"showMadal"}},[a("p",{staticClass:"header",attrs:{slot:"header"},slot:"header"},[a("span",{staticClass:"title"},[t._v("添加安全组用户")]),a("span",{staticClass:"sub-title"},[t._v("（"+t._s(t.teamName)+"）")])]),a("div",[a("TreeTransfer",{attrs:{leftTreeData:t.data,leftDataType:t.dataType,placeholder:t.placeholder},on:{rightData:t.getRightData}},[a("span",{attrs:{slot:"leftText"},slot:"leftText"},[t._v("授权用户")]),a("span",{attrs:{slot:"rightText"},slot:"rightText"},[t._v("已授权用户")])])],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"primary",loading:t.loading,disabled:t.isDisable},on:{click:t.ok}},[t._v("保存")]),a("Button",{staticStyle:{"margin-left":"10px"},on:{click:t.reset}},[t._v("重置")])],1)])],1)},r=[],n=(a("96cf"),a("1da1")),l=(a("ac6a"),a("c791")),c={title:{target:"title",original:"text"},children:{target:"children",original:"nodes"}},u={components:{TreeTransfer:l["a"]},data:function(){var t=this;return{dataBak:[],placeholder:"",userIds:"",data:[],data2:[],dataType:0,modal1:!1,showMadal:!1,isDisable:!1,loading:!1,teamName:"",teamId:"",queryName:"",total:0,curentPage:1,size:10,columns7:[{title:"姓名",key:"userName",align:"center",render:function(e,a){return e("a",[e("span",{on:{click:function(){t.toUserDetail(a.index)}}},t.data6[a.index].userName)])}},{title:"主账号",key:"accountNumber",align:"center"},{title:"邮箱",key:"mail",align:"center"},{title:"状态",key:"status",align:"center"},{title:"操作",key:"edit",align:"center",render:function(e,a){return e("a",[e("span",{on:{click:function(){t.delete(a.index)}}},"移出安全组")])}}],data6:[]}},created:function(){this.teamId=this.$route.query.teamId,this.teamName=this.$route.query.teamName},mounted:function(){var t=this,e={rows:t.size,page:1,teamId:t.teamId,sidx:"",sord:"asc"};t.finddata(e)},methods:{toUserDetail:function(t){this.$router.push({path:"/userCatalogOS/detail",query:{accountNumber:this.data6[t].accountNumber,groupId:this.data6[t].groupId,uuid:this.data6[t].uuid}})},reset:function(){this.data=this.$common.clone(this.dataBak)},getRightData:function(t){var e=[];t.forEach(function(t){e.push(t.uuid)}),this.userIds=e.join(",")},ok:function(){var t=this;this.setUnderway();var e={userIds:this.userIds,teamId:this.teamId};this.axios({method:"post",url:"/cipher/team/addUser",data:e}).then(function(e){t.setCompleted(),t.cancel2(),1===e.data.return_code?t.$myMessage.success(e.data.return_msg):0===e.data.return_code&&t.$Modal.error({title:"提示",content:e.data.return_msg})}).catch(function(e){t.setCompleted(),console.log(e)})},init:function(t){var e=this;this.dataType=1;var a={id:t};this.axios({method:"post",url:"/cipher/team/getUser?json",data:a}).then(function(t){e.data2=t.data.msg.trees,e.data2=e.$common.cloneAssemblyAssignData(t.data.msg.trees,c,!0),e.data2=e.$common.initSelect(e.data2),e.data=e.data2,e.dataBak=e.$common.clone(e.data)}).catch(function(t){console.log(t)})},cancel2:function(){this.showMadal=!1,this.dataType=0;var t={rows:this.size,page:1,teamId:this.teamId,sidx:"",sord:"asc"};this.finddata(t)},queryNamebtn:function(){var t=this,e={rows:t.size,page:1,queryName:t.queryName,sidx:"",sord:"asc",teamId:t.teamId};this.finddata(e)},finddata:function(t){var e=this;this.axios({method:"post",url:"/cipher/team/userList",data:t}).then(function(t){e.data6=t.data.rows,e.total=t.data.total}).catch(function(t){console.log(t)})},pageSizeChange:function(t){var e={teamId:this.teamId,rows:t,page:1,sidx:"",sord:"asc",queryName:this.queryName};this.finddata(e),this.size=t},changePage:function(t){var e={teamId:this.teamId,rows:this.size,page:t,sidx:"",sord:"asc",queryName:this.queryName};this.curentPage=t,this.finddata(e)},addpeople:function(){this.init(this.teamId),this.showMadal=!0},delete:function(t){var e=this,a=this;this.$myModal.confirm({title:"确定将此用户移除安全组吗？",content:"移除后将无法恢复，你还要继续吗？",confirmVal:"继续"}).then(function(){var i=Object(n["a"])(regeneratorRuntime.mark(function i(s){var o;return regeneratorRuntime.wrap(function(i){while(1)switch(i.prev=i.next){case 0:o={teamId:a.teamId,accountNumber:a.data6[t].accountNumber,uuid:a.data6[t].uuid},e.axios({method:"post",url:"/cipher/team/deleteUserMap",data:o}).then(function(e){1===e.data.return_code&&(a.$myMessage.success(e.data.return_msg),a.data6.splice(t,1))}).catch(function(t){console.log(t)});case 2:case"end":return i.stop()}},i,this)}));return function(t){return i.apply(this,arguments)}}()).catch(function(){})},setUnderway:function(){this.loading=!0,this.isDisable=!0},setCompleted:function(){this.loading=!1,this.isDisable=!1,this.showMadal=!1}}},d=u,m=(a("cbca"),a("2877")),p=Object(m["a"])(d,o,r,!1,null,"ad9f4432",null),h=p.exports,f=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tabled-wrap"},[a("div",{staticClass:"tabled-header"},[a("div",{staticClass:"tabled-header-search"},[a("myInput",{attrs:{placeholder:"请输入应用名称",radius:"half",search:!0},on:{handleClick:t.queryNamebtn},model:{value:t.queryName,callback:function(e){t.queryName=e},expression:"queryName"}})],1),a("div",{staticClass:"tabled-header-btn"},[a("myButton",{attrs:{btnType:"info"},on:{click:t.authorization}},[t._v("授权")])],1)]),a("div",{staticClass:"tabled-table"},[a("Table",{attrs:{data:t.data6,border:"",columns:t.columns7}})],1),a("Page",{staticClass:"tabled-page",attrs:{total:t.total,current:t.curentPage,"show-elevator":"","show-sizer":"","show-total":""},on:{"on-change":t.changePage,"on-page-size-change":t.pageSizeChange}}),a("Modal",{staticClass:"tree-transfer",attrs:{width:"668"},on:{"on-cancel":t.cancel},model:{value:t.showMadal,callback:function(e){t.showMadal=e},expression:"showMadal"}},[a("p",{staticClass:"header",attrs:{slot:"header"},slot:"header"},[a("span",{staticClass:"title"},[t._v("添加授权应用")]),a("span",{staticClass:"sub-title"},[t._v("（"+t._s(t.teamName)+"）")])]),a("div",[a("TreeTransfer",{attrs:{leftTreeData:t.data3,leftDataType:t.dataType,placeholder:t.placeholder},on:{rightData:t.getRightData}},[a("span",{attrs:{slot:"leftText"},slot:"leftText"},[t._v("授权应用")]),a("span",{attrs:{slot:"rightText"},slot:"rightText"},[t._v("已授权应用")])])],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"primary",loading:t.loading,disabled:t.isDisable},on:{click:t.saveTeamApplicationMap}},[t._v("保存")]),a("Button",{staticStyle:{"margin-left":"10px"},on:{click:t.reset}},[t._v("重置")])],1)])],1)},g=[],v={components:{TreeTransfer:l["a"]},data:function(){var t=this;return{applicationids:"",curentPage:1,queryName:"",total:0,size:10,placeholder:"",data:[],data3:[],dataType:0,showMadal:!1,isDisable:!1,loading:!1,teamId:"",teamName:"",columns7:[{title:"应用名称",key:"applicationName",align:"center"},{title:"操作",key:"edit",width:400,align:"center",render:function(e,a){return e("a",[e("span",{on:{click:function(){t.cancelAuthration(a.index)}}},"取消授权")])}}],data6:[]}},created:function(){this.teamId=this.$route.query.teamId,this.teamName=this.$route.query.teamName},mounted:function(){var t=this,e={id:t.teamId,rows:t.size,page:1};t.finddata(e)},methods:{queryNamebtn:function(){var t=this,e={id:t.teamId,queryName:t.queryName,rows:t.size,page:1};t.finddata(e)},reset:function(){this.dataType=0,this.findAuthtree()},saveTeamApplicationMap:function(){var t=this;t.setUnderway();var e={id:t.teamId,applicationIds:t.applicationids};this.axios({method:"post",url:"/cipher/team/saveTeamApplicationMap",data:e}).then(function(e){t.setCompleted(),t.cancel(),0===e.data.code?t.$myMessage.success(e.data.msg):1===e.data.code&&t.$myMessage.error(e.data.msg)}).catch(function(e){t.setCompleted(),console.log(e)})},setUnderway:function(){this.loading=!0,this.isDisable=!0},setCompleted:function(){this.loading=!1,this.isDisable=!1,this.showMadal=!1},getRightData:function(t){var e=[];t.forEach(function(t){e.push(t.id)}),this.applicationids=e.join(",")},findAuthtree:function(){var t=this;t.dataType=3;var e={id:t.teamId};this.axios({method:"post",url:"/cipher/team/teamAuthApplication",data:e}).then(function(e){0===e.data.code&&(t.data3=e.data.msg,t.placeholder="请输入应用名")}).catch(function(t){console.log(t)})},cancelAuthration:function(t){var e=this;this.$myModal.confirm({title:"取消授权",content:"确认取消".concat(this.data6[t].applicationName,"对").concat(this.teamName,"的授权吗?"),confirmVal:"继续"}).then(function(){var a=Object(n["a"])(regeneratorRuntime.mark(function a(i){return regeneratorRuntime.wrap(function(a){while(1)switch(a.prev=a.next){case 0:e.cancelAuth(t);case 1:case"end":return a.stop()}},a,this)}));return function(t){return a.apply(this,arguments)}}()).catch(function(){})},cancelAuth:function(t){var e=this,a={applicationId:this.data6[t].id,id:this.teamId};this.axios({method:"post",url:"/cipher/team/cancelAuthration",data:a}).then(function(t){if(0===t.data.code){e.$myMessage.success(t.data.msg);var a={id:e.teamId,rows:e.size,page:1};e.finddata(a)}else 1===t.data.code&&e.$myMessage.error(t.data.msg)}).catch(function(t){console.log(t)})},cancel:function(){this.showMadal=!1,this.dataType=0;var t={id:this.teamId,rows:this.size,page:1};this.finddata(t)},authorization:function(){this.findAuthtree(),this.showMadal=!0},finddata:function(t){var e=this;this.axios({method:"post",url:"/cipher/team/getTeamApplications",data:t}).then(function(t){0===t.data.code&&(e.data6=t.data.rows,e.total=t.data.total)}).catch(function(t){console.log(t)})},pageSizeChange:function(t){var e={id:this.teamId,rows:t,page:1};this.finddata(e),this.size=t},changePage:function(t){var e={id:this.teamId,rows:this.size,page:t};this.curentPage=t,this.finddata(e)}}},b=v,y=(a("8c96"),Object(m["a"])(b,f,g,!1,null,"75862ce1",null)),I=y.exports,w=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wrap"},[a("myButton",{staticClass:"sg-rule-save",attrs:{btnType:"info"},on:{click:t.doSaveRule}},[t._v("立刻执行")]),a("div",{staticClass:"formed-form"},[a("div",{staticClass:"sg-rule-part"},[a("span",[t._v("将符合以下")]),a("mySelect",{staticClass:"sg-rule_select",attrs:{dataList:t.options1,showString:"请选择",valueKey:"type",labelKey:"desc"},model:{value:t.selected1,callback:function(e){t.selected1=e},expression:"selected1"}}),a("span",[t._v("条件的用户自动的移动到当前安全组。")])],1),a("div",{staticClass:"sg-rule-part"},[a("div",{staticClass:"sg-rulr-part-item-title"},[a("div",{staticClass:"text-small-title"},[t._v("选择条件")]),a("div",{staticClass:"text-small-title"},[t._v("匹配规则")]),a("div",{staticClass:"text-small-title"},[t._v("\n          输入参数\n          "),a("Tooltip",{attrs:{trigger:"hover",placement:"top","max-width":"200",content:"如选择条件为部门，输入参数就为组织结构下的某一部门名称，如产品部。"}},[a("Icon",{staticClass:"tip",attrs:{type:"ios-information-circle"}})],1)],1)]),a("div",{staticClass:"sg-rulr-part-item-text"},t._l(t.formDynamic.items,function(e,i){return a("div",{key:i},[a("div",{staticClass:"module"},[a("mySelect",{attrs:{dataList:t.options2,showString:"请选择",valueKey:"type",labelKey:"desc"},model:{value:e.condition,callback:function(a){t.$set(e,"condition",a)},expression:"item.condition"}})],1),a("div",{staticClass:"module"},[a("mySelect",{attrs:{dataList:t.options3,showString:"请选择",valueKey:"type",labelKey:"desc"},model:{value:e.conditionName,callback:function(a){t.$set(e,"conditionName",a)},expression:"item.conditionName"}})],1),a("div",{staticClass:"module"},[a("Input",{staticStyle:{width:"86px"},model:{value:e.paramName,callback:function(a){t.$set(e,"paramName",a)},expression:"item.paramName"}})],1),a("div",{staticClass:"sg-rule-part-btn"},[a("myButton",{on:{click:function(e){t.handleRemove(i)}}},[t._v("删除")]),a("myButton",{attrs:{btnType:"info"},on:{click:t.handleAdd}},[t._v("增加")])],1)])}),0)])]),a("Modal",{attrs:{width:"400",title:"确认执行规则",okText:"继续"},on:{"on-ok":t.ok},model:{value:t.modal1,callback:function(e){t.modal1=e},expression:"modal1"}},[a("p",{staticStyle:{"font-size":"14px"}},[t._v("\n      确认要将以下"+t._s(t.returndata.num)+"个账号加入到"+t._s(t.teamName)+"吗?\n      "),a("br"),a("a",{on:{click:function(e){t.show(t.value)}}},[t._v("查看详情")])])]),a("Modal",{attrs:{title:"移动到当前安全组",width:"600"},model:{value:t.modal2,callback:function(e){t.modal2=e},expression:"modal2"}},[a("div",{staticClass:"modal2"},[a("div",{staticClass:"table"},[a("Table",{attrs:{columns:t.columns1,data:t.data1}})],1),a("Page",{attrs:{total:t.total,current:t.curentPage,"show-elevator":"","show-sizer":"","show-total":""},on:{"on-change":t.changePage,"on-page-size-change":t.pageSizeChange}})],1)])],1)},A=[],C={data:function(){return{index:1,formDynamic:{items:[{condition:1,conditionName:1,paramName:"",index:1}]},value:"",size:10,total:0,curentPage:1,columns1:[{title:"姓名",key:"userName"},{title:"账号",key:"accountNumber"},{title:"部门",key:"groupName"}],data1:[],returndata:[],modal1:!1,modal2:!1,teamId:"",options1:[{type:1,desc:"任何"},{type:2,desc:"全部"}],options2:[],options3:[],teamName:"",selected1:1}},created:function(){this.teamId=this.$route.query.teamId,this.teamName=this.$route.query.teamName},mounted:function(){var t=this,e={},a={};t.finddata1(e),t.finddata2(a)},methods:{handleAdd:function(){var t=0;this.formDynamic.items.forEach(function(e){t+=1}),t<10&&(this.index++,this.formDynamic.items.push({condition:1,conditionName:1,paramName:"",index:this.index}))},handleRemove:function(t){var e=0;this.formDynamic.items.forEach(function(t){e+=1}),e>1&&this.formDynamic.items.splice(t,1)},finddata1:function(t){var e=this;this.axios({method:"post",url:"/cipher/team/ruleContent",data:t}).then(function(t){e.options2=t.data}).catch(function(t){console.log(t)})},finddata2:function(t){var e=this;this.axios({method:"post",url:"/cipher/team/condtionContent",data:t}).then(function(t){e.options3=t.data}).catch(function(t){console.log(t)})},ok:function(){var t=this,e={userIds:this.returndata.uuid,teamId:this.teamId};this.axios({method:"post",url:"/cipher/team/addRuleUser",data:e}).then(function(e){1===e.data.return_code?t.$myMessage.success(e.data.return_msg):t.$Modal.error({title:"提示",content:e.data.return_msg})}).catch(function(t){console.log(t)})},finddata3:function(t){var e=this;this.axios({method:"post",url:"/cipher/team/showUser",data:t}).then(function(t){e.data1=t.data.rows,e.total=t.data.records}).catch(function(t){console.log(t)})},show:function(t){if(this.data1=[],""!==t&&null!==t){var e={page:1,rows:this.size,sidx:"",sord:"asc",userList:t};this.finddata3(e),this.modal2=!0}},pageSizeChange:function(t){var e={rows:t,page:1,sidx:"",sord:"asc",userList:this.value};this.finddata3(e),this.size=t},changePage:function(t){var e={rows:this.size,page:t,sidx:"",sord:"asc",userList:this.value};this.curentPage=t,this.finddata3(e)},doSaveRule:function(){var t=this,e=[],a=[];this.formDynamic.items.forEach(function(t){e.push(t.paramName),a.push({condition:t.condition,conditionName:t.conditionName,paramName:t.paramName})});var i={id:this.teamId,ruleValue:JSON.stringify(a),type:this.selected1,paramName:e};this.axios({method:"post",url:"/cipher/team/addRule",data:i}).then(function(e){if(1===e.data.return_code){t.modal1=!0,t.returndata=e.data;var a=e.data.userList,i="";for(var s in a)i=i+a[s].uuid+",";t.value=escape(i)}}).catch(function(t){console.log(t)})}}},_=C,x=(a("901e"),Object(m["a"])(_,w,A,!1,null,"13d2bd5c",null)),S=x.exports,D={components:{userList:h,appList:I,ruleList:S},data:function(){return{teamName1:"",modal1:!1,teamName:"",teamId:"",dsgTeamId:""}},created:function(){this.teamId=this.$route.query.teamId,this.teamName=this.$route.query.teamName,this.dsgTeamId=this.$route.query.dsgTeamId},methods:{rename:function(){this.teamName1="",this.modal1=!0},dosaveteamName:function(){var t=this;if(null!==t.teamName1&&""!==t.teamName1){var e={id:t.teamId,teamName:t.teamName1};this.axios({method:"post",url:"/cipher/team/addorUpdate",data:e}).then(function(e){1===e.data.return_code?(t.$myMessage.success(e.data.return_msg),t.teamName=t.teamName1):0===e.data.return_code&&(t.$myMessage.error(e.data.return_msg),t.teamName1="")}).catch(function(t){console.log(t)})}else t.$myMessage.error("安全组名称不能为空！")}}},k=D,T=(a("af05"),Object(m["a"])(k,i,s,!1,null,"63a65df9",null));e["default"]=T.exports},7904:function(t,e,a){"use strict";var i=a("e764"),s=a.n(i);s.a},"7abe":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ssAdmin tabled-wrap"},[a("div",{staticClass:"tabled-header app-audit-header"},[a("div",{staticClass:"tabled-header-search"},[a("myInput",{attrs:{placeholder:"请输入姓名 / 账号",radius:"half",search:!0},on:{handleClick:t.queryAdminList},model:{value:t.queryName,callback:function(e){t.queryName=e},expression:"queryName"}})],1),a("div",{staticClass:"tabled-header-btn"},[a("myButton",{attrs:{btnType:"info"},on:{click:t.addAdmin}},[t._v("添加管理员")])],1)]),a("div",{staticClass:"tabled-table"},[a("Table",{attrs:{border:"",columns:t.columns7,data:t.data6}})],1),a("Page",{staticClass:"tabled-page",attrs:{total:t.total,current:t.curentPage,"show-elevator":"","show-sizer":"","show-total":""},on:{"on-change":t.changePage,"on-page-size-change":t.changePageSize}}),a("Modal",{staticClass:"tree-transfer",attrs:{width:"668"},on:{"on-cancelAddModal":t.cancelAddModal},model:{value:t.showAddModal,callback:function(e){t.showAddModal=e},expression:"showAddModal"}},[a("p",{attrs:{slot:"header"},slot:"header"},[a("span",[t._v("添加管理员")])]),a("div",[a("TreeTransfer",{attrs:{leftTreeData:t.data,leftDataType:t.dataType,placeholder:t.placeholder},on:{rightData:t.getRightData}},[a("span",{attrs:{slot:"leftText"},slot:"leftText"},[t._v("选择要添加的管理员")]),a("span",{attrs:{slot:"rightText"},slot:"rightText"},[t._v("当前管理员")])])],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"primary",loading:t.loading,disabled:t.isDisable},on:{click:t.ok}},[t._v("保存")]),a("Button",{on:{click:t.reset}},[t._v("重置")])],1)])],1)},s=[],o=(a("96cf"),a("1da1")),r=(a("ac6a"),a("c791")),n={title:{target:"title",original:"text"},children:{target:"children",original:"nodes"}},l={components:{TreeTransfer:r["a"]},data:function(){var t=this;return{accountNumbers:"",uuids:"",placeholder:"",dataType:0,data:[],data2:[],showAddModal:!1,isDisable:!1,loading:!1,queryName:"",curentPage:1,total:0,size:10,accountStatus:0,accountNumber:"",columns7:[{title:"姓名",key:"userName",width:200,render:function(e,a){return e("a",[e("span",{on:{click:function(){t.todetail(a.index)}}},t.data6[a.index].userName)])}},{title:"邮箱",key:"mail"},{title:"部门",key:"groupName"},{title:"操作",key:"action",width:150,align:"center",render:function(e,a){return e("a",[e("span",{on:{click:function(){t.handleDelete(a.index)}}},"移除管理员")])}}],data6:[]}},mounted:function(){var t=this,e={rows:t.size,page:1,sidx:"",sord:"asc"};t.finddata(e)},methods:{todetail:function(t){this.$router.push({path:"/userCatalogOS/detail",query:{accountNumber:this.data6[t].accountNumber,groupId:this.data6[t].groupId,uuid:this.data6[t].uuid}})},cancelAddModal:function(){this.showAddModal=!1,this.dataType=0;var t={rows:this.size,page:1,sidx:"",sord:"asc"};this.finddata(t)},reset:function(){this.dataType=0,this.init()},getRightData:function(t){var e=[],a=[];t.forEach(function(t){a.push(t.uuid),e.push(t.accountNumber)}),this.uuids=a.join(","),this.accountNumbers=e.join(",")},ok:function(){var t=this;this.setUnderway();var e={accountNumber:this.accountNumbers,uuid:this.uuids};this.axios({method:"post",url:"/cipher/user/adminAdd",data:e}).then(function(e){t.setCompleted(),t.cancelAddModal(),0===e.data.code?t.$myMessage.success(e.data.msg):1===e.data.code&&t.$myMessage.error(e.data.msg)}).catch(function(e){t.setCompleted(),console.log(e)})},setUnderway:function(){this.loading=!0,this.isDisable=!0},setCompleted:function(){this.loading=!1,this.isDisable=!1,this.showAddModal=!1},init:function(){var t=this;this.dataType=1;var e={};this.axios({method:"post",url:"/cipher/user/getAddAdmin",data:e}).then(function(e){t.data2=e.data.msg.trees,t.data2=t.$common.cloneAssemblyAssignData(e.data.msg.trees,n,!0),t.data2=t.$common.initSelect(t.data2),t.data=t.data2,t.placeholder="搜索部门/姓名"}).catch(function(t){console.log(t)})},addAdmin:function(){this.init(),this.showAddModal=!0},queryAdminList:function(){var t={rows:this.size,page:1,sidx:"",sord:"asc",accountStatus:0,queryName:this.queryName};this.finddata(t)},finddata:function(t){var e=this;this.axios({method:"post",url:"/cipher/user/userAdmin",data:t}).then(function(t){e.data6=t.data.rows,e.total=t.data.total}).catch(function(t){console.log(t)})},changePageSize:function(t){var e={rows:t,page:1,sidx:"",sord:"asc",queryName:this.queryName};this.finddata(e),this.size=t},changePage:function(t){var e={rows:this.size,page:t,sidx:"",sord:"asc",queryName:this.queryName};this.curentPage=t,this.finddata(e)},handleDelete:function(t){var e=this;this.$myModal.confirm({title:"确定要移除该管理员？"}).then(function(){var a=Object(o["a"])(regeneratorRuntime.mark(function a(i){return regeneratorRuntime.wrap(function(a){while(1)switch(a.prev=a.next){case 0:e.deleteAdmin(t);case 1:case"end":return a.stop()}},a,this)}));return function(t){return a.apply(this,arguments)}}()).catch(function(){})},deleteAdmin:function(t){var e=this,a=this,i={accountNumber:a.data6[t].accountNumber,uuid:a.data6[t].uuid};this.axios({method:"post",url:"/cipher/user/deleteAdmin",data:i}).then(function(t){if("1"===t.data.return_code){e.$myModal.success({title:"操作成功",content:t.data.msg});var i={rows:a.size,page:1,sidx:"",sord:"asc"};e.finddata(i)}else a.$myModal.error({title:"操作失败",content:"请稍后重试"})}).catch(function(t){console.log(t)})}}},c=l,u=(a("c479"),a("2877")),d=Object(u["a"])(c,i,s,!1,null,"25923fb7",null);e["default"]=d.exports},"7bbc":function(t,e,a){var i=a("6821"),s=a("9093").f,o={}.toString,r="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],n=function(t){try{return s(t)}catch(e){return r.slice()}};t.exports.f=function(t){return r&&"[object Window]"==o.call(t)?n(t):s(i(t))}},"7bf9":function(t,e,a){"use strict";var i=a("a806"),s=a.n(i);s.a},"7d44":function(t,e,a){"use strict";var i=a("4c01"),s=a.n(i);s.a},"7de3":function(t,e,a){"use strict";var i=a("b403"),s=a.n(i);s.a},"7f0a":function(t,e,a){"use strict";var i=a("c955"),s=a.n(i);s.a},"7ffd":function(t,e,a){"use strict";var i=a("8250"),s=a.n(i);s.a},"80b0":function(t,e,a){},8111:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"formed-wrap"},[a("div",{staticClass:"formed-header"},[a("div",{staticClass:"formed-header-title"},[t._v(t._s(t.strategyName))])]),a("div",{staticClass:"formed-container"},[a("Form",{ref:"formItem",staticClass:"formed-form",attrs:{model:t.formItem,rules:t.ruleValidate,"label-width":130}},[a("FormItem",{attrs:{label:"策略名称：",prop:"strategyName"}},[t.isDefaultStarategy?a("Input",{attrs:{readonly:""},model:{value:t.formItem.strategyName,callback:function(e){t.$set(t.formItem,"strategyName","string"===typeof e?e.trim():e)},expression:"formItem.strategyName"}}):a("Input",{model:{value:t.formItem.strategyName,callback:function(e){t.$set(t.formItem,"strategyName","string"===typeof e?e.trim():e)},expression:"formItem.strategyName"}})],1),a("FormItem",{attrs:{label:"优先级：",prop:"priority"}},[t.isDefaultStarategy?a("Input",{attrs:{readonly:""},model:{value:t.formItem.priority,callback:function(e){t.$set(t.formItem,"priority","string"===typeof e?e.trim():e)},expression:"formItem.priority"}}):a("Input",{model:{value:t.formItem.priority,callback:function(e){t.$set(t.formItem,"priority",e)},expression:"formItem.priority"}})],1),a("FormItem",{attrs:{label:"认证源：",prop:"authType"}},[a("Select",{model:{value:t.formItem.authType,callback:function(e){t.$set(t.formItem,"authType",e)},expression:"formItem.authType"}},t._l(t.authTypeList,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}),1)],1),a("FormItem",{attrs:{label:"二次认证：",prop:"secondAuth"}},[a("RadioGroup",{on:{"on-change":t.changesecondAuth},model:{value:t.formItem.secondAuth,callback:function(e){t.$set(t.formItem,"secondAuth",e)},expression:"formItem.secondAuth"}},t._l(t.switchList,function(e){return a("Radio",{key:e.value,attrs:{label:e.value}},[t._v(t._s(e.label))])}),1)],1),a("FormItem",{attrs:{label:"二次认证模式：",prop:"secondAuthMode"}},[a("RadioGroup",{on:{"on-change":t.changesecondAuth},model:{value:t.formItem.secondAuthMode,callback:function(e){t.$set(t.formItem,"secondAuthMode",e)},expression:"formItem.secondAuthMode"}},t._l(t.secondAuthModeList,function(e){return a("Radio",{key:e.value,attrs:{label:e.value}},[t._v(t._s(e.label))])}),1),a("span",{staticClass:"second-auth-mode-tip"},[t._v(t._s(t.secondAuthModeTip))])],1),a("FormItem",{attrs:{label:"二次认证方式：",prop:"secondAuthOption"}},[a("CheckboxGroup",{staticStyle:{width:"120%"},model:{value:t.formItem.secondAuthOption,callback:function(e){t.$set(t.formItem,"secondAuthOption",e)},expression:"formItem.secondAuthOption"}},t._l(t.getSecondAuthList,function(e){return a("Checkbox",{key:e.label,staticStyle:{"margin-right":"20px"},attrs:{label:e.value,disabled:1===t.formItem.secondAuth}},[t._v(t._s(e.label))])}),1)],1),a("FormItem",{attrs:{label:"生效范围："}},[t.isDefaultStarategy?[t._v("全员")]:[a("a",{staticClass:"link",on:{click:t.changedepartment}},[t._v("修改")]),t._l(t.groupList,function(e,i){return a("Tag",{key:i,attrs:{name:i,closable:""},on:{"on-close":function(e){t.handleClose(i)}}},[t._v(t._s(e.groupName))])})]],2)],1),a("div",{staticClass:"formed-footer"},[a("myButton",{attrs:{btnType:"info"},on:{click:function(e){t.submit("formItem")}}},[t._v("保存")]),a("myButton",{on:{click:t.cancel}},[t._v("取消")])],1)],1),a("Modal",{staticClass:"tree-transfer",attrs:{width:"668"},on:{"on-cancel":t.cancelmodal},model:{value:t.showMadal,callback:function(e){t.showMadal=e},expression:"showMadal"}},[a("p",{staticClass:"header",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("设置生效部门")]),a("span",{staticClass:"sub-title"},[t._v("（"+t._s(t.formItem.strategyName)+"）")])]),a("div",[a("TreeTransfer",{attrs:{leftTreeData:t.data1,leftDataType:t.dataType,placeholder:t.placeholder},on:{rightData:t.getRightData}},[a("span",{attrs:{slot:"leftText"},slot:"leftText"},[t._v("授权部门")]),a("span",{attrs:{slot:"rightText"},slot:"rightText"},[t._v("已授权部门")])])],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"primary"},on:{click:t.ok}},[t._v("保存")]),a("Button",{staticStyle:{"margin-left":"8px"},on:{click:t.reset}},[t._v("重置")])],1)])],1)},s=[],o=(a("ac4d"),a("8a81"),a("ac6a"),a("c791")),r={title:{target:"title",original:"text"},children:{target:"children",original:"nodes"}},n={components:{TreeTransfer:o["a"]},data:function(){return{data1Bak:[],isDefaultStarategy:!0,unSaveData:[],groupIds:"",authType:0,groupList:[],placeholder:"",dataType:0,data1:[],data2:[],showMadal:!1,buttonSize:"large",id:0,strategyName:"",switchList:[{value:0,label:"开启"},{value:1,label:"关闭"}],authTypeList:[{value:0,label:"本地认证"},{value:1,label:"AD域"},{value:2,label:"JTL_ERP"}],secondAuthModeList:[{value:0,label:"并行"},{value:1,label:"串行"}],secondAuthModeTip:"用户选择一种可用的二认认证通过即可登录",formItem:{strategyName:"",priority:0,authType:3,secondAuth:0,secondAuthMode:0,secondAuthOption:[],groupIds:"",id:0,scaveAuthState:1},ruleValidate:{strategyName:[{required:!0,message:"策略名不能为空",trigger:"blur"}],priority:[{required:!0,message:"优先级不能为空"},{pattern:/^[0-9]{1,2}$/,message:"优先级必须为数字，范围为0-99",trigger:"blur"}],authType:[{required:!0,type:"number",message:"认证源不能为空",trigger:"change"}]}}},computed:{getSecondAuthList:function(){return 0===this.formItem.secondAuthMode?[{value:"twoAuthDingPush",label:"钉钉PUSH认证"},{value:"twoAuthDd",label:"钉钉扫码"},{value:"twoAuthWx",label:"企业微信扫码"},{value:"twoAuthDt",label:"动态密码"},{value:"twoAuthNum",label:"手机随机码"}]:[{value:"twoAuthDingPush",label:"钉钉PUSH认证"},{value:"twoAuthDd",label:"钉钉扫码"},{value:"twoAuthWx",label:"企业微信扫码"},{value:"twoAuthDb",label:"大白扫码"},{value:"twoAuthDt",label:"动态密码"},{value:"twoAuthNum",label:"手机随机码"},{value:"twoAuthMail",label:"邮件随机码"}]}},created:function(){this.id=this.$route.query.id,this.strategyName=this.$route.query.strategyName},mounted:function(){var t={id:this.id};this.finddata(t)},methods:{changesecondAuth:function(){this.formItem.secondAuthOption=[],this.secondAuthModeTip=0===this.formItem.secondAuthMode?"用户选择一种可用的二认认证通过即可登录":"用户需要通过以下配置的所有的二认认证成功后登录"},handleClose:function(t){this.groupList.splice(t,1);var e=[];this.groupList.forEach(function(t){e.push(t.groupId)}),this.groupIds=e.join(",")},cancelmodal:function(){this.showMadal=!1},ok:function(){var t=[];this.unSaveData.forEach(function(e){t.push(e.groupId)}),this.groupIds=t.join(","),this.groupList=this.unSaveData},reset:function(){this.data1=this.$common.clone(this.data1Bak)},getRightData:function(t){this.unSaveData=t},changedepartment:function(){var t=this,e=this;e.dataType=2,e.showMadal=!0;var a={id:e.id};this.axios({method:"post",url:"/cipher/identityStrategy/updatePre",data:a}).then(function(t){0===t.data.code&&(e.data2=t.data.trees,e.data2=e.$common.cloneAssemblyAssignData(t.data.trees,r,!0),e.data2=e.$common.initSelect(e.data2),e.data1=e.data2,e.data1Bak=e.$common.clone(e.data1),e.placeholder="搜索部门")}).catch(function(e){t.$Notice.warning({title:"网络未知错误！",desc:e})})},finddata:function(t){var e=this;this.axios({method:"post",url:"/cipher/identityStrategy/updatePre",data:t}).then(function(t){if(0===t.data.code){0===t.data.identityObj.priority?e.isDefaultStarategy=!0:e.isDefaultStarategy=!1,e.groupList=t.data.groupList;var a=[];e.groupList.forEach(function(t){a.push(t.groupId)}),e.groupIds=a.join(","),e.formItem.strategyName=t.data.identityObj.strategyName,e.formItem.priority=t.data.identityObj.priority,e.formItem.authType=t.data.identityObj.authType,e.formItem.secondAuth=t.data.identityObj.secondAuth,e.formItem.secondAuthMode=t.data.identityObj.switches,e.secondAuthModeTip=0===e.formItem.secondAuthMode?"用户选择一种可用的二认认证通过即可登录":"用户需要通过以下配置的所有的二认认证成功后登录",e.formItem.secondAuthOption=[];var i=t.data.identityObj.secondAuthType;for(var s in i)0===i[s]&&e.formItem.secondAuthOption.push(s)}}).catch(function(t){e.$Notice.warning({title:"网络未知错误！",desc:t})})},submit:function(t){var e=this,a=!0;"1"===this.formItem.secondAuth&&0===this.formItem.secondAuthOption.length&&(a=!1),this.$refs[t].validate(function(t){var i=e;t?0===i.formItem.priority?i.save():0===i.groupList.length?i.$myMessage.error("生效范围不能为空！"):a?i.save():i.$myMessage.error("请至少选择一种认证方式！"):i.$myMessage.error("表单验证失败，请重试！")})},save:function(){var t=this,e={},a=!0,i=!1,s=void 0;try{for(var o,r=this.getSecondAuthList[Symbol.iterator]();!(a=(o=r.next()).done);a=!0){var n=o.value;e[n.value]=1}}catch(f){i=!0,s=f}finally{try{a||null==r.return||r.return()}finally{if(i)throw s}}var l=!0,c=!1,u=void 0;try{for(var d,m=this.formItem.secondAuthOption[Symbol.iterator]();!(l=(d=m.next()).done);l=!0){var p=d.value;e[p]=0}}catch(f){c=!0,u=f}finally{try{l||null==m.return||m.return()}finally{if(c)throw u}}var h={id:this.id,strategyName:this.formItem.strategyName,priority:this.formItem.priority,scaveAuthState:this.formItem.scaveAuthState,groupIds:this.groupIds,authType:this.formItem.authType,secondAuth:this.formItem.secondAuth,switches:this.formItem.secondAuthMode,twoAuthDd:e.twoAuthDd,twoAuthDb:e.twoAuthDb,twoAuthNum:e.twoAuthNum,twoAuthMail:e.twoAuthMail,twoAuthDt:e.twoAuthDt,twoAuthDingPush:e.twoAuthDingPush,twoAuthWx:e.twoAuthWx};this.axios({method:"post",url:"/cipher/identityStrategy/update",data:h}).then(function(e){t.cancel(),1===e.data.return_code?t.$myMessage.success(e.data.return_msg):t.$Modal.error({title:"提示",content:e.data.return_msg})}).catch(function(e){t.$Modal.error({title:"提示",content:"优先级不能为0，或500错误！"}),console.log(e)})},cancel:function(){this.$router.go(-1)}}},l=n,c=(a("a560"),a("2877")),u=Object(c["a"])(l,i,s,!1,null,"4d4f5de8",null);e["default"]=u.exports},8119:function(t,e,a){},"821c":function(t,e,a){"use strict";var i=a("c6cc"),s=a.n(i);s.a},8250:function(t,e,a){},"86cd":function(t,e,a){},8778:function(t,e,a){},8882:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEYAAABGCAYAAAEGKdISAAAAAXNSR0IArs4c6QAADZhJREFUeAHtXH2MXUUVv/fue7vd0t3ublsSujTWWGID6h9QhRToNipJQbQaKSSmkUaFSpTSXU1ESiyoVExkty0aqKCB2phgNbZRoX8gaRdoBAt/qDQ1YKjUlgi4u91uP3bf7r3+frP3jHPnzb3vo++128abbGfmzDlnzjlz5uvMvHpeJV/v7oGob8/gmNCwvLF/6PNS9giQgpnv2z1wjPCA//i+X2Bqf91LO1pI5EuFyUFgF89pb/rXu4OjUtapjcyyas6u0BRxRiEFQXCTCMkmBInEPUs7fC0TK2yORBCC8lOTC4y6wywrLibAlQ8ITGv7ghm5OeSSE4FcHFYvavX7dg++qZGEm80ZfbJNIwlHM1UEXe1+QA5mU7DcD4nY2z+4HB2vvEMby0QkUlNjwyVfWzzzDeY1EgvygeAZ5JdJ2U5FfhOeYCQtuhBNInRIGEVQO/B7epa09+k6SiBMNDDOEF5OnfI40CwrJYXdAMtCs7F/YGVRl2S1bjJjr3R3ddxNWBT6G1UdiemIJqLks1QjjjSsVKOIMN5yGlEYlErpH2RCFyBustf6B7u9MOplRWNzbvbXr2z9D/PmJxLQybq72sXGSUYmAfM0IvT/HrItmJce7e5qu9fGqWk5oZZwFtGlbKYNOe/au67peMGEJZj07Rk4GkVeKxH8IFjRvaTt14K8Zd/AzOMj3pCUxXcUrgCN1tcBYYPAXangCiNlZXTzfUTO+95HbAZCYDITYqlTTOAv633Pn7izq+OvJnJWPhfkL5P6oK9/6CYWupe2Fw0LQXKla5a07Cec0gRRGG53IZUDg+P9mXiJ1tE7D6J3vmUzEN0FjgH5NgbkXK/Ru9kb9d7U7ksEFwMhNFPgXcRyPmhQq21CErG6SUApXHDiFEYn7mEaQK8nmanmi8Koh3QBRuQqZnr3DD7OtNIPnn2Fsgl8ZBQG+XIlDMTYGBqvKibwkWlkIBUmM/aEWTbxxFaJAaiZ+N7Jnq6O6TZx3+6hDZEXfptwYcB8ggkBYJS5uBHHZMByERMC5cPSvh1L2Gew6u5vbAxWyNIq9ZJmMhEkM+VYi6Kw14u8eSbcztN1Gua2rV5zCTqtzK+kMJxuOFuUyS8VjZ7UOaet9ebLfL2htZFThdGdHlNw6prW2PS+OxZPP2wzySqr8WC5s7k4m7RFwphTPxE5AWfNn+ZkZDuS2RDz3BZGXjRf4Ll8sGDN1W3/kHJCGMsaJZcRMjFpSgkjjZo0gO0C3fWs07OlidDcOO1iIGSuZ8K4mlQJjTEf0y6DdR9lXgnTu2fgLWHKs0WlfiG0laTm5IOlYDVpJy1jDNO1S9p+UwnT08HFpH2b0HMuSqxHUiGp2XUCy0rLwderKhh1zpq5FQfHx8iTk2KmMOU4pClAOfimMkfeG7pKypydtQMLkDs3ydc7ha88J21wmVDC5Donl0hWmFtIQaxHOrlSRg3kjQl1iOuVEobrBzfC0qhpeoHVMsVQflqWbPLFfqGdaWLS+9VrUaMZiYDEB4H4fiKmfWB8RHZppXzmkRePXXiyUPi38MJi+gq2UYt0WTJmak7xAuc2WXa5Ais3VZaIPDXLCo1L8IRlBFHSzS8OfWC8EKpjvcB06vsvQ7PHvHz0bGdr25F3Ro61jJ0cv9QP/M96oXcX1iDlDxofGdsSZh3zmcLYyNDwUZkt7TpXmY6JTfEnuJl01U9pWEWW2fx61DRxZGgLNlu3Zmrle4d8RH7Mk2cmflxZljCbXhi4ZmLce74chg4cvUVw1CVAmcJwqB9+d2gYzqgjgwnqCgpw3vsxjO/LIkkVhsHWMAz1AV+YgOnO6RdEt65e1HFUYHaqDshR9Et0Z96swyI5jKNn6nLjFMY1z2Bc/qynq/0rJvNS+Uf2nug8NTb6T3uYu+YY8ioSBnEjHRpSCFb4p5QArnosLzz6PmDWuQRKCGNPcuUsB7KOpe34RYCH9wx8uBB5f5Gyq8sSWwhztoWUI6XWJWHMFJNhUbjCrOcJgycNgQG/VUJAAtPCQEOeafXHGL8u1CgTH3nWCTv7cKiFAYKOHJuxIyGsVQpf2YDunxB+phGUMFxzpBIufbLa1VnzKJHhydRA0UZQwpiLX+O0XOaB3mBSdZZHIcxX+gpIAndmNynmrihv1a1mEfr+F6RaRTVQCBgZFiAmtpd1vs6ZxCIan9sQlvSXS7swnTrDSPlMpzw36T0od20igFok3xs8CH9SUUiBZ6UyAabhlJoYA5zk5goxt4+SP1yhIEKXlZaaGAOc5FTclUy4jzWYbTXyZyTLbjqEv1lsjRtqJGoTFV/7qKsf1qV9Zte4Fr80Ohc8wAj6g1Sonb0UzkIaNOb9J3S7OGLofJ0zrjN9YMZk7U1QPeU5cfx/UX1MKU+yLTUDq/NN3DIP5PUUQnhjxdbzG+PFhE8uBzhoaaQ4hi7leqT29YQErpUw9omPZ+N6CKF5GnFhM/oxaRlgyV0pCTA5Xc87VE1cw4x5jwv3GDXvI7UwdGQ40iu63TDawRCGLpfIYKovunexSVRQmrfy8cfwveSZamFYYKwEAqkXBywzllLKQlxvKEjn7Pb5pEn7+FQEo3W+1DPEa98jaCkFiak5q7KMxp7BjHwD85V+m/uPXToeFl4z6ahAPMOb4OJzk9SybzH8EsLi1cMPupe28QxU8tuyb3j28ePjb+EqqDmBbD+cMCoTjRlwlYVA+yDQFTZcbagDbxOuFHfgDcD+C2e0HDs8PDTXK/ifBP5tGAEfs2lYti8ubJxMYYj8k71HF4yOTbxuE1ZYLisSUVIYaRSb5svxIuKPcMI2gZVK4Rtb4BtfLYUn9WULIwRMaa2xQrQK3fEpFOfBs1owBrkx2+cH0c61Szq2Ea/SryphKm1E8KlEYXziqjDyPwjhFwK+AH+0dAsVIl682eOGj+8r3gD8AHaAf8/nGv5kLurEredXF8Mo94rC23FTckslLlaJomqj4UdP4dXKT+2ltRI+abg1MUw8+B9GI/rUnNZgneG7sNzfWQvPqtowDHFNjEdPuabnNOXVtO17r2IFeh75A4heHvCb/EN8o8IpnHQ8KxXCiZZoNJqHlXQhPG4h1pNr8Xc58g1pvG04tx8NOf8W857axskqV2wYBh8xDzxkL6BFjSDG40fBxnxz8FCtoxpcgE+MhD2RH64tWoQtQbgdwjz1jcSLRgvHVSzbMM6wsMWRW54GP//Nege9rGY9bpcmosKPuFO268xy2hbKxJF8ScMwYA/v2J7mIWAwEgX+SvTITmFaSRoHXb4Lmi/GdFuxef2OvRktlyc3yH4YbcOueYaLhh6EvxWlnhGkGmZS4KG9aXMI5oiD0/K5K++4uuUdlwDlwuCJ+qZVaNCzk4/sBFBFyiPNqcL4S5iX5rvIOQd1zm5bnNYBTsOoTdNY+DcwLbpfisfs56r1EFtI+wQi9acb4xE+yoMi77cuj0fnjuKFwYdcq1ji7EZmvPnjvtttFB6b2oNaGUWEr2dKWSkz5z+7HepIXamzXZcwDDdmqdehuH+r9ixpN3o2ykp26OBqmzqrTalRqQ3Di2oehow6neVZttJLSU08hTLUgbo4RYLuygZxpTaMur13nBAxp+ws94DvbHCKAakLdbLFwrBqow0ErgzDyRaTU9GTBu5UeYcuyOdLSp2om60PbUBbEK4Mo47tNtZk7aashwUuknMBpnRCRMkl62ghVI4wOZQmYxlFeAxFFQHPE0Cabjju3EgVc7GezutixudcdijneOCiqwSWtr+phAdx044B1A33aS52yhbKYyRIZGPJideGoyzbd0fVlAM5ZU3TTWyhDAP30Xe0ploqkmsC4jwD8ewJbt0d1VMCRNkoY9qlQZpuYgsZSvugzfwijRDeBuxxGx6fL3iNW/Iq16a1y2lDplZHArs9KfsF/zos0VI0U9oivo9E0Nis0fkoul3nz7MMlmb9cN5UjQF0ltVQUpF0PL00EZgH8UexVVY/hrPrzuUydaJuRTrABnKrMLlcA4PvUYsQCcADyB+/NDzLWXcOAhn9o04u0QM/6Ba4NgzfF2Gy0ltiQYBl82Onxg/xQabAztWUOvBOkjrZOlB3M3ilDUPE+HZsl03EuCpfqTKEWFR3jgAoO3VIiRHvsm8GE4ahjlgNGDctMg5m8AZeQ2MVKevGeCrZizJTdurgkMt5Z+uM4JGYj2DhcusdjHj/PpLzvcVZP89z0blg9Vyu+dJ4PPL2YlFOi/+mvl4v8hgRns/deQ2PsTcsMEnZEJ8282kHGxd4NSk3YTadC2bjZJUpE2WjjC6jUCfqRh3T+KR6jEnAuyT5Pw5MuORVHDiK7sUw3CCws5FyyECW78PT0/XKePxhypzOwMSK8+UcHhnngFhPNOeb1tf7J5dcZU4WRu/HNn5VyvyhtaAXYoIte6dekWGklcm7pvDnuOBKvIqSejNFD/IB9tNIf9E8PXy22vgO3zSeOBFchz3ISvC7wbXkmu0yzyGD/dmXzGXYxkkrV2UYYRbfPd2DJfBu9FjRVYvgncmUVyJYHR7EndGGtDujcuQ5LcPYDcQ/uloH+Jl+9bALLx0fMB8Y2rJVWq6pYezG1U/k3j76abj/jfCoj8OznAExmy61zJ/Sef5zGCO/b7ho5u/k/Wkq/v8ram+B/wILweyvzhKiQQAAAABJRU5ErkJggg=="},"88f3":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wbm tabled-wrap"},[a("div",{staticClass:"tabled-header"},[a("div",{staticClass:"tabled-header-search"},[a("myInput",{attrs:{placeholder:"请输入姓名 / 账号",radius:"half",search:!0},on:{handleClick:t.getDeviceList},model:{value:t.account,callback:function(e){t.account=e},expression:"account"}})],1),a("div",{staticClass:"tabled-header-btn"},[a("span",{staticClass:"deviceNumber"},[t._v("设备数量")]),a("myInput",{staticClass:"wbm-header__input--space",staticStyle:{width:"120px"},attrs:{type:"number",min:0,max:99,precision:0,placeholder:"请输入设备数量"},model:{value:t.device,callback:function(e){t.device=e},expression:"device"}}),a("myButton",{attrs:{btnType:"info"},on:{click:t.updateStrategy}},[t._v("保存")])],1)]),a("div",{staticClass:"tabled-table"},[a("Table",{attrs:{border:"",columns:t.columns7,data:t.bindDeviceLists}})],1),a("Page",{staticClass:"tabled-page",attrs:{current:t.list.current,total:t.list.total,"show-sizer":"","show-elevator":"","show-total":""},on:{"on-change":t.changePage,"on-page-size-change":t.changePageSize}})],1)},s=[],o=(a("96cf"),a("1da1")),r=a("a9d8"),n={data:function(){var t=this;return{account:"",device:0,deviceBak:0,list:{current:1,pageSize:10,total:0},columns7:[{title:"姓名",key:"name",align:"center",render:function(t,e){return t("div",[t("Icon",{props:{type:"person"}}),t("strong",e.row.name)])}},{title:"账号",key:"userName",align:"center"},{title:"MAC地址",key:"mac",align:"center"},{title:"设备信息",key:"deviceInfo",align:"center"},{title:"绑定时间",key:"bindTime",align:"center"},{title:"Action",key:"action",width:150,align:"center",render:function(e,a){return e("a",{on:{click:function(){t.unbind(a.index)}}},"解绑设备编号")}}],bindDeviceLists:[]}},created:function(){this.initLoad()},methods:{getDeviceList:function(){var t=this,e={queryName:this.account,page:this.list.current,rows:this.list.pageSize};this.axios({method:"post",data:e,url:r["a"].deviceList}).then(function(e){e.data.return_code!==r["a"].errorStatus?(t.bindDeviceLists=e.data.rows,t.list.total=e.data.total):t.$myModal.error("数据错误")}).catch(function(t){this.axios.error.handlingErrors(t)})},getMacBindStrategy:function(){var t=this;this.axios({method:"post",data:{},url:r["a"].strategyMac}).then(function(e){e.data.return_code===r["a"].returnOk?(t.device=e.data.strategy.count,t.deviceBak=t.device):t.$myModal.error("数据错误")}).catch(function(t){this.axios.error.handlingErrors(t)})},updateStrategy:function(){var t=this,e={count:this.device};this.axios({method:"post",data:e,url:r["a"].macUpdate}).then(function(e){e.data.return_code===r["a"].returnOk?(t.$myMessage.success("保存成功!"),t.deviceBak=t.device):(t.device=t.deviceBak,t.$myModal.error("保存失败"))}).catch(function(t){this.axios.error.handlingErrors(t)})},unbind:function(t){var e=this;this.$myModal.confirm({title:"确定解绑吗？"}).then(Object(o["a"])(regeneratorRuntime.mark(function a(){return regeneratorRuntime.wrap(function(a){while(1)switch(a.prev=a.next){case 0:e.handleSubmitUnbind(t);case 1:case"end":return a.stop()}},a,this)}))).catch(function(){})},handleSubmitUnbind:function(t){var e=this,a={id:this.bindDeviceLists[t].id};this.axios({method:"post",data:a,url:r["a"].deviceDelete}).then(function(t){if(t.data.return_code===r["a"].returnOk){var a=Math.ceil((e.list.total-1)/e.PageSize);e.list.current=a<e.list.current?a:e.list.current,e.getDeviceList(),e.$myMessage.success("解绑成功!")}else e.$myModal.error("解绑失败")}).catch(function(t){this.axios.error.handlingErrors(t)})},changePage:function(t){this.list.current=t,this.getDeviceList()},changePageSize:function(t){this.list.pageSize=t,this.getDeviceList()},initLoad:function(){this.getDeviceList(),this.getMacBindStrategy()}}},l=n,c=(a("1696"),a("2877")),u=Object(c["a"])(l,i,s,!1,null,"b11fdb80",null);e["default"]=u.exports},"89ef":function(t,e,a){},"8a52":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"formed-wrap"},[a("div",{staticClass:"formed-header"},[a("div",{staticClass:"formed-header-title"},[t._v("身份认证策略")]),a("div",{staticClass:"formed-header-btn"},[a("myButton",{on:{click:t.cancel}},[t._v("取消")])],1)]),a("div",{staticClass:"formed-container"},[a("Form",{ref:"formItem",staticClass:"formed-form",attrs:{model:t.formItem,rules:t.ruleValidate,"label-width":130}},[a("FormItem",{attrs:{label:"策略名称：",prop:"strategyName"}},[a("div",{attrs:{id:"input"}},[a("Input",{model:{value:t.formItem.strategyName,callback:function(e){t.$set(t.formItem,"strategyName","string"===typeof e?e.trim():e)},expression:"formItem.strategyName"}})],1)]),a("FormItem",{attrs:{label:"优先级：",prop:"priority"}},[a("div",{attrs:{id:"input"}},[a("Input",{model:{value:t.formItem.priority,callback:function(e){t.$set(t.formItem,"priority","string"===typeof e?e.trim():e)},expression:"formItem.priority"}})],1)]),a("FormItem",{attrs:{label:"认证源：",prop:"authType"}},[a("Select",{model:{value:t.formItem.authType,callback:function(e){t.$set(t.formItem,"authType",e)},expression:"formItem.authType"}},t._l(t.authTypeList,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}),1)],1),a("FormItem",{attrs:{label:"二次认证：",prop:"secondAuth"}},[a("RadioGroup",{on:{"on-change":t.changesecondAuth},model:{value:t.formItem.secondAuth,callback:function(e){t.$set(t.formItem,"secondAuth",e)},expression:"formItem.secondAuth"}},t._l(t.switchList,function(e){return a("Radio",{key:e.value,attrs:{label:e.value}},[t._v(t._s(e.label))])}),1)],1),a("FormItem",{attrs:{label:"二次认证模式：",prop:"secondAuthMode"}},[a("RadioGroup",{on:{"on-change":t.changesecondAuth},model:{value:t.formItem.secondAuthMode,callback:function(e){t.$set(t.formItem,"secondAuthMode",e)},expression:"formItem.secondAuthMode"}},t._l(t.secondAuthModeList,function(e){return a("Radio",{key:e.value,attrs:{label:e.value}},[t._v(t._s(e.label))])}),1),a("span",{staticClass:"second-auth-mode-tip"},[t._v(t._s(t.secondAuthModeTip))])],1),a("FormItem",{attrs:{label:"二次认证方式：",prop:"secondAuthOption"}},[a("CheckboxGroup",{staticStyle:{width:"120%"},model:{value:t.formItem.secondAuthOption,callback:function(e){t.$set(t.formItem,"secondAuthOption",e)},expression:"formItem.secondAuthOption"}},t._l(t.getSecondAuthList,function(e){return a("Checkbox",{key:e.label,staticStyle:{"margin-right":"20px"},attrs:{label:e.value,disabled:1===t.formItem.secondAuth}},[t._v(t._s(e.label))])}),1)],1),a("FormItem",{attrs:{label:"生效范围："}},[t._l(t.count,function(e){return a("Tag",{key:e.groupId,attrs:{name:e.groupId,closable:""},on:{"on-close":t.handleClose}},[t._v(t._s(e.groupName))])}),a("span",{staticClass:"link",on:{click:t.changedepartment}},[t._v("修改")])],2)],1),a("div",{staticClass:"formed-footer"},[a("myButton",{attrs:{btnType:"info"},on:{click:function(e){t.submit("formItem")}}},[t._v("保存")]),a("myButton",{on:{click:t.cancel}},[t._v("取消")])],1)],1),a("Modal",{staticClass:"tree-transfer",attrs:{width:"668"},model:{value:t.showMadal,callback:function(e){t.showMadal=e},expression:"showMadal"}},[a("p",{staticClass:"header",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("设置生效部门")]),a("span",{staticClass:"sub-title"},[t._v("（"+t._s(t.formItem.strategyName)+"）")])]),a("div",[a("TreeTransfer",{attrs:{leftTreeData:t.data1,leftDataType:t.dataType,placeholder:t.placeholder},on:{rightData:t.getRightData}},[a("span",{attrs:{slot:"leftText"},slot:"leftText"},[t._v("授权部门")]),a("span",{attrs:{slot:"rightText"},slot:"rightText"},[t._v("已授权部门")])])],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"primary"},on:{click:t.ok}},[t._v("保存")]),a("Button",{staticStyle:{"margin-left":"8px"},on:{click:t.reset}},[t._v("重置")])],1)])],1)},s=[],o=(a("ac4d"),a("8a81"),a("ac6a"),a("c791")),r={title:{target:"title",original:"text"},children:{target:"children",original:"nodes"}},n={components:{TreeTransfer:o["a"]},data:function(){return{unSaveData:[],data1Bak:[],placeholder:"",dataType:0,data1:[],data2:[],showMadal:!1,count:[],queryName:"",switchList:[{value:0,label:"开启"},{value:1,label:"关闭"}],authTypeList:[{value:0,label:"本地认证"},{value:1,label:"AD域"},{value:2,label:"JTL_ERP"}],secondAuthModeList:[{value:0,label:"并行"},{value:1,label:"串行"}],secondAuthModeTip:"用户选择一种可用的二认认证通过即可登录",formItem:{strategyName:"",priority:"",authType:"",secondAuth:0,secondAuthOption:[],secondAuthMode:0,groupIds:"",scaveAuthState:1},ruleValidate:{strategyName:[{required:!0,message:"策略名不能为空",trigger:"blur"}],priority:[{required:!0,message:"优先级不能为空",trigger:"blur"},{pattern:/^[0-9]{1,2}$/,message:"优先级必须为数字，范围为0-99",trigger:"blur"}],authType:[{required:!0,type:"number",message:"认证源不能为空",trigger:"change"}]}}},computed:{getSecondAuthList:function(){return 0===this.formItem.secondAuthMode?[{value:"twoAuthDingPush",label:"钉钉PUSH认证"},{value:"twoAuthDd",label:"钉钉扫码"},{value:"twoAuthWx",label:"企业微信扫码"},{value:"twoAuthDt",label:"动态密码"},{value:"twoAuthNum",label:"手机随机码"}]:[{value:"twoAuthDingPush",label:"钉钉PUSH认证"},{value:"twoAuthDd",label:"钉钉扫码"},{value:"twoAuthWx",label:"企业微信扫码"},{value:"twoAuthDb",label:"大白扫码"},{value:"twoAuthDt",label:"动态密码"},{value:"twoAuthNum",label:"手机随机码"},{value:"twoAuthMail",label:"邮件随机码"}]}},methods:{changesecondAuth:function(){this.formItem.secondAuthOption=[],this.secondAuthModeTip=0===this.formItem.secondAuthMode?"用户选择一种可用的二认认证通过即可登录":"用户需要通过以下配置的所有的二认认证成功后登录"},ok:function(){var t=this;this.count=[],this.unSaveData.forEach(function(e){t.count.push({groupId:e.groupId,groupName:e.groupName})})},reset:function(){this.data1=this.$common.clone(this.data1Bak)},handleClose:function(t,e){var a=this.count.indexOf(e);this.count.splice(a,1)},getRightData:function(t){this.unSaveData=t},init:function(){var t=this,e=this;e.dataType=2;var a={};this.axios({method:"post",url:"/cipher/identityStrategy/group",data:a}).then(function(t){"0"===t.data.code&&(e.data2=e.$common.cloneAssemblyAssignData(t.data.msg.trees,r,!0),e.data2=e.$common.initSelect(e.data2),e.data1=e.data2,e.data1Bak=e.$common.clone(e.data1),e.placeholder="搜索部门")}).catch(function(e){t.$Notice.warning({title:"网络未知错误！",desc:e})})},changedepartment:function(){this.init(),this.showMadal=!0},submit:function(t){var e=this,a=!0;"1"===this.formItem.secondAuth&&0===this.formItem.secondAuthOption.length&&(a=!1),this.$refs[t].validate(function(t){t&&e.count.length&&a?e.save():a?e.count.length?e.$myMessage.error("表单验证失败，请重试！"):e.$myMessage.error("生效范围不能为空，请重试！"):e.$myMessage.error("请选择至少一种二次认证方式！")})},save:function(){var t=this,e=[];this.count.forEach(function(t){e.push(t.groupId)});var a={},i=!0,s=!1,o=void 0;try{for(var r,n=this.getSecondAuthList[Symbol.iterator]();!(i=(r=n.next()).done);i=!0){var l=r.value;a[l.value]=1}}catch(g){s=!0,o=g}finally{try{i||null==n.return||n.return()}finally{if(s)throw o}}var c=!0,u=!1,d=void 0;try{for(var m,p=this.formItem.secondAuthOption[Symbol.iterator]();!(c=(m=p.next()).done);c=!0){var h=m.value;a[h]=0}}catch(g){u=!0,d=g}finally{try{c||null==p.return||p.return()}finally{if(u)throw d}}var f={strategyName:this.formItem.strategyName,priority:this.formItem.priority,groupIds:e.join(","),scaveAuthState:1,authType:this.formItem.authType,secondAuth:this.formItem.secondAuth,switches:this.formItem.secondAuthMode,twoAuthSf:a.twoAuthSf,twoAuthDd:a.twoAuthDd,twoAuthDb:a.twoAuthDb,twoAuthNum:a.twoAuthNum,twoAuthMail:a.twoAuthMail,twoAuthDt:a.twoAuthDt,twoAuthDingPush:a.twoAuthDingPush,twoAuthDingWx:a.twoAuthWx};this.axios({method:"post",url:"/cipher/identityStrategy/add",data:f}).then(function(e){1===e.data.return_code?(t.cancel(),t.$myMessage.success(e.data.return_msg)):t.$Modal.error({title:"提示",content:e.data.return_msg})}).catch(function(e){t.$Notice.warning({title:"网络未知错误！",desc:e})})},search:function(){var t=[],e=this,a={queryName:e.queryName};this.axios({method:"post",url:"/cipher/identityStrategy/query",data:a}).then(function(a){t=e.dohand(a.data.userNonRole,t),e.data1=t}).catch(function(t){console.log(t)})},cancel:function(){this.$router.push("/safetyManagementIP")}}},l=n,c=(a("fb6e"),a("2877")),u=Object(c["a"])(l,i,s,!1,null,"4b7b06d5",null);e["default"]=u.exports},"8a81":function(t,e,a){"use strict";var i=a("7726"),s=a("69a8"),o=a("9e1e"),r=a("5ca1"),n=a("2aba"),l=a("67ab").KEY,c=a("79e5"),u=a("5537"),d=a("7f20"),m=a("ca5a"),p=a("2b4c"),h=a("37c8"),f=a("3a72"),g=a("d4c0"),v=a("1169"),b=a("cb7c"),y=a("d3f4"),I=a("6821"),w=a("6a99"),A=a("4630"),C=a("2aeb"),_=a("7bbc"),x=a("11e9"),S=a("86cc"),D=a("0d58"),k=x.f,T=S.f,L=_.f,M=i.Symbol,N=i.JSON,E=N&&N.stringify,O="prototype",$=p("_hidden"),P=p("toPrimitive"),F={}.propertyIsEnumerable,B=u("symbol-registry"),V=u("symbols"),R=u("op-symbols"),U=Object[O],j="function"==typeof M,z=i.QObject,G=!z||!z[O]||!z[O].findChild,K=o&&c(function(){return 7!=C(T({},"a",{get:function(){return T(this,"a",{value:7}).a}})).a})?function(t,e,a){var i=k(U,e);i&&delete U[e],T(t,e,a),i&&t!==U&&T(U,e,i)}:T,q=function(t){var e=V[t]=C(M[O]);return e._k=t,e},W=j&&"symbol"==typeof M.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof M},Q=function(t,e,a){return t===U&&Q(R,e,a),b(t),e=w(e,!0),b(a),s(V,e)?(a.enumerable?(s(t,$)&&t[$][e]&&(t[$][e]=!1),a=C(a,{enumerable:A(0,!1)})):(s(t,$)||T(t,$,A(1,{})),t[$][e]=!0),K(t,e,a)):T(t,e,a)},J=function(t,e){b(t);var a,i=g(e=I(e)),s=0,o=i.length;while(o>s)Q(t,a=i[s++],e[a]);return t},H=function(t,e){return void 0===e?C(t):J(C(t),e)},Z=function(t){var e=F.call(this,t=w(t,!0));return!(this===U&&s(V,t)&&!s(R,t))&&(!(e||!s(this,t)||!s(V,t)||s(this,$)&&this[$][t])||e)},Y=function(t,e){if(t=I(t),e=w(e,!0),t!==U||!s(V,e)||s(R,e)){var a=k(t,e);return!a||!s(V,e)||s(t,$)&&t[$][e]||(a.enumerable=!0),a}},X=function(t){var e,a=L(I(t)),i=[],o=0;while(a.length>o)s(V,e=a[o++])||e==$||e==l||i.push(e);return i},tt=function(t){var e,a=t===U,i=L(a?R:I(t)),o=[],r=0;while(i.length>r)!s(V,e=i[r++])||a&&!s(U,e)||o.push(V[e]);return o};j||(M=function(){if(this instanceof M)throw TypeError("Symbol is not a constructor!");var t=m(arguments.length>0?arguments[0]:void 0),e=function(a){this===U&&e.call(R,a),s(this,$)&&s(this[$],t)&&(this[$][t]=!1),K(this,t,A(1,a))};return o&&G&&K(U,t,{configurable:!0,set:e}),q(t)},n(M[O],"toString",function(){return this._k}),x.f=Y,S.f=Q,a("9093").f=_.f=X,a("52a7").f=Z,a("2621").f=tt,o&&!a("2d00")&&n(U,"propertyIsEnumerable",Z,!0),h.f=function(t){return q(p(t))}),r(r.G+r.W+r.F*!j,{Symbol:M});for(var et="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),at=0;et.length>at;)p(et[at++]);for(var it=D(p.store),st=0;it.length>st;)f(it[st++]);r(r.S+r.F*!j,"Symbol",{for:function(t){return s(B,t+="")?B[t]:B[t]=M(t)},keyFor:function(t){if(!W(t))throw TypeError(t+" is not a symbol!");for(var e in B)if(B[e]===t)return e},useSetter:function(){G=!0},useSimple:function(){G=!1}}),r(r.S+r.F*!j,"Object",{create:H,defineProperty:Q,defineProperties:J,getOwnPropertyDescriptor:Y,getOwnPropertyNames:X,getOwnPropertySymbols:tt}),N&&r(r.S+r.F*(!j||c(function(){var t=M();return"[null]"!=E([t])||"{}"!=E({a:t})||"{}"!=E(Object(t))})),"JSON",{stringify:function(t){var e,a,i=[t],s=1;while(arguments.length>s)i.push(arguments[s++]);if(a=e=i[1],(y(e)||void 0!==t)&&!W(t))return v(e)||(e=function(t,e){if("function"==typeof a&&(e=a.call(this,t,e)),!W(e))return e}),i[1]=e,E.apply(N,i)}}),M[O][P]||a("32e9")(M[O],P,M[O].valueOf),d(M,"Symbol"),d(Math,"Math",!0),d(i.JSON,"JSON",!0)},"8a94":function(t,e,a){"use strict";var i=a("7340"),s={title:{target:"title",original:"rDN"},children:{target:"children",original:"nodes"},path:{target:"path",original:"dn"},checked:{target:"checked",original:"select"}};function o(t){var e={ip:t.formdata.ip,port:t.formdata.port,userName:t.formdata.userName,password:t.formdata.password};t.axios({method:"post",data:e,url:i["a"].getOuTree}).then(function(e){var a=e.data;if(0!==a.length){var i=t.$common.cloneAssemblyAssignData(a,s,!0);t.OUData=t.$common.addKeysAndClone(i),t.OUDataBak=t.$common.clone(t.OUData)}}).catch(function(e){t.axios.error.handlingErrors(e)})}function r(t){u(t),t.OUModal=!0,o(t)}function n(t){t.syncTarget=[],t.formdata.syncTarget="";var e=t.$refs.OUTree.getCheckedNodes().filter(function(e,a,i){if(0===e.children.length)return t.syncTarget.push(e.path),t.formdata.syncTarget+=e.path,t.formdata.syncTarget+="\r\n",!0});return u(t),t.OUModal=!1,e}function l(t){u(t)}function c(t){t.OUData=t.$common.clone(t.OUDataBak)}function u(t){t.OUData=[]}function d(t){var e=[],a=t.$common.searchCloneData(t.OUDataBak,["title"],t.keyword,e);t.OUData=t.$common.setExpandData(a,e)}e["a"]={getOUTree:o,showOUModal:r,OUSave:n,OUCancel:l,OUReset:c,clearBeforeData:u,keyword:d}},"8aea":function(t,e,a){},"8b2f":function(t,e,a){"use strict";var i=a("10c4"),s=a.n(i);s.a},"8b3d":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"formed-wrap"},[a("div",{staticClass:"formed-header"},[a("div",{staticClass:"formed-header-title"},[t._v("添加Portal")]),a("div",{staticClass:"formed-header-btn"},[a("myButton",{on:{click:t.cancel}},[t._v("取消")])],1)]),a("div",{staticClass:"formed-container"},[a("div",{staticClass:"formed-form"},[a("Steps",{staticClass:"step",attrs:{current:t.current}},[a("Step",{attrs:{title:"基本配置"}}),a("Step",{attrs:{title:"网络配置"}}),a("Step",{attrs:{title:"页面配置"}})],1),a("Base",{directives:[{name:"show",rawName:"v-show",value:0===t.current,expression:"current===0"}],ref:"childRules0",on:{ListenChild:t.getBaseData}}),a("Ac",{directives:[{name:"show",rawName:"v-show",value:1===t.current,expression:"current===1"}],ref:"childRules1",on:{ListenChild:t.getAcData}}),a("Page",{directives:[{name:"show",rawName:"v-show",value:2===t.current,expression:"current===2"}],ref:"childRules2",attrs:{selected:t.baseData.portalType},on:{ListenChild:t.getPageData}})],1),a("div",{staticClass:"formed-footer"},[0!==t.current?a("myButton",{on:{click:t.prev}},[t._v("上一步")]):t._e(),2!==t.current?a("myButton",{attrs:{btnType:"info"},on:{click:t.next}},[t._v("下一步")]):t._e(),2===t.current?a("myButton",{attrs:{btnType:"info"},on:{click:function(e){t.handleSubmit()}}},[t._v("保存")]):t._e(),a("myButton",{on:{click:t.cancel}},[t._v("取消")])],1)])])},s=[],o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Form",{ref:"formValidate",attrs:{model:t.formValidate,rules:t.ruleValidate}},[a("FormItem",{attrs:{label:"Portal类型：","label-width":120}},[a("RadioGroup",{model:{value:t.formValidate.portalType,callback:function(e){t.$set(t.formValidate,"portalType",e)},expression:"formValidate.portalType"}},[a("Radio",{attrs:{label:"0"}},[t._v("员工Portal")]),a("Radio",{attrs:{label:"1"}},[t._v("访客Portal")])],1)],1),a("FormItem",{attrs:{label:"portal描述：",prop:"description","label-width":120}},[a("Input",{attrs:{placeholder:"请输入描述"},model:{value:t.formValidate.description,callback:function(e){t.$set(t.formValidate,"description","string"===typeof e?e.trim():e)},expression:"formValidate.description"}})],1),a("div",{staticClass:"address"},[a("FormItem",{attrs:{label:"portal地址：",prop:"ip","label-width":120}},[a("span",[t._v("http:// ")]),a("Input",{staticStyle:{width:"185px"},attrs:{placeholder:"请输入IP地址或域名"},on:{"on-focus":function(e){t.portalAddress="ip"}},model:{value:t.formValidate.ip,callback:function(e){t.$set(t.formValidate,"ip","string"===typeof e?e.trim():e)},expression:"formValidate.ip"}})],1),a("FormItem",{attrs:{prop:"port"}},[a("span",[t._v(" ： ")]),a("Input",{staticStyle:{width:"100px"},attrs:{placeholder:"请输入端口号"},on:{"on-focus":function(e){t.portalAddress="port"}},model:{value:t.formValidate.port,callback:function(e){t.$set(t.formValidate,"port","string"===typeof e?e.trim():e)},expression:"formValidate.port"}})],1)],1),a("FormItem",{attrs:{label:"portal序号：",prop:"portalNum","label-width":120}},[a("Input",{attrs:{placeholder:"请输入1-99"},model:{value:t.formValidate.portalNum,callback:function(e){t.$set(t.formValidate,"portalNum","string"===typeof e?e.trim():e)},expression:"formValidate.portalNum"}})],1)],1)},r=[],n={data:function(){var t=function(t,e,a){e<1||e>99?a(new Error("请输入1-99")):a()};return{isEdit:!1,portalAddress:"",formValidate:{protalType:"0",description:"",ip:"",port:"",portalNum:""},ruleValidate:{description:[{required:!0,message:"请输入描述",trigger:"blur"}],ip:[{required:!0,message:"请输入地址",trigger:"blur"}],port:[{required:!0,message:"请输入地址",trigger:"blur"}],portalNum:[{required:!0,message:"请输入1-99",trigger:"blur"},{validator:t,trigger:"blur"}]}}},methods:{validateForm:function(){var t=this,e=null;return this.$refs["formValidate"].validate(function(a){a?(e=!0,t.saveData(),t.$emit("ListenChild",t.formValidate)):e=!1}),e},saveData:function(){var t=this,e={portalAddress:"http://".concat(this.formValidate.ip,":").concat(this.formValidate.port),description:this.formValidate.description,portalNum:this.formValidate.portalNum};this.axios({method:"post",data:e,url:"/cipher/wifiportal/addOne"}).then(function(e){1===e.data.return_code&&t.$myMessage.error(e.data.return_msg)}).catch(function(t){console.log(t)})}}},l=n,c=(a("4902"),a("2877")),u=Object(c["a"])(l,o,r,!1,null,"d9d1cb9c",null),d=u.exports,m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Form",{ref:"formValidate",attrs:{model:t.formValidate,rules:t.ruleValidate,"label-width":120}},[a("div",{staticClass:"config-title"},[t._v("设备参数：")]),a("FormItem",{attrs:{label:"设备型号：",prop:"acDeviceId"}},[a("Select",{attrs:{placeholder:"请选择AC设备型号"},model:{value:t.formValidate.acDeviceId,callback:function(e){t.$set(t.formValidate,"acDeviceId","string"===typeof e?e.trim():e)},expression:"formValidate.acDeviceId"}},t._l(t.acDeviceIdList,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}),1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:3!==t.formValidate.acDeviceId&&4!==t.formValidate.acDeviceId,expression:"formValidate.acDeviceId!==3&&formValidate.acDeviceId!==4"}]},[a("FormItem",{attrs:{label:"AC设备地址：",prop:"deviceAddress"}},[a("Input",{attrs:{placeholder:"请输入设备地址"},model:{value:t.formValidate.deviceAddress,callback:function(e){t.$set(t.formValidate,"deviceAddress","string"===typeof e?e.trim():e)},expression:"formValidate.deviceAddress"}})],1),a("FormItem",{attrs:{label:"AC监听端口：",prop:"monitorPort"}},[a("Input",{attrs:{placeholder:"请输入监听端口"},model:{value:t.formValidate.monitorPort,callback:function(e){t.$set(t.formValidate,"monitorPort","string"===typeof e?e.trim():e)},expression:"formValidate.monitorPort"}})],1),a("FormItem",{attrs:{label:"协议版本号：",prop:"protocolVersion"}},[a("Input",{attrs:{placeholder:"请输入协议版本号"},model:{value:t.formValidate.protocolVersion,callback:function(e){t.$set(t.formValidate,"protocolVersion","string"===typeof e?e.trim():e)},expression:"formValidate.protocolVersion"}})],1),a("FormItem",{attrs:{label:"认证类型：",prop:"authType"}},[a("Input",{attrs:{placeholder:"请输入认证类型"},model:{value:t.formValidate.authType,callback:function(e){t.$set(t.formValidate,"authType","string"===typeof e?e.trim():e)},expression:"formValidate.authType"}})],1),a("FormItem",{attrs:{label:"超时等待时间：",prop:"timeOut"}},[a("Input",{attrs:{placeholder:"请输入超时等待时间"},model:{value:t.formValidate.timeOut,callback:function(e){t.$set(t.formValidate,"timeOut","string"===typeof e?e.trim():e)},expression:"formValidate.timeOut"}})],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:3===t.formValidate.acDeviceId,expression:"formValidate.acDeviceId===3"}]},[a("FormItem",{attrs:{label:"switch_url："}},[a("Input",{attrs:{placeholder:"请输入switch_url"},model:{value:t.formValidate.switchUrlAruba,callback:function(e){t.$set(t.formValidate,"switchUrlAruba","string"===typeof e?e.trim():e)},expression:"formValidate.switchUrlAruba"}})],1),a("FormItem",{attrs:{label:"orig_url："}},[a("Input",{attrs:{placeholder:"请输入orig_url"},model:{value:t.formValidate.origUrl,callback:function(e){t.$set(t.formValidate,"origUrl","string"===typeof e?e.trim():e)},expression:"formValidate.origUrl"}})],1),a("FormItem",{attrs:{label:"opcode："}},[a("Input",{attrs:{placeholder:"请输入opcode"},model:{value:t.formValidate.opcode,callback:function(e){t.$set(t.formValidate,"opcode","string"===typeof e?e.trim():e)},expression:"formValidate.opcode"}})],1),a("FormItem",{attrs:{label:"agree："}},[a("Input",{attrs:{placeholder:"请输入agree"},model:{value:t.formValidate.agree,callback:function(e){t.$set(t.formValidate,"agree","string"===typeof e?e.trim():e)},expression:"formValidate.agree"}})],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:4===t.formValidate.acDeviceId,expression:"formValidate.acDeviceId===4"}]},[a("FormItem",{attrs:{label:"switch_url："}},[a("Input",{model:{value:t.formValidate.switchUrlCisco,callback:function(e){t.$set(t.formValidate,"switchUrlCisco","string"===typeof e?e.trim():e)},expression:"formValidate.switchUrlCisco"}})],1),a("FormItem",{attrs:{label:"buttonClicked："}},[a("Input",{model:{value:t.formValidate.buttonClicked,callback:function(e){t.$set(t.formValidate,"buttonClicked","string"===typeof e?e.trim():e)},expression:"formValidate.buttonClicked"}})],1),a("FormItem",{attrs:{label:"err_flag："}},[a("Input",{model:{value:t.formValidate.errFlag,callback:function(e){t.$set(t.formValidate,"errFlag","string"===typeof e?e.trim():e)},expression:"formValidate.errFlag"}})],1),a("FormItem",{attrs:{label:"err_msg："}},[a("Input",{model:{value:t.formValidate.errMsg,callback:function(e){t.$set(t.formValidate,"errMsg","string"===typeof e?e.trim():e)},expression:"formValidate.errMsg"}})],1),a("FormItem",{attrs:{label:"info_flag："}},[a("Input",{model:{value:t.formValidate.infoFlag,callback:function(e){t.$set(t.formValidate,"infoFlag","string"===typeof e?e.trim():e)},expression:"formValidate.infoFlag"}})],1),a("FormItem",{attrs:{label:"info_msg："}},[a("Input",{model:{value:t.formValidate.infoMsg,callback:function(e){t.$set(t.formValidate,"infoMsg","string"===typeof e?e.trim():e)},expression:"formValidate.infoMsg"}})],1),a("FormItem",{attrs:{label:"redirect_url："}},[a("Input",{model:{value:t.formValidate.redirectUrl,callback:function(e){t.$set(t.formValidate,"redirectUrl","string"===typeof e?e.trim():e)},expression:"formValidate.redirectUrl"}})],1),a("FormItem",{attrs:{label:"network_name："}},[a("Input",{model:{value:t.formValidate.networkName,callback:function(e){t.$set(t.formValidate,"networkName","string"===typeof e?e.trim():e)},expression:"formValidate.networkName"}})],1)],1)],1),a("Divider"),a("Form",{ref:"formValidateRadius",attrs:{model:t.formValidate,rules:t.ruleValidateRadius,"label-width":120}},[a("div",{staticClass:"config-title"},[t._v("Radius配置：")]),a("FormItem",{attrs:{label:"协议类型：",prop:"protocolType"}},[a("RadioGroup",{model:{value:t.formValidate.protocolType,callback:function(e){t.$set(t.formValidate,"protocolType",e)},expression:"formValidate.protocolType"}},[a("Radio",{attrs:{label:"1"}},[t._v("CHAP")]),a("Radio",{attrs:{label:"2"}},[t._v("PAP")])],1)],1),a("FormItem",{attrs:{label:"Radius地址：：",prop:"ip"}},[a("Input",{attrs:{placeholder:"请输入Radius地址"},model:{value:t.formValidate.ip,callback:function(e){t.$set(t.formValidate,"ip","string"===typeof e?e.trim():e)},expression:"formValidate.ip"}})],1),a("FormItem",{attrs:{label:"认证端口：",prop:"authPort"}},[a("Input",{attrs:{placeholder:"请输入认证端口"},model:{value:t.formValidate.authPort,callback:function(e){t.$set(t.formValidate,"authPort","string"===typeof e?e.trim():e)},expression:"formValidate.authPort"}})],1),a("FormItem",{attrs:{label:"计费端口：",prop:"feePort"}},[a("Input",{attrs:{placeholder:"请输入计费端口"},model:{value:t.formValidate.feePort,callback:function(e){t.$set(t.formValidate,"feePort","string"===typeof e?e.trim():e)},expression:"formValidate.feePort"}})],1),a("FormItem",{attrs:{label:"共享密钥：",prop:"sharedKey"}},[a("Input",{attrs:{placeholder:"请输入共享密钥"},model:{value:t.formValidate.sharedKey,callback:function(e){t.$set(t.formValidate,"sharedKey","string"===typeof e?e.trim():e)},expression:"formValidate.sharedKey"}})],1)],1)],1)},p=[],h={data:function(){return{formValidate:{acDeviceId:"",deviceAddress:"",monitorPort:"",protocolVersion:"",authType:"",timeOut:"",switchUrlAruba:"",origUrl:"",opcode:"",agree:"",switchUrlCisco:"",buttonClicked:"",errFlag:"",errMsg:"",infoFlag:"",infoMsg:"",redirectUrl:"",networkName:"",protocolType:null,ip:"",authPort:"",feePort:"",sharedKey:""},ruleValidate:{acDeviceId:[{required:!0,message:"请选择AC设备型号",trigger:"blue",type:"number"}],deviceAddress:[{required:!0,message:"请输入设备地址",trigger:"blur"}],monitorPort:[{required:!0,message:"输入监听端口",trigger:"blur"}],authType:[{required:!0,message:"请输入认证类型",trigger:"blur"}],timeOut:[{required:!0,message:"请输入超时等待时间",trigger:"blur"}]},ruleValidateRadius:{protocolType:[{required:!0,message:"请选择协议类型",trigger:"blur"}],ip:[{required:!0,message:"请输入Radius地址",trigger:"blur"}],authPort:[{required:!0,message:"请输入认证端口",trigger:"blur"}],feePort:[{required:!0,message:"请输入计费端口",trigger:"blur"}],sharedKey:[{required:!0,message:"请输入共享秘钥",trigger:"blur"}]},acDeviceIdList:[{label:"HUAWEI",value:1},{label:"H3C",value:2},{label:"Aruba",value:3},{label:"Cisco",value:4},{label:"锐捷",value:5}]}},methods:{validateForm:function(){var t=this,e=null;return this.$refs["formValidateRadius"].validate(function(a){e=a;var i=!0;3!==t.formValidate.acDeviceId&&4!==t.formValidate.acDeviceId&&t.$refs["formValidate"].validate(function(t){i=t}),e=e&&i,e&&(t.saveData(),t.$emit("ListenChild",t.formValidate))}),e},saveData:function(){var t=this,e={};e=3===this.formValidate.acDeviceId?{switchUrl:this.formValidate.switchUrlAruba,origUrl:this.formValidate.origUrl,opcode:this.formValidate.opcode,agree:this.formValidate.agree}:4===this.formValidate.acDeviceId?{switchUrl:this.formValidate.switchUrlCisco,buttonClicked:this.formValidate.buttonClicked,errFlag:this.formValidate.errFlag,errMsg:this.formValidate.errMsg,infoFlag:this.formValidate.infoFlag,infoMsg:this.formValidate.infoMsg,redirectUrl:this.formValidate.redirectUrl,networkName:this.formValidate.networkName}:{deviceAddress:this.formValidate.deviceAddress,monitorPort:this.formValidate.monitorPort,protocolVersion:this.formValidate.protocolVersion,authType:this.formValidate.authType,timeOut:this.formValidate.timeOut};var a={acDeviceId:this.formValidate.acDeviceId,deviceConfig:JSON.stringify(e),protocolType:this.formValidate.protocolType,ip:this.formValidate.ip,port:this.formValidate.authPort,feePort:this.formValidate.feePort,sharedKey:this.formValidate.sharedKey};this.axios({method:"post",data:a,url:"/cipher/wifiportal/addTwo"}).then(function(e){1===e.return_code&&t.$myMessage.error(e.data.return_msg)}).catch(function(t){console.log(t)})}}},f=h,g=(a("c5e4"),Object(c["a"])(f,m,p,!1,null,"30f64138",null)),v=g.exports,b=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Form",{ref:"formValidate",attrs:{model:t.formValidate,rules:t.ruleValidate}},[a("div",{staticClass:"config-title"},[t._v("配置登录页面：")]),a("div",{staticClass:"page clearfix"},[a("div",{staticClass:"page-top clearfix"},[a("FormItem",{staticClass:"img"},[a("Upload",{ref:"upload",staticStyle:{width:"50px",height:"48px",display:"inline-block"},attrs:{"show-upload-list":!1,"on-success":t.handleSuccessLogo,format:["jpg","jpeg","png"],"max-size":2048,"on-format-error":t.handleFormatError,"on-exceeded-size":t.handleMaxSize,type:"drag",action:"/cipher/app/imgUpload"}},[a("img",{attrs:{src:t.logo}})])],1),a("FormItem",{staticClass:"text",attrs:{prop:"topText"}},[a("Input",{model:{value:t.formValidate.topText,callback:function(e){t.$set(t.formValidate,"topText","string"===typeof e?e.trim():e)},expression:"formValidate.topText"}})],1)],1),a("div",{staticClass:"page-center"},["0"===t.selected?a("FormItem",{staticClass:"pageleft"},[a("Upload",{ref:"upload",staticStyle:{height:"350px"},attrs:{"show-upload-list":!1,format:["jpg","jpeg","png"],"max-size":2048,"on-format-error":t.handleFormatError,type:"drag",action:"/cipher/app/imgUpload","on-success":t.handleSuccessLogoDraw}},[t.loginDraw?a("img",{staticClass:"pageleft",attrs:{src:t.loginDraw}}):t._e()])],1):t._e(),a("div",{staticClass:"pageright"},[a("FormItem",{staticClass:"page-right-title",attrs:{prop:"loginText"}},[a("Input",{model:{value:t.formValidate.loginText,callback:function(e){t.$set(t.formValidate,"loginText","string"===typeof e?e.trim():e)},expression:"formValidate.loginText"}})],1),a("img",{attrs:{src:t.loginUrl}})],1)],1),a("div",{staticClass:"page-bottom"},[t._v("©2019 CipherChina.com All rights reserved.")])]),a("Divider"),a("div",{staticClass:"config-title"},[t._v("配置登录成功页面：")]),a("div",{staticClass:"page clearfix"},[a("div",{staticClass:"page-top clearfix"},[a("FormItem",{staticClass:"img"},[a("img",{attrs:{src:t.logo}})]),a("FormItem",{staticClass:"text",attrs:{prop:"leftTitle"}},[t._v("\n        "+t._s(t.formValidate.topText)+"\n      ")])],1),a("div",{staticClass:"page-center"},[a("div",{staticClass:"pageright"},[a("FormItem",{staticClass:"page-right-title page-right-success-title",attrs:{prop:"successText"}},[a("Input",{model:{value:t.formValidate.successText,callback:function(e){t.$set(t.formValidate,"successText","string"===typeof e?e.trim():e)},expression:"formValidate.successText"}})],1),a("img",{attrs:{src:t.loginSuccessUrl}})],1)]),a("div",{staticClass:"page-bottom"},[t._v("©2019 CipherChina.com All rights reserved.")])])],1)},y=[],I={data:function(){return{loginUrl:a("8be3"),loginSuccessUrl:a("486b"),logo:"",loginDraw:"",formValidate:{topText:"",loginText:"",successText:""},ruleValidate:{topText:[{type:"string",max:30,message:"标题不能超过30个字符",trigger:"blur"}],loginText:[{type:"string",max:30,message:"标题不能超过30个字符",trigger:"blur"}],successText:[{type:"string",max:30,message:"标题不能超过30个字符",trigger:"blur"}]}}},props:["selected"],methods:{validateForm:function(){var t=this,e=null;return this.$refs["formValidate"].validate(function(a){a?(e=!0,t.saveData(),t.$emit("ListenChild",t.formValidate)):e=!1}),e},saveData:function(){var t=this,e={logo:this.logo,topText:this.formValidate.topText,loginDraw:this.loginDraw,loginText:this.formValidate.loginText,successText:this.formValidate.successText,portalType:this.selected};this.axios({method:"post",data:e,url:"/cipher/wifiportal/addThird"}).then(function(e){1===e.data.return_code?t.$myModal.error({title:"保存失败",content:"res.data.return_msg"}):(t.$router.push("/netAccessServicePortal"),t.$myMessage.success("保存成功!"))}).catch(function(t){console.log(t)})},handleSuccessLogo:function(t,e){0===t.status?(this.logo=t.imgName,this.updateSuccessModal()):this.updateFailModal()},handleSuccessLogoDraw:function(t,e){0===t.status?(this.loginDraw=t.imgName,this.updateSuccessModal()):this.updateFailModal()},updateSuccessModal:function(){this.$myModal.success({title:"上传成功",content:"图片上传成功"})},updateFailModal:function(){this.$myModal.error({title:"上传失败",content:"图片上传失败"})},handleFormatError:function(t){this.$myModal.error({title:"请选择一张图片！",content:"文件不正确！ "+t.name+" 该文件不是一个图片"})},handleMaxSize:function(t){this.$Notice.warning({title:"大小超过2M",desc:"该文件  "+t.name+"太大，不能超过2M"})},handleSubmit:function(t){var e=this;this.$refs[t].validate(function(t){t?e.save():e.$myMessage.error("表单验证失败，请重试")})}}},w=I,A=(a("6252"),Object(c["a"])(w,b,y,!1,null,"033a7732",null)),C=A.exports,_={components:{Base:d,Ac:v,Page:C},data:function(){return{current:0,buttonSize:"large",baseData:{},acData:{},pageData:{}}},methods:{prev:function(){this.current-=1},next:function(){var t=this.$refs["childRules"+this.current].validateForm();t&&(this.current+=1)},cancel:function(){this.$router.push("/netAccessServicePortal")},getBaseData:function(t){this.baseData=t},getAcData:function(t){this.acData=t},getPageData:function(t){this.pageData=t},handleSubmit:function(){this.$refs["childRules"+this.current].validateForm()}}},x=_,S=(a("7f0a"),Object(c["a"])(x,i,s,!1,null,"8a8b9e94",null));e["default"]=S.exports},"8b64":function(t,e,a){},"8be3":function(t,e,a){t.exports=a.p+"assets/img/wifi-portal-login.png"},"8c0b":function(t,e,a){"use strict";var i=a("e2ef"),s=a.n(i);s.a},"8c96":function(t,e,a){"use strict";var i=a("2492"),s=a.n(i);s.a},"8cdb":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._v("对不起，网页开了一会儿小差，稍后回来!!!!")])},s=[],o={name:"NotFound"},r=o,n=(a("39cb"),a("2877")),l=Object(n["a"])(r,i,s,!1,null,"137a3633",null);e["default"]=l.exports},"8d0d":function(t,e,a){"use strict";var i=a("1cbc"),s=a.n(i);s.a},"8e8b":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"test"},[a("FixedCircle",{attrs:{percent:100}})],1)},s=[],o=a("5a5d"),r={components:{FixedCircle:o["a"]}},n=r,l=(a("96e8"),a("2877")),c=Object(l["a"])(n,i,s,!1,null,"be5c04c4",null);e["default"]=c.exports},"8e9b":function(t,e,a){},"8f23":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"WED"},[a("div",{staticClass:"top clearfix"},[a("Button",{staticClass:"add",attrs:{icon:"md-add",type:"primary"},on:{click:function(e){t.add()}}},[t._v("添加自定义属性")])],1),a("div",{staticClass:"table"},[a("Table",{attrs:{columns:t.title,data:t.list}})],1),a("Modal",{staticClass:"add-modal",attrs:{width:"600"},on:{"on-ok":t.onOk},model:{value:t.showAddModal,callback:function(e){t.showAddModal=e},expression:"showAddModal"}},[a("p",{staticClass:"header",attrs:{slot:"header"},slot:"header"},[a("span",{staticClass:"left"},[t._v("添加自定义属性")])]),a("div",{staticClass:"center"},[a("Form",{attrs:{model:t.formItem,rules:t.ruleValidate,":label-width":300}},[a("FormItem",{attrs:{label:"自定义属性名：",prop:"attributeName"}},[a("Input",{attrs:{placeholder:"请输入自定义属性名"},model:{value:t.formItem.attributeName,callback:function(e){t.$set(t.formItem,"attributeName",e)},expression:"formItem.attributeName"}})],1),a("FormItem",{attrs:{label:"描述：",prop:"attributeDescription"}},[a("Input",{attrs:{type:"textarea",autosize:{minRows:4,maxRows:5},placeholder:"请输入描述"},model:{value:t.formItem.attributeDescription,callback:function(e){t.$set(t.formItem,"attributeDescription",e)},expression:"formItem.attributeDescription"}})],1)],1)],1)]),t.message.show?a("Notice",{attrs:{text:t.message.text,show:t.message.show,duration:t.message.duration,onClose:t.message.onClose},on:{close:t.close}}):t._e(),t.failModal.flag?a("FailModal",{attrs:{flag:t.failModal.flag,title:t.failModal.title,content:t.failModal.content,onOk:t.failModal.onOk}}):t._e()],1)},s=[],o=a("2c82"),r=a("faeb"),n=a("62c4"),l=a("8f5b"),c={data:function(){var t=this,e=function(t,e,a){var i=l["a"].userDefinedName;i.test(e)||a(new Error("请输入中文、英文字母或数字，不超过20个字符")),a()},a=function(t,e,a){e.length>100&&a(new Error("请输入不超过100个字符的内容")),a()};return{showAddModal:!1,addModalType:"",list:[],formItem:{attributeattributeName:"",attributeDescription:"",uuid:""},ruleValidate:{attributeName:[{required:!0,message:"自定义属性名称不能为空",trigger:"blur"},{validator:e,trigger:"blur"}],attributeDescription:[{validator:a,trigger:"change"}]},title:[{title:"自定义属性",key:"attributeName"},{title:"描述",key:"attributeDescription"},{title:"操作",key:"option",width:"200",render:function(e,a){return e("div",[e("span",{style:{marginRight:"22px",color:"rgb(24, 144, 255)",cursor:"pointer"},on:{click:function(){t.edit(a.index)}}},"编辑"),e("span",{style:{marginRight:"5px",color:"rgb(24, 144, 255)",cursor:"pointer"},on:{click:function(){t.delete(a.index)}}},"删除")])}}],message:{text:"下线成功",show:!1,duration:1,onClose:this.close},failModal:{flag:!1,title:"失败",content:"请稍后重试",onOk:this.onConfirm}}},components:{Notice:r["a"],FailModal:n["a"]},created:function(){this.getList()},methods:{getList:function(){var t=this;this.axios({method:"post",url:"/cipher/attr/list",data:{}}).then(function(e){t.list=e.data.attribute}).catch(function(e){t.$Notice.warning({title:"网络未知错误！",desc:e})})},showFialModal:function(t){this.failModal.flag=!0,this.failModal.title=t},showSuccessNotice:function(t){this.message.show=!0,this.message.text=t},onConfirm:function(){this.failModal.flag=!1},close:function(){this.message.show=!1},add:function(){this.addModalType="add",this.showAddModal=!0},edit:function(t){this.addModalType="edit",this.showAddModal=!0,this.formItem.attributeName=this.list[t].attributeName,this.formItem.attributeDescription=this.list[t].attributeDescription,this.formItem.uuid=this.list[t].uuid},onOk:function(){var t={};"add"===this.addModalType?(t={attributeName:this.formItem.attributeName,attributeDescription:this.formItem.attributeDescription},this.addData(t)):(t={attributeName:this.formItem.attributeName,attributeDescription:this.formItem.attributeDescription,uuid:this.formItem.uuid},this.editData(t))},addData:function(t){var e=this;this.axios({method:"post",url:"/cipher/attr/adding",data:t}).then(function(t){0===t.data.return_code?(e.showSuccessNotice("添加成功!"),e.getList()):e.showFialModal("添加失败")}).catch(function(t){e.$Notice.warning({title:"网络未知错误！",desc:t})})},editData:function(t){var e=this;this.axios({method:"post",url:"/cipher/attr/edited",data:t}).then(function(t){0===t.data.return_code?(e.showSuccessNotice("编辑成功!"),e.getList()):e.showFialModal("编辑失败")}).catch(function(t){e.$Notice.warning({title:"网络未知错误！",desc:t})})},deleteData:function(t){var e=this;this.axios({method:"post",url:"/cipher/attr/del",data:{uuid:t}}).then(function(t){0===t.data.return_code?(e.showSuccessNotice("删除成功!"),e.getList()):e.showFialModal("删除失败")}).catch(function(t){e.$Notice.warning({title:"网络未知错误！",desc:t})})},delete:function(t){var e=this;this.$Modal.confirm({title:"确定删除吗？",width:o["a"].simpleModal.width,onOk:function(){e.deleteData(e.list[t].uuid)}})}}},u=c,d=(a("5899"),a("2877")),m=Object(d["a"])(u,i,s,!1,null,"5e5157e6",null);e["default"]=m.exports},"8f5a":function(t,e,a){},"8f5b":function(t,e,a){"use strict";var i=/^[0-9a-zA-Z~!@#$%^&*()-_+={[}\]:;"'<,>.?\/]*$/,s=/(^[A-F0-9]{2}([-][A-F0-9]{2}){5}$)|(^[A-F0-9]{2}([\/][A-F0-9]{2}){5}$)|(^[A-F0-9]{2}([:][A-F0-9]{2}){5}$)|(^[A-F0-9]{2}([.][A-F0-9]{2}){5}$)|(^[A-F0-9]{2}([ ][A-F0-9]{2}){5}$)|(^[A-F0-9]{4}([-][A-F0-9]{4}){2}$)|(^[A-F0-9]{4}([\/][A-F0-9]{4}){2}$)|(^[A-F0-9]{4}([:][A-F0-9]{4}){2}$)|(^[A-F0-9]{4}([.][A-F0-9]{4}){2}$)|(^[A-F0-9]{4}([ ][A-F0-9]{4}){2}$)/i,o=/^\d{6}(18|19|20)\d{2}(0[1-9]|1[012])(0[1-9]|[12]\d|3[01])\d{3}(\d|X)$/i,r=/^[0-9a-zA-Z@-_.]*$/,n=/^([\u4E00-\uFA29]|[\uE7C7-\uE7F3]|[a-zA-Z0-9]){1,20}$/,l=/^(((\d{1,2})|(1\d{1,2})|(2[0-4]\d)|(25[0-5]))\.){3}((\d{1,2})|(1\d{1,2})|(2[0-4]\d)|(25[0-5]))$/,c=/^([\\da-fA-F]{1,4}:){7}([\\da-fA-F]{1,4})$/;e["a"]={accountNumber:i,macAddress:s,identity:o,loginAccount:r,userDefinedName:n,IPv4:l,IPv6:c}},"8ff6":function(t,e,a){},"901e":function(t,e,a){"use strict";var i=a("dae8"),s=a.n(i);s.a},"91eb":function(t,e,a){},9290:function(t,e,a){},"94d1":function(t,e,a){},"953c":function(t,e,a){"use strict";var i=a("41cc"),s=a.n(i);s.a},"95ab":function(t,e,a){"use strict";var i=a("c327"),s=a.n(i);s.a},"96cf":function(t,e){!function(e){"use strict";var a,i=Object.prototype,s=i.hasOwnProperty,o="function"===typeof Symbol?Symbol:{},r=o.iterator||"@@iterator",n=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag",c="object"===typeof t,u=e.regeneratorRuntime;if(u)c&&(t.exports=u);else{u=e.regeneratorRuntime=c?t.exports:{},u.wrap=I;var d="suspendedStart",m="suspendedYield",p="executing",h="completed",f={},g={};g[r]=function(){return this};var v=Object.getPrototypeOf,b=v&&v(v(N([])));b&&b!==i&&s.call(b,r)&&(g=b);var y=_.prototype=A.prototype=Object.create(g);C.prototype=y.constructor=_,_.constructor=C,_[l]=C.displayName="GeneratorFunction",u.isGeneratorFunction=function(t){var e="function"===typeof t&&t.constructor;return!!e&&(e===C||"GeneratorFunction"===(e.displayName||e.name))},u.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,l in t||(t[l]="GeneratorFunction")),t.prototype=Object.create(y),t},u.awrap=function(t){return{__await:t}},x(S.prototype),S.prototype[n]=function(){return this},u.AsyncIterator=S,u.async=function(t,e,a,i){var s=new S(I(t,e,a,i));return u.isGeneratorFunction(e)?s:s.next().then(function(t){return t.done?t.value:s.next()})},x(y),y[l]="Generator",y[r]=function(){return this},y.toString=function(){return"[object Generator]"},u.keys=function(t){var e=[];for(var a in t)e.push(a);return e.reverse(),function a(){while(e.length){var i=e.pop();if(i in t)return a.value=i,a.done=!1,a}return a.done=!0,a}},u.values=N,M.prototype={constructor:M,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=a,this.done=!1,this.delegate=null,this.method="next",this.arg=a,this.tryEntries.forEach(L),!t)for(var e in this)"t"===e.charAt(0)&&s.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=a)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function i(i,s){return n.type="throw",n.arg=t,e.next=i,s&&(e.method="next",e.arg=a),!!s}for(var o=this.tryEntries.length-1;o>=0;--o){var r=this.tryEntries[o],n=r.completion;if("root"===r.tryLoc)return i("end");if(r.tryLoc<=this.prev){var l=s.call(r,"catchLoc"),c=s.call(r,"finallyLoc");if(l&&c){if(this.prev<r.catchLoc)return i(r.catchLoc,!0);if(this.prev<r.finallyLoc)return i(r.finallyLoc)}else if(l){if(this.prev<r.catchLoc)return i(r.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return i(r.finallyLoc)}}}},abrupt:function(t,e){for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a];if(i.tryLoc<=this.prev&&s.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var r=o?o.completion:{};return r.type=t,r.arg=e,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(r)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var a=this.tryEntries[e];if(a.finallyLoc===t)return this.complete(a.completion,a.afterLoc),L(a),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var a=this.tryEntries[e];if(a.tryLoc===t){var i=a.completion;if("throw"===i.type){var s=i.arg;L(a)}return s}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,i){return this.delegate={iterator:N(t),resultName:e,nextLoc:i},"next"===this.method&&(this.arg=a),f}}}function I(t,e,a,i){var s=e&&e.prototype instanceof A?e:A,o=Object.create(s.prototype),r=new M(i||[]);return o._invoke=D(t,a,r),o}function w(t,e,a){try{return{type:"normal",arg:t.call(e,a)}}catch(i){return{type:"throw",arg:i}}}function A(){}function C(){}function _(){}function x(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function S(t){function e(a,i,o,r){var n=w(t[a],t,i);if("throw"!==n.type){var l=n.arg,c=l.value;return c&&"object"===typeof c&&s.call(c,"__await")?Promise.resolve(c.__await).then(function(t){e("next",t,o,r)},function(t){e("throw",t,o,r)}):Promise.resolve(c).then(function(t){l.value=t,o(l)},function(t){return e("throw",t,o,r)})}r(n.arg)}var a;function i(t,i){function s(){return new Promise(function(a,s){e(t,i,a,s)})}return a=a?a.then(s,s):s()}this._invoke=i}function D(t,e,a){var i=d;return function(s,o){if(i===p)throw new Error("Generator is already running");if(i===h){if("throw"===s)throw o;return E()}a.method=s,a.arg=o;while(1){var r=a.delegate;if(r){var n=k(r,a);if(n){if(n===f)continue;return n}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(i===d)throw i=h,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);i=p;var l=w(t,e,a);if("normal"===l.type){if(i=a.done?h:m,l.arg===f)continue;return{value:l.arg,done:a.done}}"throw"===l.type&&(i=h,a.method="throw",a.arg=l.arg)}}}function k(t,e){var i=t.iterator[e.method];if(i===a){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=a,k(t,e),"throw"===e.method))return f;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var s=w(i,t.iterator,e.arg);if("throw"===s.type)return e.method="throw",e.arg=s.arg,e.delegate=null,f;var o=s.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=a),e.delegate=null,f):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function M(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function N(t){if(t){var e=t[r];if(e)return e.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var i=-1,o=function e(){while(++i<t.length)if(s.call(t,i))return e.value=t[i],e.done=!1,e;return e.value=a,e.done=!0,e};return o.next=o}}return{next:E}}function E(){return{value:a,done:!0}}}(function(){return this||"object"===typeof self&&self}()||Function("return this")())},"96e8":function(t,e,a){"use strict";var i=a("470a"),s=a.n(i);s.a},9817:function(t,e,a){"use strict";var i=a("50dc"),s=a.n(i);s.a},9864:function(t,e){t.exports="data:image/png;base64,R0lGODlhgACAAPcAAAAAAAEBAQICAgMDAwQEBAUFBQcHBwgICAkJCQoKCgsLCw0NDQ4ODhAQEBERERISEhMTExUVFRcXFxgYGBkZGRoaGhsbGx0dHR8fHyAgICEhISIiIiMjIyYmJicnJygoKCkpKSoqKisrKywsLC0tLS8vLzAwMDExMTU1NTY2Njc3Nzk5OTo6Ojs7Ozw8PD8/P0BAQEFBQUNDQ0REREpKSktLS0xMTE1NTVhYWFxcXF1dXV5eXl9fX2BgYGFhYWVlZWZmZmdnZ2lpaWpqamtra2xsbG1tbXBwcHFxcXJycnR0dHh4eHl5eXp6ent7e319fX5+fn9/f4GBgYKCgoODg4SEhIWFhYiIiIqKiouLi46Ojo+Pj5CQkJGRkZOTk5SUlJiYmJmZmZubm6GhoaKioqOjo6ampqenp6mpqaurq6ysrK6urq+vr7Ozs7a2tre3t7i4uLm5ubq6ur29vb+/v8DAwMHBwcPDw8TExMXFxcbGxsfHx8nJycrKysvLy8zMzM3Nzc7Ozs/Pz9TU1NXV1dbW1tra2tvb29zc3N3d3d/f3+Dg4OHh4eLi4uPj4+Tk5Ofn5+np6erq6uzs7O7u7u/v7/Dw8PHx8fLy8vPz8/T09PX19fb29vf39/n5+fr6+vv7+/39/f7+/v///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAAAAAAALAAAAACAAIAAAAj+AEcJHEiwoMGDCBMqXMiwocOHECNKnEixosWLGDNq3Mixo8ePIEOKHEmypMmTKFOqXMmypcuXMGPKnEmzps2bOHPq3Mmzp0+MojxlmgTpUaNGjyBNyuRJ1M+WoSoVkgOmiQ8aLk584JAhA4cPJ1zQ8NEEjJxClUI9HSkJD5cdKCYcAEC3rt27dQ9MQLGDCx5JazeKcpRGSAkGeBMrTsyghBA1jpwGnmgJzpAPBRZr3my3wIchcCxNftjoywsFnFOrBqDgxZdGoxUmohIiwOrbqQOEoJIodsFGVjrgHr66gxVHvi+JKUG8+eoSYi4FFmWHBgHn2FMTqGFHcs9ITyL+ZB+fOsKTSD3twCDPPjUMOzo1aZnQvv7mCVo03WTE47r9/4oRwAMjNe3BAoAILsbCHjKJooYGCUaY2AZqwPTJFw8gGMABDUhgwQUXWCBBAwfYBuADX3zSEidRIFAfARSswAMVZMjBByGILLIIIoTwIQcZVPCwAgX+sYdAFJyshEkSmZGXwAlFoFHIJd4tJMolhaBRxAkJsFdAEpikZIkQApCnwRBvAHaRJG8MAeF4AgghmkmWAGGicwKYcIUhVQJlyBUmlIldAEDMOVImRNzZnAhdQCISJF2IkF0ARGQyUidKDIAdBVAsYtIiUNDn3ABKdBKSJ1A0SRwBN+ihkh7+NxQ5XAFQePJRKFgY4FwFXEi30iVcVOCcAVmo1dEYiDXXAnwv2dGCcwyQ0REcFDRHwA+PyPTID7LeRgEcG/3xQXMLVLEJTZtUsUBzH/yRESMuNEfBGMbSFMoY1RLnAoEWZaJDcxm0oVMbGTSng6UUhSKFpsN5MAdPc3hA3ABS1BuRGcniFkIePuURAnEMmDFRH2/i5gEeHXESiSOPSJIkR3cIN5wGfkQUyQzEcUCHRqEgQoYQMoywwQYkyEBEGYlYbBEdHBA3A3oOfYIEcRaACxQfQmQgKF4DaEBEH31SBIcFxCGhYkNjdImbA2dkBMkSEqgmQROOYnSGA8MlMEb+Q4CUvFoCXoQtkR/r4RYDIEB54SJuGiCuECU2DDfAE6BgVMe4xIHArEWgPMHwbTZQkpAoVGy92g4IW+QH5s2B4Hi/OwwnABWCjwIHBMPBkO1FkBSOXQx1W+SI76tBEMdBjqjQcCBAMcFeE7VDFIjEuKmAHEGgHDGcA2xkxEfc5E3QR0Zs4I3bEZUPtMa6tw1QRfQPhSJEfUQoPZEoVXyu2gJrDKTICcPBQZgwgoiCtUcDvcEIJnAwnBMoYhSfMEIDD6ERMphuPAMog0YOAUDcGOETccDdbR7gho3Mzz5E2IgbMnQb4+UANwKQAvwgwgkZ/EcGLwOKFC7ImRxgADf+N6jERiIxgv+QQE0ZqcQNcIOBbm0GA4LgiCM28J8N7E4jgvjhagjgRM1AUYpUtI8VOZLF2xBAi6sJ4hCLaJ8RQC2JS7wNBl54mxjO8CE1vGEOLyKKHeImByHEDQlN+J8hqJCFxYtDBCdYQR5iRwDSyggHh/PBUfwvgAO8SAHrkwFEZGSBDXygQNaHG/fdkSHyq48Q7CcR/OkvNfzDnvbW1j2MfI89EuAD+cx3G/QVJHnLax57mHDKhUxvONY7SCBxozuM9G48MAheRYY3HOMhhHSO3AzqMLI67HygZhfJROxgSLuEQE5ylLMc63DzgTpgpHOvTE3oFtK3vAWOm8T+Uw0MwGkRUShuZq9TSNq21zZnMgF8nJEAE6RZkbvlbW8NkRrVrMZHrGlNMQLIgBD4UMyFjK1sZ2vIzXK2s4z0jAxDCNrQRiCDIZABEaycCNOc9kaHkIw4J0tZJB7xiEjsMSMxIw7NJoIx4mysYx8bTsgStjCcPmwnEZtYxSriL4AJLCcEM1jqKAIvedHLJvfK13D2lRFxkctc6FIXu9ylEWpZC1va4pa8KKoRZDlnWTBxFrQiyRFc6ao5vPKVSoAlrOYcoFgfQZWqhsMqV6UEVl1UDa1sBRJMxdNbnfoUFMQ6sVIdKlHZYRRDOwIpSQ2qUiWpk6KIk6c9dbQhovj+U6AmFQRDkWRM2WScENKEETYJwW94GoJgTbKkxWLnSVGaUjGvlKUtqW08X8okSli0OPbASEY0stEgEKEIRSBiED4CkpCIVJ8jmYolF0KkfTbUoQ+FaEQlQhCKQsoSB4VRQvgFAIVmYqD8SmhBNeFPZP2LHQL0gF81kY+oCBy+LegnJ+phMDQ3pxPwiEfCwzFPTXdCnRoMGMN32U53AqMc5oBYMyaIjm8cEZwT48U41/ONQGZTmxPrhjcyPkhpTsPg1rwmxwq5hGUwEyHPgGa4QB6dI9RgmIyRhwEmeExkkiyRtrwlBXIZjl5S0Je/UBkjUZlKGJxwlaxspStfCcs0WJwQhrOk5csgCcpQinKUpCylKXDOs573zOc++/nPgA60oAdN6EIb+tCITrSiF83oRtMkIAA7"},"98f7":function(t,e,a){"use strict";var i=a("e656"),s=a.n(i);s.a},"99c2":function(t,e,a){"use strict";var i=a("b074"),s=a.n(i);s.a},"9ab3":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tabled-wrap"},[a("div",{staticClass:"tabled-header"},[a("span",{staticClass:"add-app-label"},[t._v("应用库：")]),a("myInput",{staticClass:"tabled-header-search",attrs:{radius:"half",search:!0,placeholder:"应用名称",maxlength:14},on:{handleClick:t.searchApp},model:{value:t.searchAppInput,callback:function(e){t.searchAppInput=e},expression:"searchAppInput"}})],1),a("ul",{staticClass:"tabled-table app-list"},[1===t.curentPage?t._l(t.addTypeList,function(e){return a("li",{key:e.value,staticClass:"add link",on:{click:function(a){t.gotoAddApp(e.value)}}},[a("div",{staticClass:"app-list-crcle-img"},[a("img",{attrs:{src:e.imgUrl}})]),a("label",{staticClass:"control-label"},[a("span",{staticClass:"add-font"},[t._v("+")]),t._v(" "+t._s(e.label))])])}):t._e(),t._l(t.appListData,function(e,i){return a("li",{key:i,staticClass:"link",on:{click:function(a){t.getAssembledAppInfo(e)}}},[a("div",{staticClass:"app-list-crcle-img"},[a("img",{attrs:{src:e.applicationUrl}})]),a("label",{staticClass:"control-label",attrs:{title:e.applicationName}},[a("span",{staticClass:"add-font"},[t._v("+")]),t._v(" "+t._s(e.applicationName))])])})],2),a("div",{staticClass:"tabled-page"},[a("Page",{staticClass:"pageDemo",attrs:{total:t.total,"page-size":t.pageSize,current:t.curentPage},on:{"on-change":t.changePage}})],1),a("Modal",{staticStyle:{width:"500px"},attrs:{title:"demo"},model:{value:t.showAssembledAppAddModal,callback:function(e){t.showAssembledAppAddModal=e},expression:"showAssembledAppAddModal"}},[a("p",{staticClass:"modalHeadr",attrs:{slot:"header"},slot:"header"},[a("Icon",{staticClass:"icon",attrs:{type:"ios-add"}}),a("span",[t._v("添加"+t._s(t.formValidate.applicationName))])],1),a("div",[a("Form",{ref:"formValidate",attrs:{model:t.formValidate}},[a("Row",[a("Col",{attrs:{span:"14"}},[a("Col",{attrs:{span:"24"}},[a("FormItem",{staticClass:"appInputDemo",attrs:{label:"应用名称：",prop:"applicationDes"}},[a("Input",{model:{value:t.formValidate.applicationName,callback:function(e){t.$set(t.formValidate,"applicationName",e)},expression:"formValidate.applicationName"}})],1)],1),a("Col",{attrs:{span:"24"}},[a("Col",{attrs:{span:"6"}},[a("label",{staticClass:"lableClass"},[t._v("应用描述:")])]),a("Col",{staticStyle:{"font-size":"13px"},attrs:{span:"18"}},[a("label",[t._v(t._s(t.markLable))])])],1)],1),a("Col",{attrs:{span:"9",offset:"1"}},[a("FormItem",{attrs:{prop:"applicationUrl"}},[a("img",{attrs:{src:t.formValidate.applicationUrl}})])],1)],1),a("FormItem",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{label:"应用类型：",prop:"applicationType"}},[a("Input",{model:{value:t.formValidate.applicationType,callback:function(e){t.$set(t.formValidate,"applicationType",e)},expression:"formValidate.applicationType"}})],1)],1)],1),a("p",{staticClass:"footer",attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"primary"},on:{click:function(e){t.confirmAddApp()}}},[t._v("确定")]),a("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(e){t.cancel()}}},[t._v("取消")])],1)])],1)},s=[],o=(a("a481"),a("be94")),r=(a("cadf"),a("551c"),a("097d"),a("2f62")),n=a("8882"),l=a.n(n),c=a("21f0"),u=a.n(c),d=a("c7e3"),m=a.n(d),p=a("d903"),h=a.n(p),f={name:"Add",data:function(){return{id:"",addTypeList:[{value:"新",label:"新应用",imgUrl:l.a},{value:"CAS",label:"CAS应用",imgUrl:u.a},{value:"SAML",label:"SAML应用",imgUrl:m.a},{value:"OAUTH",label:"OAUTH应用",imgUrl:h.a}],msg:"",formValidate:{applicationDes:"",applicationUrl:"",applicationType:"",appSysId:0},markLable:"",applicationName:"",showAssembledAppAddModal:!1,searchAppInput:"",appListData:[],curentPage:1,queryName:"",prevPage:0,nextPage:0,showPageNums:[],total:0,pageSize:8}},mounted:function(){this.getAssembledAppList()},methods:Object(o["a"])({cancel:function(){this.showAssembledAppAddModal=!1},confirmAddApp:function(){var t=this;if(this.validateApplicationName(this.formValidate.applicationName)){var e={applicationName:this.formValidate.applicationName,applicationIconUrl:this.formValidate.applicationUrl,appSysId:this.formValidate.appSysId,applicationType:this.formValidate.applicationType};this.axios({method:"post",url:"/cipher/app/add?json",data:e}).then(function(e){0===e.data.return_code?(t.id=e.data.return_result,t.showAssembledAppAddModal=!1,t.$myMessage.success("添加应用成功!"),t.changeAppId(t.id),t.$router.push({name:"appDetails"})):t.$myModal.error({title:"添加应用失败",content:e.data.return_msg})}).catch(function(e){e="网络未知错误！",t.$myMessage.error(e)})}},validateApplicationName:function(t){return!!t.replace(/^ +| +$/,"")||(this.$myModal.error({title:"添加失败",content:"应用名称为空"}),!1)},getAssembledAppList:function(){var t=this;this.axios({method:"post",url:"/cipher/app/applist",data:{currentPage:this.curentPage,queryName:this.queryName}}).then(function(e){t.appListData=e.data.pageDomain.showUsers,t.curentPage=e.data.pageDomain.currentPage,t.prevPage=e.data.pageDomain.prevPage,t.nextPage=e.data.pageDomain.nextPage,t.showPageNums=e.data.pageDomain.showPageNums,t.total=t.showPageNums.length*t.pageSize}).catch(function(){})},getAssembledAppInfo:function(t){this.showAssembledAppAddModal=!0,this.formValidate.applicationName=t.applicationName,this.formValidate.applicationUrl=t.applicationUrl,this.formValidate.applicationType=t.applicationType,this.formValidate.appSysId=t.id,this.markLable=t.mark},gotoAddApp:function(t){this.$router.push({name:"appAddType",query:{type:t}})},changePage:function(t){this.curentPage=t,this.getAssembledAppList()},searchApp:function(){this.queryName=this.searchAppInput,this.curentPage=1,this.getAssembledAppList()}},Object(r["b"])(["changeAppId"]))},g=f,v=(a("3794"),a("2877")),b=Object(v["a"])(g,i,s,!1,null,"2bc14e81",null);e["default"]=b.exports},"9c35":function(t,e,a){},"9d18":function(t,e,a){},"9e1ec":function(t,e,a){},"9fd1":function(t,e,a){"use strict";var i=a("9290"),s=a.n(i);s.a},a167:function(t,e,a){},a1c8:function(t,e,a){"use strict";var i=a("65c5"),s=a.n(i);s.a},a46b:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"formed-wrap"},[a("div",{staticClass:"formed-header"},[a("myButton",{staticClass:"formed-header-btn",attrs:{btnType:"info"},on:{click:t.edit}},[t._v("编辑")])],1),a("div",{staticClass:"formed-container"},[a("div",{staticClass:"formed-form"},[t.ronglianyun?[a("div",{staticClass:"formed-form-part"},[a("div",{staticClass:"formed-form-part-title"},[t._v("短信验证码")]),a("div",{staticClass:"formed-form-item"},[a("span",[t._v("短信服务商：")]),a("span",[t._v(t._s(t.selected))])]),a("div",{staticClass:"formed-form-item"},[a("span",[t._v("accountSid：")]),a("span",[t._v(t._s(t.formItem.accountSid))])]),a("div",{staticClass:"formed-form-item"},[a("span",[t._v("authToken：")]),a("span",[t._v(t._s(t.formItem.authToken))])]),a("div",{staticClass:"formed-form-item"},[a("span",[t._v("appId：")]),a("span",[t._v(t._s(t.formItem.appId))])])]),a("div",{staticClass:"formed-form-part"},[a("div",{staticClass:"formed-form-part-title"},[t._v("短信随机码")]),a("div",{staticClass:"formed-form-item"},[a("span",[t._v("短信模版：")]),a("span",[t._v(t._s(t.formItem.templateId))])])]),a("div",{staticClass:"formed-form-part"},[a("div",{staticClass:"formed-form-part-title"},[t._v("开通账号通知")]),a("div",{staticClass:"formed-form-item"},[a("span",[t._v("短信模版：")]),a("span",[t._v(t._s(t.formItem.templateIdOne))])])])]:t._e(),t.aliyun?[a("div",{staticClass:"formed-form-part"},[a("div",{staticClass:"formed-form-part-title"},[t._v("短信验证码")]),a("div",{staticClass:"formed-form-item"},[a("span",[t._v("短信服务商：")]),a("span",[t._v(t._s(t.selected))])]),a("div",{staticClass:"formed-form-item"},[a("span",[t._v("product：")]),a("span",[t._v(t._s(t.formItem.product))])]),a("div",{staticClass:"formed-form-item"},[a("span",[t._v("域名：")]),a("span",[t._v(t._s(t.formItem.domain))])]),a("div",{staticClass:"formed-form-item"},[a("span",[t._v("accessKeyId：")]),a("span",[t._v(t._s(t.formItem.accessKeyId))])]),a("div",{staticClass:"formed-form-item"},[a("span",[t._v("accessKeySecret：")]),a("span",[t._v(t._s(t.formItem.accessKeySecret))])]),a("div",{staticClass:"formed-form-item"},[a("span",[t._v("signName：")]),a("span",[t._v(t._s(t.formItem.signName))])])]),a("div",{staticClass:"formed-form-part"},[a("div",{staticClass:"formed-form-part-title"},[t._v("短信随机码")]),a("div",{staticClass:"formed-form-item"},[a("span",[t._v("短信模版：")]),a("span",[t._v(t._s(t.formItem.templateCode))])])]),a("div",{staticClass:"formed-form-part"},[a("div",{staticClass:"formed-form-part-title"},[t._v("开通账号通知")]),a("div",{staticClass:"formed-form-item"},[a("span",[t._v("短信模版：")]),a("span",[t._v(t._s(t.formItem.templateCodeOne))])])])]:t._e()],2)])])},s=[],o={data:function(){return{formItem:{id:"",companyId:"",accountSid:"",authToken:"",appId:"",templateId:"",templateIdOne:"",product:"",domain:"",accessKeyId:"",accessKeySecret:"",signName:"",templateCode:"",templateCodeOne:""},selected:"",ronglianyun:!1,aliyun:!0}},mounted:function(){var t={};this.finddata(t)},methods:{finddata:function(t){var e=this;this.axios({method:"post",url:"/cipher/sms/listNew?json",data:t}).then(function(t){1===t.data.type?(e.selected="荣联云",e.ronglianyun=!0,e.aliyun=!1,e.formItem=t.data.ronglianSmsConfigInfo):2===t.data.type&&(e.selected="阿里云",e.ronglianyun=!1,e.aliyun=!0,e.formItem=t.data.aliyunSmsConfigInfo)}).catch(function(t){console.log(t)})},edit:function(){this.$router.push({name:"messageEdit"})}}},r=o,n=(a("06b7"),a("2877")),l=Object(n["a"])(r,i,s,!1,null,"25f3064f",null);e["default"]=l.exports},a560:function(t,e,a){"use strict";var i=a("756c"),s=a.n(i);s.a},a69a:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"userDetail formed-wrap"},[a("div",{staticClass:"formed-header"},[a("div",{staticClass:"formed-header-title"},[t._v("\n      "+t._s(t.userName)+"\n      "),a("span",{staticClass:"sub-title samll-font"},[a("span",{staticClass:"point",style:t.statusStyle}),t._v(" "+t._s(t.status))])]),a("div",{staticClass:"formed-header-btn",staticStyle:{"z-index":"2"}},[a("Dropdown",{staticClass:"dropdown"},[a("myDropBtn",[t._v("选择操作")]),a("DropdownMenu",{attrs:{slot:"list"},slot:"list"},t._l(t.operateList,function(e,i){return a("DropdownItem",{key:i,attrs:{value:e.value},nativeOn:{click:function(a){t.operate(e.label)}}},[t._v(t._s(e.label))])}),1)],1)],1)]),t.detail&&"user"===t.currentTab?a("myButton",{staticClass:"user-detail-change__btn",attrs:{btnType:"info"},on:{click:t.changeStatus}},[t._v("编辑")]):t._e(),a("div",{staticClass:"formed-container"},[a("myComplexTabs",{model:{value:t.currentTab,callback:function(e){t.currentTab=e},expression:"currentTab"}},[a("myPane",{attrs:{label:"用户信息",name:"user"}},[0!==Object.keys(t.userList).length?[t.detail?a("DetailList",{key:"detail",ref:"user",attrs:{dataMsg:t.dataMsg,userList:t.userList},on:{msg:t.sendMsgFromChild}}):a("DetailEdit",{key:"edit",on:{msg:t.sendMsgFromChild}})]:t._e()],2),a("myPane",{attrs:{label:"应用列表",name:"list"}},[a("appList",{attrs:{userName:t.userName}})],1)],1)],1),a("Modal",{model:{value:t.pwdFlag,callback:function(e){t.pwdFlag=e},expression:"pwdFlag"}},[a("p",{staticClass:"header",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("重置密码")]),a("span",{staticClass:"sub-title"},[t._v(t._s(t.userName)+" ("+t._s(t.accountNumber)+")")])]),a("div",[a("Form",{ref:"formItemPwd",attrs:{model:t.formItemPwd,rules:t.ruleValidate,"label-width":110}},[a("FormItem",{attrs:{label:"输入新密码：",prop:"password"}},[a("Input",{attrs:{type:"password",placeholder:"请输入密码"},model:{value:t.formItemPwd.password,callback:function(e){t.$set(t.formItemPwd,"password","string"===typeof e?e.trim():e)},expression:"formItemPwd.password"}})],1),a("FormItem",{attrs:{label:"确认新密码：",prop:"checkPwd"}},[a("Input",{attrs:{type:"password",placeholder:"请输入密码"},model:{value:t.formItemPwd.checkPwd,callback:function(e){t.$set(t.formItemPwd,"checkPwd","string"===typeof e?e.trim():e)},expression:"formItemPwd.checkPwd"}})],1),a("FormItem",{attrs:{label:""}},[a("Checkbox",{model:{value:t.formItemPwd.logFlag,callback:function(e){t.$set(t.formItemPwd,"logFlag",e)},expression:"formItemPwd.logFlag"}},[t._v("登陆后修改密码")])],1)],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"primary"},on:{click:function(e){t.handleSubmitResetPW("formItemPwd")}}},[t._v("确定")]),a("Button",{staticStyle:{"margin-left":"10px"},on:{click:function(e){t.handleCancel("formItemPwd")}}},[t._v("取消")])],1)])],1)},s=[],o=(a("96cf"),a("1da1")),r=(a("6762"),a("2fdb"),a("be94")),n=a("7340"),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"formed-form"},[a("div",{staticClass:"formed-form-item"},[a("span",[t._v("账号：")]),a("span",[t._v(t._s(t.userList.accountNumber))])]),a("div",{staticClass:"formed-form-item"},[a("span",[t._v("姓名：")]),a("span",[t._v(t._s(t.userList.userName))])]),a("div",{staticClass:"formed-form-item"},[a("span",[t._v("邮箱：")]),a("span",[t._v(t._s(t.userList.mail))])]),a("div",{staticClass:"formed-form-item"},[a("span",[t._v("手机号：")]),a("span",[t._v(t._s(t.userList.phoneNumber))])]),a("div",{staticClass:"formed-form-item"},[a("span",[t._v("身份证号：")]),a("span",[t._v(t._s(t.userList.idNum))])]),a("div",{staticClass:"formed-form-item"},[a("span",[t._v("性别：")]),a("span",[t._v(t._s(t.userList.gender))])]),a("div",{staticClass:"formed-form-item"},[a("span",[t._v("生日：")]),a("span",[t._v(t._s(t.userList.birthday))])]),a("div",{staticClass:"formed-form-item"},[a("span",[t._v("职位：")]),a("span",[t._v(t._s(t.userList.job))])]),a("div",{staticClass:"formed-form-item"},[a("span",[t._v("工号：")]),a("span",[t._v(t._s(t.userList.jobNo))])]),a("div",{staticClass:"formed-form-item"},[a("span",[t._v("工作部门：")]),a("span",t._l(t.groupList,function(e,i){return a("a",{key:i,staticClass:"link",attrs:{value:i},on:{click:function(e){t.toGroupList(i)}}},[t._v("\n        "+t._s(e.parentPathName)+"\n        "),a("br")])}),0)]),a("div",{staticClass:"formed-form-item"},[a("span",[t._v("安全组：")]),a("span",t._l(t.teamList,function(e,i){return a("a",{key:i,staticClass:"link",attrs:{value:i},on:{click:function(e){t.toTeamDetail(i)}}},[t._v("\n        "+t._s(e.teamName)+"\n        "),a("br")])}),0)]),a("div",{staticClass:"formed-form-item"},[a("span",[t._v("账号绑定：")]),a("span",[a("div",{staticClass:"text"},[t._v("\n        AD域:\n        "),a("span",[t._v(t._s(t.adbinding))]),a("span",{staticClass:"ad-name"},[t._v(t._s(t.adName))])]),a("div",{staticClass:"text"},[t._v("\n        赛赋认证:\n        "),a("span",[t._v(t._s(t.saiFuBinding))])]),a("div",{staticClass:"text"},[t._v("\n        钉钉:\n        "),a("span",[t._v(t._s(t.bindingDingDing))])]),a("div",{staticClass:"text"},[t._v("\n        大白认证::\n        "),a("span",[t._v(t._s(t.dabbyBinding))])]),a("div",{staticClass:"text"},[t._v("\n        企业微信认证:\n        "),a("span",[t._v(t._s(t.wxBinding))])])])])])},c=[],u=a("2f62"),d={data:function(){return{accountNumber:"",uuid:0,groupId:0,groupList:[],teamList:[],userList:{},adbinding:"",adName:"",saiFuBinding:"",bindingDingDing:"",dabbyBinding:"",wxBinding:"",selectDepartment:[],selectSecurityGroup:[]}},props:{},computed:Object(r["a"])({},Object(u["c"])(["group"])),created:function(){this.accountNumber=this.$route.query.accountNumber,this.groupId=this.$route.query.groupId,this.uuid=this.$route.query.uuid,this.getUserDetails()},methods:Object(r["a"])({toGroupList:function(t){this.$router.push({path:"/userCatalogOS"}),this.changeGroup(this.groupList[t])},toTeamDetail:function(t){this.$router.push({path:"/userCatalogSGM/detail",query:{teamId:this.teamList[t].id,teamName:this.teamList[t].teamName,dsgTeamId:this.teamList[t].dsgTeamId}})},edit:function(){this.$emit("msg",!1)},getUserDetails:function(){var t=this,e={queryType:"",accountNumber:this.accountNumber,uuid:this.uuid,groupId:this.groupId};this.axios({method:"post",data:e,url:"/cipher/userMsg/modifyUser"}).then(function(e){0===e.data.code&&(t.userList=e.data.msg.user,t.birthday=e.data.msg.user.birthday,t.adbinding=e.data.msg.adbinding?"已绑定":"未绑定",t.adName=e.data.msg.adbinding||"",t.saiFuBinding=e.data.msg.saiFuBinding?"已绑定":"未绑定",t.bindingDingDing=e.data.msg.bindingDingDing?"已绑定":"未绑定",t.dabbyBinding=e.data.msg.dabbyBinding?"已绑定":"未绑定",t.wxBinding=e.data.msg.wxBinding?"已绑定":"未绑定",t.groupList=e.data.msg.groupList,t.teamList=e.data.msg.teamList)}).catch(function(t){this.axios.error.handlingErrors(t)})}},Object(u["b"])(["changeGroup"]))},m=d,p=(a("c480"),a("2877")),h=Object(p["a"])(m,l,c,!1,null,"11c8a10a",null),f=h.exports,g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"formed-wrap"},[a("Form",{ref:"user",staticClass:"formed-form",attrs:{model:t.user,rules:t.ruleValidate,"label-width":80}},[a("div",{staticClass:"mainContent"},[a("div",{staticClass:"common bottom"},[a("FormItem",{attrs:{label:"账号",prop:"accountNumber"}},[a("Input",{attrs:{placeholder:"请输入账号",disabled:""},model:{value:t.user.accountNumber,callback:function(e){t.$set(t.user,"accountNumber","string"===typeof e?e.trim():e)},expression:"user.accountNumber"}})],1),a("FormItem",{attrs:{label:"姓名",prop:"userName"}},[a("Input",{attrs:{placeholder:"请输入姓名"},model:{value:t.user.userName,callback:function(e){t.$set(t.user,"userName","string"===typeof e?e.trim():e)},expression:"user.userName"}})],1),a("FormItem",{attrs:{label:"邮箱",prop:"mail"}},[a("Input",{attrs:{placeholder:"请输入邮箱"},model:{value:t.user.mail,callback:function(e){t.$set(t.user,"mail","string"===typeof e?e.trim():e)},expression:"user.mail"}})],1),a("FormItem",{attrs:{label:"手机号",prop:"phoneNumber"}},[a("Input",{attrs:{placeholder:"请输入手机号"},model:{value:t.user.phoneNumber,callback:function(e){t.$set(t.user,"phoneNumber","string"===typeof e?e.trim():e)},expression:"user.phoneNumber"}})],1),a("FormItem",{attrs:{label:"身份证号",prop:"idNum"}},[a("Input",{attrs:{placeholder:"请输入身份证号"},model:{value:t.user.idNum,callback:function(e){t.$set(t.user,"idNum","string"===typeof e?e.trim():e)},expression:"user.idNum"}})],1),a("FormItem",{attrs:{label:"性别",prop:"gender"}},[a("Select",{attrs:{placeholder:"请输入性别"},model:{value:t.user.gender,callback:function(e){t.$set(t.user,"gender",e)},expression:"user.gender"}},[a("Option",{attrs:{value:"男"}},[t._v("男")]),a("Option",{attrs:{value:"女"}},[t._v("女")])],1)],1),a("FormItem",{attrs:{label:"生日",prop:"birthday"}},[a("DatePicker",{attrs:{type:"date",placeholder:"请选择生日"},model:{value:t.birthday,callback:function(e){t.birthday=e},expression:"birthday"}})],1)],1),a("div",{staticClass:"common bottom"},[a("FormItem",{attrs:{label:"职位",prop:"job"}},[a("Input",{attrs:{placeholder:"请输入职位"},model:{value:t.user.job,callback:function(e){t.$set(t.user,"job","string"===typeof e?e.trim():e)},expression:"user.job"}})],1),a("FormItem",{attrs:{label:"工号",prop:"jobNo"}},[a("Input",{attrs:{placeholder:"请输入工号"},model:{value:t.user.jobNo,callback:function(e){t.$set(t.user,"jobNo","string"===typeof e?e.trim():e)},expression:"user.jobNo"}})],1),a("FormItem",{staticClass:"tag",attrs:{label:"工作部门",prop:"department"}},[a("div",t._l(t.groupList,function(e,i){return a("Tag",{key:i,attrs:{closable:"",name:i},on:{"on-close":function(e){t.closeDepartment(i)}}},[t._v(t._s(e.groupName))])}),1),a("span",{staticClass:"link",on:{click:function(e){t.editDepartment()}}},[t._v("修改")])])],1),a("div",{staticClass:"common bottom"},[a("FormItem",{staticClass:"tag",attrs:{label:"安全组",prop:"securityGroup"}},[a("div",t._l(t.teamList,function(e,i){return a("Tag",{key:i,attrs:{closable:"",name:i},on:{"on-close":function(e){t.closeSecurityGroup(i)}}},[t._v(t._s(e.teamName))])}),1),a("span",{staticClass:"link",on:{click:function(e){t.editSecurityGroup()}}},[t._v("修改")])]),a("FormItem",{attrs:{label:"账号绑定:"}},[a("div",{staticClass:"text"},[t._v("\n            AD域:\n            "),a("span",[t._v(t._s(t.adbinding))]),a("span",{staticClass:"ad-name"},[t._v(t._s(t.adName))])]),a("div",{staticClass:"text"},[t._v("\n            赛赋认证:\n            "),a("span",[t._v(t._s(t.saiFuBinding))]),"已绑定"===t.saiFuBinding&&1===t.unbindSf?a("span",{staticClass:"link",on:{click:function(e){t.unbind(1)}}},[t._v("解绑")]):t._e(),0===t.unbindSf?a("span",{staticClass:"disabled"},[t._v("已操作解绑，保存后生效")]):t._e()]),a("div",{staticClass:"text"},[t._v("\n            钉钉:\n            "),a("span",[t._v(t._s(t.bindingDingDing))]),"已绑定"===t.bindingDingDing&1===t.unbindDd?a("span",{staticClass:"link",on:{click:function(e){t.unbind(2)}}},[t._v("解绑")]):t._e(),0===t.unbindDd?a("span",{staticClass:"disabled"},[t._v("已操作解绑，保存后生效")]):t._e()]),a("div",{staticClass:"text"},[t._v("\n            大白认证:\n            "),a("span",[t._v(t._s(t.dabbyBinding))]),"已绑定"===t.dabbyBinding&1===t.unbindDb?a("span",{staticClass:"link",on:{click:function(e){t.unbind(3)}}},[t._v("解绑")]):t._e(),0===t.unbindDb?a("span",{staticClass:"disabled"},[t._v("已操作解绑，保存后生效")]):t._e()]),a("div",{staticClass:"text"},[t._v("\n            企业微信认证:\n            "),a("span",[t._v(t._s(t.wxBinding))]),"已绑定"===t.wxBinding&1===t.unbindWx?a("span",{staticClass:"link",on:{click:function(e){t.unbind(4)}}},[t._v("解绑")]):t._e(),0===t.unbindWx?a("span",{staticClass:"disabled"},[t._v("已操作解绑，保存后生效")]):t._e()])])],1)])]),a("div",{staticClass:"formed-footer"},[a("myButton",{attrs:{btnType:"info"},on:{click:function(e){t.handleSubmitSave("user")}}},[t._v("保存")]),a("myButton",{on:{click:t.cancel}},[t._v("取消")])],1),a("Modal",{staticClass:"tree-transfer",attrs:{width:"668"},model:{value:t.editDepartmentFlag,callback:function(e){t.editDepartmentFlag=e},expression:"editDepartmentFlag"}},[a("p",{attrs:{slot:"header"},slot:"header"},[a("span",[t._v("设置用户部门")])]),a("div",[a("TreeTransfer",{attrs:{leftTreeData:t.departmentList,leftDataType:t.dataType,placeholder:t.placeholder},on:{rightData:t.getDepartmentData}},[a("span",{attrs:{slot:"leftText"},slot:"leftText"},[t._v("选择部门")]),a("span",{attrs:{slot:"rightText"},slot:"rightText"},[t._v("已选择部门")])])],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"primary"},on:{click:function(e){t.updateDepartment()}}},[t._v("保存")]),a("Button",{staticStyle:{"margin-left":"10px"},on:{click:function(e){t.handleResetDepartment()}}},[t._v("重置")])],1)]),a("Modal",{model:{value:t.securityGroupFlag,callback:function(e){t.securityGroupFlag=e},expression:"securityGroupFlag"}},[a("p",{attrs:{slot:"header"},slot:"header"},[a("span",[t._v("设置安全组")])]),a("div",[a("TreeTransfer",{attrs:{leftTreeData:t.securityGroupList,leftDataType:t.dataType,placeholder:t.placeholder},on:{rightData:t.getSecurityGroup}},[a("span",{attrs:{slot:"leftText"},slot:"leftText"},[t._v("选择安全组")]),a("span",{attrs:{slot:"rightText"},slot:"rightText"},[t._v("已选择安全组")])])],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"primary"},on:{click:function(e){t.updateSecurityGroup()}}},[t._v("保存")]),a("Button",{staticStyle:{"margin-left":"10px"},on:{click:function(e){t.handleResetTeam()}}},[t._v("重置")])],1)]),t.message.show?a("Notice",{attrs:{text:t.message.text,show:t.message.show,duration:t.message.duration,onClose:t.message.onClose}}):t._e(),t.confirm.flag?a("Confirm",{attrs:{flag:t.confirm.flag,title:t.confirm.title,content:t.confirm.content,onOk:t.confirm.onOk,onClose:t.confirm.onClose}}):t._e()],1)},v=[],b=(a("ac6a"),a("6b54"),a("28a5"),a("a481"),a("c791")),y=a("faeb"),I=a("6a6b"),w=a("8f5b"),A={title:{target:"title",original:"text"},children:{target:"children",original:"nodes"}},C={components:{TreeTransfer:b["a"],Notice:y["a"],Confirm:I["a"]},data:function(){var t=function(t,e,a){(!e.replace(/^ +| +$/,"")||e.length>50)&&a(new Error("请输入不超过50位账号"));var i=w["a"].accountNumber;i.test(e)||a(new Error("请输入包含英文字符，数字或特殊符号的账号")),a()},e=function(t,e,a){(!e.replace(/^ +| +$/,"")||e.length>100)&&a(new Error("请输入不超过100位姓名")),a()},a=function(t,e,a){var i={11:"北京",12:"天津",13:"河北",14:"山西",15:"内蒙古",21:"辽宁",22:"吉林",23:"黑龙江 ",31:"上海",32:"江苏",33:"浙江",34:"安徽",35:"福建",36:"江西",37:"山东",41:"河南",42:"湖北 ",43:"湖南",44:"广东",45:"广西",46:"海南",50:"重庆",51:"四川",52:"贵州",53:"云南",54:"西藏 ",61:"陕西",62:"甘肃",63:"青海",64:"宁夏",65:"新疆",71:"台湾",81:"香港",82:"澳门",91:"国外 "},s=w["a"].identity;if(null===e||0===e.length)a();else if(s.test(e))if(i[e.substr(0,2)]){if(18===e.length){e=e.split("");for(var o=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2],r=[1,0,"X",9,8,7,6,5,4,3,2],n=0,l=0,c=0,u=0;u<17;u++)l=e[u],c=o[u],n+=l*c;r[n%11].toString()!==e[17]&&a(new Error("身份证格式不正确"))}}else a(new Error("身份证格式不正确"));else a(new Error("身份证格式不正确"));a()};return{birthday2:"",birthday:"",accountNumber:"",uuid:0,groupId:0,securityGroupListBak:[],departmentListBak:[],unSaveDepartment:[],unSaveTeam:[],groupIds:"",teamIds:"",data2:[],departmentList:[],securityGroupList:[],user:{},groupList:[],teamList:[],adbinding:"",adName:"",saiFuBinding:"",bindingDingDing:"",dabbyBinding:"",wxBinding:"",unbindSf:1,unbindDd:1,unbindDb:1,unbindWx:1,unbindType:0,dataType:0,editDepartmentFlag:!1,placeholder:"",userIds:"",selectDepartment:[],selectDepartmentBak:[],securityGroupFlag:!1,selectSecurityGroup:[],selectSecurityGroupBak:[],ruleValidate:{accountNumber:[{required:!0,validator:t,trigger:"blur"}],userName:[{required:!0,validator:e,trigger:"blur"}],mail:[{required:!0,message:"请输入邮箱",trigger:"blur"},{type:"email",message:"邮箱格式不正确",trigger:"blur"}],idNum:[{validator:a,trigger:"blur"}]},message:{text:"保存成功!",show:!1,duration:1,onClose:this.close},confirm:{flag:!1,title:"你确定要解除绑定赛赋认证吗？",content:"点击确定后并保存解除绑定。",onOk:this.onConfirmOK,onClose:this.onConfirmClose}}},created:function(){this.accountNumber=this.$route.query.accountNumber,this.uuid=this.$route.query.uuid,this.groupId=this.$route.query.groupId},mounted:function(){this.getUserDetails()},methods:{unbind:function(t){switch(this.confirm.flag=!0,this.unbindType=t,t){case 1:this.confirm.title="你确定要解除绑定赛赋认证吗？";break;case 2:this.confirm.title="你确定要解除绑定钉钉吗？";break;case 3:this.confirm.title="你确定要解除绑定大白认证吗？";break;case 4:this.confirm.title="你确定要解除绑定企业微信认证吗？";break}},onConfirmOK:function(){switch(this.unbindType){case 1:this.unbindSf=0;break;case 2:this.unbindDd=0;break;case 3:this.unbindDb=0;break;case 4:this.unbindWx=0;break}this.confirm.flag=!1},onConfirmClose:function(){this.confirm.flag=!1},getUserDetails:function(){var t=this,e={queryType:"",accountNumber:this.accountNumber,uuid:this.uuid,groupId:this.groupId};this.axios({method:"post",data:e,url:"/cipher/userMsg/modifyUser"}).then(function(e){if(0===e.data.code){t.user=e.data.msg.user,t.birthday=e.data.msg.user.birthday,t.adbinding=e.data.msg.adbinding?"已绑定":"未绑定",t.adName=e.data.msg.adbinding||"",t.saiFuBinding=e.data.msg.saiFuBinding?"已绑定":"未绑定",t.bindingDingDing=e.data.msg.bindingDingDing?"已绑定":"未绑定",t.dabbyBinding=e.data.msg.dabbyBinding?"已绑定":"未绑定",t.wxBinding=e.data.msg.wxBinding?"已绑定":"未绑定",t.groupList=e.data.msg.groupList;var a=[];t.groupList.forEach(function(t){a.push(t.groupId)}),t.groupIds=a.join(","),t.teamList=e.data.msg.teamList;var i=[];t.teamList.forEach(function(t){i.push(t.id)}),t.teamIds=i.join(",")}}).catch(function(t){this.axios.error.handlingErrors(t)})},cancel:function(){this.$emit("msg",!0)},editDepartment:function(){var t=this;t.dataType=2,t.editDepartmentFlag=!0;var e={queryType:"",accountNumber:t.accountNumber,uuid:t.uuid,groupId:t.groupId};this.axios({method:"post",data:e,url:"/cipher/userMsg/modifyUser"}).then(function(e){0===e.data.code&&(t.data2=e.data.msg.groupTrees,t.data2=t.$common.cloneAssemblyAssignData(e.data.msg.groupTrees,A,!0),t.data2=t.$common.initSelect(t.data2),t.departmentList=t.data2,t.departmentListBak=t.$common.clone(t.departmentList),t.placeholder="请输入部门")}).catch(function(t){this.axios.error.handlingErrors(t)})},editSecurityGroup:function(){var t=this;t.dataType=3,t.securityGroupFlag=!0;var e={queryType:"",accountNumber:t.accountNumber,uuid:t.uuid,groupId:t.groupId};this.axios({method:"post",data:e,url:"/cipher/userMsg/modifyUser"}).then(function(e){0===e.data.code&&(t.securityGroupList=e.data.msg.teamApplicationMaps,t.securityGroupListBak=t.$common.clone(t.securityGroupList))}).catch(function(t){this.axios.error.handlingErrors(t)})},getDepartmentData:function(t){var e=this;e.unSaveDepartment=t},updateDepartment:function(){var t=[];this.unSaveDepartment.forEach(function(e){t.push(e.groupId)}),this.groupIds=t.join(","),this.groupList=this.unSaveDepartment,this.editDepartmentFlag=!1},getSecurityGroup:function(t){var e=this;e.unSaveTeam=t},updateSecurityGroup:function(){var t=[];this.unSaveTeam.forEach(function(e){t.push(e.id)}),this.teamIds=t.join(","),this.teamList=this.unSaveTeam,this.securityGroupFlag=!1},handleResetDepartment:function(){this.departmentList=this.$common.clone(this.departmentListBak)},handleResetTeam:function(){this.securityGroupList=this.$common.clone(this.securityGroupListBak)},handleSubmitSave:function(t){var e=this;this.$refs[t].validate(function(t){if(t){null!==e.birthday&&""!==e.birthday&&(e.birthday2=e.$common.formatDate(e.birthday));var a={userName:e.user.userName,accountNumber:e.user.accountNumber,uuid:e.uuid,phoneNumber:e.user.phoneNumber,idNum:e.user.idNum,mail:e.user.mail,jobNo:e.user.jobNo,job:e.user.job,birthday:e.birthday2,gender:e.user.gender,groupIds:e.groupIds,teamIds:e.teamIds,unbindSf:e.unbindSf,unbindDd:e.unbindDd,unbindDb:e.unbindDb,unbindWx:e.unbindWx};e.axios({method:"post",data:a,url:"/cipher/user/updateNewUser"}).then(function(t){"1"===t.data.return_code?(e.$myMessage.success(t.data.msg),e.cancel()):0===t.data.return_code&&e.$myMessage.error(t.data.msg)}).catch(function(t){console.log(t)})}else e.$myMessage.error("表单验证失败")})},closeDepartment:function(t){this.groupList.splice(t,1);var e=[];this.groupList.forEach(function(t){e.push(t.groupId)}),this.groupIds=e.join(",")},closeSecurityGroup:function(t){this.teamList.splice(t,1);var e=[];this.teamList.forEach(function(t){e.push(t.id)}),this.teamIds=e.join(",")},close:function(){this.message.show=!1,this.$router.push({path:"/userCatalogOS/detail",query:{accountNumber:this.formValidate.accountNumber,uuid:this.$route.query.uuid}})}}},_=C,x=(a("a80c"),Object(p["a"])(_,g,v,!1,null,"29400f16",null)),S=x.exports,D=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tabled-wrap"},[a("div",{staticClass:"tabled-table org-app-list-table"},[a("Table",{attrs:{border:"",columns:t.columns7,data:t.appListData.rows}})],1),a("Page",{staticClass:"tabled-page",attrs:{total:t.appListData.records,current:t.curentPage,"show-elevator":"","show-sizer":"","show-total":""},on:{"on-change":t.changePage,"on-page-size-change":t.pageSizeChange}}),a("Modal",{attrs:{width:"400"},model:{value:t.modal1,callback:function(e){t.modal1=e},expression:"modal1"}},[a("p",{staticClass:"header",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("配置从账号")]),a("span",{staticClass:"sub-title"},[t._v("（"+t._s(t.applicationName)+"）")])]),a("Form",{attrs:{"label-width":80}},[a("FormItem",{attrs:{label:"从账号："}},[t.isSubConfig?a("Input",{model:{value:t.subAccount,callback:function(e){t.subAccount="string"===typeof e?e.trim():e},expression:"subAccount"}}):a("Input",{attrs:{readonly:""},model:{value:t.subAccount,callback:function(e){t.subAccount="string"===typeof e?e.trim():e},expression:"subAccount"}})],1),a("FormItem",{attrs:{label:"密码："}},[t.isSubPwdConfig?a("Input",{model:{value:t.password,callback:function(e){t.password="string"===typeof e?e.trim():e},expression:"password"}}):a("Input",{attrs:{readonly:""},model:{value:t.password,callback:function(e){t.password="string"===typeof e?e.trim():e},expression:"password"}})],1)],1),a("p",{staticClass:"footer",attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"primary"},on:{click:function(e){t.ok()}}},[t._v("确定")]),a("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(e){t.modal1=!1}}},[t._v("取消")])],1)],1)],1)},k=[],T={props:{userName:{type:String,required:!0}},data:function(){var t=this;return{accountNumber:"",uuid:0,groupId:0,id:0,applicationName:"",appClientId:"",subAccount:"",password:"",modal1:!1,modal2:!1,tableh:"",appListData:{},curentPage:1,size:10,total:0,ip:"",username:"",isSubConfig:!0,isSubPwdConfig:!0,columns7:[{title:"应用名称",key:"applicationName",render:function(e,a){return e("a",{on:{click:function(){t.changeAppId(a.row.id),t.$router.push({name:"appDetails"})}}},a.row.applicationName)}},{title:"应用子账号",key:"subAccount"},{title:"授权路径",key:"pathInfo",render:function(e,a){var i=a.row.pathInfo,s="个人授权",o=null===a.row.pathInfo;if(null!==i){var r=null!==i.groupList,n=i.groupList;s=r?n.parentPathName.substring(0,n.parentPathName.length-1):i.teamList.teamName}return e("a",{class:{normal:o},on:{click:function(){t.skip(i)}}},s)}},{title:"同步记录",key:"isSyschronTime",render:function(t,e){var a=e.row.isSyschronTime||"未同步";return t("span",{},a)}},{title:"操作",key:"edit",width:300,align:"center",render:function(e,a){var i=null===a.row.pathInfo,s=a.row.isSynchron?"":"同步";return e("span",[e("a",{on:{click:function(){s&&t.handleSync(a.index)}}},s),e("a",{on:{click:function(){t.setAccountNumber(a.index)}}},"配置从账号"),e("a",{class:{disabled:!i},on:{click:function(){t.deleteAuth(a.index)}}},"取消授权")])}}]}},created:function(){this.accountNumber=this.$route.query.accountNumber,this.uuid=this.$route.query.uuid,this.groupId=this.$route.query.groupId},mounted:function(){var t={accountNumber:this.accountNumber,uuid:this.uuid,groupId:this.groupId,rows:this.size,page:1};this.getUserAppList(t)},methods:Object(r["a"])({deleteappAuth:function(){var t=this,e={applicationId:this.id,accountNumber:this.accountNumber,uuid:this.uuid};this.axios({method:"post",data:e,url:"/cipher/appAuth/deleteUserAuth"}).then(function(e){if(0!==e.data.return_code){if(1===e.data.return_code&&0===e.data.depatment.length&&0===e.data.teams.length)t.$Modal.success({title:"操作成功",content:"取消授权成功"});else if(1===e.data.return_code&&e.data.depatment.length>0&&e.data.teams.length>0){var a=[],i=[];a=e.data.depatment,i=e.data.teams;for(var s="",o="",r=0;r<a.length;r++)s+="["+a[r].groupName+"]";for(var n=0;n<i.length;n++)o+="["+i[n].teamName+"]";t.$Modal.error({title:"取消授权失败",content:"该应用在"+s+"部门以及"+o+"安全组下。"})}else if(1===e.data.return_code&&e.data.depatment.length>0&&0===e.data.teams.length){var l=[];l=e.data.depatment;for(var c="",u=0;u<l.length;u++)c+="["+l[u].groupName+"]";t.$Modal.error({title:"取消授权失败",content:"该应用在"+c+"部门下。"})}else if(1===e.data.return_code&&0===e.data.depatment.length&&e.data.teams.length>0){var d=[];d=e.data.teams;for(var m="",p=0;p<d.length;p++)m+="["+d[p].teamName+"]";t.$Modal.error({title:"取消授权失败",content:"该应用在"+m+"安全组下。"})}var h={accountNumber:t.accountNumber,uuid:t.uuid,groupId:t.groupId,rows:t.size,page:1};t.getUserAppList(h)}else t.$myMessage.error(e.data.return_msg)}).catch(function(t){console.log(t)})},deleteAuth:function(t){var e=this;this.applicationName=this.appListData.rows[t].applicationName,this.id=this.appListData.rows[t].id,this.$myModal.confirm({title:"取消授权",content:"确认取消该用户的"+this.applicationName+"权限吗?"}).then(function(){var t=Object(o["a"])(regeneratorRuntime.mark(function t(a){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:e.deleteappAuth();case 1:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()).catch(function(){})},ok:function(){var t=this,e={appClientId:this.appClientId,accountNumber:this.accountNumber,uuid:this.uuid,subAccount:this.subAccount,password:this.password};this.axios({method:"post",data:e,url:"/cipher/subdown/dowmSingleSubAccount"}).then(function(e){if(0===e.data.return_code){t.$Modal.success({title:"提示",content:e.data.return_msg+e.data.successed+"条，失败"+e.data.fail+"条"});var a={accountNumber:t.accountNumber,uuid:t.uuid,groupId:t.groupId,rows:t.size,page:t.curentPage};t.getUserAppList(a)}else t.$Modal.error({title:"同步失败",content:e.data.return_msg})}).catch(function(t){console.log(t)})},setAccountNumber:function(t){this.modal1=!0;var e=this.appListData.rows[t].subAccountRuleInfo;null!==e&&(1===e.assManual&&(this.isSubConfig=!1),1===e.assPwdManual&&(this.isSubPwdConfig=!1)),this.appClientId=this.appListData.rows[t].applicationId,this.applicationName=this.appListData.rows[t].applicationName,this.findsub(t)},findsub:function(t){var e=this;this.subAccount="",this.password="";var a={appClientId:this.appClientId,accountNumber:this.accountNumber,uuid:this.uuid};this.axios({method:"post",data:a,url:"/cipher/subdown/recomendSubAccount"}).then(function(t){1===t.data.return_code&&(e.subAccount=t.data.userName)}).catch(function(t){console.log(t)})},getUserAppList:function(t){var e=this;this.axios({method:"post",data:t,url:"/cipher/userMsg/getSublist?json"}).then(function(t){e.appListData=t.data}).catch(function(t){console.log(t)})},pageSizeChange:function(t){var e={accountNumber:this.accountNumber,uuid:this.uuid,groupId:this.groupId,page:1,rows:t};this.getUserAppList(e),this.size=t},changePage:function(t){var e={accountNumber:this.accountNumber,uuid:this.uuid,groupId:this.groupId,page:t,rows:this.size};this.curentPage=t,this.getUserAppList(e)}},Object(u["b"])(["changeGroup"]),{skip:function(t){null!==t.groupList?this.toGroupList(t.groupList):this.toTeamDetail(t.teamList)},toGroupList:function(t){this.$router.push({path:"/userCatalogOS"}),this.changeGroup(t)},toTeamDetail:function(t){this.$router.push({path:"/userCatalogSGM/detail",query:{teamId:t.id,teamName:t.teamName,dsgTeamId:t.dsgTeamId}})},handleSync:function(t){var e=this,a={appClientId:this.appListData.rows[t].applicationId,userIds:this.uuid};this.axios({method:"post",url:"/cipher/subdown/downSelectsubAccount",data:a}).then(function(t){0===t.data.return_code?(e.returnDemo=t.data,e.$myModal.success({title:"同步成功",content:"成功".concat(e.returnDemo.successed,"条,失败").concat(e.returnDemo.fail,"条,").concat(e.returnDemo.return_msg)}),e.changePage(e.curentPage)):e.$myModal.error({title:"同步失败",content:t.data.return_msg})}).catch(function(t){e.$Notice.warning({title:"网络未知错误！",desc:t})})}},Object(u["b"])(["changeGroup","changeAppId"]))},L=T,M=(a("4046"),Object(p["a"])(L,D,k,!1,null,"7a1b9301",null)),N=M.exports,E={start:{text:"启用",type:1},stop:{text:"停用",type:2}},O={components:{DetailList:f,DetailEdit:S,appList:N},data:function(){var t=this,e=function(e,a,i){a?a!==t.formItemPwd.password?i(new Error("两次输入的密码不匹配")):i():i(new Error("请再次输入密码"))};return{number:1,fresh:0,detail:!0,userName:"",status:"",statusStyle:{backgroundColor:"#00a854"},operateList:[],operateListBak:[{value:"重置密码",label:"重置密码"},{value:"删除用户",label:"删除用户"}],currentTab:"user",userList:{},accountNumber:"",uuid:0,groupId:"",pwdFlag:!1,pwdType:"",pwdComplexRateInfo:{},formItemPwd:{password:"",checkPwd:"",logFlag:!0},ruleValidate:{password:[{required:!0,message:"密码不能为空",trigger:"blur"}],checkPwd:[{required:!0,message:"密码不能为空",trigger:"blur"},{validator:e,trigger:"blur"}]}}},computed:Object(r["a"])({},Object(u["c"])(["selectOSTree"])),created:function(){this.accountNumber=this.$route.query.accountNumber,this.uuid=this.$route.query.uuid,this.groupId=this.$route.query.groupId,this.getUserDetails()},methods:{changeStatus:function(){this.$refs[this.currentTab].edit()},sendMsgFromChild:function(t){this.detail=t,t&&this.getUserDetails()},getUserDetails:function(){var t=this;this.accountNumber=this.$route.query.accountNumber,this.groupId=this.$route.query.groupId;var e={queryType:"",accountNumber:this.accountNumber,uuid:this.uuid,groupId:this.groupId};this.axios({method:"post",data:e,url:n["a"].getUserDetails}).then(function(e){if(e.data.code!==n["a"].returnOk)throw new Error("请求失败");var a=e.data.msg;t.userName=a.user.userName,t.status=a.user.accountStatus,t.userList=a.user,t.dataMsg=a,t.assembleOperate()}).catch(function(t){this.axios.error.handlingErrors(t)})},assembleOperate:function(){var t=this.status;switch(t){case"启用":this.statusStyle.backgroundColor="#00a854",t="停用";break;case"停用":this.statusStyle.backgroundColor="#ff9900",t="启用";break;case"锁定":this.statusStyle.backgroundColor="#ed4014",t="解锁";break;default:break}var e={value:t,label:t};this.operateList=this.$common.clone(this.operateListBak),this.operateList.unshift(e)},operate:function(t){switch(t){case"启用":case"停用":this.openChangeStatus();break;case"解锁":this.unlock();break;case"重置密码":this.openResetPW();break;case"删除用户":this.deleteAccount();break;default:break}},openChangeStatus:function(){var t=this,e=this.userList,a={};e.accountStatus.includes(E.start.text)?(a.text=E.stop.text,a.type=2):(a.text="确定"+E.start.text+"吗？",a.text=E.start.text,a.type=1),a.accountNumber=e.accountNumber,a.uuid=e.uuid,this.$myModal.confirm({title:"确定"+a.text+"吗？"}).then(function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(i){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t.handleSubmitStatus(a);case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()).catch(function(){})},handleSubmitStatus:function(t){var e=this,a={accountNumber:t.accountNumber,uuid:t.uuid,status:t.type};this.axios({method:"post",data:a,url:n["a"].setStatus}).then(function(a){if(a.status===n["a"].statusOk)e.$myMessage.success(t.text+"成功"),e.getUserDetails();else{var i={title:t.text+"失败",content:"请稍后重试"};e.$myModal.error(i)}}).catch(function(t){this.axios.error.handlingErrors(t)})},unlock:function(){var t=this;this.$myModal.confirm({title:"确认解锁此用户吗？"}).then(function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(a){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t.handleSubmitUnlock();case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()).catch(function(){})},handleSubmitUnlock:function(){var t=this,e={accountNumber:this.userList.accountNumber,uuid:this.userList.uuid};this.axios({method:"post",data:e,url:n["a"].unlock}).then(function(e){if(e.status===n["a"].statusOk&&e.data.return_code===n["a"].successOk)t.changeMainEnter(),t.$myMessage.success("解锁成功");else{var a={title:"解锁失败",content:"请稍后重试"};t.$myModal.error(a)}}).catch(function(t){this.axios.error.handlingErrors(t)})},openResetPW:function(){var t=this,e={groupId:this.userList.groupId,accountNumber:this.userList.accountNumber,uuid:this.userList.uuid};this.axios({method:"post",data:e,url:n["a"].getStrategy}).then(function(e){e.status===n["a"].statusOk&&e.data.return_code===n["a"].successOk?(t.pwdFlag=!0,0===e.data.is_ad_update?t.pwdType="local":t.pwdType="ad"):console.log(e.data.return_msg)}).catch(function(t){this.axios.error.handlingErrors(t)})},handleSubmitResetPW:function(t){var e=this;this.$refs[t].validate(function(t){if(t){var a,i={};"local"===e.pwdType?(a="/cipher/user/reset/password",i={accountNumber:e.userList.accountNumber,uuid:e.uuid,newPwd:e.formItemPwd.password,logFlag:e.formItemPwd.logFlag?0:1}):(a="/cipher/resetPwd/resetAdPwd",i={accountNumber:e.userList.accountNumber,uuid:e.uuid,pwd:e.formItemPwd.password,logFlag:e.formItemPwd.logFlag?0:1}),e.resetPW(i,a)}})},resetPW:function(t,e){var a=this;this.axios({method:"post",data:t,url:e}).then(function(t){if(1===t.data.return_code)a.$myMessage.success("重置密码成功"),a.handleCancel("formItemPwd");else{var e={title:"重置密码失败",content:t.data.return_msg};a.$myModal.error(e)}}).catch(function(t){this.axios.error.handlingErrors(t)})},deleteAccount:function(){var t=this;"启用"!==this.status?this.$myModal.confirm({title:"确认删除此用户吗？",content:"删除后无法复原，你还要继续吗？",confirmVal:"继续"}).then(function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(a){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t.handleSubmitDelete();case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()).catch(function(){}):this.$myModal.error({title:"账号启用状态不允许删除"})},handleSubmitDelete:function(){var t=this,e={accountNumber:this.userList.accountNumber,uuid:this.userList.uuid};this.axios({method:"post",data:e,url:n["a"].delete}).then(function(e){if(e.status===n["a"].statusOk&&e.data.return_code===n["a"].successOk)t.$myMessage.success("删除成功"),t.$router.push({path:"/userCatalogOS"});else{var a={title:"删除失败",content:"请稍后重试"};t.$myModal.error(a)}}).catch(function(t){this.axios.error.handlingErrors(t)})},handleCancel:function(t){this.pwdFlag=!1,this.$refs[t].resetFields()}}},$=O,P=(a("539f"),Object(p["a"])($,i,s,!1,null,"6452fe47",null));e["default"]=P.exports},a780:function(t,e,a){},a806:function(t,e,a){},a80c:function(t,e,a){"use strict";var i=a("0918"),s=a.n(i);s.a},a881:function(t,e,a){"use strict";var i=a("62e4"),s=a.n(i);s.a},a98e:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"md tabled-wrap"},[a("div",{staticClass:"tabled-header"},[a("div",{staticClass:"tabled-header-search"},[a("myInput",{attrs:{placeholder:"请输入姓名 / 账号",radius:"half",search:!0},on:{handleClick:t.querynamebtn},model:{value:t.queryName,callback:function(e){t.queryName=e},expression:"queryName"}})],1),a("div",{staticClass:"tabled-header-btn"},[a("span",[t._v("设备数量")]),a("myInput",{staticClass:"md-header__input--space",staticStyle:{width:"120px"},attrs:{type:"number",min:0,max:99,precision:0,placeholder:"请输入设备数量"},model:{value:t.number,callback:function(e){t.number=e},expression:"number"}}),a("myButton",{attrs:{btnType:"info"},on:{click:t.saveNumber}},[t._v("保存")])],1)]),a("div",{staticClass:"tabled-table"},[a("Table",{attrs:{border:"",columns:t.columns7,data:t.data6}})],1),a("Page",{staticClass:"tabled-page",attrs:{total:t.total,current:t.curentPage,"show-elevator":"","show-sizer":"","show-total":""},on:{"on-change":t.changePage,"on-page-size-change":t.pageSizeChange}})],1)},s=[],o=(a("96cf"),a("1da1")),r={data:function(){var t=this;return{total:0,queryName:"",size:10,curentPage:1,id:"",openSelect:0,number:0,columns7:[{title:"姓名",key:"name"},{title:"账号",key:"accountNumber"},{title:"设备",key:"hman"},{title:"绑定时间",key:"createTime"},{title:"操作",key:"action",width:150,align:"center",render:function(e,a){return e("a",[e("span",{props:{type:"text",size:"small"},style:{marginRight:"5px",color:"#19A0DD"},on:{click:function(){t.delete(a.index)}}},"解绑设备编号")])}}],data6:[]}},mounted:function(){var t=this,e={rows:t.size,page:1},a={};t.finddata(e),t.finddata2(a)},methods:{querynamebtn:function(){var t={rows:this.size,page:1,queryName:this.queryName};this.finddata(t)},finddata:function(t){var e=this;this.axios({method:"post",url:"/cipher/device/list?json",data:t}).then(function(t){e.data6=t.data.rows,e.total=t.data.total})},finddata2:function(t){var e=this;this.axios({method:"post",url:"/cipher/device/queryList",data:t}).then(function(t){e.number=t.data.number})},pageSizeChange:function(t){var e={rows:t,page:1,queryName:this.queryName};this.finddata(e),this.size=t},changePage:function(t){var e={rows:this.size,page:t,queryName:this.queryName};this.curentPage=t,this.finddata(e)},delete:function(t){var e=this;this.$myModal.confirm({title:"确定要解绑吗？"}).then(function(){var a=Object(o["a"])(regeneratorRuntime.mark(function a(i){return regeneratorRuntime.wrap(function(a){while(1)switch(a.prev=a.next){case 0:e.dodelete(t);case 1:case"end":return a.stop()}},a,this)}));return function(t){return a.apply(this,arguments)}}()).catch(function(){})},dodelete:function(t){var e=this,a=this,i={id:this.data6[t].id};this.axios({method:"post",url:"/cipher/device/delete",data:i}).then(function(i){0===i.data.returnCode?(a.$myMessage.success(i.data.msg),e.data6.splice(t,1)):1===i.data.returnCode&&a.$myMessage.error(i.data.msg)}).catch(function(t){console.log(t)})},saveNumber:function(){var t=this;this.$myModal.confirm({title:"确定要保存吗？"}).then(function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(a){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t.dosave();case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()).catch(function(){})},dosave:function(){var t=this,e={number:this.number,openSelect:this.openSelect};this.axios({method:"post",url:"/cipher/device/onAndoff",data:e}).then(function(e){0===e.data.returnCode?t.$myMessage.success(e.data.msg):1===e.data.returnCode&&t.$myMessage.error(e.data.msg)}).catch(function(t){console.log(t)})}}},n=r,l=(a("0754"),a("2877")),c=Object(l["a"])(n,i,s,!1,null,"1bf482f7",null);e["default"]=c.exports},a9d8:function(t,e,a){"use strict";e["a"]={wifiauthList:"/cipher/wifiauth/list?json",wifiauthUpdate:"/cipher/wifiauth/update",acsetList:"/cipher/acset/list",acsetCommon:"/cipher/acset/common?json",acsetUpdateNew:"/cipher/acset/updateNew",acsetUpdate:"/cipher/acset/update",wifiportalList:"/cipher/wifiportal/list",wifiportalUpdatePage:"/cipher/wifiportal/updatePage",wifiportalDelete:"/cipher/wifiportal/delete",strategyStaff:"/cipher/wifi/strategy/staff",staffUpdate:"/cipher/wifi/strategy/staff/update",strategVisitor:"/cipher/wifi/strategy/visitor",visitorUpdate:"/cipher/wifi/strategy/visitor/update",deviceList:"/cipher/staffdevice/list?json",deviceDelete:"/cipher/staffdevice/delete",strategyMac:"/cipher/wifi/strategy/mac",macUpdate:"/cipher/wifi/strategy/mac/update",statusOk:200,successOk:1,returnOk:0,statusText:"OK",errorStatus:2}},aa2a:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"formed-wrap"},[a("div",{staticClass:"formed-header"},[a("myButton",{staticClass:"formed-header-btn",on:{click:t.cancel}},[t._v("取消")])],1),a("div",{staticClass:"formed-container"},[a("Form",{staticClass:"formed-form",attrs:{model:t.formItem,"label-width":130}},[a("div",{staticClass:"formed-form-part"},[a("div",{staticClass:"formed-form-part-title"},[t._v("短信验证码")]),a("FormItem",{attrs:{label:"短信服务商："}},[a("mySelect",{attrs:{dataList:t.options,valueKey:"type",labelKey:"desc",width:"326px"},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}})],1),t.ronglianyun?[a("FormItem",{attrs:{label:"accountSid："}},[a("Input",{model:{value:t.formItem.accountSid,callback:function(e){t.$set(t.formItem,"accountSid",e)},expression:"formItem.accountSid"}})],1),a("FormItem",{attrs:{label:"accountSid："}},[a("Input",{model:{value:t.formItem.accountSid,callback:function(e){t.$set(t.formItem,"accountSid",e)},expression:"formItem.accountSid"}})],1),a("FormItem",{attrs:{label:"authToken："}},[a("Input",{attrs:{placeholder:""},model:{value:t.formItem.authToken,callback:function(e){t.$set(t.formItem,"authToken",e)},expression:"formItem.authToken"}})],1),a("FormItem",{attrs:{label:"appId："}},[a("Input",{attrs:{placeholder:""},model:{value:t.formItem.appId,callback:function(e){t.$set(t.formItem,"appId",e)},expression:"formItem.appId"}})],1)]:[a("FormItem",{attrs:{label:"product："}},[a("Input",{model:{value:t.formItem.product,callback:function(e){t.$set(t.formItem,"product",e)},expression:"formItem.product"}})],1),a("FormItem",{attrs:{label:"域名："}},[a("Input",{attrs:{placeholder:""},model:{value:t.formItem.domain,callback:function(e){t.$set(t.formItem,"domain",e)},expression:"formItem.domain"}})],1),a("FormItem",{attrs:{label:"accessKeyId："}},[a("Input",{attrs:{placeholder:""},model:{value:t.formItem.accessKeyId,callback:function(e){t.$set(t.formItem,"accessKeyId",e)},expression:"formItem.accessKeyId"}})],1),a("FormItem",{attrs:{label:"accessKeySecret："}},[a("Input",{attrs:{placeholder:""},model:{value:t.formItem.accessKeySecret,callback:function(e){t.$set(t.formItem,"accessKeySecret",e)},expression:"formItem.accessKeySecret"}})],1),a("FormItem",{attrs:{label:"signName："}},[a("Input",{attrs:{placeholder:""},model:{value:t.formItem.signName,callback:function(e){t.$set(t.formItem,"signName",e)},expression:"formItem.signName"}})],1)]],2),a("div",{staticClass:"formed-form-part"},[a("h3",{staticClass:"formed-form-part-title"},[t._v("短信随机码")]),t.ronglianyun?[a("FormItem",{attrs:{label:"短信模板："}},[a("Input",{attrs:{placeholder:""},model:{value:t.formItem.templateId,callback:function(e){t.$set(t.formItem,"templateId","string"===typeof e?e.trim():e)},expression:"formItem.templateId"}})],1),a("FormItem",{attrs:{label:"手机号码："}},[a("div",{staticClass:"phoneNumber"},[a("Input",{attrs:{placeholder:""},model:{value:t.telephoneCode,callback:function(e){t.telephoneCode="string"===typeof e?e.trim():e},expression:"telephoneCode"}})],1),a("div",{staticClass:"sendsms"},[a("myButton",{on:{click:function(e){t.sendsmscode(1)}}},[t._v("发送测试短信")])],1)])]:[a("FormItem",{attrs:{label:"短信模板："}},[a("Input",{attrs:{placeholder:""},model:{value:t.formItem.templateCode,callback:function(e){t.$set(t.formItem,"templateCode",e)},expression:"formItem.templateCode"}})],1),a("FormItem",{attrs:{label:"手机号码："}},[a("div",{staticClass:"phoneNumber"},[a("Input",{attrs:{placeholder:""},model:{value:t.telephoneCode,callback:function(e){t.telephoneCode="string"===typeof e?e.trim():e},expression:"telephoneCode"}})],1),a("div",{staticClass:"sendsms"},[a("myButton",{on:{click:function(e){t.sendsmscode(1)}}},[t._v("发送测试短信")])],1)])]],2),a("div",{staticClass:"formed-form-part"},[a("h3",{staticClass:"formed-form-part-title"},[t._v("开通账号通知")]),t.ronglianyun?[a("FormItem",{attrs:{label:"短信模板："}},[a("Input",{attrs:{placeholder:""},model:{value:t.formItem.templateIdOne,callback:function(e){t.$set(t.formItem,"templateIdOne",e)},expression:"formItem.templateIdOne"}})],1),a("FormItem",{attrs:{label:"手机号码："}},[a("div",{staticClass:"phoneNumber"},[a("Input",{attrs:{placeholder:""},model:{value:t.telephoneSetup,callback:function(e){t.telephoneSetup=e},expression:" telephoneSetup"}})],1),a("div",{staticClass:"sendsms"},[a("myButton",{on:{click:function(e){t.sendsmscode(2)}}},[t._v("发送测试短信")])],1)])]:[a("FormItem",{attrs:{label:"短信模板："}},[a("Input",{attrs:{placeholder:""},model:{value:t.formItem.templateCodeOne,callback:function(e){t.$set(t.formItem,"templateCodeOne",e)},expression:"formItem.templateCodeOne"}})],1),a("FormItem",{attrs:{label:"手机号码："}},[a("div",{staticClass:"phoneNumber"},[a("Input",{attrs:{placeholder:""},model:{value:t.telephoneSetup,callback:function(e){t.telephoneSetup="string"===typeof e?e.trim():e},expression:" telephoneSetup"}})],1),a("div",{staticClass:"sendsms"},[a("myButton",{on:{click:function(e){t.sendsmscode(2)}}},[t._v("发送测试短信")])],1)])]],2)]),a("div",{staticClass:"formed-footer"},[a("myButton",{attrs:{btnType:"info"},on:{click:t.updateNew}},[t._v("保存")]),a("myButton",{on:{click:t.cancel}},[t._v("取消")])],1)],1)])},s=[],o={data:function(){return{telephoneCode:"",telephoneSetup:"",id:0,companyId:0,buttonSize:"large",formItem:{id:"",companyId:"",accountSid:"",authToken:"",appId:"",templateId:"",templateIdOne:"",product:"",domain:"",accessKeyId:"",accessKeySecret:"",signName:"",templateCode:"",templateCodeOne:""},options:[{type:1,desc:"荣联云"},{type:2,desc:"阿里云"}],selected:2,ronglianyun:!1,aliyun:!0}},watch:{selected:function(t,e){if(1===t){this.ronglianyun=!0,this.aliyun=!1;var a={type:1};this.finddata(a)}else if(2===t){this.ronglianyun=!1,this.aliyun=!0;var i={type:2};this.finddata(i)}}},mounted:function(){var t={};this.finddata(t)},methods:{finddata:function(t){var e=this;this.axios({method:"post",url:"/cipher/sms/listNew?json",data:t}).then(function(t){1===t.data.type?(e.ronglianyun=!0,e.aliyun=!1,e.selected=t.data.type,e.id=t.data.id,e.companyId=t.data.companyId,e.formItem=t.data.ronglianSmsConfigInfo):2===t.data.type&&(e.ronglianyun=!1,e.aliyun=!0,e.selected=t.data.type,e.id=t.data.id,e.companyId=t.data.companyId,e.formItem=t.data.aliyunSmsConfigInfo)}).catch(function(t){console.log(t)})},updateNew:function(){var t=this,e={companyId:t.companyId,type:t.selected,telephone:t.telephone,accountSid:t.formItem.accountSid,authToken:t.formItem.authToken,appId:t.formItem.appId,templateId:t.formItem.templateId,templateIdOne:t.formItem.templateIdOne,product:t.formItem.product,domain:t.formItem.domain,accessKeyId:t.formItem.accessKeyId,accessKeySecret:t.formItem.accessKeySecret,signName:t.formItem.signName,templateCode:t.formItem.templateCode,templateCodeOne:t.formItem.templateCodeOne};this.axios({method:"post",url:"/cipher/sms/updateNew",data:e}).then(function(e){1===e.data.return_code?(t.cancel(),t.$myMessage.success(e.data.return_msg)):0===e.data.return_code&&t.$myMessage.error(e.data.return_msg)}).catch(function(t){console.log(t)})},sendsmscode:function(t){var e=this,a={companyId:e.companyId,type:e.selected,accountSid:e.formItem.accountSid,authToken:e.formItem.authToken,appId:e.formItem.appId,templateId:e.formItem.templateId,templateIdOne:e.formItem.templateIdOne,product:e.formItem.product,domain:e.formItem.domain,accessKeyId:e.formItem.accessKeyId,accessKeySecret:e.formItem.accessKeySecret,signName:e.formItem.signName,templateCode:e.formItem.templateCode,templateCodeOne:e.formItem.templateCodeOne};this.axios({method:"post",url:"/cipher/sms/updateNew",data:a}).then(function(a){1===a.data.return_code?e.sendSms(t):0===a.data.return_code&&e.$myMessage.error(a.data.return_msg)}).catch(function(t){console.log(t)})},sendSms:function(t){var e=this,a={};if(1===t){if(""===this.telephoneCode||null===this.telephoneCode)return void this.$myMessage.error("请填写测试号码");a={telephone:this.telephoneCode},this.axios({method:"post",url:"/cipher/sms/sendMsg",data:a}).then(function(t){1===t.data.return_code?e.$myMessage.success(t.data.return_msg):e.$myMessage.error(t.data.return_msg)}).catch(function(t){console.log(t)})}else{if(""===this.telephoneSetup||null===this.telephoneSetup)return void this.$myMessage.error("请填写测试号码");a={telephone:this.telephoneSetup},this.axios({method:"post",url:"/cipher/sms/sendUserMsg",data:a}).then(function(t){1===t.data.return_code?e.$myMessage.success(t.data.return_msg):e.$myMessage.error(t.data.return_msg)}).catch(function(t){console.log(t)})}},cancel:function(){this.$router.go(-1)}}},r=o,n=(a("5246"),a("2877")),l=Object(n["a"])(r,i,s,!1,null,"aa30818c",null);e["default"]=l.exports},aa94:function(t,e,a){},ab04:function(t,e,a){},ab9f:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"approval"},[a("myTabs",{attrs:{tabList:t.tabList,tabIndex:t.tabIndex},on:{changeTab:t.changeTab}},[a("keep-alive",[a(t.currentContent,{tag:"component"})],1)],1)],1)},s=[],o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"apply wrap"},[a("div",{staticClass:"tabled-table"},[a("Table",{attrs:{columns:t.title,data:t.list}})],1),a("div",{staticClass:"tabled-page"},[a("Page",{attrs:{total:t.total,"page-size":t.pageSize,current:t.current,"show-sizer":"","show-elevator":"","show-total":""},on:{"on-change":t.changePage,"on-page-size-change":t.pageSizeChange}})],1)])},r=[],n=(a("96cf"),a("1da1")),l={data:function(){var t=this;return{title:[{title:"姓名",key:"userName"},{title:"邮箱",key:"userEmail"},{title:"手机",key:"phoneNumber"},{title:"申请时间",key:"createTime"},{title:"操作",key:"option",width:150,render:function(e,a){return e("div",[e("a",{on:{click:function(){t.pass(a.index)}}},"通过"),e("a",{on:{click:function(){t.reject(a.index)}}},"拒绝")])}}],list:[],total:0,pageSize:10,current:1,isDisabled:""}},created:function(){this.getAllList()},methods:{getAllList:function(){var t={page:this.current,rows:this.pageSize};this.getApplyList(t)},pageSizeChange:function(t){var e={rows:t,page:1};this.getApplyList(e),this.pageSize=t},changePage:function(t){var e={rows:this.pageSize,page:t};this.current=t,this.getApplyList(e)},getApplyList:function(t){var e=this;this.axios({method:"post",url:"/cipher/register/registerApproval",data:t}).then(function(t){0===t.data.return_code?(e.total=t.data.return_result.total,t.data.return_result.rows instanceof Array&&(e.list=t.data.return_result.rows)):e.$myMessage.error(t.data.return_msg)}).catch(function(t){e.$Notice.warning({title:"网络未知错误！",desc:t})})},accountApproval:function(t,e){var a=this,i={uuid:t,status:e};this.axios({method:"post",url:"/cipher/register/accountApproval",data:i}).then(function(t){if(0===t.data.return_code){var i=1===e?"已通过":"已拒绝";a.$myMessage.success(i);var s={page:a.current,rows:a.pageSize};a.getApplyList(s)}else a.$myModal.error({title:"操作失败",content:t.data.return_msg})}).catch(function(t){a.$Notice.warning({title:"网络未知错误！",desc:t})})},reject:function(t){var e=this;this.$myModal.confirm({title:"确定要拒绝该申请？"}).then(Object(n["a"])(regeneratorRuntime.mark(function a(){return regeneratorRuntime.wrap(function(a){while(1)switch(a.prev=a.next){case 0:e.accountApproval(e.list[t].uuid,2);case 1:case"end":return a.stop()}},a,this)}))).catch(function(){})},pass:function(t){var e=this;this.$myModal.confirm({title:"确认通过该成员申请？"}).then(function(){var a=Object(n["a"])(regeneratorRuntime.mark(function a(i){return regeneratorRuntime.wrap(function(a){while(1)switch(a.prev=a.next){case 0:e.accountApproval(e.list[t].uuid,1);case 1:case"end":return a.stop()}},a,this)}));return function(t){return a.apply(this,arguments)}}()).catch(function(){})}}},c=l,u=(a("52da"),a("2877")),d=Object(u["a"])(c,o,r,!1,null,"8fc9821e",null),m=d.exports,p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"approval wrap"},[a("div",{staticClass:"tabled-table"},[a("Table",{attrs:{columns:t.title,data:t.list}})],1),a("div",{staticClass:"page"},[a("Page",{attrs:{total:t.total,"page-size":t.pageSize,current:t.current,"show-sizer":"","show-elevator":"","show-total":""},on:{"on-change":t.changePage,"on-page-size-change":t.pageSizeChange}})],1)])},h=[],f={data:function(){return{title:[{title:"姓名",key:"userName"},{title:"邮箱",key:"userEmail"},{title:"手机",key:"phoneNumber"},{title:"审批时间",key:"modifyTime"},{title:"状态",key:"status",render:function(t,e){var a=e.row,i=1===a.status?"success":"error",s=1===a.status?"已通过":"已拒绝";return t("Badge",{props:{status:i,text:s}})}}],list:[],total:0,pageSize:10,current:1}},created:function(){this.getAllList()},methods:{getAllList:function(){var t;t={page:this.current,rows:this.pageSize},this.getApprovalList(t)},pageSizeChange:function(t){var e={rows:t,page:1};this.getApprovalList(e),this.pageSize=t},changePage:function(t){var e={rows:this.pageSize,page:t};this.current=t,this.getApprovalList(e)},getApprovalList:function(t){var e=this;this.axios({method:"post",url:"/cipher/register/approvalRecords",data:t}).then(function(t){0===t.data.return_code?(e.total=t.data.return_result.total,e.list=t.data.return_result.rows):e.$myMessage.error(t.data.return_msg)}).catch(function(t){e.$Notice.warning({title:"网络未知错误！",desc:t})})}}},g=f,v=(a("a1c8"),Object(u["a"])(g,p,h,!1,null,"31723b94",null)),b=v.exports,y={components:{ApplyList:m,ApprovalList:b},data:function(){return{tabIndex:0,currentContent:"ApplyList",tabList:[{index:0,name:"申请列表",component:"ApplyList"},{index:1,name:"审批记录",component:"ApprovalList"}]}},methods:{changeTab:function(t){this.tabIndex=t.index,this.currentContent=t.component}}},I=y,w=(a("09a8"),Object(u["a"])(I,i,s,!1,null,"de76779a",null));e["default"]=w.exports},ac4d:function(t,e,a){a("3a72")("asyncIterator")},aced:function(t,e,a){"use strict";var i=a("4bae"),s=a.n(i);s.a},ad9c:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"was wrap"},[t.isShowEdit?a("myButton",{staticClass:"was-change__btn",attrs:{btnType:"info"},on:{click:t.changeStrategy}},[t._v("修改")]):t._e(),a("myTabs",{attrs:{tabList:t.tabList,tabIndex:t.tabIndex},on:{changeTab:t.changeTab}},[a("keep-alive",[a(t.currentContent,{ref:t.currentContent,tag:"component",on:{statusChange:t.getChildStatus}})],1)],1)],1)},s=[],o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"formed-wrap was-staff"},[0!==Object.keys(this.staffList).length?[t.isEdit?a("div",{key:"list",staticClass:"formed-form was-staff-body"},[a("Form",{ref:"formCustom",attrs:{model:t.formCustom,rules:t.ruleCustom,"label-width":120}},[a("div",{staticClass:"form"},[a("FormItem",{attrs:{label:"认证方式：",prop:"authMethod"}},[t._v("\n            用户名+密码\n          ")]),a("FormItem",{attrs:{label:"密码认证源：",prop:"authSource"}},[a("mySelect",{attrs:{dataList:t.authSource,showString:"请选择单位",disabled:t.usefulLifeDisable},model:{value:t.formCustom.authSource,callback:function(e){t.$set(t.formCustom,"authSource",e)},expression:"formCustom.authSource"}})],1),a("FormItem",{attrs:{label:"MAC认证：",prop:"macAuth"}},[a("RadioGroup",{model:{value:t.formCustom.macAuth,callback:function(e){t.$set(t.formCustom,"macAuth",e)},expression:"formCustom.macAuth"}},[a("Radio",{attrs:{label:"开启"}},[t._v("开启")]),a("Radio",{attrs:{label:"关闭"}},[t._v("关闭")])],1)],1),"开启"===t.formCustom.macAuth?[a("FormItem",{attrs:{label:"有效期：",prop:"usefulLife"}},[a("Input",{staticStyle:{width:"200px"},attrs:{type:"text",disabled:t.usefulLifeDisable,placeholder:"请输入有效期"},model:{value:t.formCustom.usefulLife,callback:function(e){t.$set(t.formCustom,"usefulLife",e)},expression:"formCustom.usefulLife"}}),a("mySelect",{staticStyle:{"margin-left":"8px","vertical-align":"middle"},attrs:{dataList:t.usefulLifeUnit,showString:"请选择单位",disabled:t.usefulLifeDisable},model:{value:t.formCustom.usefulLifeUnit,callback:function(e){t.$set(t.formCustom,"usefulLifeUnit",e)},expression:"formCustom.usefulLifeUnit"}})],1)]:t._e()],2)])],1):a("div",{key:"edit",staticClass:"formed-form was-staff-body"},[t._m(0),a("div",{staticClass:"formed-form-item"},[a("span",[t._v("密码认证源：")]),a("span",[t._v(t._s(t.staffList.authSource))])]),a("div",{staticClass:"formed-form-item"},[a("span",[t._v("MAC认证：")]),a("span",[t._v(t._s(t.staffList.macAuth)+"\n          "),a("Icon",{class:t.macAuthObj.class,attrs:{type:t.macAuthObj.type}})],1)]),"已开启"===t.staffList.macAuth?a("div",{staticClass:"formed-form-item"},[a("span",[t._v("有效期：")]),a("span",[t._v(t._s(t.staffList.usefulLife)+" "+t._s(t.staffList.usefulLifeUnit))])]):t._e()]),t.isEdit?a("div",{staticClass:"formed-footer was-staff-footer"},[a("myButton",{attrs:{btnType:"info"},on:{click:function(e){t.handleSubmit("formCustom")}}},[t._v("确定")]),a("myButton",{staticStyle:{"margin-left":"8px"},on:{click:function(e){t.handleReset("formCustom")}}},[t._v("取消")])],1):t._e()]:t._e()],2)},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"formed-form-item"},[a("span",[t._v("认证方式：")]),a("span",[t._v("用户名+密码")])])}],n=a("a9d8"),l=a("e5d6"),c={data:function(){var t=function(t,e,a){var i=/^[0-9]*$/;i.test(e)&&0!==e.length||a(new Error("请输入大于0的数字")),a()};return{isEdit:!1,id:0,usefulLifeDisable:!1,staffList:{authSource:"",macAuth:"",usefulLife:""},authSource:[{value:0,label:"本地认证"},{value:1,label:"AD域"},{value:2,label:"JTL_ERP"}],usefulLifeUnit:["小时","天"],macAuthObj:{},formCustom:{authMethod:1,authSource:0,macAuth:"关闭",usefulLife:7,usefulLifeUnit:"天"},ruleCustom:{usefulLife:[{validator:t,trigger:"blur"}]}}},created:function(){this.getStaffInfo()},methods:{enterEdit:function(){this.isEdit=!0,this.$emit("statusChange",{isEdit:this.isEdit,name:"staff"})},cancelStaffEdit:function(){this.isEdit=!1,this.$emit("statusChange",{isEdit:this.isEdit,name:"staff"})},handleSubmit:function(t){var e=this;this.$refs[t].validate(function(t){if(t){var a="开启"===e.formCustom.macAuth?1:0,i="天"===e.formCustom.usefulLifeUnit?1:0,s={id:e.id,authType:2,sourceType:e.formCustom.authSource,macFactor:a,timeRanges:e.formCustom.usefulLife,timeUnits:i};e.axios({method:"post",data:s,url:n["a"].staffUpdate}).then(function(t){t.data.return_code===n["a"].returnOk?(e.getStaffInfo(),e.cancelStaffEdit()):e.showFailModal()}).catch(function(t){this.axios.error.handlingErrors(t)})}})},handleReset:function(t){this.$refs[t].resetFields(),this.cancelStaffEdit()},getStaffInfo:function(){var t=this;this.axios({method:"post",data:{},url:n["a"].strategyStaff}).then(function(e){e.data.return_code===n["a"].returnOk?(t.id=e.data.id,t.assembleData(e.data.strategy)):console.log("数据错误")}).catch(function(t){this.axios.error.handlingErrors(t)})},assembleData:function(t){this.staffList.authSource=this.authSource[t.sourceType].label,t.macFactor?(this.staffList.macAuth="已开启",this.macAuthObj=l["a"].openIcon):(this.staffList.macAuth="已关闭",this.macAuthObj=l["a"].closeIcon),this.staffList.usefulLife=t.timeRanges,this.staffList.usefulLifeUnit=this.usefulLifeUnit[t.timeUnits],this.formCustom.authSource=t.sourceType,this.formCustom.macAuth=0===t.macFactor?"关闭":"开启",this.formCustom.usefulLife=t.timeRanges,this.formCustom.usefulLifeUnit=this.usefulLifeUnit[t.timeUnits]},showFailModal:function(){this.$myModal.error({title:"保存失败",content:"请稍后重试"})}}},u=c,d=(a("9fd1"),a("2877")),m=Object(d["a"])(u,o,r,!1,null,"176c8c6a",null),p=m.exports,h=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"formed-wrap"},[t.isEdit?a("div",{key:"list",staticClass:"formed-form was-visitor-body"},[a("Form",{ref:"formCustom",attrs:{model:t.formCustom,rules:t.ruleCustom,"label-width":130}},[a("div",{staticClass:"form"},[a("FormItem",{attrs:{label:"访客账号源：",prop:"sourceType"}},[a("RadioGroup",{model:{value:t.formCustom.sourceType,callback:function(e){t.$set(t.formCustom,"sourceType",e)},expression:"formCustom.sourceType"}},[a("Radio",{attrs:{label:0}},[t._v("管理员添加")]),a("Radio",{attrs:{label:1}},[t._v("访客自注册")])],1)],1),t.adminAdd?[a("FormItem",{attrs:{label:"访客有效期：",prop:"timeRange"}},[a("InputNumber",{staticStyle:{width:"68px"},attrs:{min:2,precision:0,placeholder:"请输入有效期"},model:{value:t.formCustom.timeRange,callback:function(e){t.$set(t.formCustom,"timeRange",e)},expression:"formCustom.timeRange"}}),a("span",{staticStyle:{"margin-left":"8px"}},[t._v("单位（小时）")])],1),a("FormItem",{attrs:{label:"验证方式：",prop:"authType"}},[a("RadioGroup",{model:{value:t.formCustom.authType,callback:function(e){t.$set(t.formCustom,"authType",e)},expression:"formCustom.authType"}},t._l(t.authTypeList,function(e){return a("Radio",{key:e.value,attrs:{label:e.value}},[t._v(t._s(e.label))])}),1)],1),a("FormItem",{attrs:{label:"被访人信息校验：",prop:"needStuffInfo"}},[a("RadioGroup",{model:{value:t.formCustom.needStuffInfo,callback:function(e){t.$set(t.formCustom,"needStuffInfo",e)},expression:"formCustom.needStuffInfo"}},[a("Radio",{attrs:{label:0}},[t._v("否")]),a("Radio",{attrs:{label:1}},[t._v("是")])],1)],1)]:t._e(),a("FormItem",{attrs:{label:"员工帮忙扫码认证：",prop:"needStuffScan"}},[a("RadioGroup",{model:{value:t.formCustom.needStuffScan,callback:function(e){t.$set(t.formCustom,"needStuffScan",e)},expression:"formCustom.needStuffScan"}},[a("Radio",{attrs:{label:0}},[t._v("开启")]),a("Radio",{attrs:{label:1}},[t._v("关闭")])],1)],1),0===t.formCustom.needStuffScan?a("FormItem",{attrs:{prop:"otherAuthtype"}},[a("CheckboxGroup",{model:{value:t.formCustom.otherAuthtype,callback:function(e){t.$set(t.formCustom,"otherAuthtype",e)},expression:"formCustom.otherAuthtype"}},t._l(t.otherAuthtypeList,function(e){return a("Checkbox",{key:e.value,attrs:{label:e.value}},[t._v(t._s(e.label))])}),1)],1):t._e()],2)])],1):a("div",{key:"edit",staticClass:"formed-form"},[a("div",{staticClass:"formed-form-item"},[a("span",[t._v("访客账号源：")]),a("span",[t._v(t._s(t.visitorList.sourceType))])]),t.adminAdd?[a("div",{staticClass:"formed-form-item"},[a("span",[t._v("访客有效期：")]),a("span",[t._v(t._s(t.visitorList.timeRange)+" 小时")])]),a("div",{staticClass:"formed-form-item"},[a("span",[t._v("验证方式：")]),a("span",[t._v(t._s(t.visitorList.authType))])]),a("div",{staticClass:"formed-form-item"},[a("span",[t._v("被访人信息校验：")]),a("span",[t._v(t._s(t.visitorList.needStuffInfo))])])]:t._e(),a("div",{staticClass:"formed-form-item"},[a("span",[t._v("员工帮忙扫码认证：")]),a("span",[t._v("\n        "+t._s(t.visitorList.needStuffScan)+"\n        "),a("Icon",{class:t.needStuffScanObj.class,attrs:{type:t.needStuffScanObj.type}}),a("br"),a("span",[t._v(t._s(t.visitorList.otherAuthtype))])],1)])],2),t.isEdit?a("div",{staticClass:"formed-footer"},[a("myButton",{attrs:{btnType:"info"},on:{click:function(e){t.handleSubmit("formCustom")}}},[t._v("确定")]),a("myButton",{staticStyle:{"margin-left":"8px"},on:{click:function(e){t.handleReset("formCustom")}}},[t._v("取消")])],1):t._e()])},f=[],g=(a("ac4d"),a("8a81"),a("ac6a"),{data:function(){return{isEdit:!1,id:0,adminAdd:!0,sourceType:["管理员添加","访客自注册"],authTypeList:[{value:0,label:"访客接收短信密码"},{value:1,label:"员工接收短信密码"},{value:2,label:"员工接收邮件密码"}],otherAuthtypeList:[{value:1,label:"赛赋扫码"},{value:2,label:"钉钉扫码"},{value:3,label:"大白认证"}],visitorList:{sourceType:"",timeRange:2,authType:"",needStuffInfo:"",needStuffScan:"",otherAuthtype:""},needStuffScanObj:{},formCustom:{sourceType:0,timeRange:2,authType:1,needStuffInfo:0,needStuffScan:0,otherAuthtype:[]},ruleCustom:{}}},created:function(){this.getVisitorInfo()},watch:{"formCustom.sourceType":function(){this.setAdminStatus(this.formCustom.sourceType)}},methods:{enterEdit:function(){this.isEdit=!0,this.$emit("statusChange",{isEdit:this.isEdit,name:"visitor"})},cancelVisitorEdit:function(){this.isEdit=!1,this.$emit("statusChange",{isEdit:this.isEdit,name:"visitor"})},handleSubmit:function(t){var e=this;this.$refs[t].validate(function(t){if(t){var a={authSf:1,authDd:1,authDb:1};if(0===e.formCustom.needStuffScan){var i=!0,s=!1,o=void 0;try{for(var r,l=e.formCustom.otherAuthtype[Symbol.iterator]();!(i=(r=l.next()).done);i=!0){var c=r.value;switch(c){case 1:a.authSf=0;break;case 2:a.authDd=0;break;case 3:a.authDb=0;break}}}catch(d){s=!0,o=d}finally{try{i||null==l.return||l.return()}finally{if(s)throw o}}}var u={};u=e.formCustom.sourceType?{id:e.id,sourceType:e.formCustom.sourceType,timeRange:e.formCustom.timeRange,authType:e.formCustom.authType,needStuffInfo:e.formCustom.needStuffInfo,needStuffScan:e.formCustom.needStuffScan,authSf:a.authSf,authDd:a.authDd,authDb:a.authDb}:{id:e.id,sourceType:e.formCustom.sourceType,needStuffScan:e.formCustom.needStuffScan,authSf:a.authSf,authDd:a.authDd,authDb:a.authDb},e.axios({method:"post",data:u,url:n["a"].visitorUpdate}).then(function(t){t.data.return_code===n["a"].returnOk?(e.getVisitorInfo(),e.cancelVisitorEdit()):e.showFailModal()}).catch(function(t){this.axios.error.handlingErrors(t)})}})},showFailModal:function(){this.$myModal.error({title:"保存失败",content:"请稍后重试"})},handleReset:function(t){this.$refs[t].resetFields(),this.cancelVisitorEdit()},getVisitorInfo:function(){var t=this;this.axios({method:"post",data:{},url:n["a"].strategVisitor}).then(function(e){e.data.return_code===n["a"].returnOk?(t.id=e.data.id,t.assembleData(e.data.strategy),t.cancelVisitorEdit()):console.log("数据错误")}).catch(function(t){this.axios.error.handlingErrors(t)})},assembleData:function(t){this.setAdminStatus(t.sourceType),this.visitorList.sourceType=this.sourceType[t.sourceType],this.visitorList.timeRange=t.timeRange,this.visitorList.authType=t.authType>=0?this.authTypeList[t.authType].label:"",this.visitorList.needStuffInfo=0===t.needStuffInfo?"否":"是",0===t.needStuffScan?(this.visitorList.needStuffScan="已开启",this.needStuffScanObj=l["a"].openIcon):(this.visitorList.needStuffScan="已关闭",this.needStuffScanObj=l["a"].closeIcon),this.formCustom.otherAuthtype=[];var e=[];0===t.authSf&&(this.formCustom.otherAuthtype.push(1),e.push("赛赋扫码")),0===t.authDd&&(this.formCustom.otherAuthtype.push(2),e.push("钉钉扫码")),0===t.authDb&&(this.formCustom.otherAuthtype.push(3),e.push("大白认证")),this.visitorList.otherAuthtype=e.join("，"),this.formCustom.sourceType=t.sourceType,this.formCustom.timeRange=t.timeRange,this.formCustom.authType=t.authType>=0?this.authTypeList[t.authType].value:0,this.formCustom.needStuffInfo=t.needStuffInfo,this.formCustom.needStuffScan=t.needStuffScan},setAdminStatus:function(t){this.adminAdd=0!==t}}}),v=g,b=(a("518c"),Object(d["a"])(v,h,f,!1,null,"3a79a569",null)),y=b.exports,I={components:{staff:p,visitor:y},data:function(){return{componentStatus:{isStaffEdit:!1,isVisitorEdit:!1},tabIndex:0,currentContent:"staff",tabList:[{index:0,name:"员工策略",component:"staff"},{index:1,name:"访客策略",component:"visitor"}]}},computed:{isShowEdit:function(){return"staff"===this.currentContent?!this.componentStatus.isStaffEdit:!this.componentStatus.isVisitorEdit}},methods:{changeTab:function(t){this.tabIndex=t.index,this.currentContent=t.component},changeStrategy:function(){this.$refs[this.currentContent].enterEdit()},getChildStatus:function(t){"staff"===t.name?this.componentStatus.isStaffEdit=t.isEdit:this.componentStatus.isVisitorEdit=t.isEdit}}},w=I,A=(a("317a"),Object(d["a"])(w,i,s,!1,null,"337461ab",null));e["default"]=A.exports},ae7f:function(t,e,a){"use strict";var i=a("f850"),s=a.n(i);s.a},aebc:function(t,e,a){},af05:function(t,e,a){"use strict";var i=a("8f5a"),s=a.n(i);s.a},afa4:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tabs-test"},[a("myTabs",{attrs:{tabList:t.tabList,tabIndex:t.tabIndex},on:{changeTab:t.changeTab}},[a("keep-alive",[a(t.currentContent,{tag:"component"})],1)],1),a("myComplexTabs",{on:{"on-click":t.tabData},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},[a("myPane",{attrs:{label:"标签一",name:"1"}},[t._v("\n      标签一的内容\n    ")]),a("myPane",{attrs:{label:"标签二",name:"2"}},[t._v("\n      标签二的内容\n    ")]),a("myPane",{attrs:{label:"标签三",name:"3"}},[t._v("\n      标签三的内容\n    ")])],1)],1)},s=[],o=a("70e7"),r=a("d6e7"),n={components:{one:o["default"],two:r["default"]},data:function(){return{tabIndex:0,currentContent:"one",tabList:[{index:0,name:"选项一",component:"one"},{index:1,name:"选项二",component:"two"}],value:"1"}},methods:{changeTab:function(t){this.tabIndex=t.index,this.currentContent=t.component},tabData:function(t){console.log(t)}}},l=n,c=(a("6b03"),a("2877")),u=Object(c["a"])(l,i,s,!1,null,"bde0abb8",null);e["default"]=u.exports},b074:function(t,e,a){},b1cb:function(t,e,a){"use strict";var i=a("c695"),s=a.n(i);s.a},b1f9:function(t,e,a){"use strict";var i=a("6a7a"),s=a.n(i);s.a},b219:function(t,e,a){"use strict";var i=a("8119"),s=a.n(i);s.a},b2a0:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"org-list clearfix"},[a("div",{staticClass:"org-list-left"},[a("AccountListLeft",{attrs:{changeTree:t.changeTree,skipMenuPath:t.skipMenuPath},on:{change:t.selObjChange,showAll:t.showAll}})],1),a("div",{staticClass:"org-list-right"},[a("AccountListTop",{attrs:{showAllTemp:t.showAllFlag,selObj:t.selObj,navArray:t.navArray},on:{changeLeftTree:t.changeLeftTree,skipMenu:t.getSkipMenu}}),a("AccountListTable",{attrs:{selObj:t.selObj,initPageNum:t.initPageNum,initPageSize:t.initPageSize,showAllTemp:t.showAllFlag},on:{changeLeftTree:t.changeLeftTree}})],1)])},s=[],o=(a("28a5"),a("be94")),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{ref:"leftTree",staticClass:"org-leftTree"},[a("div",{staticClass:"org-leftTree__search"},[a("myInput",{attrs:{search:!0,radius:"half",placeholder:"输入要搜索的内容"},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}})],1),a("span",{staticClass:"org-leftTree__all",class:{"org-leftTree__all--active":t.orgBtnActive},on:{click:t.showAllObj}},[a("Icon",{attrs:{type:"md-home"}}),a("span",[t._v("全部用户")])],1),a("Tree",{ref:"tree",staticClass:"tree",attrs:{data:t.orgList,render:t.renderContent}})],1)},n=[],l=a("2f62"),c=a("7340"),u={title:{target:"title",original:"text"},children:{target:"children",original:"nodes"}},d={data:function(){return{keyword:"",orgList:[],orgBtnActive:!0,selObj:{},orgList_bak:[],selTempObj:{}}},props:{changeTree:{type:Boolean,default:!1},skipMenuPath:{type:Array,default:function(){return[]}}},mounted:function(){this.getOrgList()},computed:Object(o["a"])({},Object(l["c"])(["selectOSTree","group"])),watch:{changeTree:function(){this.getOrgList()},keyword:function(t,e){this.setExpandData("title",this.keyword)},group:function(){var t=this;this.group?this.$nextTick(function(){t.orgBtnActive=!1;for(var e=t.$refs.tree.$el.querySelectorAll(".orgLeftBtn"),a=0;a<e.length;a++)e[a].style.backgroundColor="#fff"}):this.exchangeTree(!1,"selected")},skipMenuPath:function(){for(var t=this.$refs.tree.$el.querySelectorAll(".orgLeftBtn"),e=0;e<t.length;e++)t[e].style.backgroundColor="#fff";var a=this.skipMenuPath.length;this.exchangeTree(!1,"selected");var i="";if(i=this.orgList[this.skipMenuPath[0]],1===a)this.$set(this.orgList[this.skipMenuPath[0]],"selected",!0);else{for(var s=1;s<a-1;s++)i=i.children[this.skipMenuPath[s]],this.$set(i,"expand",!0);this.$set(i.children[this.skipMenuPath[a-1]],"selected",!0)}}},methods:Object(o["a"])({getOrgList:function(){var t=this,e={};this.axios({method:"post",data:e,url:c["a"].orgList}).then(function(e){if(e.status===c["a"].statusOk){for(var a=t.$refs.tree.$el.querySelectorAll(".orgLeftBtn"),i=0;i<a.length;i++)a[i].style.backgroundColor="#fff";t.orgList=t.$common.cloneAssemblyAssignData(e.data,u,!0),t.orgList_bak=t.$common.cloneAssemblyAssignData(e.data,u,!0),t.group&&t.changeSelGroupItem()}else t.$myMessage.error("数据错误")}).catch(function(t){this.axios.error.handlingErrors(t)})},renderContent:function(t,e){var a=this,i=(e.root,e.node,e.data);return t("span",{style:{display:"inline-block",width:"100%",padding:"15px",cursor:"pointer"},class:{selItem:!0===i.selected,orgLeftBtn:!0}},[t("span",{on:{click:function(t){a.group&&a.changeGroup(""),a.setSelItemState(t),a.handleRelatedItem(i)}}},[t("span",{domProps:{innerHTML:"<i class='icon-tree'></i>"},style:{width:"25px",display:"null"!==i.uuid?"none":"inline-block"}}),t("Icon",{props:{type:"md-person"},style:{width:"25px",display:"null"===i.uuid?"none":"inline-block"}}),t("span",{style:{display:"inline-block",width:"100%"}},i.title)])])},generateRightMenuData:function(t,e){this.getSelData(this.orgList,t,e),this.selObj.arrayPath=this.selTempObj.selPath},handleRelatedItem:function(t){this.generateRightMenuData("nodeKey",t.nodeKey),this.selectOSTree.selectTree=this.selObj,this.changeSelectOSTree(this.selectOSTree),this.$emit("change",this.selObj)},changeSelGroupItem:function(){this.selObj=this.group,this.generateRightMenuData("groupId",this.selObj.groupId),this.selectOSTree.selectTree=this.selObj,this.changeSelectOSTree(this.selectOSTree),this.$emit("change",this.selObj),this.setExpandData("title",this.selObj.groupName)},setExpandData:function(t,e){var a=[],i=this.$common.searchCloneData(this.orgList_bak,[t],e,a);this.orgList=this.$common.setExpandData(i,a)},getSelData:function(t,e,a){for(var i in t){var s=t[i],o=t[i].children;if(o){var r=this.getSelData(o,e,a);if(r){var n="".concat(i,"/").concat(r);return this.selTempObj.selPath=n,n}}if(s[e]===a)return this.selObj=s,i}},showAllObj:function(){for(var t=this.$refs.tree.$el.querySelectorAll(".orgLeftBtn"),e=0;e<t.length;e++)t[e].style.backgroundColor="#fff";this.orgBtnActive=!0,this.$emit("showAll")},setSelItemState:function(t){this.orgBtnActive=!1;for(var e=this.$refs.tree.$el.querySelectorAll(".orgLeftBtn"),a=0;a<e.length;a++)e[a].style.backgroundColor="#fff";var i=this.$common.eventPath(event),s=i[2].style;s.backgroundColor="#d2f0f9"},exchangeTree:function(t,e){this.orgList=this.treeChangeSel(this.orgList,t,e)},treeChangeSel:function(t,e,a){for(var i in t)this.$set(t[i],a,e),t[i].children&&(t[i].children=this.treeChangeSel(t[i].children,e,a));return t}},Object(l["b"])(["changeSelectOSTree","changeGroup"]))},m=d,p=(a("39f6"),a("2877")),h=Object(p["a"])(m,r,n,!1,null,"47e77f61",null),f=h.exports,g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"org-right-header clearfix"},[a("div",{staticClass:"org-right-header-left"},[t.showAllFlag?[a("span",{staticClass:"all"},[t._v("全部用户")])]:[a("Breadcrumb",{staticClass:"nav"},t._l(t.navList,function(e,i){return a("BreadcrumbItem",{key:i,nativeOn:{click:function(a){t.skipMenu(e,i)}}},[i!=t.navList.length-1?a("span",{staticStyle:{cursor:"pointer"}},[t._v(t._s(e.path))]):[t._v(t._s(e.path))]],2)}),1)]],2),a("div",{staticClass:"org-right-header-right"},[a("router-link",{attrs:{to:"/userCatalogOS/add"}},[a("myButton",{attrs:{btnType:"info"}},[t._v("添加用户")])],1),t.showAllFlag?[a("myButton",{attrs:{btnType:"info"},nativeOn:{click:function(e){return t.createModal(e)}}},[t._v("创建部门")])]:[a("myButton",{attrs:{btnType:"info"},nativeOn:{click:function(e){return t.departmentAuth(e)}}},[t._v("部门权限")]),a("Dropdown",{staticClass:"more"},[a("myDropBtn",[t._v("更多操作")]),a("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[a("DropdownItem",{nativeOn:{click:function(e){return t.createModal(e)}}},[t._v("创建部门")]),a("DropdownItem",{nativeOn:{click:function(e){return t.renameModal(e)}}},[t._v("编辑部门")]),a("DropdownItem",{nativeOn:{click:function(e){return t.delModal(e)}}},[t._v("删除部门")]),a("DropdownItem",[a("Upload",{ref:"upload",staticClass:"uploadClass",attrs:{"show-upload-list":!1,"on-success":t.handleSuccessImport,"on-error":t.uploadhandleError,format:["xls","xlsx","docx"],"on-format-error":t.handleFormatError,"on-progress":t.handleProgress,action:"/cipher/newImportbak/import"}},[t._v("批量导入账号")])],1),a("DropdownItem",{staticClass:"blue",nativeOn:{click:function(e){return t.downImportExampleList(e)}}},[t._v("下载导入样表")]),a("DropdownItem",[a("Upload",{ref:"upload",staticClass:"uploadClass",attrs:{"show-upload-list":!1,"on-success":t.handleSuccessUpdate,"on-error":t.uploadhandleError,format:["xls","xlsx","docx"],"on-format-error":t.handleFormatError,"on-progress":t.handleProgress,action:"/cipher/newImportbak/updateUserImport"}},[t._v("批量更新账号")])],1),a("DropdownItem",{staticClass:"blue",nativeOn:{click:function(e){return t.downUpdateExampleList(e)}}},[t._v("下载更新样表")])],1)],1)]],2),a("Modal",{staticClass:"tree-transfer",attrs:{width:"668"},model:{value:t.authFlag,callback:function(e){t.authFlag=e},expression:"authFlag"}},[a("p",{attrs:{slot:"header"},slot:"header"},[a("span",[t._v("添加授权应用")]),a("span",{staticClass:"departmentName"},[t._v(t._s(t.departmentName))])]),a("div",[a("TreeTransfer",{attrs:{leftTreeData:t.appList,leftDataType:t.dataType,placeholder:t.placeholder},on:{rightData:t.getAppListData}},[a("span",{attrs:{slot:"leftText"},slot:"leftText"},[t._v("选择要授权的应用")]),a("span",{attrs:{slot:"rightText"},slot:"rightText"},[t._v("已授权的应用")])])],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("myButton",{attrs:{btnType:"info"},on:{click:function(e){t.handleSubmitSave()}}},[t._v("保存")]),a("myButton",{staticStyle:{"margin-left":"10px","vertical-align":"top"},on:{click:function(e){t.handleReset()}}},[t._v("重置")])],1)]),a("Modal",{staticClass:"create-modal",attrs:{width:"528",closable:!1},model:{value:t.createFlag,callback:function(e){t.createFlag=e},expression:"createFlag"}},[a("p",{staticClass:"org-modal-header",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("创建部门")])]),a("div",{staticClass:"center coverage"},[a("Form",{ref:"formItemCreate",attrs:{model:t.formItemCreate,rules:t.ruleValidateCreate,"label-position":"right"}},[a("FormItem",{attrs:{label:"部门名称：",prop:"name"}},[a("Input",{attrs:{placeholder:"请输入部门名称"},model:{value:t.formItemCreate.name,callback:function(e){t.$set(t.formItemCreate,"name",e)},expression:"formItemCreate.name"}})],1),a("FormItem",{attrs:{label:"部门描述："}},[a("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"请输入至少5个字符"},model:{value:t.formItemCreate.description,callback:function(e){t.$set(t.formItemCreate,"description",e)},expression:"formItemCreate.description"}})],1),a("FormItem",{staticStyle:{"margin-bottom":"10px"},attrs:{label:"上级部门：",prop:"parentDepart"}},[a("Select",{model:{value:t.formItemCreate.parentDepart,callback:function(e){t.$set(t.formItemCreate,"parentDepart",e)},expression:"formItemCreate.parentDepart"}},t._l(t.parentDepartList,function(e,i){return a("Option",{key:i,attrs:{value:e.groupName},nativeOn:{click:function(a){t.formItemCreate.parentGroupId=e.groupId}}},[t._v(t._s(e.groupName))])}),1)],1)],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("myButton",{attrs:{btnType:"info"},on:{click:function(e){t.handleSubmitCreate("formItemCreate")}}},[t._v("确定")]),a("myButton",{staticStyle:{"margin-left":"10px","vertical-align":"top"},on:{click:function(e){t.handleCancel("formItemCreate")}}},[t._v("取消")])],1)]),a("Modal",{staticClass:"create-modal",attrs:{width:"528",closable:!1},model:{value:t.renameFlag,callback:function(e){t.renameFlag=e},expression:"renameFlag"}},[a("p",{staticClass:"org-modal-header",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("编辑部门")]),a("span",{staticClass:"org-modal-header--sub"},[t._v(t._s(t.departmentName))])]),a("div",{staticClass:"center coverage"},[a("Form",{ref:"formItemRename",attrs:{model:t.formItemRename,rules:t.ruleValidateRename,"label-position":"right"}},[a("FormItem",{attrs:{label:"部门名称：",prop:"name"}},[a("Input",{attrs:{placeholder:"请输入部门名称"},model:{value:t.formItemRename.name,callback:function(e){t.$set(t.formItemRename,"name","string"===typeof e?e.trim():e)},expression:"formItemRename.name"}})],1),a("FormItem",{attrs:{label:"部门描述："}},[a("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"请输入至少5个字符"},model:{value:t.formItemRename.description,callback:function(e){t.$set(t.formItemRename,"description","string"===typeof e?e.trim():e)},expression:"formItemRename.description"}})],1),a("FormItem",{staticStyle:{"margin-bottom":"10px"},attrs:{label:"上级部门：",prop:"parentDepart"}},[a("Select",{model:{value:t.formItemRename.parentDepart,callback:function(e){t.$set(t.formItemRename,"parentDepart",e)},expression:"formItemRename.parentDepart"}},t._l(t.parentDepartList,function(e,i){return a("Option",{key:i,attrs:{value:e.groupId},nativeOn:{click:function(a){t.formItemRename.parentGroupId=e.groupId}}},[t._v(t._s(e.groupName))])}),1)],1)],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("myButton",{attrs:{btnType:"info"},on:{click:function(e){t.handleSubmitRename("formItemRename")}}},[t._v("确定")]),a("myButton",{staticStyle:{"margin-left":"10px"},on:{click:function(e){t.handleCancel("formItemRename")}}},[t._v("取消")])],1)]),t._l(t.uploadList,function(e,i){return a("div",{key:i},[e.showProgress?a("FixedCircle",{attrs:{percent:e.percentage,"hide-info":""}}):t._e()],1)})],2)},v=[],b=(a("96cf"),a("1da1")),y=a("c791"),I={components:{TreeTransfer:y["a"]},data:function(){var t=function(t,e,a){e.length>20&&a(new Error("请输入不超过20个字符名称")),"组名已存在,请更换组名"===e&&a(new Error("组名已存在,请更换组名")),a()};return{dataType:0,showAllFlag:!0,updateResultUrl:"",uploadList:[],navList:[],message:{text:"成功!",show:!1,duration:1,onClose:this.close},authFlag:!1,appList:[],appListBak:[],selectApp:"",placeholder:"搜索应用",formItemCreate:{name:"",description:"",parentDepart:"",parentGroupId:0},ruleValidateCreate:{name:[{required:!0,message:"部门名称不能为空",trigger:"blur"},{validator:t,trigger:"blur"}],parentDepart:[{required:!0,message:"请选择上级部门",trigger:"blur"}]},createFlag:!1,parentDepartList:[],formItemRename:{name:"",description:"",groupId:"",parentDepart:"",parentGroupId:0},ruleValidateRename:{name:[{required:!0,message:"部门名称不能为空",trigger:"blur"},{validator:t,trigger:"blur"}],parentDepart:[{required:!0,type:"number",message:"请选择上级部门",trigger:"blur"}]},renameFlag:!1,actionFlag:!1,actionItemTitle:"操作失败"}},props:{showAllTemp:Boolean,selObj:Object,navArray:Array},computed:Object(o["a"])({departmentName:function(){var t=this.navArray.length;return t?"("+this.navArray[t-1].path+")":""}},Object(l["c"])(["group"])),watch:{showAllTemp:function(){return this.showAllFlag=this.showAllTemp},selObj:function(){this.showAllTemp||(this.formItemRename.groupId=this.selObj.groupId)},navArray:function(){this.navList=this.$props.navArray}},methods:{skipMenu:function(t,e){if(e!==this.navList.length-1){var a=this.navList.length-e-1;this.navList.splice(e+1,a),this.$emit("skipMenu",t)}},departmentAuth:function(){var t=this;this.dataType=3,this.authFlag=!0;var e={groupId:this.selObj.groupId};this.axios({method:"post",data:e,url:c["a"].appList}).then(function(e){e.status===c["a"].statusOk?(t.appList=e.data,t.appListBak=t.$common.clone(t.appList)):t.$myMessage.error("数据错误")}).catch(function(t){this.axios.error.handlingErrors(t)})},getAppListData:function(t){var e=this.$common.clone(t);e=e.map(function(t,e,a){return t.id}),this.selectApp=e.join(",")},handleSubmitSave:function(){var t=this;this.authFlag=!1;var e={groupId:this.selObj.groupId,appList:this.selectApp};this.axios({method:"post",data:e,url:c["a"].addApp}).then(function(e){e.status===c["a"].statusOk?t.$Message.success("操作成功"):t.handleError()}).catch(function(t){this.axios.error.handlingErrors(t)})},getParentDepartList:function(){var t=this,e={id:this.selObj.groupId};this.axios({method:"post",data:e,url:c["a"].parentDepart}).then(function(e){e.status===c["a"].statusOk?t.parentDepartList=t.$common.clone(e.data):t.$myMessage.error("数据错误")}).catch(function(t){this.axios.error.handlingErrors(t)})},createModal:function(){this.createFlag=!0,this.initSetForm("formItemCreate"),this.getParentDepartList()},handleSubmitCreate:function(t){var e=this;this.$refs[t].validate(function(a){var i={groupName:e.formItemCreate.name,description:e.formItemCreate.description,parentGroupId:e.formItemCreate.parentGroupId};a&&(e.axios({method:"post",data:i,url:c["a"].createDepartment}).then(function(a){a.status===c["a"].statusOk&&a.data.return_code===c["a"].returnOk?e.success(t):(e.$refs[t].resetFields(),e.$Message.error(a.data.return_msg),e.actionItemTitle="创建失败",e.actionFlag=!0)}).catch(function(t){this.axios.error.handlingErrors(t)}),e.createFlag=!1)})},getEditDepartInform:function(){var t=this,e={groupId:this.selObj.groupId};this.axios({method:"post",data:e,url:c["a"].groupEditEcho}).then(function(e){0===e.data.return_code?(t.formItemRename.name=e.data.return_result.groupName,t.formItemRename.description=e.data.return_result.groupDescription,t.formItemRename.parentDepart=e.data.return_result.parentGroupId,t.formItemRename.groupId=e.data.return_result.groupId,t.getElseDepartList(e.data.return_result.groupId)):(t.actionItemTitle="获取信息失败",t.actionFlag=!0)}).catch(function(t){this.axios.error.handlingErrors(t)})},getElseDepartList:function(t){var e=this,a={groupId:this.selObj.groupId};this.axios({method:"post",data:a,url:c["a"].elseDepart}).then(function(t){t.status===c["a"].statusOk?e.parentDepartList=e.$common.clone(t.data):e.$myMessage.error("数据错误")}).catch(function(t){this.axios.error.handlingErrors(t)})},renameModal:function(){this.initSetForm("formItemRename"),this.renameFlag=!0,this.getEditDepartInform()},handleSubmitRename:function(t){var e=this;this.$refs[t].validate(function(t){var a={groupId:e.formItemRename.groupId,groupName:e.formItemRename.name,description:e.formItemRename.description,parentGroupId:e.formItemRename.parentGroupId};t&&(e.axios({method:"post",data:a,url:c["a"].groupEdit}).then(function(t){0===t.data.return_code?e.renameSuccess():e.$myModal.error({title:"编辑部门失败",content:"请稍后重试"})}).catch(function(t){this.axios.error.handlingErrors(t)}),e.renameFlag=!1)})},renameSuccess:function(){var t=this.navArray.length;this.navArray[t-1].path=this.formItemRename.name,this.$Message.success("操作成功"),this.$emit("changeLeftTree")},success:function(t){this.$refs[t].resetFields(),this.$Message.success("操作成功"),this.$emit("changeLeftTree")},delSuccess:function(){this.$Message.success("操作成功"),this.$emit("changeLeftTree")},delModal:function(){var t=this;this.$myModal.confirm({title:"确定删除该部门吗？",content:"删除后将无法恢复，你还要继续吗？",confirmVal:"继续"}).then(function(){var e=Object(b["a"])(regeneratorRuntime.mark(function e(a){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t.handleSubmitDel();case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()).catch(function(){})},handleSubmitDel:function(){var t=this,e={groupId:this.selObj.groupId};this.axios({method:"post",data:e,url:c["a"].groupDelete}).then(function(e){e.status===c["a"].statusOk&&e.data.code===c["a"].successOk?t.delSuccess():t.$myModal.error({title:"部门下存在账号，不允许删除"})}).catch(function(t){this.axios.error.handlingErrors(t)})},initSetForm:function(t){this.$refs[t].resetFields()},handleCancel:function(t){this.createFlag=!1,this.renameFlag=!1,this.$refs[t].resetFields()},handleError:function(){this.$myModal.error({title:"保存失败",content:"请稍后重试"})},handleReset:function(){this.appList=this.$common.clone(this.appListBak)},uploadFeedback:function(){location.href=this.updateResultUrl},handleProgress:function(t,e,a){this.uploadList=a},handleSuccessImport:function(t,e){var a=this;1===t.return_code?(this.$emit("changeLeftTree"),this.$emit("showAll"),this.updateResultUrl="/cipher/newImportbak/downloadReturnExcel?downloadSecret="+t.secret,this.$myModal.confirm({title:"上传成功",content:t.return_msg,confirmVal:"下载反馈"}).then(function(){var t=Object(b["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:a.uploadFeedback();case 1:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()).catch(function(){})):0===t.return_code&&this.$myModal.error({title:"导入账号失败",content:t.return_msg})},handleSuccessUpdate:function(t,e){var a=this;1===t.return_code?(this.$emit("changeLeftTree"),this.$emit("showAll"),this.updateResultUrl="/cipher/newImportbak/downloadErrorExcel?downloadSecret="+t.secret,this.$myModal.confirm({title:"上传成功",content:t.return_msg,confirmVal:"下载反馈"}).then(function(){var t=Object(b["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:a.uploadFeedback();case 1:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()).catch(function(){})):0===t.return_code&&this.$myModal.error({title:"导入账号失败",content:t.return_msg})},uploadhandleError:function(t,e){this.$myModal.error({title:"Excel上传失败",content:t})},handleFormatError:function(t){this.$Notice.warning({title:"请选择表格文件",desc:"文件不正确！ "+t.name+" 该文件不是表格文件"})},downImportExampleList:function(){window.location.href="/cipher/newImportbak/userexport"},downUpdateExampleList:function(){window.location.href="/cipher/newImportbak/updateUserInfoExport"}}},w=I,A=(a("5f39"),Object(p["a"])(w,g,v,!1,null,"eb9733e4",null)),C=A.exports,_=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"org-list tabled-wrap"},[a("div",{staticClass:"tabled-header"},[a("div",{staticClass:"tabled-header-search"},[a("myInput",{attrs:{search:!0,radius:"half",width:"400px",placeholder:"请输入姓名 / 账号"},on:{handleClick:function(e){t.initLoad()}},model:{value:t.user,callback:function(e){t.user=e},expression:"user"}})],1),a("div",{staticClass:"tabled-header-btn"},[a("mySelect",{attrs:{dataList:t.statusList,showString:"显示"},on:{"on-change":t.changeState},model:{value:t.state,callback:function(e){t.state=e},expression:"state"}})],1)]),a("div",{staticClass:"tabled-table"},[a("Table",{attrs:{border:"",columns:t.orgStrTitle,data:t.orgStrList},scopedSlots:t._u([{key:"userName",fn:function(e){var i=e.row;return[a("strong",{on:{click:function(e){t.skipUrl(i)}}},[a("a",{attrs:{href:"#"}},[t._v(t._s(i.userName))])])]}},{key:"action",fn:function(e){var i=e.row,s=e.index;return["锁定"===i.status?[a("a",{staticStyle:{"margin-right":"5px"},attrs:{type:"primary",size:"small"},on:{click:function(e){t.unlock(s)}}},[t._v("解锁")])]:[a("a",{staticStyle:{"margin-right":"5px"},attrs:{type:"primary",size:"small"},on:{click:function(e){t.openChangeStatus(s)}}},[t._v(t._s("启用"===i.status?"停用":"启用"))])],a("Dropdown",{attrs:{trigger:"click"}},[a("a",{attrs:{href:"#"}},[t._v("\n            更多\n            "),a("Icon",{attrs:{type:"ios-arrow-down"}})],1),a("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[a("DropdownItem",{nativeOn:{click:function(e){t.openResetPW(i,s)}}},[t._v("重置密码")]),a("DropdownItem",{nativeOn:{click:function(e){t.deleteAccount(s)}}},[t._v("删除用户")])],1)],1)]}}])})],1),a("Page",{staticClass:"tabled-page",attrs:{current:t.list.page,total:t.list.total,"show-sizer":"","show-elevator":"","show-total":""},on:{"on-change":t.changePage,"on-page-size-change":t.changePageSize}}),a("Modal",{model:{value:t.pwdFlag,callback:function(e){t.pwdFlag=e},expression:"pwdFlag"}},[a("p",{staticClass:"header",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("重置密码")]),a("span",{staticClass:"sub-title"},[t._v(t._s(t.userInfo.userName)+" ("+t._s(t.userInfo.accountNumber)+")")])]),a("div",[a("Form",{ref:"formItemPwd",attrs:{model:t.formItemPwd,rules:t.ruleValidate,"label-width":110}},[a("FormItem",{attrs:{label:"输入新密码：",prop:"password"}},[a("Input",{attrs:{type:"password",placeholder:"请输入密码"},model:{value:t.formItemPwd.password,callback:function(e){t.$set(t.formItemPwd,"password","string"===typeof e?e.trim():e)},expression:"formItemPwd.password"}})],1),a("FormItem",{attrs:{label:"确认新密码：",prop:"checkPwd"}},[a("Input",{attrs:{type:"password",placeholder:"请输入密码"},model:{value:t.formItemPwd.checkPwd,callback:function(e){t.$set(t.formItemPwd,"checkPwd","string"===typeof e?e.trim():e)},expression:"formItemPwd.checkPwd"}})],1),a("FormItem",{attrs:{label:""}},[a("Checkbox",{model:{value:t.formItemPwd.logFlag,callback:function(e){t.$set(t.formItemPwd,"logFlag",e)},expression:"formItemPwd.logFlag"}},[t._v("登陆后修改密码")])],1)],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"primary"},on:{click:function(e){t.handleSubmitResetPW("formItemPwd")}}},[t._v("确定")]),a("Button",{staticStyle:{"margin-left":"10px"},on:{click:function(e){t.handleCancel("formItemPwd")}}},[t._v("取消")])],1)])],1)},x=[],S=(a("ac6a"),a("456d"),a("c5f6"),a("6762"),a("2fdb"),{start:{text:"启用",type:1},stop:{text:"停用",type:2}}),D={data:function(){var t=this,e=function(e,a,i){a?a!==t.formItemPwd.password?i(new Error("两次输入的密码不匹配")):i():i(new Error("请再次输入密码"))};return{selItemIndex:0,showAllFlag:!0,orgStrTitle:[{title:"姓名",slot:"userName"},{title:"用户名",key:"accountNumber"},{title:"部门",key:"groupName"},{title:"安全组",key:"teamName"},{title:"状态",key:"status",render:function(t,e){var a=e.row.status.includes("锁定");return t("div",[t("strong",e.row.status),t("i",{class:{"ivu-icon":a,"ivu-icon-md-lock":a}})])}},{title:"操作",slot:"action",width:150,align:"center"}],orgStrList:[],orgStrListBak:[],list:{},navItem:[],page:{pageNum:1,pageSize:10},user:"",state:"全部",statusList:[{value:"全部",label:"全部"},{value:"启用",label:"启用"},{value:"锁定",label:"锁定"},{value:"停用",label:"停用"}],userInfo:{},pwdFlag:!1,pwdType:"",pwdComplexRateInfo:{},formItemPwd:{password:"",checkPwd:"",logFlag:!0},ruleValidate:{password:[{required:!0,message:"密码不能为空",trigger:"blur"}],checkPwd:[{required:!0,message:"密码不能为空",trigger:"blur"},{validator:e,trigger:"blur"}]}}},props:{selObj:Object,initPageNum:{type:Number,default:1},initPageSize:{type:Number,default:10},showAllTemp:Boolean},computed:Object(o["a"])({},Object(l["c"])(["selectOSTree"]),Object(l["c"])(["homeOrg","group"]),{homeOrgFlag:function(){return 0!==Object.keys(this.homeOrg).length}}),watch:{selObj:{handler:function(){this.$store.commit("changeHomeOrg",{}),this.showAllFlag=this.showAllTemp,this.initLoad()},deep:!0}},mounted:function(){this.group.groupId?this.showGroupPart(this.initPageNum,this.initPageSize):this.initConditionCall()},methods:Object(o["a"])({initLoad:function(){this.showAllFlag?this.initConditionCall():this.showSelObj(this.initPageNum,this.initPageSize)},changeMainEnter:function(){this.showAllFlag?this.changeConditionCall():this.showSelObj()},changePage:function(t){this.page.pageNum=t,this.changeMainEnter()},changePageSize:function(t){this.page.pageSize=t,this.changeMainEnter()},initConditionCall:function(){this.homeOrgFlag?this.getHomeRelatedList(this.initPageNum,this.initPageSize):this.showAllObj(this.initPageNum,this.initPageSize)},changeConditionCall:function(){this.homeOrgFlag?this.getHomeRelatedList():this.showAllObj()},showSelObj:function(t,e){var a=this;this.showAllFlag=!1;var i=this.selObj,s={page:t||this.page.pageNum,rows:e||this.page.pageSize,groupId:i.groupId,accountNumber:i.accountNumber,status:this.state,queryName:this.user};this.axios({method:"post",data:s,url:i.href}).then(function(t){if(t.status===c["a"].statusOk){var e=t.data.records||t.data.total;a.list.total=e,a.list.page=s.page,a.orgStrList=a.$common.clone(t.data.rows)}else a.$myMessage.error("数据错误")}).catch(function(t){this.axios.error.handlingErrors(t)})},showAllObj:function(t,e){var a=this;this.showAllFlag=!0;var i={page:t||this.page.pageNum,rows:e||this.page.pageSize,status:this.state,queryName:this.user};this.axios({method:"post",data:i,url:c["a"].newUserGetlist}).then(function(t){t.status===c["a"].statusOk?(a.list.total=t.data.total,a.list.page=i.page,a.orgStrList=a.$common.clone(t.data.rows)):a.$myMessage.error("数据错误")}).catch(function(t){this.axios.error.handlingErrors(t)})},getHomeRelatedList:function(t,e){var a=this,i={page:t||this.page.pageNum,rows:e||this.page.pageSize,queryType:this.homeOrg.queryType,queryName:this.user};this.axios({method:"post",data:i,url:c["a"].newList}).then(function(t){t.status===c["a"].statusOk?(a.list.total=t.data.total,a.list.page=i.page,a.orgStrList=a.$common.clone(t.data.rows)):a.$myMessage.error("数据错误")}).catch(function(t){this.axios.error.handlingErrors(t)})},showGroupPart:function(t,e){var a=this;this.showAllFlag=!1;var i=this.group,s={page:t||this.page.pageNum,rows:e||this.page.pageSize,groupId:i.groupId,accountNumber:i.accountNumber,status:this.state,queryName:this.user};this.axios({method:"post",data:s,url:"/cipher/newUser/userlist?json"}).then(function(t){if(t.status===c["a"].statusOk){var e=t.data.records||t.data.total;a.list.total=e,a.list.page=s.page,a.orgStrList=a.$common.clone(t.data.rows),a.orgStrListBak=a.$common.clone(t.data.rows)}else a.$myMessage.error("数据错误")}).catch(function(t){this.axios.error.handlingErrors(t)})},generateNavFormat:function(t){},changeState:function(t){this.initLoad()},filterData:function(){var t=this.user,e=this.state,a=this.status[0],i=this.orgStrListBak.filter(function(i,s){var o=i.userName,r=i.accountNumber;if(i.status===e||a===e){if(null!==o&&o.includes(t))return!0;if(null!==r&&r.includes(t))return!0}return!1});this.orgStrList=i},openChangeStatus:function(t){var e=this,a=this.orgStrList[t],i={};a.status.includes(S.start.text)?(i.text=S.stop.text,i.type=2):(i.text="确定"+S.start.text+"吗？",i.text=S.start.text,i.type=1),i.accountNumber=a.accountNumber,i.uuid=a.uuid,this.$myModal.confirm({title:"确定"+i.text+"吗？"}).then(function(){var a=Object(b["a"])(regeneratorRuntime.mark(function a(s){return regeneratorRuntime.wrap(function(a){while(1)switch(a.prev=a.next){case 0:e.handleSubmitStatus(t,i);case 1:case"end":return a.stop()}},a,this)}));return function(t){return a.apply(this,arguments)}}()).catch(function(){})},handleSubmitStatus:function(t,e){var a=this,i={accountNumber:e.accountNumber,uuid:e.uuid,status:e.type};this.axios({method:"post",data:i,url:c["a"].setStatus}).then(function(i){i.status===c["a"].statusOk&&(a.orgStrList[t].status=e.text,a.$myMessage.success(e.text))}).catch(function(t){this.axios.error.handlingErrors(t)})},unlock:function(t){var e=this;this.$myModal.confirm("确认解锁此用户吗？").then(function(){var a=Object(b["a"])(regeneratorRuntime.mark(function a(i){return regeneratorRuntime.wrap(function(a){while(1)switch(a.prev=a.next){case 0:e.handleSubmitUnlock(t);case 1:case"end":return a.stop()}},a,this)}));return function(t){return a.apply(this,arguments)}}()).catch(function(){})},handleSubmitUnlock:function(t){var e=this,a={accountNumber:this.orgStrList[t].accountNumber,uuid:this.orgStrList[t].uuid};this.axios({method:"post",data:a,url:c["a"].unlock}).then(function(t){t.status===c["a"].statusOk&&t.data.return_code===c["a"].successOk?(e.initLoad(),e.$myMessage.success("解锁成功")):e.$myModal.error("解锁失败")}).catch(function(t){this.axios.error.handlingErrors(t)})},openResetPW:function(t,e){var a=this;this.selItemIndex=e,this.userInfo=t;var i={groupId:t.groupId,accountNumber:t.accountNumber,uuid:t.uuid};this.axios({method:"post",data:i,url:c["a"].getStrategy}).then(function(t){t.status===c["a"].statusOk&&t.data.return_code===c["a"].successOk?(a.pwdFlag=!0,0===t.data.is_ad_update?a.pwdType="local":a.pwdType="ad"):console.log(t.data.return_msg)}).catch(function(t){this.axios.error.handlingErrors(t)})},handleSubmitResetPW:function(t){var e=this;this.$refs[t].validate(function(t){if(t){var a,i={};"local"===e.pwdType?(a="/cipher/user/reset/password",i={accountNumber:e.orgStrList[e.selItemIndex].accountNumber,uuid:e.orgStrList[e.selItemIndex].uuid,newPwd:e.formItemPwd.password,logFlag:e.formItemPwd.logFlag?0:1}):(a="/cipher/resetPwd/resetAdPwd",i={accountNumber:e.orgStrList[e.selItemIndex].accountNumber,uuid:e.orgStrList[e.selItemIndex].uuid,pwd:e.formItemPwd.password,logFlag:e.formItemPwd.logFlag?0:1}),e.resetPW(i,a)}})},resetPW:function(t,e){var a=this;this.axios({method:"post",data:t,url:e}).then(function(t){if(1===t.data.return_code)a.$myMessage.success("重置密码成功"),a.handleCancel("formItemPwd");else{var e={title:"重置密码失败",content:t.data.return_msg};a.$myModal.error(e)}}).catch(function(t){this.axios.error.handlingErrors(t)})},deleteAccount:function(t){var e=this;"启用"!==this.orgStrList[t].status?this.$myModal.confirm({title:"确认删除此用户吗？",content:"删除后无法复原，你还要继续吗？",confirmVal:"继续"}).then(function(){var a=Object(b["a"])(regeneratorRuntime.mark(function a(i){return regeneratorRuntime.wrap(function(a){while(1)switch(a.prev=a.next){case 0:e.handleSubmitDelete(t);case 1:case"end":return a.stop()}},a,this)}));return function(t){return a.apply(this,arguments)}}()).catch(function(){}):this.$myModal.error({title:"账号启用状态不允许删除"})},handleSubmitDelete:function(t){var e=this,a={accountNumber:this.orgStrList[t].accountNumber,uuid:this.orgStrList[t].uuid};this.axios({method:"post",data:a,url:c["a"].delete}).then(function(a){a.status===c["a"].statusOk&&a.data.return_code===c["a"].successOk?(e.orgStrList.splice(t,1),e.$emit("changeLeftTree"),e.$myMessage.success("删除成功!")):e.$myModal.error("删除失败")}).catch(function(t){this.axios.error.handlingErrors(t)})},skipUrl:function(t){this.$router.push({path:"/userCatalogOS/detail",query:{accountNumber:t.accountNumber,groupId:t.groupId,uuid:t.uuid}})},convertStateFlag:function(){var t="";switch(this.state){case"启用":t=1;break;case"停用":t=2;break;case"锁定":t=3;break;default:t="";break}return t},handleCancel:function(t){this.pwdFlag=!1,this.$refs[t].resetFields()}},l["b"]["changeHomeOrg"])},k=D,T=(a("eeb0"),Object(p["a"])(k,_,x,!1,null,"b8bd7994",null)),L=T.exports,M={name:"Index",components:{AccountListLeft:f,AccountListTable:L,AccountListTop:C},data:function(){return{selObj:{},navArray:[],initPageNum:1,initPageSize:10,showAllFlag:!0,changeTree:!1,skipMenuPath:[]}},computed:Object(o["a"])({},Object(l["c"])(["group"])),watch:{group:function(){this.group&&(this.selObj.groupId=this.group.groupId)}},methods:{selObjChange:function(t){this.showAllFlag=!1,this.selObj=t,this.createNavMenu()},showAll:function(){this.showAllFlag=!0,this.selObj={showAllFlag:this.showAllFlag}},createNavMenu:function(){if(this.navArray=[],this.selObj.arrayPath)for(var t=this.selObj.arrayPath.split("/"),e=this.selObj.path.split("/"),a=this.selObj.idPath.split("/"),i=0;i<e.length-1;i++){for(var s={},o=[],r=0;r<i+1;r++)o.push(t[r]);s.arrayPath=o,s.path=e[i],s.groupId=a[i],this.navArray.push(s)}else{var n=this.selObj;n.arrayPath=this.selObj.rootNode,n.path=this.selObj.groupName,n.groupId=this.selObj.groupId,this.navArray.push(n)}},changeLeftTree:function(){this.changeTree=!this.changeTree},getSkipMenu:function(t){this.skipMenuPath=t.arrayPath,this.selObj={},this.selObj.href="/cipher/newUser/userlist?json",this.selObj.groupId=t.groupId}}},N=M,E=(a("485d"),Object(p["a"])(N,i,s,!1,null,"d879028a",null));e["default"]=E.exports},b32e:function(t,e,a){},b403:function(t,e,a){},b459:function(t,e,a){},b49a:function(t,e,a){},b541:function(t,e,a){"use strict";var i=a("3f44"),s=a.n(i);s.a},b567:function(t,e,a){},b866:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"sgm tabled-wrap"},[a("div",{staticClass:"tabled-header"},[a("div",{staticClass:"tabled-header-search"},[a("myInput",{attrs:{placeholder:"安全组名称",radius:"half",search:!0},on:{handleClick:t.searchName},model:{value:t.queryName,callback:function(e){t.queryName=e},expression:"queryName"}})],1),a("div",{staticClass:"tabled-header-btn"},[a("myButton",{attrs:{btnType:"info"},on:{click:t.CreateGroup}},[t._v("创建安全组")])],1)]),a("div",{staticClass:"tabled-table"},[a("Table",{attrs:{border:"",columns:t.columns7,data:t.data6}})],1),a("Page",{staticClass:"tabled-page",attrs:{total:t.total,current:t.curentPage,"show-elevator":"","show-sizer":"","show-total":""},on:{"on-change":t.changePage,"on-page-size-change":t.pageSizeChange}}),a("Modal",{staticClass:"create-modal",attrs:{width:"528"},on:{"on-ok":t.submit,"on-cancel":t.cancel2},model:{value:t.showMadal2,callback:function(e){t.showMadal2=e},expression:"showMadal2"}},[a("p",{attrs:{slot:"header"},slot:"header"},[a("span",[t._v("创建新的安全组")])]),a("div",{staticClass:"create-modal-content"},[a("span",{staticStyle:{"font-size":"14px"}},[t._v("请输入安全组名称:")]),a("myInput",{model:{value:t.teamName,callback:function(e){t.teamName=e},expression:"teamName"}})],1)]),a("Modal",{staticClass:"tree-transfer",attrs:{width:"668"},on:{"on-cancel":t.cancel},model:{value:t.showMadal,callback:function(e){t.showMadal=e},expression:"showMadal"}},[a("p",{staticClass:"header",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("添加安全组用户")]),a("span",{staticClass:"sub-title"},[t._v("("+t._s(t.treeTeamName)+")")])]),a("div",[a("TreeTransfer",{attrs:{leftTreeData:t.data,leftDataType:t.dataType,placeholder:t.placeholder},on:{rightData:t.getRightData}},[a("span",{attrs:{slot:"leftText"},slot:"leftText"},[t._v("授权用户")]),a("span",{attrs:{slot:"rightText"},slot:"rightText"},[t._v("已授权用户")])])],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"primary",loading:t.loading,disabled:t.isDisable},on:{click:t.ok}},[t._v("保存")]),a("Button",{staticClass:"cancel__btn",on:{click:t.reset}},[t._v("重置")])],1)])],1)},s=[],o=(a("96cf"),a("1da1")),r=(a("a481"),a("ac6a"),a("c791")),n={title:{target:"title",original:"text"},children:{target:"children",original:"nodes"}},l={components:{TreeTransfer:r["a"]},data:function(){var t=this;return{treeTeamName:"",userIds:"",data2:[],data:[],dataType:0,placeholder:"请输入用户或部门",showMadal2:!1,id:0,showMadal:!1,isDisable:!1,loading:!1,teamName:"",modal1:!1,queryName:"",curentPage:1,total:0,size:10,accountStatus:0,accountNumber:"",columns7:[{title:"安全组名称",key:"teamName",width:200,render:function(e,a){return e("a",[e("span",{on:{click:function(){t.todetails(a.index)}}},t.data6[a.index].teamName)])}},{title:"安全组ID",key:"dsgTeamId",width:200,renderHeader:function(t,e){return t("div",[t("span","安全组ID"),t("Tooltip",{props:{placement:"right",transfer:!0}},[t("span",{slot:"content",style:{display:"inline-block",maxWidth:"120px",whiteSpace:"normal",wordBreak:"break-all"}},"安全组ID是系统随机生成的8位包含数字和字母的ID"),t("Icon",{style:{diaplay:"inline-block",marginTop:"-2px",marginLeft:"3px"},props:{type:"ios-information-circle",size:"18"}})])])}},{title:"安全组应用权限",key:"applicationName",render:function(e,a){return e("div",[e("span",{style:{diaplay:"inline-block",width:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},domProps:{title:t.data6[a.index].applicationName}},t.data6[a.index].applicationName)])}},{title:"安全组人数",key:"teamNum",width:200,render:function(e,a){return e("div",[e("span",t.data6[a.index].teamNum+"人")])}},{title:"操作",key:"edit",width:200,align:"center",render:function(e,a){return e("div",[e("a",{on:{click:function(){t.addpeople(a.index)}}},"添加成员 "),e("a",{on:{click:function(){t.delete(a.index)}}}," 删除安全组")])}}],data6:[]}},mounted:function(){var t=this,e={rows:t.size,page:1};t.finddata(e)},methods:{getRightData:function(t){var e=[];t.forEach(function(t){e.push(t.uuid)}),this.userIds=e.join(",")},reset:function(){this.dataType=0,this.init(this.id)},ok:function(){var t=this;this.setUnderway();var e={userIds:this.userIds,teamId:this.id};this.axios({method:"post",url:"/cipher/team/addUser",data:e}).then(function(e){t.setCompleted(),t.cancel(),1===e.data.return_code?t.$myMessage.success(e.data.return_msg):0===e.data.return_code&&t.$Modal.error({title:"提示",content:e.data.return_msg})}).catch(function(e){t.setCompleted(),console.log(e)})},setUnderway:function(){this.loading=!0,this.isDisable=!0},setCompleted:function(){this.loading=!1,this.isDisable=!1,this.showMadal=!1},submit:function(){var t=this;if(t.teamName.replace(/^ +| +$/g,"")){var e={teamName:t.teamName};this.axios({method:"post",url:"/cipher/team/addorUpdate",data:e}).then(function(e){if(1===e.data.return_code){t.$myMessage.success(e.data.return_msg);var a={rows:t.size,page:1};t.finddata(a),t.teamName=""}else t.$myMessage.error(e.data.return_msg)}).catch(function(t){console.log(t)})}else t.$myMessage.error("安全组名称不能为空！")},cancel2:function(){this.showMadal2=!1},cancel:function(){this.showMadal=!1,this.dataType=0;var t={rows:this.size,page:1};this.finddata(t)},CreateGroup:function(){this.showMadal2=!0},skipNewUrl:function(t){this.$router.push(t)},remove:function(t){this.data6.splice(t,1)},searchName:function(){var t={rows:this.size,page:1,sidx:"",sord:"asc",teamName:this.queryName};this.finddata(t)},finddata:function(t){var e=this;this.axios({method:"post",url:"/cipher/team/list?json",data:t}).then(function(t){e.data6=t.data.rows,e.total=t.data.total}).catch(function(t){console.log(t)})},pageSizeChange:function(t){var e={rows:t,page:1,sidx:"",sord:"asc",teamName:this.queryName};this.finddata(e),this.size=t},changePage:function(t){var e={rows:this.size,page:t,sidx:"",sord:"asc",teamName:this.queryName};this.curentPage=t,this.finddata(e)},addpeople:function(t){this.id=this.data6[t].id,this.init(this.id),this.treeTeamName=this.data6[t].teamName,this.showMadal=!0},init:function(t){var e=this;this.dataType=1;var a={id:t};this.axios({method:"post",url:"/cipher/team/getUser?json",data:a}).then(function(t){e.data2=t.data.msg.trees,e.data2=e.$common.cloneAssemblyAssignData(t.data.msg.trees,n,!0),e.data2=e.$common.initSelect(e.data2),e.data=e.data2}).catch(function(t){console.log(t)})},delete:function(t){var e=this;this.$myModal.confirm({title:"确定删除该安全组吗？",content:"删除后无法恢复，你还要继续吗？"}).then(function(){var a=Object(o["a"])(regeneratorRuntime.mark(function a(i){return regeneratorRuntime.wrap(function(a){while(1)switch(a.prev=a.next){case 0:e.dodelete(e.data6[t].id,t);case 1:case"end":return a.stop()}},a,this)}));return function(t){return a.apply(this,arguments)}}()).catch(function(){})},dodelete:function(t,e){var a=this,i={id:t};this.axios({method:"post",url:"/cipher/team/delete",data:i}).then(function(t){1===t.data.return_code?(a.$myMessage.success(t.data.return_msg),a.data6.splice(e,1)):0===t.data.return_code&&a.$myMessage.error(t.data.return_msg)}).catch(function(t){console.log(t)})},todetails:function(t){this.$router.push({name:"detail",query:{teamId:this.data6[t].id,teamName:this.data6[t].teamName,dsgTeamId:this.data6[t].dsgTeamId}})}}},c=l,u=(a("7904"),a("2877")),d=Object(u["a"])(c,i,s,!1,null,"159534d4",null);e["default"]=d.exports},b86c:function(t,e,a){"use strict";var i=a("0167"),s=a.n(i);s.a},b896:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"text"},[a("transition",{attrs:{name:"fade",mode:"out-in"}},[a("router-view")],1)],1)},s=[],o={},r=o,n=(a("6452"),a("2877")),l=Object(n["a"])(r,i,s,!1,null,"5e4f538c",null);e["default"]=l.exports},baac:function(t,e,a){},bc0b:function(t,e,a){},bce1:function(t,e,a){"use strict";var i=a("1371"),s=a.n(i);s.a},beeb:function(t,e,a){"use strict";var i=a("5d41"),s=a.n(i);s.a},bf8b:function(t,e){t.exports="data:image/png;base64,R0lGODlhgACAAPcAAAAAAAEBAQICAgMDAwQEBAUFBQYGBgcHBwgICAkJCQoKCgsLCwwMDA0NDQ4ODg8PDxAQEBERERISEhMTExQUFBUVFRYWFhcXFxgYGBkZGRoaGhsbGxwcHB0dHR8fHyAgICEhISIiIiMjIyQkJCUlJSYmJicnJygoKCkpKSoqKisrKywsLC0tLS4uLi8vLzAwMDExMTIyMjMzMzQ0NDU1NTY2Njg4ODo6Ojs7Ozw8PD09PT8/P0BAQEFBQUJCQkNDQ0REREVFRUZGRkdHR0hISElJSUtLS0xMTE1NTU5OTk9PT1FRUVJSUlNTU1RUVFZWVldXV1hYWFpaWltbW1xcXF1dXV5eXl9fX2BgYGJiYmRkZGdnZ2hoaGlpaWpqamtra2xsbG1tbW5ubm9vb3BwcHFxcXJycnNzc3R0dHV1dXd3d3h4eHl5eXp6ent7e3x8fH19fX5+fn9/f4CAgIGBgYKCgoODg4WFhYaGhoeHh4mJiYqKiouLi46Ojo+Pj5CQkJGRkZKSkpOTk5SUlJWVlZaWlpeXl5iYmJmZmZubm52dnZ6enp+fn6GhoaKioqOjo6SkpKWlpaampqenp6ioqKmpqaqqqqysrK2tra6urq+vr7CwsLGxsbOzs7S0tLW1tba2tre3t7i4uLm5ubq6uru7u7y8vL29vb6+vr+/v8DAwMHBwcLCwsPDw8TExMXFxcfHx8jIyMnJycrKysvLy8zMzM3Nzc7Ozs/Pz9DQ0NHR0dLS0tTU1NXV1dbW1tfX19jY2NnZ2dra2tvb29zc3N3d3d7e3t/f3+Dg4OHh4eLi4uPj4+Tk5OXl5ebm5ufn5+jo6Onp6erq6uvr6+zs7O3t7e7u7u/v7/Dw8PHx8fLy8vPz8/T09PX19fb29vf39/j4+Pn5+fr6+vv7+/z8/P39/f7+/v///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAAAAAAALAAAAACAAIAAAAj+AM8JHEiwoMGDCBMqXMiwocOHECNKnEixosWLGDNq3Mixo8ePIEOKHEmypMmTKFOqXMmypcuXMGPKnEmzps2bOHPq3Mmzp0+M5sJto/asmTJlzKBV6zbuozlryZJZM/czYblrv0ghcpPFiA4YJ0Z8+CAihQweS7zgmQRr2beL41J5oeHBw4wupsJVHTjtVaArNTIgAEC4sOHDhAc8IEFkzaVh4CRCEwMBsQMuzXyaW3bJywsHiEOLRlygA5I+t7w5VJZkNAAjmXVmG/XlRAHXuHMDqFDEUDGqCZUdyc1F701lhHYs0M08dwARY2CJOyhctwNTNovZURGguXfdE6T+nDIusDrzLsBjLrtT4rt75g+mvCp3zjzzGdZiZkv04r1/5hWc4QoS33mQzEvmrGLEbf81mFtlBR7YUjRwVODghRgeRkN+LK3CQ4YgZuhFeih14wcGIabYIASprJQMFgyqKON3YjSVUiw3zKijd0pAo9IlIewoZG5HKJPSOINIMGMAB0BwwQYdcKCBBQ4YMCRhRabkzRwKhEgABjZYUUcjo8jCCzHHGCPMLq94YogaSqgAmoxZoqTNGTE6mAAMYFDSCzb0NSQONK78sUQH3WVY50nZdCEAhiB0EYo0F4UTzCFFPHDhoiZhs0Wi/wnwQh7CkIhRN6wwAap7nJbEzRf+q76Xwh/OgOTMcP61StI3aAzQIAZwHBOSfawaiVI4ceT5HQFHvCISsd/pOlI5exzwXwZ+ZPMsru9JO1Ijc753gyojQeudtyKJkoF/BGixTLncFqtSLSf414Ad3cD7H7ohJZODfxk0Qo6+uRqL0jZV+PdBJySZ2xy/IJVDh6/umXBKw/FGa3BE2bwy8ESShOtdCs4S3O3GEHFDhgaeTEQLCO+V0EpH3kizjDLRqOYwcxAnxE0ZvrLgS0TRAPGeCC1mVA4xj3zxAwshfLACEGP8sC/KD/1MMQBKcChoGe9tIEpG5sziBQhbK4q1Q1obFsAbgTLUSJffRTBJRs+0cQH+nWs31PZhDlzS0C1BfqeAIKZOZEsPM/aM0N+IodDLQtcQ+N0AcNho0SooNN43Q5CHxoS2CJljx6PfWbENRrZ0zjdFoYc2gB4JjUKBezy8e9EzjL8+UeyiWYDKQczY4F4JtgDVhuewA90cDrENNA7Y30GQSUaz7K2i4weNwwbqzZnxsUCaiKzbAHYkLlE5Xvg+UTlyxJqbA5sMhEwM7kGhTUbEwJwi9wnBRhPcEwNknGMcYXAPDIahkUekDUMAVAgwWuCeGpFiAt+RwCc28oX/fU4inYjAdyZACip8RwB0UN9EvGE1EEWQIeaYA/iYQwUPfAcJXsOINFjgwg9SxBr+GcvNBwjgHQ/ggiPLKNymfFgRXNiwOQQgYnM+oAuOKOMDEGRiE5/IHAJwkTlM2J9GorGCJYbEGpabogm9MwA+bMQbRmvQCyFiDjrMUDdUuOB3LFCKjYxBjlqsyCeU5B0SItA9NTAgRpTRwpOJZBj9oVFTjOEC91yBGxfZmW7mCBFtQIGAijxHJZbjHQLoQYUN0SSRAkkR0z1wfpogSDi44B4JxHIiqsQNJyGSCQh5pwzjE8gx8PcdEtBCIrl0zS4fUgsSuMcGzDhIJ3zZHB1IaDVBfBgrKbKMHbiHAqNASDnc8J4nVAObVxvJNqzgHgGkLyHTEIJ7AhAG1SwkmaP+WaZDxNGGV+YGCddYSC2U2JwC1EFz1Mkmz7Y5EXP8YTDfCcEtGuIIUnpHAYFQIT5Fo0+HSIKazFlAIxwyjjO85wGMSGg6R+IJDbzHDNNxyDQUipsJRKIgGw1NRxtSii82BwjRiEgvyugeC1hiIDlFzE4ZsooRvAcEx5QIKCzwngtUoj40XSVJUNEe9zhAEhUpRAKqCojWFIwkoSBocwZAh7hJRBzfe48UHTkSTHTAP1VYnUWyMYUrFWapChlHIW73nhxc0yLMCIJfAZsQbbyBbu45QS028gsaDImxCCFGFPypmwyMjSOy6CrzQmKOURDzPQ4YqUdIcVf3fWQacyD+7HsQwAe3cmQTKPJgSMhhCh/Ir6BxIM9HJoHBHobEF18Q4X8GkIa3jIQRyjXjR4QxB7XO8wuYJIk5FBHdlXIEHLVYg3XbuQVsnMQciyDkWTciDmI4ggkWupAAvEC6kxwjknS9CDiYsQpAOMEDnHVPAc6g15MoI43ymkg3YBEKSOiBC0MoAQNSpIA52NPAWdUlQwfCDTNU6Y4hkgAhEFqSpB5ml8BLUQgElxJomDW/EUlxiG4QC5WMQwzejbHzdFQALBz2JKkAqTabF2AMYcAP+VKJOdoH45TteEY8WEVLrGHZBEtExhiqQByC2pJk+HSTGxYIlh1UACOsApUm8bLnxog8oxckor4uscYMzhXmc4z5PyW4g+5iYo4uDPl3T85QAFRgh2LYxBTm42id7/ydBeyAEHUmySy1Cugie6cAKPjCKOB8k2YYwTVKqDM2wvDb7zgABl+4RDR90gwuJBoCYvARRXIBhRVIQFm5QUAGanCFQLxiGnsRSDhM0YUZ1IUGXkgFiSNiDnFE4xacAIQZpDAEG7TgBCEAwQhOEAMdGCELbkAEKX5xDdsG+xxPicpUPlIOcGBDGs+4WTOeQY1tiAPN5863vvfN7377+98AD7jAB07wghv84AhPuMIXzvCGO/zhCA8IADs="},bfa4:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"DM tabled-wrap"},[a("div",{staticClass:"tabled-header"},[a("div",{staticClass:"tabled-header-search"},[a("myInput",{attrs:{placeholder:"设备名称",radius:"half",search:!0},on:{handleClick:t.getSearchList},model:{value:t.searchWord,callback:function(e){t.searchWord=e},expression:"searchWord"}})],1),a("div",{staticClass:"tabled-header-btn"},[a("myButton",{attrs:{btnType:"info"},on:{click:function(e){t.$router.push({path:"/resourceManageDM/add"})}}},[t._v("添加设备")])],1)]),a("div",{staticClass:"tabled-table appManage-list-table"},[a("Table",{attrs:{columns:t.title,data:t.list}})],1),a("div",{staticClass:"tabled-page"},[a("Page",{attrs:{total:t.total,"page-size":t.pageSize,current:t.current,"show-sizer":"","show-elevator":"","show-total":""},on:{"on-change":t.changePage,"on-page-size-change":t.changePageSize}})],1)])},s=[],o=(a("96cf"),a("1da1")),r={data:function(){var t=this;return{title:[{title:"设备名称",key:"devicename",align:"center",render:function(e,a){var i=a.row.devicename;return e("a",{on:{click:function(){t.toDetailPage(a.row.uuid)}}},i)}},{title:"设备地址",key:"equipAddr",align:"center"},{title:"描述",key:"describee",align:"center"},{title:"状态",key:"status",align:"center",render:function(t,e){var a=0===e.row.status?"启用":"停用";return t("div",a)}},{title:"操作",key:"option",align:"center",render:function(e,a){return e("div",[e("a",{on:{click:function(){t.toDetailPage(a.row.uuid)}}},"编辑"),e("a",{on:{click:function(){t.delete(a.index)}}},"删除")])}}],list:[],searchWord:"",total:0,pageSize:10,current:1,searchWord2:"",isDisabled:""}},created:function(){this.getAllList()},methods:{getAllList:function(){var t;t={devicename:"",page:this.current,rows:this.pageSize},this.getWEDList(t)},getSearchList:function(){var t;t={devicename:this.searchWord,page:1,rows:this.pageSize},this.getWEDList(t),this.current=1,this.searchWord2=this.searchWord},changePageSize:function(t){var e={devicename:this.searchWord2,rows:t,page:1};this.getWEDList(e),this.pageSize=t},changePage:function(t){var e={devicename:this.searchWord2,rows:this.pageSize,page:t};this.current=t,this.getWEDList(e)},getWEDList:function(t){var e=this;this.axios({method:"post",url:"/cipher/equip/list",data:t}).then(function(t){e.total=t.data.total,e.list=t.data.rows}).catch(function(t){e.$Notice.warning({title:"网络未知错误！",desc:t})})},deleteData:function(t){var e=this;this.axios({method:"post",url:"/cipher/equip/delete",data:{uuid:t}}).then(function(t){if(0===t.data.return_code){e.$myMessage.success("删除成功!");var a=Math.ceil((e.total-1)/e.PageSize);e.current=a<e.current?a:e.current;var i={name:e.searchWord2,page:e.current,rows:e.pageSize};e.getWEDList(i)}else e.$myModal.error({title:"删除失败",content:"请稍后重试"})}).catch(function(t){e.$Notice.warning({title:"网络未知错误！",desc:t})})},delete:function(t){var e=this;this.$myModal.confirm({title:"确定删除吗？"}).then(function(){var a=Object(o["a"])(regeneratorRuntime.mark(function a(i){return regeneratorRuntime.wrap(function(a){while(1)switch(a.prev=a.next){case 0:e.deleteData(e.list[t].uuid);case 1:case"end":return a.stop()}},a,this)}));return function(t){return a.apply(this,arguments)}}()).catch(function(){})},toDetailPage:function(t){this.$router.push({name:"DMDetail",query:{uuid:t}})}}},n=r,l=(a("eb10"),a("2877")),c=Object(l["a"])(n,i,s,!1,null,"7c35df4b",null);e["default"]=c.exports},c107:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("transition",{attrs:{name:"fade",mode:"out-in"}},[a("router-view")],1)},s=[],o={},r=o,n=a("2877"),l=Object(n["a"])(r,i,s,!1,null,"6a5f58ea",null);e["default"]=l.exports},c154:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"load"},[a("div",{staticClass:"show"},[a("Spin",{attrs:{fix:""}},[a("Icon",{staticClass:"demo-spin-icon-load",attrs:{type:"ios-loading",size:"18"}}),a("div",[t._v("Loading")])],1)],1)])},s=[],o={},r=o,n=(a("0721"),a("2877")),l=Object(n["a"])(r,i,s,!1,null,null,null);e["default"]=l.exports},c222:function(t,e,a){"use strict";var i=a("86cd"),s=a.n(i);s.a},c2a1:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("transition",{attrs:{name:"fade",mode:"out-in"}},[a("router-view")],1)},s=[],o={},r=o,n=a("2877"),l=Object(n["a"])(r,i,s,!1,null,"d189bc7c",null);e["default"]=l.exports},c2ed:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ding-syn"},[a("myButton",{staticClass:"ding-syn-header--config",attrs:{btnType:"info"},on:{click:function(e){t.$router.push("/userCatalogDS/dingConfig")}}},[t._v("钉钉配置")]),a("myTabs",{attrs:{tabList:t.tabList,tabIndex:t.tabIndex},on:{changeTab:t.changeTab}},[a("keep-alive",[a(t.currentContent,{tag:"component"})],1)],1)],1)},s=[],o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ding-syn-department tabled-wrap"},[a("div",{staticClass:"ding-syn-department-header tabled-header"},[a("myButton",{on:{click:function(e){t.onConfirm(1)}}},[t._v("扫描组织结构")]),a("myButton",{on:{click:function(e){t.onConfirm(2)}}},[t._v("同步组织结构")])],1),a("div",{staticClass:"tabled-table"},[a("Table",{attrs:{columns:t.title,data:t.list}})],1),a("div",{staticClass:"tabled-page"},[a("Page",{attrs:{total:t.total,"page-size":t.pageSize,current:t.current,"show-sizer":"","show-elevator":"","show-total":""},on:{"on-change":t.changePage,"on-page-size-change":t.changePageSize}})],1),t.confirm.flag?a("Confirm",{attrs:{flag:t.confirm.flag,title:t.confirm.title,content:t.confirm.content,onOk:t.confirm.onOk,onClose:t.confirm.onClose}}):t._e(),t.isLoaading?a("Loading"):t._e()],1)},r=[],n=a("6a6b"),l=a("c154"),c={components:{Confirm:n["a"],Loading:l["default"]},data:function(){return{confirm:{flag:!1,title:"",content:"",onOk:this.onConfirmOk,onClose:this.onConfirmClose},type:1,isLoaading:!1,title:[{title:"部门 / 完整路径",key:"path",align:"center"},{title:"状态",key:"status",align:"center"}],list:[],total:0,pageSize:10,current:1}},mounted:function(){this.getAllList()},methods:{getAllList:function(){var t={page:this.current,rows:this.pageSize};this.getDepartmentList(t)},changePageSize:function(t){var e={rows:t,page:1};this.pageSize=t,this.getDepartmentList(e)},changePage:function(t){var e={rows:this.pageSize,page:t};this.current=t,this.getDepartmentList(e)},getDepartmentList:function(t){var e=this;this.axios({method:"post",url:"/cipher/dingGroup/getGroupList",data:t}).then(function(t){e.total=t.data.total,e.list=t.data.rows}).catch(function(t){e.$Notice.warning({title:"网络未知错误！",desc:t})})},onConfirm:function(t){this.type=t,this.confirm.title=1===t?"确认扫描吗？":"确认同步组织结构吗？",this.confirm.content=1===t?"重新从钉钉中扫描组织结构，扫描后，使用同步功能，才会改变现有的组织结构。":"将当前扫描结果下的全部部门进行同步，没有的将新建，存在的将更新。",this.confirm.flag=!0},onConfirmClose:function(){this.confirm.flag=!1},onConfirmOk:function(){this.confirm.flag=!1,this.isLoaading=!0,1===this.type?this.scan():this.sync()},scan:function(){var t=this;this.axios({method:"post",url:"/cipher/dingGroup/scanDingGroup",data:{}}).then(function(e){t.isLoaading=!1,0===e.data.return_code?(t.getAllList(),t.$myModal.success({title:"扫描成功",content:"扫描到".concat(e.data.add,"条新数据")})):t.$myModal.error({title:"扫描失败",content:"请稍后重试"})}).catch(function(e){t.$Notice.warning({title:"网络未知错误！",desc:e})})},sync:function(){var t=this;this.axios({method:"post",url:"/cipher/dingGroup/sync",data:{}}).then(function(e){t.isLoaading=!1,0===e.data.return_code?(t.getAllList(),t.$emit("changeLeftTree"),t.$myModal.success({title:"同步成功",content:"".concat(e.data.sync_length,"条数据同步成功")})):t.$myModal.error({title:"同步失败",content:"请稍后重试"})}).catch(function(e){t.isLoaading=!1,t.$Notice.warning({title:"网络未知错误！",desc:e})})}}},u=c,d=(a("7bf9"),a("2877")),m=Object(d["a"])(u,o,r,!1,null,"48ddd4e0",null),p=m.exports,h=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ding-syn-user tabled-wrap"},[a("div",{staticClass:"ding-syn-user-header tabled-header"},[a("div",{staticClass:"tabled-header-search"},[a("myInput",{attrs:{placeholder:"请输入姓名 / 账号",radius:"half",search:!0},on:{handleClick:function(e){t.getSearchList()}},model:{value:t.searchWord,callback:function(e){t.searchWord=e},expression:"searchWord"}})],1),a("div",{staticClass:"tabled-header-right"},[a("myButton",{on:{click:function(e){t.onConfirm(1)}}},[t._v("扫描用户")]),a("myButton",{on:{click:function(e){t.onConfirm(2)}}},[t._v("同步已选")]),a("myButton",{on:{click:function(e){t.onConfirm(3)}}},[t._v("同步全部")]),a("mySelect",{attrs:{dataList:t.statusList,showString:"显示"},on:{"on-change":t.changeState},model:{value:t.status,callback:function(e){t.status=e},expression:"status"}})],1)]),a("div",{staticClass:"tabled-table"},[a("Table",{ref:"selection",attrs:{columns:t.title,data:t.list},on:{"on-selection-change":function(e){t.handleSelectRow()}}})],1),a("div",{staticClass:"tabled-page"},[a("Page",{attrs:{total:t.total,"page-size":t.pageSize,current:t.current,"show-sizer":"","show-elevator":"","show-total":""},on:{"on-change":t.changePage,"on-page-size-change":t.changePageSize}})],1),t.confirm.flag?a("Confirm",{attrs:{flag:t.confirm.flag,title:t.confirm.title,titleStyle:t.confirm.titleStyle,content:t.confirm.content,onOk:t.confirm.onOk,onClose:t.confirm.onClose}}):t._e(),t.isLoaading?a("Loading"):t._e()],1)},f=[],g=(a("28a5"),a("ac4d"),a("8a81"),a("ac6a"),{components:{Confirm:n["a"],Loading:l["default"]},data:function(){var t=this;return{confirm:{flag:!1,title:"",titleStyle:{fontSize:"14px",fontWeight:"600"},content:"",onOk:this.onConfirmOk,onClose:this.onConfirmClose},type:1,isLoaading:!1,status:0,statusList:[{value:0,label:"全部"},{value:1,label:"新增"},{value:2,label:"待绑定"}],title:[{type:"selection",width:60,align:"center"},{title:"姓名",key:"name"},{title:"手机",key:"mobile"},{title:"邮箱",key:"email"},{title:"状态",key:"status",width:100},{title:"同步操作",key:"action",width:100,align:"center",render:function(e,a){return e("div",[e("a",{on:{click:function(){t.onConfirm(4,a.row.userid)}}},"同步")])}}],searchWord:"",queryStr:"",list:[],total:0,pageSize:10,current:1,selectList:[]}},created:function(){this.getList()},methods:{getList:function(){var t;t={status:this.status,queryStr:this.queryStr,page:this.current,rows:this.pageSize},this.getUserList(t)},getSearchList:function(){var t;t={status:this.status,queryStr:this.searchWord,page:1,rows:this.pageSize},this.getUserList(t),this.current=1,this.queryStr=this.searchWord},changeState:function(t){var e;e={status:this.status,queryStr:this.searchWord,page:1,rows:this.pageSize},this.getUserList(e)},changePageSize:function(t){var e={status:this.status,queryStr:this.queryStr,rows:t,page:1};this.getUserList(e),this.pageSize=t},changePage:function(t){var e={status:this.status,queryStr:this.queryStr,rows:this.pageSize,page:t};this.current=t,this.getUserList(e)},getUserList:function(t){var e=this;this.axios({method:"post",url:"/cipher/dingUser/getUserList",data:t}).then(function(t){e.total=t.data.total,e.list=t.data.rows}).catch(function(t){e.$Notice.warning({title:"网络未知错误！",desc:t})})},handleSelectRow:function(t,e){this.selectList=[];var a=this.$refs.selection.getSelection(),i=!0,s=!1,o=void 0;try{for(var r,n=a[Symbol.iterator]();!(i=(r=n.next()).done);i=!0){var l=r.value;this.selectList.push(l.userid)}}catch(c){s=!0,o=c}finally{try{i||null==n.return||n.return()}finally{if(s)throw o}}},onConfirm:function(t,e){var a,i;switch(this.type=t,t){case 1:a="确认扫描吗？",i="重新从钉钉中扫描用户，扫描后，使用同步功能，才会改变现有的用户。";break;case 2:a="确认同步已选账号？",i="将选中的用户同步到当前组织结构，没有的将新建，存在的将更新。";break;case 3:a="确认同步全部账号？",i="将当前扫描结果下的全部用户同步到当前组织结构，没有的将新建，存在的将更新。";break;case 4:a="确认同步当前账号？",i="将当前用户同步到当前组织结构，没有的将新建，存在的将更新。",this.selectList=e.split(" ");break;default:break}this.confirm.title=a,this.confirm.content=i,this.confirm.flag=!0},onConfirmClose:function(){this.confirm.flag=!1},onConfirmOk:function(){switch(this.confirm.flag=!1,this.isLoaading=!0,this.type){case 1:this.scan();break;case 2:case 4:this.sync();break;case 3:this.syncAll();break}},scan:function(){var t=this;this.axios({method:"post",url:"/cipher/dingUser/scanDingUser",data:{}}).then(function(e){t.isLoaading=!1,0===e.data.return_code?(t.getList(),t.$myModal.success({title:"扫描成功",content:"扫描到".concat(e.data.add,"条新数据")})):t.$myModal.error({title:"扫描失败",content:"请稍后重试"})}).catch(function(e){t.isLoaading=!1,t.$Notice.warning({title:"网络未知错误！",desc:e})})},sync:function(){var t=this;if(0===this.selectList.length)return this.isLoaading=!1,void this.$myMessage.error("未勾选数据");this.selectList=this.selectList.join(",");var e={userIdList:this.selectList};this.axios({method:"post",url:"/cipher/dingUser/sync",data:e}).then(function(e){t.isLoaading=!1,0===e.data.return_code?(t.getList(),t.$myModal.success({title:"同步成功",content:"".concat(e.data.sync_length,"条数据同步成功")})):t.$myModal.error({title:"同步失败",content:"请稍后重试"})}).catch(function(e){t.isLoaading=!1,t.$Notice.warning({title:"网络未知错误！",desc:e})})},syncAll:function(){var t=this;this.axios({method:"post",url:"/cipher/dingUser/syncAll",data:{}}).then(function(e){t.isLoaading=!1,0===e.data.return_code?(t.getList(),t.$myModal.success({title:"同步成功",content:"".concat(e.data.sync_length,"条数据同步成功")})):t.$myModal.error({title:"同步失败",content:"请稍后重试"})}).catch(function(e){t.isLoaading=!1,t.$Notice.warning({title:"网络未知错误！",desc:e})})}}}),v=g,b=(a("a881"),Object(d["a"])(v,h,f,!1,null,"7a54ccb4",null)),y=b.exports,I={components:{department:p,SynUser:y},data:function(){return{tabIndex:0,currentContent:"department",tabList:[{index:0,name:"同步部门",component:"department"},{index:1,name:"同步用户",component:"SynUser"}]}},methods:{changeTab:function(t){this.tabIndex=t.index,this.currentContent=t.component}}},w=I,A=(a("cb0d"),Object(d["a"])(w,i,s,!1,null,"7577ad7b",null));e["default"]=A.exports},c327:function(t,e,a){},c354:function(t,e,a){"use strict";var i=a("7059"),s=a.n(i);s.a},c365:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"formed-wrap"},[a("div",{staticClass:"formed-header"},[a("div",{staticClass:"formed-header-title"},[t._v("账号锁定设置")]),a("myButton",{staticClass:"formed-header-btn",attrs:{btnType:"info"},on:{click:t.toedit}},[t._v("编辑")])],1),a("div",{staticClass:"formed-container"},[a("div",{staticClass:"formed-form"},[a("div",{staticClass:"formed-form-item"},[a("span",[t._v("锁定账号：")]),t.statusIcon?a("span",[t._v("\n          "+t._s(t.statusIcon.status?"已开启":"已关闭")+"\n          "),a("Icon",{class:t.statusIcon.class,attrs:{type:t.statusIcon.type}})],1):t._e()]),a("div",{staticClass:"formed-form-item"},[a("span",[t._v("账号锁定策略：")]),a("span",[a("span",{staticClass:"large-font"},[t._v(t._s(t.formItem.timeRang))]),t._v("\n          分钟内，身份认证连接失败\n          "),a("span",{staticClass:"large-font"},[t._v(t._s(t.formItem.failCount))]),t._v("\n          次后，将账号锁定\n          "),a("span",{staticClass:"large-font"},[t._v(t._s(t.formItem.freezingTime))]),t._v("\n          分钟。\n        ")])])])])])},s=[],o=a("e5d6"),r={data:function(){return{statusIcon:null,formItem:{}}},mounted:function(){this.finddata()},methods:{toedit:function(){this.$router.push({name:"LFEdit"})},finddata:function(){var t=this;this.axios({method:"post",url:"/cipher/loginfail/list",data:{}}).then(function(e){t.formItem=e.data,t.statusIcon=1===e.data.status?o["a"].openIcon:o["a"].closeIcon}).catch(function(t){console.log(t)})}}},n=r,l=(a("0ae9"),a("2877")),c=Object(l["a"])(n,i,s,!1,null,"36fcb62c",null);e["default"]=c.exports},c479:function(t,e,a){"use strict";var i=a("d711"),s=a.n(i);s.a},c480:function(t,e,a){"use strict";var i=a("dab6"),s=a.n(i);s.a},c5e4:function(t,e,a){"use strict";var i=a("18e8"),s=a.n(i);s.a},c633:function(t,e,a){},c640:function(t,e,a){"use strict";var i=a("9c35"),s=a.n(i);s.a},c695:function(t,e,a){},c6cc:function(t,e,a){},c791:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tree-transfer clearfix"},[a("div",{staticClass:"left tree-transfer-left"},[a("div",{staticClass:"choose"},[t._t("leftText")],2),a("div",{staticClass:"tree-transfer-search"},[a("myInput",{staticStyle:{width:"100%"},attrs:{radius:"half",search:!0,placeholder:t.placeholder},on:{handleClick:t.searchDataMethod},model:{value:t.searchDefaultData,callback:function(e){t.searchDefaultData=e},expression:"searchDefaultData"}})],1),1===t.type?a("div",{staticClass:"height2"},[a("Tree",{ref:"trees",staticClass:"modalClass",attrs:{data:t.leftData1,"show-checkbox":"",render:t.showSelectClass},on:{"on-check-change":t.checkTreeData,"on-toggle-expand":t.changeCheckStyle}})],1):2===t.type?a("div",{staticClass:"height2"},[a("Tree",{ref:"trees",staticClass:"modalClass",attrs:{data:t.leftData2,render:t.showSelectClass1}})],1):3===t.type?a("div",{staticClass:"height2"},[a("CheckboxGroup",{on:{"on-change":t.getCheckedData},model:{value:t.teams,callback:function(e){t.teams=e},expression:"teams"}},t._l(t.leftData3,function(e,i){return a("div",{key:i,staticClass:"padding1"},[!0===e.selected?a("Checkbox",{staticClass:"modalClass1",staticStyle:{color:"red"},attrs:{label:e.id}},[t._v(t._s(e.teamName))]):t._e(),!1===e.selected?a("Checkbox",{staticClass:"modalClass",attrs:{label:e.id}},[t._v(t._s(e.teamName))]):t._e()],1)}),0)],1):4===t.type?a("div",{staticClass:"height2"},[a("Tree",{ref:"tree4",staticClass:"modalClass",attrs:{data:t.leftData4,"show-checkbox":"","check-strictly":"",render:t.showSelectClass},on:{"on-check-change":t.getCheckTreeData4}})],1):t._e()]),a("div",{staticClass:"right tree-transfer-right"},[a("div",{staticClass:"choose"},[t._t("rightText")],2),1==t.type?a("div",{staticClass:"modalClass height3"},t._l(t.rightData1,function(e,i){return a("div",{key:i,staticClass:"nowhite"},[a("Row",{staticClass:"padding",attrs:{span:"24"}},[a("Col",{staticStyle:{"text-align":"left"},attrs:{span:"10",offset:"1"}},[t._v(t._s(e.title)+".")]),a("Col",{staticStyle:{"text-align":"right"},attrs:{span:"3",offset:"10"}},[a("p",[a("Icon",{attrs:{type:"ios-close",size:"32"},on:{click:function(a){t.leftTransfer1(e)}}})],1)])],1)],1)}),0):t._e(),3==t.type?a("div",{staticClass:"modalClass height3"},t._l(t.rightData3,function(e,i){return a("div",{key:i,staticClass:"nowhite"},[a("Row",{staticClass:"padding",attrs:{span:"24"}},[a("Col",{staticStyle:{"text-align":"left"},attrs:{span:"10",offset:"1"}},[t._v(t._s(e.teamName)+".")]),a("Col",{staticStyle:{"text-align":"right"},attrs:{span:"3",offset:"10"}},[a("p",[a("Icon",{attrs:{type:"ios-close",size:"32"},on:{click:function(a){t.leftTransfer3(e)}}})],1)])],1)],1)}),0):t._e(),2==t.type?a("div",{staticClass:"modalClass height3"},t._l(t.rightData2,function(e,i){return a("div",{key:i,staticClass:"nowhite"},[a("Row",{staticClass:"padding",attrs:{span:"24"}},[a("Col",{staticStyle:{"text-align":"left"},attrs:{span:"10",offset:"1"}},[t._v(t._s(e.title)+".")]),a("Col",{staticStyle:{"text-align":"right"},attrs:{span:"3",offset:"10"}},[a("p",[a("Icon",{attrs:{type:"ios-close",size:"32"},on:{click:function(a){t.leftTransfer2(e)}}})],1)])],1)],1)}),0):4==t.type?a("div",{staticClass:"modalClass height3"},t._l(t.rightData4,function(e){return a("div",{key:e.groupId,staticClass:"nowhite"},[a("Row",{staticClass:"padding",attrs:{span:"24"}},[a("Col",{staticStyle:{"text-align":"left"},attrs:{span:"10",offset:"1"}},[t._v(t._s(e.groupName)+".")]),a("Col",{staticStyle:{"text-align":"right"},attrs:{span:"3",offset:"10"}},[a("p",[a("Icon",{attrs:{type:"ios-close",size:"32"},on:{click:function(a){t.leftTransfer4(e)}}})],1)])],1)],1)}),0):t._e()])])},s=[],o=a("53ca"),r=(a("28a5"),a("6b54"),a("ac4d"),a("8a81"),a("ac6a"),a("c5f6"),{name:"TreeTransfer",data:function(){return{teams:[],leftData1:[],leftData2:[],leftData3:[],leftData4:[],rightData1:[],dataType:{},searchDefaultData:"",type:2,rightData2:[],rightData3:[],rightData4:[]}},props:{leftTreeData:{type:Array,default:function(){return[]}},leftDataType:{type:Number,default:0},placeholder:{type:String,default:""}},watch:{leftTreeData:{handler:function(t,e){t===e||(this.teams=[],this.initRight(t),1===this.leftDataType&&this.$nextTick(function(){var t=document.querySelectorAll(".person"),e=!0,a=!1,i=void 0;try{for(var s,o=t[Symbol.iterator]();!(e=(s=o.next()).done);e=!0){var r=s.value;r.previousElementSibling.classList.add("person-circle")}}catch(n){a=!0,i=n}finally{try{e||null==o.return||o.return()}finally{if(a)throw i}}}))},deep:!0},leftDataType:{handler:function(t,e){this.type=t}}},methods:{getCheckedData:function(t){for(var e=[],a=this.leftData3,i=0;i<a.length;i++)for(var s=0;s<t.length;s++)a[i].id===t[s]&&e.push(a[i]);this.rightData3=e,this.$emit("rightData",this.rightData3)},leftTransfer3:function(t){for(var e=0;e<this.teams.length;e++)t.id===this.teams[e]&&this.teams.splice(e,1);this.getCheckedData(this.teams)},leftTransfer2:function(t){var e=this.leftData2;this.cancelCheckDemo2(e,t),this.rightData2=this.dataRight(this.leftData2),this.$emit("rightData",this.rightData2)},leftTransfer1:function(t){var e=this.leftData1,a=this.getpaths(this.leftData1,t.accountNumber);this.arrayTraversal(e,a,t.accountNumber),this.rightData1=this.deleteRepeatData(this.getRightData(this.leftData1)),this.$emit("rightData",this.rightData1)},leftTransfer4:function(t){var e=this.leftData4;this.leftData4=this.cancelLeftCheck(e,t),this.rightData4=this.$refs.tree4.getCheckedNodes(),this.$emit("rightData",this.rightData4)},cancelLeftCheck:function(t,e){for(var a in t){if(t[a].groupId===e.groupId){this.$set(t[a],"checked",!1);break}t[a].children&&(t[a].children=this.cancelLeftCheck(t[a].children,e))}return t},getpaths:function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if("Array"===Object.prototype.toString.call(t).slice(8,-1))for(var i=0;i<t.length;i++)this.getpaths(t[i],e,a);else for(var s in t)if("Array"===Object.prototype.toString.call(t[s]).slice(8,-1)&&this.getpaths(t[s],e,a),"accountNumber"===s&&t[s]===e){t["checked"]=!1;for(var o=t["path"].substring(0,t["path"].length-1).split("/"),r=0;r<o.length;r++)-1===a.indexOf(o[r])&&a.push(o[r])}return a},cancelCheckDemo2:function(t,e){if("Array"===Object.prototype.toString.call(t).slice(8,-1))for(var a=0;a<t.length;a++)this.cancelCheckDemo2(t[a],e);else for(var i in t)"Array"===Object.prototype.toString.call(t[i]).slice(8,-1)&&this.cancelCheckDemo2(t[i],e),"groupId"===i&&-1!==t[i].indexOf(e.groupId)&&(t.state={checked:!1});return t},arrayTraversal:function(t,e,a){for(var i=0;i<t.length;i++)"Array"===Object.prototype.toString.call(t[i]).slice(8,-1)?this.arrayTraversal(t[i]):this.objectTraversal(t[i],e,a);return t},objectTraversal:function(t,e,a){for(var i in t)if("Array"===Object.prototype.toString.call(t[i]).slice(8,-1))this.arrayTraversal(t[i],e,a);else{for(var s=0;s<e.length;s++)t.groupId===e[s]&&"null"===t.accountNumber&&(t.checked=!1,t["indeterminate"]=!0);"accountNumber"===i&&t[i]===a&&(t["checked"]=!1)}},getRightData:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if("Array"===Object.prototype.toString.call(t).slice(8,-1))for(var a=0;a<t.length;a++)this.getRightData(t[a],e);else if("object"===Object(o["a"])(t))for(var i in t){if(null!==t.accountNumber&&"null"!==t.accountNumber&&"checked"===i&&!0===t[i]){e.push(t);break}"Array"===Object.prototype.toString.call(t[i]).slice(8,-1)&&"children"===i&&(e=this.getRightData(t[i],e))}return e},checkTreeData:function(t,e){if(!0===e.checked)"null"!==e.accountNumber?null!==this.rightData1?(this.rightData1.push(e),this.rightData1=this.deleteRepeatData(this.rightData1),this.$emit("rightData",this.rightData1)):(this.rightData1.push(e),this.$emit("rightData",this.rightData1)):(this.rightData1=this.gainCheckedAllAccountNumber(e),this.$emit("rightData",this.rightData1));else{for(var a=this.getCheckedUser(e),i=[],s=[],o=0;o<t.length;o++)for(var r=0;r<a.length;r++)if(t[o]["accountNumber"]===a[r]["accountNumber"]){-1===s.indexOf(t[o]["accountNumber"])&&s.push(t[o]["accountNumber"]);for(var n=t[o]["path"].substring(0,t[o]["path"].length-1).split("/"),l=0;l<n.length;l++)-1===i.indexOf(n[l])&&i.push(n[l])}for(var c=0;c<s.length;c++)this.arrayTraversal(this.leftData1,i,s[c]);this.rightData1=this.deleteRepeatData(this.getRightData(this.leftData1)),this.$emit("rightData",this.rightData1)}},getCheckedUser:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if("Array"===Object.prototype.toString.call(t).slice(8,-1))for(var a=0;a<t.length;a++)this.getCheckedUser(t[a],e);else if("object"===Object(o["a"])(t))for(var i in t)"accountNumber"===i&&""!==t[i]&&"null"!==t[i]?e.push(t):"Array"===Object.prototype.toString.call(t[i]).slice(8,-1)&&"children"===i&&this.getCheckedUser(t[i],e);return e},getCheckTreeData4:function(t,e){e.checked&&this.getAllSonNodes(this.leftData4,e),this.rightData4=this.$refs.tree4.getCheckedNodes(),this.$emit("rightData",this.rightData4)},getAllSonNodes:function(t,e){for(var a in t)t[a].groupId===e.groupId?t[a].children=this.treeChangeSel(t[a].children,"checked",!0):t[a].children&&(t[a].children=this.getAllSonNodes(t[a].children,e));return t},treeChangeSel:function(t,e,a){for(var i in console.log(t),t)this.$set(t[i],e,a),t[i].children&&(t[i].children=this.treeChangeSel(t[i].children,e,a));return t},gainCheckedAllAccountNumber:function(t){var e=[];e.push(t),e=this.gainCheckedAccountNumber(e);for(var a=this.rightData1,i=0;i<e.length;i++)if(0===a.length)a.push(e[i]);else{for(var s=!1,o=0;o<a.length;o++)e[i].accountNumber===a[o].accountNumber&&(s=!0);!1===s&&a.push(e[i])}return a},gainCheckedAccountNumber:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if("Array"===Object.prototype.toString.call(t).slice(8,-1))for(var a=0;a<t.length;a++)this.gainCheckedAccountNumber(t[a],e);else if("object"===Object(o["a"])(t))for(var i in t)!0===t[i]&&"checked"===i&&"null"!==t.accountNumber&&""!==t.accountNumber?e.push(t):"Array"===Object.prototype.toString.call(t[i]).slice(8,-1)&&(e=this.gainCheckedAccountNumber(t[i],e));return e},deleteRepeatData:function(t){for(var e=[],a=0;a<t.length;a++){var i=!1;if(0===a)i=!1;else for(var s=0;s<e.length;s++)t[a].accountNumber===e[s].accountNumber&&(i=!0);!1===i&&e.push(t[a])}return e},initRight:function(t){1===this.type?(this.leftData1=t,this.rightData1=this.deleteRepeatData(this.initRightData(this.leftData1)),this.$emit("rightData",this.rightData1)):2===this.type?(this.leftData2=t,this.rightData2=this.dataRight(this.leftData2),this.$emit("rightData",this.rightData2)):3===this.type?(this.leftData3=t,this.rightData3=this.getRightDataList(this.leftData3),this.$emit("rightData",this.rightData3)):4===this.type&&(this.leftData4=t,this.rightData4=this.$refs.tree4.getCheckedNodes(),this.$emit("rightData",this.rightData4))},getRightDataList:function(t){for(var e=[],a=0;a<t.length;a++)null!==t[a].state&&!0===t[a].state.checked&&(e.push(t[a]),this.teams.push(t[a].id));return e},dataRight:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if("Array"===Object.prototype.toString.call(t).slice(8,-1))for(var a=0;a<t.length;a++)this.dataRight(t[a],e);else if("object"===Object(o["a"])(t))for(var i in t){if("state"===i&&!0===t[i].checked){e.push(t);break}"Array"===Object.prototype.toString.call(t[i]).slice(8,-1)&&"children"===i&&this.dataRight(t[i],e)}return e},initRightData:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if("Array"===Object.prototype.toString.call(t).slice(8,-1))for(var a=0;a<t.length;a++)this.initRightData(t[a],e);else if("object"===Object(o["a"])(t))for(var i in t)"checked"===i&&!0===t[i]?e.push(t):"Array"===Object.prototype.toString.call(t[i]).slice(8,-1)&&"children"===i&&this.initRightData(t[i],e);return e},searchDataMethod:function(){if(""===this.searchDefaultData)1===this.type?this.leftData1=this.initSearchDataTree(this.leftData1):2===this.type?this.leftData2=this.initSearchDataTree(this.leftData2):3===this.type?this.initSearchData(this.leftData3):4===this.type&&(this.leftData4=this.initSearchDataTree(this.leftData4));else if(1===this.type){this.groupIdDemo=[],this.leftData1=this.initSearchDataTree(this.leftData1),this.leftData1=this.searchDataTree(this.leftData1);for(var t=[],e=0;e<this.groupIdDemo.length;e++){this.groupIdDemo[e]=this.groupIdDemo[e].substring(0,this.groupIdDemo[e].length-1);for(var a=this.groupIdDemo[e].split("/"),i=0;i<a.length;i++)-1===t.indexOf(a[i])&&""!==a[i]&&t.push(a[i])}for(var s=0;s<t.length;s++)this.leftData1=this.searchDataTree1(this.leftData1,t[s])}else if(2===this.type){this.groupIdDemo=[],this.leftData2=this.initSearchDataTree(this.leftData2),this.leftData2=this.searchDataTree(this.leftData2);for(var o=[],r=0;r<this.groupIdDemo.length;r++){this.groupIdDemo[r]=this.groupIdDemo[r].substring(0,this.groupIdDemo[r].length-1);for(var n=this.groupIdDemo[r].split("/"),l=0;l<n.length;l++)-1===o.indexOf(n[l])&&""!==n[l]&&o.push(n[l])}for(var c=0;c<o.length;c++)this.leftData2=this.searchDataTree1(this.leftData2,o[c])}else if(3===this.type)this.initSearchData(this.leftData3),this.searchData(this.leftData3);else if(4===this.type){this.groupIdDemo=[],this.leftData4=this.initSearchDataTree(this.leftData4),this.leftData4=this.searchDataTree(this.leftData4);for(var u=[],d=0;d<this.groupIdDemo.length;d++){this.groupIdDemo[d]=this.groupIdDemo[d].substring(0,this.groupIdDemo[d].length-1);for(var m=this.groupIdDemo[d].split("/"),p=0;p<m.length;p++)-1===u.indexOf(m[p])&&""!==m[p]&&u.push(m[p])}for(var h=0;h<u.length;h++)this.leftData4=this.searchDataTree1(this.leftData4,u[h])}},searchDataTree1:function(t,e){if("Array"===Object.prototype.toString.call(t).slice(8,-1))for(var a=0;a<t.length;a++)this.searchDataTree1(t[a],e);else for(var i in t)null!==t[i]&&"null"!==t[i]&&""!==t[i]&&"groupId"===i&&t[i]===e&&(t["expand"]=!0),"Array"===Object.prototype.toString.call(t[i]).slice(8,-1)&&"children"===i&&this.searchDataTree1(t[i],e);return t},searchData:function(t){for(var e=0;e<t.length;e++)-1!==t[e].teamName.indexOf(this.searchDefaultData)&&(t[e].selected=!0)},initSearchData:function(t){for(var e=0;e<t.length;e++)t[e].selected=!1},initSearchDataTree:function(t){if("Array"===Object.prototype.toString.call(t).slice(8,-1))for(var e=0;e<t.length;e++)this.initSearchDataTree(t[e]);else for(var a in t)(null!==t[a]&&"null"!==t[a]&&""!==t[a]&&"selected"===a||"expand"===a)&&(t[a]=!1),"Array"===Object.prototype.toString.call(t[a]).slice(8,-1)&&"children"===a&&this.initSearchDataTree(t[a]);return t},searchDataTree:function(t){if("Array"===Object.prototype.toString.call(t).slice(8,-1))for(var e=0;e<t.length;e++)this.searchDataTree(t[e]);else for(var a in t){if(null!==t[a]&&"null"!==t[a]&&""!==t[a]&&"title"===a&&-1!==t[a].indexOf(this.searchDefaultData)){t["selected"]=!0;var i=t.path;null!==i&&""!==i&&this.groupIdDemo.push(i)}"Array"===Object.prototype.toString.call(t[a]).slice(8,-1)&&"children"===a&&this.searchDataTree(t[a])}return t},changeCheckStyle:function(){this.$nextTick(function(){var t=document.querySelectorAll(".person"),e=!0,a=!1,i=void 0;try{for(var s,o=t[Symbol.iterator]();!(e=(s=o.next()).done);e=!0){var r=s.value;r.previousElementSibling.classList.add("person-circle")}}catch(n){a=!0,i=n}finally{try{e||null==o.return||o.return()}finally{if(a)throw i}}})},showSelectClass:function(t,e){e.root,e.node;var a=e.data;return!0===a.selected?t("span",{style:{color:"red",width:"100%"},class:{person:"null"!==a.uuid}},[t("span",a.title)]):t("span",{class:{person:"null"!==a.uuid}},a.title)},showSelectClass1:function(t,e){var a=this,i=(e.root,e.node,e.data);return!0===i.selected?"null"!==i.state&&!0===i.state.checked?t("span",[t("Checkbox",{props:{value:!0},on:{"on-change":function(t){!0===t?(i.state={checked:!0},a.rightData2=a.dataRight(a.leftData2),a.$emit("rightData",a.rightData2)):(i.state={checked:!1},a.rightData2=a.dataRight(a.leftData2),a.$emit("rightData",a.rightData2))}}}),t("span",{style:{color:"red",width:"100%"}},i.title)]):t("span",[t("Checkbox",{on:{"on-change":function(t){!0===t?(i.state={checked:!0},a.rightData2=a.dataRight(a.leftData2),a.$emit("rightData",a.rightData2)):(i.state={checked:!1},a.rightData2=a.dataRight(a.leftData2),a.$emit("rightData",a.rightData2))}}}),t("span",{style:{color:"red",width:"100%"}},i.title)]):"null"!==i.state&&!0===i.state.checked?t("span",[t("Checkbox",{props:{value:!0},on:{"on-change":function(t){!0===t?(i.state={checked:!0},a.rightData2=a.dataRight(a.leftData2),a.$emit("rightData",a.rightData2)):(i.state={checked:!1},a.rightData2=a.dataRight(a.leftData2),a.$emit("rightData",a.rightData2))}}}),t("span",i.title)]):t("span",[t("Checkbox",{on:{"on-change":function(t){!0===t?(i.state={checked:!0},a.rightData2=a.dataRight(a.leftData2),a.$emit("rightData",a.rightData2)):(i.state={checked:!1},a.rightData2=a.dataRight(a.leftData2),a.$emit("rightData",a.rightData2))}}}),t("span",i.title)])}}}),n=r,l=(a("6d0d"),a("2877")),c=Object(l["a"])(n,i,s,!1,null,"617f413c",null);e["a"]=c.exports},c7e3:function(t,e,a){t.exports=a.p+"assets/img/saml.png"},c86f:function(t,e,a){},c955:function(t,e,a){},cb0d:function(t,e,a){"use strict";var i=a("fef5"),s=a.n(i);s.a},cb78:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ding-config wrap"},[t.isShowEdit?a("myButton",{staticClass:"ding-config-change__btn",attrs:{btnType:"info"},on:{click:t.changeStatus}},[t._v("编辑")]):t._e(),a("myComplexTabs",{attrs:{animated:!1},model:{value:t.currentTab,callback:function(e){t.currentTab=e},expression:"currentTab"}},[a("myPane",{attrs:{label:"基本配置",name:"base"}},[a("BaseSet",{ref:"base",on:{statusChange:t.getChildStatus}})],1),a("myPane",{attrs:{label:"属性同步配置",name:"property"}},[a("PropertySet",{ref:"property",on:{statusChange:t.getChildStatus}})],1),a("myPane",{attrs:{label:"账号匹配规则",name:"account"}},[a("AccountMatch",{ref:"account",on:{statusChange:t.getChildStatus}})],1)],1)],1)},s=[],o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"base formed-wrap"},[t.isEdit?a("div",{staticClass:"formed-form"},[a("div",{staticClass:"formed-form-part"},[a("h3",{staticClass:"formed-form-part-title"},[t._v("钉钉企业信息")]),a("div",{staticClass:"formed-form-item"},[a("span",[t._v("Corp ID：")]),a("span",[a("Input",{model:{value:t.corpId,callback:function(e){t.corpId=e},expression:"corpId"}})],1)])]),a("div",{staticClass:"formed-form-part"},[a("h3",{staticClass:"formed-form-part-title"},[t._v("钉钉应用信息")]),a("div",{staticClass:"formed-form-item"},[a("span",[t._v("App Key：")]),a("span",[a("Input",{model:{value:t.appKey,callback:function(e){t.appKey=e},expression:"appKey"}})],1)]),a("div",{staticClass:"formed-form-item"},[a("span",[t._v("App Secret：")]),a("span",[a("Input",{model:{value:t.appSecret,callback:function(e){t.appSecret=e},expression:"appSecret"}})],1)])]),a("div",{staticClass:"formed-form-part"},[a("h3",{staticClass:"formed-form-part-title"},[t._v("扫码登录配置")]),t._m(1),t._l(t.scanInfoDomainList,function(e,i){return a("div",{key:i,staticClass:"formed-form-item clearfix"},[a("span",{staticStyle:{float:"left"}},[t._v(t._s(e.applicationName)+"：")]),a("div",{staticClass:"formed-form-item-content"},[a("Input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入"},model:{value:e.scanAppId,callback:function(a){t.$set(e,"scanAppId",a)},expression:"item.scanAppId"}})],1),a("div",{staticClass:"formed-form-item-content"},[a("Input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入"},model:{value:e.scanAppSecret,callback:function(a){t.$set(e,"scanAppSecret",a)},expression:"item.scanAppSecret"}})],1),a("div",{staticClass:"formed-form-item-content"},[a("Input",{staticStyle:{width:"110px"},model:{value:e.callBackUrl,callback:function(a){t.$set(e,"callBackUrl",a)},expression:"item.callBackUrl"}}),a("span",{staticClass:"copy link",on:{click:function(a){t.copy(e.callBackUrl)}}},[t._v("复制")])],1)])})],2)]):a("div",{staticClass:"formed-form"},[a("div",{staticClass:"formed-form-part"},[a("h3",{staticClass:"formed-form-part-title"},[t._v("钉钉企业信息")]),a("div",{staticClass:"formed-form-item"},[a("span",[t._v("Corp ID：")]),a("span",[t._v(t._s(t.show.corpId))])])]),a("div",{staticClass:"formed-form-part"},[a("h3",{staticClass:"formed-form-part-title"},[t._v("钉钉应用信息")]),a("div",{staticClass:"formed-form-item"},[a("span",[t._v("App Key：")]),a("span",[t._v(t._s(t.show.appKey))])]),a("div",{staticClass:"formed-form-item"},[a("span",[t._v("App Secret：")]),a("span",[t._v(t._s(t.show.appSecret))])])]),a("div",{staticClass:"formed-form-part"},[a("h3",{staticClass:"formed-form-part-title"},[t._v("扫码登录配置")]),t._m(0),t._l(t.show.scanInfoDomainList,function(e,i){return a("div",{key:i,staticClass:"show-list formed-form-item clearfix"},[a("span",{staticStyle:{float:"left","line-height":"1"}},[t._v(t._s(e.applicationName)+"：")]),a("div",{staticClass:"formed-form-item-content"},[a("span",[t._v(t._s(e.scanAppId))])]),a("div",{staticClass:"formed-form-item-content"},[a("span",[t._v(t._s(e.scanAppSecret))])]),a("div",{staticClass:"formed-form-item-content"},[a("span",[t._v(t._s(e.callBackUrl))]),a("span",{staticClass:"copy link",on:{click:function(a){t.copy(e.callBackUrl)}}},[t._v("复制")])])])})],2)]),t.isEdit?a("div",{staticClass:"formed-footer"},[a("myButton",{attrs:{btnType:"info"},on:{click:t.saveBaseData}},[t._v("保存")]),a("myButton",{on:{click:t.cancelStatus}},[t._v("取消")])],1):t._e(),t.message.show?a("Notice",{attrs:{text:t.message.text,show:t.message.show,duration:t.message.duration,onClose:t.message.onClose},on:{close:t.close}}):t._e()],1)},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"formed-form-item formed-form-item-head clearfix"},[a("div",{staticClass:"formed-form-item-content"},[t._v("App Id")]),a("div",{staticClass:"formed-form-item-content"},[t._v("App Secret")]),a("div",{staticClass:"formed-form-item-content"},[t._v("回调地址")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"formed-form-item formed-form-item-head clearfix"},[a("div",{staticClass:"formed-form-item-content"},[t._v("App Id")]),a("div",{staticClass:"formed-form-item-content"},[t._v("App Secret")]),a("div",{staticClass:"formed-form-item-content"},[t._v("回调地址")])])}],n=a("faeb"),l={components:{Notice:n["a"]},data:function(){return{isEdit:!1,show:{},scanInfoDomainList:[],corpId:"",appKey:"",appSecret:"",message:{text:"保存成功!",show:!1,duration:1,onClose:this.close}}},mounted:function(){this.getBaseData()},methods:{copy:function(t){var e=document.createElement("input");e.value=t,document.body.appendChild(e),e.select(),document.execCommand("Copy"),e.className="oInput",e.style.display="none"},editStatus:function(){this.getBaseData(),this.isEdit=!0,this.$emit("statusChange",{isEdit:this.isEdit,name:"base"})},cancelStatus:function(){this.isEdit=!1,this.$emit("statusChange",{isEdit:this.isEdit,name:"base"})},getBaseData:function(){var t=this,e={};this.axios({method:"post",data:e,url:"/cipher/dingConfig/getBaseConfig"}).then(function(e){t.show=e.data,t.scanInfoDomainList=e.data.scanInfoDomainList,t.corpId=e.data.corpId,t.appKey=e.data.appKey,t.appSecret=e.data.appSecret}).catch(function(t){this.axios.error.handlingErrors(t)})},saveBaseData:function(){var t=this,e={scanAppInfoList:JSON.stringify(this.scanInfoDomainList),corpId:this.corpId,appKey:this.appKey,appSecret:this.appSecret};this.axios({method:"post",data:e,url:"/cipher/dingConfig/baseConfig"}).then(function(e){t.toggle(),t.getBaseData(),t.cancelStatus()}).catch(function(t){this.axios.error.handlingErrors(t)})},close:function(){this.message.show=!1},toggle:function(){this.message.show=!0}}},c=l,u=(a("d080"),a("2877")),d=Object(u["a"])(c,o,r,!1,null,"1ed4c082",null),m=d.exports,p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"property formed-wrap"},[t.isEdit?t._e():a("div",{staticClass:"formed-form"},[a("div",{staticClass:"formed-form-part"},[a("div",{staticClass:"formed-form-part-title"},[t._v("属性映射")]),a("div",{staticClass:"formed-form-item"},[a("Table",{attrs:{columns:t.tableTitle,data:t.localDingMapList,width:"400"}})],1)]),a("div",{staticClass:"formed-form-part"},[a("div",{staticClass:"formed-form-part-title"},[t._v("自动同步")]),a("div",{staticClass:"formed-form-item"},[a("span",[t._v("自动同步：")]),a("span",[t._v(t._s(t.showAutoSyn.isAutoSync?"关闭":"开启"))])]),a("div",{staticClass:"formed-form-item"},[a("span",[t._v("同步开始时间：")]),a("span",[t._v(t._s(t.showAutoSyn.autoSyncDate))])]),a("div",{staticClass:"formed-form-item"},[a("span",[t._v("每隔：")]),a("span",[t._v(t._s(t.getIntervalTime)+" "),a("span",[t._v("同步一次")])])])])]),t.isEdit?a("Form",{ref:"formValidate",staticClass:"formed-form",attrs:{"label-width":120,model:t.formItem,rules:t.ruleValidate}},[a("div",{staticClass:"formed-form-part"},[a("div",{staticClass:"formed-form-part-title"},[t._v("属性映射")]),a("div",{staticClass:"formed-form-item"},[a("Table",{attrs:{columns:t.tableEditTitle,data:t.localDingMapList,width:"400"},scopedSlots:t._u([{key:"dingKey",fn:function(e){e.row;var i=e.index;return[a("Select",{staticStyle:{width:"120px"},attrs:{size:"large"},model:{value:t.selectKey[i],callback:function(e){t.$set(t.selectKey,i,e)},expression:"selectKey[index]"}},t._l(t.selectKeyList,function(e){return a("Option",{key:e,attrs:{value:e}},[t._v(t._s(e))])}),1)]}}])})],1)]),a("div",{staticClass:"formed-form-part"},[a("div",{staticClass:"formed-form-part-title"},[t._v("自动同步")]),a("FormItem",{attrs:{label:"自动同步：",prop:"isAutoSync"}},[a("RadioGroup",{model:{value:t.formItem.isAutoSync,callback:function(e){t.$set(t.formItem,"isAutoSync",e)},expression:"formItem.isAutoSync"}},t._l(t.isAutoSyncList,function(e){return a("Radio",{key:e.value,attrs:{label:e.value}},[t._v(t._s(e.label))])}),1)],1),a("FormItem",{attrs:{label:"同步开始时间：",prop:"autoSyncDate"}},[a("TimePicker",{staticStyle:{width:"280px"},attrs:{type:"time",placeholder:"请选择开始时间"},model:{value:t.formItem.autoSyncDate,callback:function(e){t.$set(t.formItem,"autoSyncDate",e)},expression:"formItem.autoSyncDate"}})],1),a("FormItem",{attrs:{label:"每隔：",prop:"interval"}},[a("Select",{staticStyle:{width:"225px"},model:{value:t.formItem.interval,callback:function(e){t.$set(t.formItem,"interval",e)},expression:"formItem.interval"}},t._l(t.intervalList,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}),1),a("span",{staticStyle:{"margin-left":"8px"}},[t._v("同步一次")])],1)],1)]):t._e(),t.isEdit?a("div",{staticClass:"formed-footer"},[a("myButton",{attrs:{btnType:"info"},on:{click:t.saveProperty}},[t._v("保存")]),a("myButton",{on:{click:t.cancelStatus}},[t._v("取消")])],1):t._e(),t.message.show?a("Notice",{attrs:{text:t.message.text,show:t.message.show,duration:t.message.duration,onClose:t.message.onClose},on:{close:t.close}}):t._e()],1)},h=[],f=(a("cadf"),a("551c"),a("097d"),{components:{Notice:n["a"]},data:function(){return{isEdit:!1,tableTitle:[{title:"本地属性",key:"localLabel",align:"center"},{title:"钉钉属性",key:"dingKey",align:"center"}],tableEditTitle:[{title:"本地属性",key:"localLabel",align:"center"},{title:"钉钉属性",key:"dingKey",align:"center",slot:"dingKey"}],showAutoSyn:{isAutoSync:1,autoSyncDate:"00:00:00",interval:0},formItem:{isAutoSync:1,autoSyncDate:"00:00:00",interval:0},ruleValidate:{},isAutoSyncList:[{value:0,label:"开启"},{value:1,label:"关闭"}],intervalList:[{value:0,label:"15分钟"},{value:1,label:"1小时"},{value:2,label:"6小时"},{value:3,label:"12小时"},{value:4,label:"24小时"}],selectKey:[],selectKeyList:["","userId","orgEmail","name","email","mobile","position","jobnumber"],localKeyList:[{label:"账号",value:"accountNumber"},{label:"姓名",value:"userName"},{label:"邮箱",value:"mail"},{label:"手机",value:"phoneNumber"},{label:"职位",value:"job"},{label:"工号",value:"jobNumber"}],localDingMapList:[],message:{text:"保存成功!",show:!1,duration:1,onClose:this.close}}},computed:{getIntervalTime:function(){return"undefined"!==typeof this.showAutoSyn.interval?this.intervalList[this.showAutoSyn.interval].label:0}},mounted:function(){this.getDingMapList()},methods:{editStatus:function(){this.getDingMapList(),this.isEdit=!0,this.$emit("statusChange",{isEdit:this.isEdit,name:"property"})},cancelStatus:function(){this.isEdit=!1,this.$emit("statusChange",{isEdit:this.isEdit,name:"property"})},getDingMapList:function(){var t=this,e={};this.axios({method:"post",data:e,url:"/cipher/dingConfig/getAttrConfig"}).then(function(e){t.localDingMapList=e.data.localDing,t.selectKey=[];for(var a=0;a<t.localDingMapList.length;a++)t.localDingMapList[a].localLabel=t.localKeyList[a].label,t.selectKey.push(t.localDingMapList[a].dingKey);null!==e.data.autoSync&&(t.showAutoSyn=JSON.parse(JSON.stringify(e.data.autoSync)),t.formItem=JSON.parse(JSON.stringify(e.data.autoSync)))}).catch(function(t){this.axios.error.handlingErrors(t)})},saveProperty:function(){for(var t=this,e=[],a=0;a<this.localKeyList.length;a++){var i={};i.localKey=this.localKeyList[a].value,i.dingKey=this.selectKey[a],e.push(i)}e=JSON.stringify(e),this.axios({method:"post",data:{localDingMapList:e,isAutoSync:this.formItem.isAutoSync,autoSyncDate:this.formItem.autoSyncDate,interval:this.formItem.interval},url:"/cipher/dingConfig/editAttrConfig"}).then(function(e){200===e.status?(t.toggle(),t.getDingMapList(),t.cancelStatus()):t.$myMessage.error("数据错误")}).catch(function(t){this.axios.error.handlingErrors(t)})},close:function(){this.message.show=!1},toggle:function(){this.message.show=!0}}}),g=f,v=(a("6ebf"),Object(u["a"])(g,p,h,!1,null,"31fd4fe5",null)),b=v.exports,y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"formed-wrap"},[t.isEdit?a("Form",{staticClass:"formed-form",attrs:{"label-width":130}},[a("div",{staticClass:"formed-form-part"},[a("h3",{staticClass:"formed-form-part-title"},[t._v("账号绑定和匹配")]),a("FormItem",{attrs:{label:"规则选择："}},[a("RadioGroup",{model:{value:t.selectAccountMatch,callback:function(e){t.selectAccountMatch=e},expression:"selectAccountMatch"}},t._l(t.accountMatchList,function(e){return a("Radio",{key:e.value,attrs:{label:e.value}},[a("span",{staticClass:"label"},[t._v(t._s(e.label)+"：")]),a("span",{staticClass:"tip"},[t._v(t._s(e.tip))])])}),1)],1)],1)]):a("div",{staticClass:"formed-form"},[a("div",{staticClass:"formed-form-part"},[a("h3",{staticClass:"formed-form-part-title"},[t._v("账号绑定和匹配")]),t.accountMatchList[t.accountMatchShow]?a("div",{staticClass:"formed-form-item"},[a("span",[t._v(t._s(t.accountMatchList[t.accountMatchShow].label)+":")]),a("span",[t._v(t._s(t.accountMatchList[t.accountMatchShow].tip))])]):t._e()])]),t.isEdit?a("div",{staticClass:"formed-footer"},[a("myButton",{attrs:{btnType:"info"},on:{click:t.saveAccountMatch}},[t._v("保存")]),a("myButton",{on:{click:t.cancelStatus}},[t._v("取消")])],1):t._e(),t.message.show?a("Notice",{attrs:{text:t.message.text,show:t.message.show,duration:t.message.duration,onClose:t.message.onClose},on:{close:t.close}}):t._e()],1)},I=[],w={components:{Notice:n["a"]},data:function(){return{isEdit:!1,accountMatchShow:"",selectAccountMatch:"",accountMatchList:[{label:"手机号",tip:"钉钉手机号与本地手机号相同时认为是同一用户。",value:0},{label:"邮箱",tip:"钉钉邮箱与本地邮箱相同时认为是同一用户。",value:1},{label:"手机号 and 邮箱",tip:"钉钉手机号、邮箱与本地手机号、邮箱都相同时认为是同一用户。",value:2},{label:"手机号 or 邮箱",tip:"钉钉手机号与本地手机号或钉钉邮箱与本地邮箱相同认为是同一用户。",value:3}],message:{text:"保存成功!",show:!1,duration:1,onClose:this.close}}},mounted:function(){this.getAccountMatch()},methods:{editStatus:function(){this.getAccountMatch(),this.isEdit=!0,this.$emit("statusChange",{isEdit:this.isEdit,name:"account"})},cancelStatus:function(){this.isEdit=!1,this.$emit("statusChange",{isEdit:this.isEdit,name:"account"})},getAccountMatch:function(){var t=this,e={};this.axios({method:"post",data:e,url:"/cipher/dingConfig/getMatchRule"}).then(function(e){200===e.status?(t.accountMatchShow=e.data.rule,t.selectAccountMatch=e.data.rule):t.$myMessage.error("数据错误")}).catch(function(t){this.axios.error.handlingErrors(t)})},saveAccountMatch:function(){var t=this,e={rule:this.selectAccountMatch};this.axios({method:"post",data:e,url:"/cipher/dingConfig/editMatchRule"}).then(function(e){200===e.status?(t.toggle(),t.getAccountMatch(),t.cancelStatus()):t.$myMessage.error("数据错误")}).catch(function(t){this.axios.error.handlingErrors(t)})},close:function(){this.message.show=!1},toggle:function(){this.message.show=!0}}},A=w,C=(a("f679"),Object(u["a"])(A,y,I,!1,null,"386ee942",null)),_=C.exports,x={components:{BaseSet:m,PropertySet:b,AccountMatch:_},data:function(){return{currentTab:"base",componentStatus:{isDingBaseEdit:!1,isDingPropertyEdit:!1,isDingAccountMatchEdit:!1}}},computed:{isShowEdit:function(){var t;switch(this.currentTab){case"base":t=!this.componentStatus.isDingBaseEdit;break;case"property":t=!this.componentStatus.isDingPropertyEdit;break;case"account":t=!this.componentStatus.isDingAccountMatchEdit;break}return t}},methods:{changeStatus:function(){this.$refs[this.currentTab].editStatus()},getChildStatus:function(t){"base"===t.name?this.componentStatus.isDingBaseEdit=t.isEdit:"property"===t.name?this.componentStatus.isDingPropertyEdit=t.isEdit:this.componentStatus.isDingAccountMatchEdit=t.isEdit}}},S=x,D=(a("26f5"),Object(u["a"])(S,i,s,!1,null,"71f97b66",null));e["default"]=D.exports},cb83:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"formed-wrap"},[a("div",{staticClass:"formed-header"},[a("div",{staticClass:"formed-header-title"},[t._v(t._s(t.strategyName))]),a("div",{staticClass:"formed-header-btn"},[a("myButton",{attrs:{btnType:"info"},on:{click:t.toedit}},[t._v("编辑")])],1)]),a("div",{staticClass:"formed-container"},[a("div",{staticClass:"formed-form"},[a("div",{staticClass:"formed-form-item"},[a("span",[t._v("策略名称：")]),a("span",[t._v(t._s(t.formItem.strategyName))])]),a("div",{staticClass:"formed-form-item"},[a("span",[t._v("优先级：")]),a("span",[t._v(t._s(t.formItem.priority))])]),a("div",{staticClass:"formed-form-item"},[a("span",[t._v("认证源：")]),a("span",[t._v(t._s(0===t.formItem.authType?"本地认证":1===t.formItem.authType?"AD域":"JLT_ERP"))])]),a("div",{staticClass:"formed-form-item"},[a("span",[t._v("二次认证：")]),a("span",[t._v(" "+t._s(t.secondAuthOption))])]),a("div",{staticClass:"formed-form-item"},[a("span",[t._v("二次认证模式：")]),a("span",[t._v(" "+t._s(0===t.formItem.switches?"并行":"串行"))])]),a("div",{staticClass:"formed-form-item"},[a("span",[t._v("生效范围：")]),a("span",[t.isDefaultStarategy?a("span",[t._v("全员")]):a("span",t._l(t.groupList,function(e,i){return a("a",{key:i,staticClass:"link",attrs:{name:e},on:{click:function(e){t.toGroupList(i)}}},[t._v("\n              "+t._s(e.parentPathName)+"\n              "),a("br")])}),0)])])])])])},s=[],o=a("be94"),r=a("2f62"),n={data:function(){return{isDefaultStarategy:!0,groupList:[],strategyName:"",id:"",secondAuthOption:"",formItem:{strategyName:"",priority:0,authType:0,secondAuth:0,switches:0,groupIds:"",id:0,scaveAuthState:1}}},computed:Object(o["a"])({},Object(r["c"])(["group"])),created:function(){this.id=this.$route.query.id,this.strategyName=this.$route.query.strategyName},mounted:function(){var t={id:this.id};this.finddata(t)},methods:Object(o["a"])({toGroupList:function(t){this.$router.push({path:"/userCatalogOS"}),this.changeGroup(this.groupList[t])}},Object(r["b"])(["changeGroup"]),{toedit:function(){this.$router.push({name:"strategyEdit",query:{id:this.id,strategyName:this.strategyName}})},finddata:function(t){var e=this,a=this;this.axios({method:"post",url:"/cipher/identityStrategy/updatePre",data:t}).then(function(t){if(0===t.data.code){0===t.data.identityObj.priority?a.isDefaultStarategy=!0:a.isDefaultStarategy=!1,a.groupList=t.data.groupList,a.formItem=t.data.identityObj;var e=[];if(0===a.formItem.secondAuth){var i=a.formItem.secondAuthType;0===i.twoAuthDt&&e.push("动态密码"),0===i.twoAuthDd&&e.push("钉钉扫码"),0===i.twoAuthDingPush&&e.push("钉钉PUSH认证"),0===i.twoAuthDb&&a.formItem.switches&&e.push("大白扫码"),0===i.twoAuthWx&&0===a.formItem.switches&&e.push("企业微信扫码"),0===i.twoAuthNum&&e.push("手机随机码"),0===i.twoAuthMail&&a.formItem.switches&&e.push("邮件随机码")}else a.secondAuthOption="关闭";e.length&&(a.secondAuthOption=e.join(","))}}).catch(function(t){e.$Notice.warning({title:"网络未知错误！",desc:t})})}})},l=n,c=(a("02b8"),a("2877")),u=Object(c["a"])(l,i,s,!1,null,"7ecadff8",null);e["default"]=u.exports},cbca:function(t,e,a){"use strict";var i=a("2113"),s=a.n(i);s.a},cc1a:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wfd tabled-wrap"},[a("div",{staticClass:"tabled-header"},[a("div",{staticClass:"tabled-header-search"},[a("myInput",{attrs:{placeholder:"设备名称",radius:"half",search:!0},on:{handleClick:t.getSearchList},model:{value:t.searchWord,callback:function(e){t.searchWord=e},expression:"searchWord"}})],1),a("div",{staticClass:"tabled-header-btn"},[a("myButton",{attrs:{btnType:"info"},on:{click:function(e){t.$router.push({path:"/netAccessServiceWNVD/WFDAdd"})}}},[t._v("添加免证设备")])],1)]),a("div",{staticClass:"tabled-table"},[a("Table",{attrs:{columns:t.title,data:t.list}})],1),a("div",{staticClass:"tabled-page"},[a("Page",{attrs:{total:t.total,"page-size":t.pageSize,current:t.current,"show-sizer":"","show-elevator":"","show-total":""},on:{"on-change":t.changePage,"on-page-size-change":t.changePageSize}})],1)])},s=[],o=(a("96cf"),a("1da1")),r={data:function(){var t=this;return{title:[{title:"名称",key:"name",align:"center"},{title:"用途",key:"application",align:"center"},{title:"MAC地址",key:"mac",align:"center"},{title:"IP地址",key:"ip",align:"center"},{title:"绑定时间",key:"createTime",align:"center"},{title:"操作",key:"option",align:"center",render:function(e,a){var i=a.row.ip?"下线":"";return e("div",[e("a",{on:{click:function(){t.offline(a.index)}}},i),e("a",{on:{click:function(){t.delete(a.index)}}},"删除")])}}],list:[],searchWord:"",total:0,pageSize:10,current:1,searchWord2:"",isDisabled:""}},created:function(){this.getAllList()},methods:{getAllList:function(){var t;t={name:"",page:this.current,rows:this.pageSize},this.getWEDList(t)},getSearchList:function(){var t;t={name:this.searchWord,page:1,rows:this.pageSize},this.getWEDList(t),this.current=1,this.searchWord2=this.searchWord},changePageSize:function(t){var e={name:this.searchWord2,rows:t,page:1};this.getWEDList(e),this.pageSize=t},changePage:function(t){var e={name:this.searchWord2,rows:this.pageSize,page:t};this.current=t,this.getWEDList(e)},getWEDList:function(t){var e=this;this.axios({method:"post",url:"/cipher/acl/list",data:t}).then(function(t){e.total=t.data.total,e.list=t.data.rows}).catch(function(t){e.$Notice.warning({title:"网络未知错误！",desc:t})})},deleteData:function(t){var e=this;this.axios({method:"post",url:"/cipher/acl/delete",data:{mac:t}}).then(function(t){if(0===t.data.return_code){e.$myMessage.success("删除成功!");var a=Math.ceil((e.total-1)/e.PageSize);e.current=a<e.current?a:e.current;var i={name:e.searchWord2,page:e.current,rows:e.pageSize};e.getWEDList(i)}else e.$myModal.error("删除失败")}).catch(function(t){e.$Notice.warning({title:"网络未知错误！",desc:t})})},delete:function(t){var e=this;this.$myModal.confirm({title:"确定删除吗？"}).then(function(){var a=Object(o["a"])(regeneratorRuntime.mark(function a(i){return regeneratorRuntime.wrap(function(a){while(1)switch(a.prev=a.next){case 0:e.deleteData(e.list[t].mac);case 1:case"end":return a.stop()}},a,this)}));return function(t){return a.apply(this,arguments)}}()).catch(function(){})},offline:function(t){var e=this;this.$myModal.confirm("确定下线吗？").then(function(){var a=Object(o["a"])(regeneratorRuntime.mark(function a(i){return regeneratorRuntime.wrap(function(a){while(1)switch(a.prev=a.next){case 0:e.handleSubmitOffline(t);case 1:case"end":return a.stop()}},a,this)}));return function(t){return a.apply(this,arguments)}}()).catch(function(){})},handleSubmitOffline:function(t){var e=this,a={name:this.list[t].name,ip:this.list[t].ip,mac:this.list[t].mac};this.axios({method:"post",url:"/cipher/acl/logout?json",data:a}).then(function(t){if(0===t.data.return_code){e.$myMessage.success("下线成功!");var a={name:e.searchWord2,page:e.current,rows:e.pageSize};e.getWEDList(a)}else e.$myModal.error("下线失败")}).catch(function(t){e.$Notice.warning({title:"网络未知错误！",desc:t})})}}},n=r,l=(a("9817"),a("2877")),c=Object(l["a"])(n,i,s,!1,null,"c44e4832",null);e["default"]=c.exports},cce6:function(t,e,a){"use strict";var i=a("baac"),s=a.n(i);s.a},d080:function(t,e,a){"use strict";var i=a("026e"),s=a.n(i);s.a},d148:function(t,e,a){},d180:function(t,e,a){"use strict";var i=a("b32e"),s=a.n(i);s.a},d181:function(t,e,a){"use strict";var i=a("b459"),s=a.n(i);s.a},d1be:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("transition",[a("router-view")],1)},s=[],o={},r=o,n=a("2877"),l=Object(n["a"])(r,i,s,!1,null,"028321a4",null);e["default"]=l.exports},d4c0:function(t,e,a){var i=a("0d58"),s=a("2621"),o=a("52a7");t.exports=function(t){var e=i(t),a=s.f;if(a){var r,n=a(t),l=o.f,c=0;while(n.length>c)l.call(t,r=n[c++])&&e.push(r)}return e}},d4c2:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"formed-wrap"},[a("div",{staticClass:"formed-header"},[a("div",{staticClass:"formed-header-title"},[t._v("添加免证设备")]),a("myButton",{staticClass:"formed-header-btn",on:{click:t.cancel}},[t._v("取消")])],1),a("div",{staticClass:"formed-container"},[a("Form",{ref:"formValidate",staticClass:"formed-form",attrs:{model:t.formItem,"label-width":100,rules:t.ruleValidate}},[a("FormItem",{attrs:{label:"设备名称：",prop:"name"}},[a("Input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入"},model:{value:t.formItem.name,callback:function(e){t.$set(t.formItem,"name","string"===typeof e?e.trim():e)},expression:"formItem.name"}})],1),a("FormItem",{attrs:{label:"用途：",prop:"use"}},[a("Input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入"},model:{value:t.formItem.use,callback:function(e){t.$set(t.formItem,"use","string"===typeof e?e.trim():e)},expression:"formItem.use"}})],1),a("FormItem",{attrs:{label:"MAC地址：",prop:"macAddress"}},[a("Input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入"},model:{value:t.formItem.macAddress,callback:function(e){t.$set(t.formItem,"macAddress","string"===typeof e?e.trim():e)},expression:"formItem.macAddress"}})],1)],1),a("div",{staticClass:"formed-footer"},[a("myButton",{attrs:{btnType:"info"},on:{click:function(e){t.handleSubmit("formValidate")}}},[t._v("保存")]),a("myButton",{on:{click:t.cancel}},[t._v("取消")])],1)],1)])},s=[],o=(a("a481"),a("8f5b")),r=a("5118"),n={name:"WFDAdd",data:function(){var t=function(t,e,a){var i=o["a"].macAddress;e=e.replace(/^\s+|\s+$/g,""),i.test(e)||a(new Error('mac格式:XX XX XX XX XX XX或者XXXX XXXX XXXX，中间请用 " . : - / 或者空格" 其中一种隔开')),a()};return{formItem:{name:"",use:"",macAddress:""},ruleValidate:{name:[{required:!0,message:"设备名不能为空",trigger:"blur"}],use:[{required:!0,message:"用途不能为空",trigger:"blur"}],macAddress:[{required:!0,message:"mac地址不能为空",trigger:"blur"},{validator:t,trigger:"blur"}]}}},methods:{cancel:function(){this.$router.push({path:"/netAccessServiceWNVD"})},handleSubmit:function(t){var e=this;this.$refs[t].validate(function(t){t?e.saveData():e.$myMessage.error("表单验证失败，请重试")})},saveData:function(){var t=this,e={name:this.formItem.name,mac:this.formItem.macAddress,application:this.formItem.use};this.axios({method:"post",url:"/cipher/acl/add",data:e}).then(function(e){1===e.data.return_code?(t.$myMessage.success(e.data.return_msg),Object(r["setTimeout"])(function(){t.$router.push("/netAccessServiceWNVD")},1e3)):t.$myMessage.error(e.data.return_msg)}).catch(function(e){t.$Notice.warning({title:"网络未知错误！",desc:e})})}}},l=n,c=(a("953c"),a("2877")),u=Object(c["a"])(l,i,s,!1,null,"36da6671",null);e["default"]=u.exports},d642:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ding-config wrap"},[t.isShowEdit?a("myButton",{staticClass:"ding-config-change__btn",attrs:{btnType:"info"},on:{click:t.changeStatus}},[t._v("编辑")]):t._e(),a("myComplexTabs",{attrs:{animated:!1},model:{value:t.currentTab,callback:function(e){t.currentTab=e},expression:"currentTab"}},[a("myPane",{attrs:{label:"基本配置",name:"base"}},[a("BaseSet",{ref:"base",on:{statusChange:t.getChildStatus}})],1),a("myPane",{attrs:{label:"属性同步配置",name:"property"}},[a("PropertySet",{ref:"property",on:{statusChange:t.getChildStatus}})],1),a("myPane",{attrs:{label:"账号匹配规则",name:"account"}},[a("AccountMatch",{ref:"account",on:{statusChange:t.getChildStatus}})],1)],1)],1)},s=[],o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"base formed-wrap"},[t.isEdit?a("div",{staticClass:"formed-form"},[a("div",{staticClass:"formed-form-part"},[a("h3",{staticClass:"formed-form-part-title"},[t._v("企业信息")]),a("div",{staticClass:"formed-form-item"},[a("span",[t._v("企业 ID：")]),a("span",[a("Input",{model:{value:t.corpId,callback:function(e){t.corpId=e},expression:"corpId"}})],1)])]),t._m(2),a("div",{staticClass:"formed-form-part"},[a("h3",{staticClass:"formed-form-part-title"},[t._v("应用信息")]),t._m(3),t._l(t.scanInfoDomainList,function(e,i){return a("div",{key:i,staticClass:"formed-form-item clearfix"},[a("span",{staticStyle:{float:"left"}},[t._v(t._s(e.applicationName)+"：")]),a("div",{staticClass:"formed-form-item-content"},[a("Input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入"},model:{value:e.scanAppId,callback:function(a){t.$set(e,"scanAppId",a)},expression:"item.scanAppId"}})],1),a("div",{staticClass:"formed-form-item-content"},[a("Input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入"},model:{value:e.scanAppSecret,callback:function(a){t.$set(e,"scanAppSecret",a)},expression:"item.scanAppSecret"}})],1),a("div",{staticClass:"formed-form-item-content"},[a("Input",{staticStyle:{width:"110px"},model:{value:e.callBackUrl,callback:function(a){t.$set(e,"callBackUrl",a)},expression:"item.callBackUrl"}}),a("span",{staticClass:"copy link",on:{click:function(a){t.copy(e.callBackUrl)}}},[t._v("复制")])],1)])})],2)]):a("div",{staticClass:"formed-form"},[a("div",{staticClass:"formed-form-part"},[a("h3",{staticClass:"formed-form-part-title"},[t._v("企业信息")]),a("div",{staticClass:"formed-form-item"},[a("span",[t._v("企业 ID：")]),a("span",[t._v(t._s(t.show.corpId))])])]),t._m(0),a("div",{staticClass:"formed-form-part"},[a("h3",{staticClass:"formed-form-part-title"},[t._v("应用信息")]),t._m(1),t._l(t.show.scanInfoDomainList,function(e,i){return a("div",{key:i,staticClass:"show-list formed-form-item clearfix"},[a("span",{staticStyle:{float:"left","line-height":"1"}},[t._v(t._s(e.applicationName)+"：")]),a("div",{staticClass:"formed-form-item-content"},[a("span",[t._v(t._s(e.scanAppId))])]),a("div",{staticClass:"formed-form-item-content"},[a("span",[t._v(t._s(e.scanAppSecret))])]),a("div",{staticClass:"formed-form-item-content"},[a("span",[t._v(t._s(e.callBackUrl))]),a("span",{staticClass:"copy link",on:{click:function(a){t.copy(e.callBackUrl)}}},[t._v("复制")])])])})],2)]),t.isEdit?a("div",{staticClass:"formed-footer"},[a("myButton",{attrs:{btnType:"info"},on:{click:t.saveBaseData}},[t._v("保存")]),a("myButton",{on:{click:t.cancelStatus}},[t._v("取消")])],1):t._e()])},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("hr",{staticStyle:{height:"1px",border:"none","border-top":"1px solid #555555","margin-bottom":"30px"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"formed-form-item formed-form-item-head clearfix"},[a("div",{staticClass:"formed-form-item-content"},[t._v("Agent Id")]),a("div",{staticClass:"formed-form-item-content"},[t._v("Secret")]),a("div",{staticClass:"formed-form-item-content"},[t._v("回调地址")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("hr",{staticStyle:{height:"1px",border:"none","border-top":"1px solid #555555","margin-bottom":"30px"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"formed-form-item formed-form-item-head clearfix"},[a("div",{staticClass:"formed-form-item-content"},[t._v("Agent Id")]),a("div",{staticClass:"formed-form-item-content"},[t._v("Secret")]),a("div",{staticClass:"formed-form-item-content"},[t._v("回调地址")])])}],n={data:function(){return{isEdit:!1,show:{},scanInfoDomainList:[],corpId:"",corpSecret:"",callbackUrl:""}},mounted:function(){this.getBaseData()},methods:{copy:function(t){var e=document.createElement("input");e.value=t,document.body.appendChild(e),e.select(),document.execCommand("Copy"),e.className="oInput",e.style.display="none"},editStatus:function(){this.getBaseData(),this.isEdit=!0,this.$emit("statusChange",{isEdit:this.isEdit,name:"base"})},cancelStatus:function(){this.isEdit=!1,this.$emit("statusChange",{isEdit:this.isEdit,name:"base"})},getBaseData:function(){var t=this,e={};this.axios({method:"post",data:e,url:"/cipher/wxConfig/getBaseConfig"}).then(function(e){t.show=e.data,t.scanInfoDomainList=e.data.scanInfoDomainList,t.corpId=e.data.corpId,t.callbackUrl=e.data.callbackUrl}).catch(function(t){this.axios.error.handlingErrors(t)})},saveBaseData:function(){var t=this,e={scanAppInfoList:JSON.stringify(this.scanInfoDomainList),corpId:this.corpId};this.axios({method:"post",data:e,url:"/cipher/wxConfig/baseConfig"}).then(function(e){t.$myMessage.success("保存成功!"),t.getBaseData(),t.cancelStatus()}).catch(function(t){this.axios.error.handlingErrors(t)})}}},l=n,c=(a("5f9a"),a("2877")),u=Object(c["a"])(l,o,r,!1,null,"3b203759",null),d=u.exports,m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"property formed-wrap"},[t.isEdit?t._e():a("div",{staticClass:"formed-form"},[a("div",{staticClass:"formed-form-part"},[a("div",{staticClass:"formed-form-part-title"},[t._v("属性映射")]),a("div",{staticClass:"formed-form-item"},[a("Table",{attrs:{columns:t.tableTitle,data:t.localDingMapList,width:"400"}})],1)]),a("div",{staticClass:"formed-form-part"},[a("div",{staticClass:"formed-form-part-title"},[t._v("自动同步")]),a("div",{staticClass:"formed-form-item"},[a("span",[t._v("自动同步：")]),a("span",[t._v(t._s(t.showAutoSyn.isAutoSync?"关闭":"开启"))])]),a("div",{staticClass:"formed-form-item"},[a("span",[t._v("同步开始时间：")]),a("span",[t._v(t._s(t.showAutoSyn.autoSyncDate))])]),a("div",{staticClass:"formed-form-item"},[a("span",[t._v("每隔：")]),a("span",[t._v(t._s(t.getIntervalTime)+" "),a("span",[t._v("同步一次")])])])])]),t.isEdit?a("Form",{ref:"formValidate",staticClass:"formed-form",attrs:{"label-width":120,model:t.formItem,rules:t.ruleValidate}},[a("div",{staticClass:"formed-form-part"},[a("div",{staticClass:"formed-form-part-title"},[t._v("属性映射")]),a("div",{staticClass:"formed-form-item"},[a("Table",{attrs:{columns:t.tableEditTitle,data:t.localDingMapList,width:"400"},scopedSlots:t._u([{key:"wxKey",fn:function(e){e.row;var i=e.index;return[a("Select",{staticStyle:{width:"120px"},attrs:{size:"large"},model:{value:t.selectKey[i],callback:function(e){t.$set(t.selectKey,i,e)},expression:"selectKey[index]"}},t._l(t.selectKeyList,function(e){return a("Option",{key:e,attrs:{value:e}},[t._v(t._s(e))])}),1)]}}])})],1)]),a("div",{staticClass:"formed-form-part"},[a("div",{staticClass:"formed-form-part-title"},[t._v("自动同步")]),a("FormItem",{attrs:{label:"自动同步：",prop:"isAutoSync"}},[a("RadioGroup",{model:{value:t.formItem.isAutoSync,callback:function(e){t.$set(t.formItem,"isAutoSync",e)},expression:"formItem.isAutoSync"}},t._l(t.isAutoSyncList,function(e){return a("Radio",{key:e.value,attrs:{label:e.value}},[t._v(t._s(e.label))])}),1)],1),a("FormItem",{attrs:{label:"同步开始时间：",prop:"autoSyncDate"}},[a("TimePicker",{staticStyle:{width:"280px"},attrs:{type:"time",placeholder:"请选择开始时间"},model:{value:t.formItem.autoSyncDate,callback:function(e){t.$set(t.formItem,"autoSyncDate",e)},expression:"formItem.autoSyncDate"}})],1),a("FormItem",{attrs:{label:"每隔：",prop:"interval"}},[a("Select",{staticStyle:{width:"225px"},model:{value:t.formItem.interval,callback:function(e){t.$set(t.formItem,"interval",e)},expression:"formItem.interval"}},t._l(t.intervalList,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}),1),a("span",{staticStyle:{"margin-left":"8px"}},[t._v("同步一次")])],1)],1)]):t._e(),t.isEdit?a("div",{staticClass:"formed-footer"},[a("myButton",{attrs:{btnType:"info"},on:{click:t.saveProperty}},[t._v("保存")]),a("myButton",{on:{click:t.cancelStatus}},[t._v("取消")])],1):t._e()],1)},p=[],h=(a("cadf"),a("551c"),a("097d"),{data:function(){return{isEdit:!1,tableTitle:[{title:"本地属性",key:"localLabel",align:"center"},{title:"企业微信属性",key:"wxKey",align:"center"}],tableEditTitle:[{title:"本地属性",key:"localLabel",align:"center"},{title:"企业微信属性",key:"wxKey",align:"center",slot:"wxKey"}],showAutoSyn:{isAutoSync:1,autoSyncDate:"00:00:00",interval:0},formItem:{isAutoSync:1,autoSyncDate:"00:00:00",interval:0},ruleValidate:{},isAutoSyncList:[{value:0,label:"开启"},{value:1,label:"关闭"}],intervalList:[{value:0,label:"15分钟"},{value:1,label:"1小时"},{value:2,label:"6小时"},{value:3,label:"12小时"},{value:4,label:"24小时"}],selectKey:[],selectKeyList:["","userId","orgEmail","name","email","mobile","position"],localKeyList:[{label:"账号",value:"accountNumber"},{label:"姓名",value:"userName"},{label:"邮箱",value:"mail"},{label:"手机",value:"phoneNumber"},{label:"职位",value:"job"}],localDingMapList:[]}},computed:{getIntervalTime:function(){return"undefined"!==typeof this.showAutoSyn.interval?this.intervalList[this.showAutoSyn.interval].label:0}},mounted:function(){this.getDingMapList()},methods:{editStatus:function(){this.getDingMapList(),this.isEdit=!0,this.$emit("statusChange",{isEdit:this.isEdit,name:"property"})},cancelStatus:function(){this.isEdit=!1,this.$emit("statusChange",{isEdit:this.isEdit,name:"property"})},getDingMapList:function(){var t=this,e={};this.axios({method:"post",data:e,url:"/cipher/wxConfig/getAttrConfig"}).then(function(e){t.localDingMapList=e.data.localWx,t.selectKey=[];for(var a=0;a<t.localDingMapList.length;a++)t.localDingMapList[a].localLabel=t.localKeyList[a].label,t.selectKey.push(t.localDingMapList[a].wxKey);null!==e.data.autoSync&&(t.showAutoSyn=JSON.parse(JSON.stringify(e.data.autoSyncInfo)),t.formItem=JSON.parse(JSON.stringify(e.data.autoSyncInfo)))}).catch(function(t){this.axios.error.handlingErrors(t)})},saveProperty:function(){for(var t=this,e=[],a=0;a<this.localKeyList.length;a++){var i={};i.localKey=this.localKeyList[a].value,i.wxKey=this.selectKey[a],e.push(i)}e=JSON.stringify(e),this.axios({method:"post",data:{localWxMapList:e,isAutoSync:this.formItem.isAutoSync,autoSyncDate:this.formItem.autoSyncDate,interval:this.formItem.interval},url:"/cipher/wxConfig/editAttrConfig"}).then(function(e){200===e.status?(t.$myMessage.success("保存成功!"),t.getDingMapList(),t.cancelStatus()):t.$myMessage.error("数据错误")}).catch(function(t){this.axios.error.handlingErrors(t)})}}}),f=h,g=(a("b219"),Object(c["a"])(f,m,p,!1,null,"762fdf94",null)),v=g.exports,b=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"formed-wrap"},[t.isEdit?a("Form",{staticClass:"formed-form",attrs:{"label-width":130}},[a("div",{staticClass:"formed-form-part"},[a("h3",{staticClass:"formed-form-part-title"},[t._v("账号绑定和匹配")]),a("FormItem",{attrs:{label:"规则选择："}},[a("RadioGroup",{model:{value:t.selectAccountMatch,callback:function(e){t.selectAccountMatch=e},expression:"selectAccountMatch"}},t._l(t.accountMatchList,function(e){return a("Radio",{key:e.value,attrs:{label:e.value}},[a("span",{staticClass:"label"},[t._v(t._s(e.label)+"：")]),a("span",{staticClass:"tip"},[t._v(t._s(e.tip))])])}),1)],1)],1)]):a("div",{staticClass:"formed-form"},[a("div",{staticClass:"formed-form-part"},[a("h3",{staticClass:"formed-form-part-title"},[t._v("账号绑定和匹配")]),t.accountMatchList[t.accountMatchShow]?a("div",{staticClass:"formed-form-item"},[a("span",[t._v(t._s(t.accountMatchList[t.accountMatchShow].label)+":")]),a("span",[t._v(t._s(t.accountMatchList[t.accountMatchShow].tip))])]):t._e()])]),t.isEdit?a("div",{staticClass:"formed-footer"},[a("myButton",{attrs:{btnType:"info"},on:{click:t.saveAccountMatch}},[t._v("保存")]),a("myButton",{on:{click:t.cancelStatus}},[t._v("取消")])],1):t._e()],1)},y=[],I={data:function(){return{isEdit:!1,accountMatchShow:"",selectAccountMatch:"",accountMatchList:[{label:"手机号",tip:"企业微信手机号与本地手机号相同时认为是同一用户。",value:0},{label:"邮箱",tip:"企业微信邮箱与本地邮箱相同时认为是同一用户。",value:1},{label:"手机号 and 邮箱",tip:"企业微信手机号、邮箱与本地手机号、邮箱都相同时认为是同一用户。",value:2},{label:"手机号 or 邮箱",tip:"企业微信手机号与本地手机号或微信邮箱与本地邮箱相同认为是同一用户。",value:3}]}},mounted:function(){this.getAccountMatch()},methods:{editStatus:function(){this.getAccountMatch(),this.isEdit=!0,this.$emit("statusChange",{isEdit:this.isEdit,name:"account"})},cancelStatus:function(){this.isEdit=!1,this.$emit("statusChange",{isEdit:this.isEdit,name:"account"})},getAccountMatch:function(){var t=this,e={};this.axios({method:"post",data:e,url:"/cipher/wxConfig/getMatchRule"}).then(function(e){200===e.status?(t.accountMatchShow=e.data.rule,t.selectAccountMatch=e.data.rule):t.$myMessage.error("数据错误")}).catch(function(t){this.axios.error.handlingErrors(t)})},saveAccountMatch:function(){var t=this,e={rule:this.selectAccountMatch};this.axios({method:"post",data:e,url:"/cipher/wxConfig/editMatchRule"}).then(function(e){200===e.status?(t.$myMessage.success("保存成功!"),t.getAccountMatch(),t.cancelStatus()):t.$myMessage.error("数据错误")}).catch(function(t){this.axios.error.handlingErrors(t)})}}},w=I,A=(a("d181"),Object(c["a"])(w,b,y,!1,null,"41d6b8ae",null)),C=A.exports,_={components:{BaseSet:d,PropertySet:v,AccountMatch:C},data:function(){return{currentTab:"base",componentStatus:{isDingBaseEdit:!1,isDingPropertyEdit:!1,isDingAccountMatchEdit:!1}}},computed:{isShowEdit:function(){var t;switch(this.currentTab){case"base":t=!this.componentStatus.isDingBaseEdit;break;case"property":t=!this.componentStatus.isDingPropertyEdit;break;case"account":t=!this.componentStatus.isDingAccountMatchEdit;break}return t}},methods:{changeStatus:function(){this.$refs[this.currentTab].editStatus()},getChildStatus:function(t){"base"===t.name?this.componentStatus.isDingBaseEdit=t.isEdit:"property"===t.name?this.componentStatus.isDingPropertyEdit=t.isEdit:this.componentStatus.isDingAccountMatchEdit=t.isEdit}}},x=_,S=(a("6039"),Object(c["a"])(x,i,s,!1,null,"3e62eee4",null));e["default"]=S.exports},d6e7:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"example"},[a("TreeTransfer",{attrs:{leftTreeData:t.data1,leftDataType:t.leftType2,placeholder:t.placeholder1},on:{rightData:t.getRightData1}},[a("span",{attrs:{slot:"leftText"},slot:"leftText"},[t._v("授权部门")]),a("span",{attrs:{slot:"rightText"},slot:"rightText"},[t._v("已授权部门")])]),a("TreeTransfer",{attrs:{leftTreeData:t.data,leftDataType:t.leftType1,placeholder:t.placeholder2},on:{rightData:t.getRightData2}},[a("span",{attrs:{slot:"leftText"},slot:"leftText"},[t._v("授权用户")]),a("span",{attrs:{slot:"rightText"},slot:"rightText"},[t._v("已授权用户")])]),a("TreeTransfer",{attrs:{leftTreeData:t.data3,leftDataType:t.leftType,placeholder:t.placeholder3},on:{rightData:t.getRightData3}},[a("span",{attrs:{slot:"leftText"},slot:"leftText"},[t._v("授权安全组")]),a("span",{attrs:{slot:"rightText"},slot:"rightText"},[t._v("已授权安全组")])]),a("TreeTransfer",{attrs:{leftTreeData:t.data4,leftDataType:t.leftType4,placeholder:t.placeholder1},on:{rightData:t.getRightData4}},[a("span",{attrs:{slot:"leftText"},slot:"leftText"},[t._v("授权部门")]),a("span",{attrs:{slot:"rightText"},slot:"rightText"},[t._v("已授权部门")])])],1)},s=[],o=(a("ac6a"),a("456d"),a("6b54"),a("53ca")),r=a("c791"),n={title:{target:"title",original:"text"},children:{target:"children",original:"nodes"}},l={data:function(){return{leftType:0,leftType1:0,leftType2:0,leftType4:0,rightData1:[],rightData2:[],rightData3:[],rightData4:[],data:[],data1:[],data3:[],data4:[],placeholder1:"请输入部门",placeholder2:"请输入用户",placeholder3:"请输入安全组"}},components:{TreeTransfer:r["a"]},mounted:function(){this.initData()},methods:{initData:function(){var t=this;this.leftType1=1;var e={applicationId:"141"};this.axios({method:"post",url:"/cipher/app/authorizationUser",data:e}).then(function(e){t.data=t.copyDeepTreeData(e.data.trees,n,!0),t.data=t.initSelect(t.data),t.data=t.data}).catch(function(){}),this.axios({method:"post",url:"/cipher/app/getAuthGroup",data:e}).then(function(e){t.data1=t.copyDeepTreeData(e.data.trees,n,!0),t.data1=t.initSelect(t.data1),t.data4=t.initSelect(t.data1),t.leftType2=2}).catch(function(){}),this.axios({method:"post",url:"/cipher/app/getAuthTeam",data:e}).then(function(e){t.data3=e.data.msg.list}).catch(function(){}),this.leftType=3,this.axios({method:"post",url:"/cipher/app/getAuthTeam",data:e}).then(function(e){t.data3=e.data.msg.list,t.placeholder="请输入安全组"}).catch(function(){}),this.leftType4=4},getRightData1:function(t){this.rightData1=t},getRightData2:function(t){this.rightData2=t},getRightData3:function(t){this.rightData3=t},getRightData4:function(t){this.rightData4=t},copyDeepTreeData:function(t,e){var a,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];switch(Object(o["a"])(t)){case"undefined":break;case"string":a=t+"";break;case"number":a=t-0;break;case"boolean":a=t;break;case"object":if(null===t)a="null";else if("Array"===Object.prototype.toString.call(t).slice(8,-1)){a=[];for(var s=0;s<t.length;s++)a.push(this.copyDeepTreeData(t[s],e,i))}else for(var r in a={},t){var n=Object.keys(e),l=!0;for(var c in n){var u=e[n[c]];if(t[r]&&r===u.original){u.target=u.target||u.original,a[u.target]=this.copyDeepTreeData(t[r],e,i),a[r]=this.copyDeepTreeData(t[r],e,i),l=!1;break}}i&&l&&(a[r]=this.copyDeepTreeData(t[r],e,i))}break;default:a=t;break}return a},initSelect:function(t){var e;switch(Object(o["a"])(t)){case"undefined":break;case"string":e=t+"";break;case"boolean":e=t;break;case"object":if(null===t)e="null";else if("Array"===Object.prototype.toString.call(t).slice(8,-1)){e=[];for(var a=0;a<t.length;a++)e.push(this.initSelect(t[a]))}else for(var i in e={},t)"null"!==t[i]&&null!=t[i]&&"state"===i&&(e["checked"]=this.initSelect(t[i].checked)),"accountNumber"===i&&(e["expand"]=!1),e[i]=this.initSelect(t[i]);break;default:e=t;break}return e}}},c=l,u=a("2877"),d=Object(u["a"])(c,i,s,!1,null,"6b540dd4",null);e["default"]=d.exports},d711:function(t,e,a){},d903:function(t,e,a){t.exports=a.p+"assets/img/Oauth2.png"},dab6:function(t,e,a){},dae8:function(t,e,a){},db62:function(t,e,a){},dc6a:function(t,e,a){"use strict";var i=a("5d5e"),s=a.n(i);s.a},e0cf:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"formed-wrap"},[a("div",{staticClass:"formed-header"},[a("div",{staticClass:"formed-header-title"},[t._v("配置活动目录")]),a("Button",{staticClass:"formed-header-btn",on:{click:t.cancel}},[t._v("取消")])],1),a("div",{staticClass:"formed-container"},[a("div",{staticClass:"formed-form"},[a("div",{staticClass:"formed-form-part-title"},[a("Steps",{attrs:{current:t.currentStep,direction:"vertical"}},[a("Step",{attrs:{title:"连接配置",content:"配置连接活动目录的方式和参数"}}),a("Step",{attrs:{title:"同步选项",content:"配置同步组织结构"}}),a("Step",{attrs:{title:"属性映射",content:"配置与AD的属性映射关系"}})],1)],1),0===t.currentStep?a("Form",{ref:"formdata",attrs:{model:t.formdata,rules:t.ruleValidate,"label-width":120}},[a("FormItem",{attrs:{label:"地址：",prop:"ip"}},[a("Input",{attrs:{placeholder:"",readonly:""},model:{value:t.formdata.ip,callback:function(e){t.$set(t.formdata,"ip",e)},expression:"formdata.ip"}})],1),a("FormItem",{attrs:{label:"端口：",prop:"port"}},[a("Input",{attrs:{placeholder:"",readonly:""},model:{value:t.formdata.port,callback:function(e){t.$set(t.formdata,"port",e)},expression:"formdata.port"}})],1),a("FormItem",{attrs:{label:"用户名：",prop:"userName"}},[a("Input",{attrs:{placeholder:"",readonly:""},model:{value:t.formdata.userName,callback:function(e){t.$set(t.formdata,"userName",e)},expression:"formdata.userName"}})],1),a("FormItem",{attrs:{label:"密码：",prop:"password"}},[a("Input",{attrs:{placeholder:"",type:"password",readonly:""},model:{value:t.formdata.password,callback:function(e){t.$set(t.formdata,"password",e)},expression:"formdata.password"}})],1)],1):t._e(),1===t.currentStep?a("Form",{ref:"formdata",attrs:{model:t.formdata,rules:t.ruleValidate,"label-width":120}},[a("FormItem",{attrs:{label:"组织结构："}},[a("RadioGroup",{on:{"on-change":t.radiaChange},model:{value:t.formdata.syncOu,callback:function(e){t.$set(t.formdata,"syncOu",e)},expression:"formdata.syncOu"}},[a("Radio",{attrs:{label:"1"}},[t._v("同步组织结构")]),a("Tooltip",{attrs:{content:"同步时会将AD组织结构与账号一并同步进来",placement:"bottom",theme:"light"}},[a("Icon",{staticClass:"iconInterVal",attrs:{type:"md-alert",size:"24",color:"rgba(24, 144, 255, 1)"}})],1),a("Radio",{attrs:{label:"2"}},[t._v("不同步组织结构")]),a("Tooltip",{attrs:{content:"同步时只将AD中的账号同步进来",placement:"bottom",theme:"light"}},[a("Icon",{staticClass:"iconInterVal",attrs:{type:"md-alert",size:"24",color:"rgba(24, 144, 255, 1)"}})],1)],1)],1),a("FormItem",{staticClass:"syncTarget",attrs:{label:"同步目标：",prop:"syncTarget"}},[a("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"请选择同步目标"},model:{value:t.formdata.syncTarget,callback:function(e){t.$set(t.formdata,"syncTarget",e)},expression:"formdata.syncTarget"}}),a("span",{staticClass:"link",on:{click:function(e){t.showOUModal()}}},[t._v("选择需要同步的OU")])],1),a("FormItem",{attrs:{label:"自动同步：",prop:"isAutoSync"}},[a("RadioGroup",{model:{value:t.formdata.isAutoSync,callback:function(e){t.$set(t.formdata,"isAutoSync",e)},expression:"formdata.isAutoSync"}},t._l(t.isAutoSyncList,function(e){return a("Radio",{key:e.value,attrs:{label:e.value}},[t._v(t._s(e.label))])}),1)],1),a("FormItem",{attrs:{label:"同步开始时间：",prop:"autoSyncDate"}},[a("TimePicker",{attrs:{type:"time",placeholder:"请选择开始时间"},model:{value:t.formdata.autoSyncDate,callback:function(e){t.$set(t.formdata,"autoSyncDate",e)},expression:"formdata.autoSyncDate"}})],1),a("FormItem",{attrs:{label:"每隔：",prop:"interval"}},[a("Select",{staticStyle:{width:"200px"},model:{value:t.formdata.interval,callback:function(e){t.$set(t.formdata,"interval",e)},expression:"formdata.interval"}},t._l(t.intervalList,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}),1)],1)],1):t._e(),2===t.currentStep?a("Form",{ref:"formdata",attrs:{model:t.formdata,rules:t.ruleValidate,"label-width":120}},[a("p",{staticStyle:{"font-size":"14px","font-weight":"bold","text-align":"left","margin-left":"50px"}},[t._v("本地属性       AD属性")]),a("FormItem",{attrs:{label:"账号："}},[a("div",{attrs:{id:"input3"}},[a("Input",{attrs:{readonly:""},model:{value:t.formdata.adMap2LocalDomainList[0].adKey,callback:function(e){t.$set(t.formdata.adMap2LocalDomainList[0],"adKey",e)},expression:"formdata.adMap2LocalDomainList[0].adKey"}})],1)]),a("FormItem",{attrs:{label:"姓名："}},[a("div",{attrs:{id:"input3"}},[a("Input",{attrs:{placeholder:"",readonly:""},model:{value:t.formdata.adMap2LocalDomainList[1].adKey,callback:function(e){t.$set(t.formdata.adMap2LocalDomainList[1],"adKey",e)},expression:"formdata.adMap2LocalDomainList[1].adKey"}})],1)]),a("FormItem",{attrs:{label:"邮箱："}},[a("div",{attrs:{id:"input3"}},[a("Input",{attrs:{placeholder:"",readonly:""},model:{value:t.formdata.adMap2LocalDomainList[2].adKey,callback:function(e){t.$set(t.formdata.adMap2LocalDomainList[2],"adKey",e)},expression:"formdata.adMap2LocalDomainList[2].adKey"}})],1)]),a("FormItem",{attrs:{label:"手机："}},[a("div",{attrs:{id:"input3"}},[a("Input",{attrs:{placeholder:"",readonly:""},model:{value:t.formdata.adMap2LocalDomainList[3].adKey,callback:function(e){t.$set(t.formdata.adMap2LocalDomainList[3],"adKey",e)},expression:"formdata.adMap2LocalDomainList[3].adKey"}})],1)]),a("FormItem",{attrs:{label:"职位："}},[a("div",{attrs:{id:"input3"}},[a("Input",{attrs:{placeholder:"",readonly:""},model:{value:t.formdata.adMap2LocalDomainList[4].adKey,callback:function(e){t.$set(t.formdata.adMap2LocalDomainList[4],"adKey",e)},expression:"formdata.adMap2LocalDomainList[4].adKey"}})],1)]),a("FormItem",{attrs:{label:"工号："}},[a("div",{attrs:{id:"input3"}},[a("Input",{attrs:{placeholder:"",readonly:""},model:{value:t.formdata.adMap2LocalDomainList[5].adKey,callback:function(e){t.$set(t.formdata.adMap2LocalDomainList[5],"adKey",e)},expression:"formdata.adMap2LocalDomainList[5].adKey"}})],1)]),a("FormItem",{attrs:{label:"性别："}},[a("div",{attrs:{id:"input3"}},[a("Input",{attrs:{placeholder:"",readonly:""},model:{value:t.formdata.adMap2LocalDomainList[6].adKey,callback:function(e){t.$set(t.formdata.adMap2LocalDomainList[6],"adKey",e)},expression:"formdata.adMap2LocalDomainList[6].adKey"}})],1)])],1):t._e()],1),a("div",{staticClass:"formed-footer"},[0!==t.currentStep?a("myButton",{on:{click:t.tolast}},[t._v("上一步")]):t._e(),2!==t.currentStep?a("myButton",{attrs:{btnType:"info"},on:{click:function(e){t.tonext("formdata")}}},[t._v("下一步")]):t._e(),0===t.currentStep?a("myButton",{on:{click:t.testConnect}},[t._v("测试连接")]):t._e(),2===t.currentStep?a("myButton",{attrs:{btnType:"info"},on:{click:function(e){t.tosave("formdata")}}},[t._v("保存")]):t._e(),a("myButton",{on:{click:t.cancel}},[t._v("取消")])],1)]),a("Modal",{on:{"on-cancel":t.OUCancel},model:{value:t.OUModal,callback:function(e){t.OUModal=e},expression:"OUModal"}},[a("p",{staticClass:"OUModalTitle",attrs:{slot:"header"},slot:"header"},[t._v("\n      选择需要同步的OU\n    ")]),a("div",{staticClass:"OUModal"},[a("p",{staticClass:"OUModalContentTitle"},[t._v("\n        选择OU\n      ")]),a("div",{staticClass:"OUModalContentBody"},[a("Input",{attrs:{search:"","enter-button":"",placeholder:"搜索应用"},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}}),a("div",{staticClass:"OUTree"},[0!==t.OUData.length?a("Tree",{ref:"OUTree",attrs:{data:t.OUData,"show-checkbox":""}}):t._e()],1)],1)]),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"primary"},on:{click:t.OUSave}},[t._v("保存")]),a("Button",{on:{click:t.OUReset}},[t._v("重置")])],1)])],1)},s=[],o=(a("c5f6"),a("cadf"),a("551c"),a("097d"),a("8a94")),r={data:function(){var t=function(t,e,a){var i=/^([a-zA-Z]|[a-zA-Z0-9_]|[a-zA-Z0-9_*])+@[a-zA-Z0-9]+\.([a-zA-Z]{2,4})$/;i.test(e)||a(new Error("请输入合法用户名:如name@domain.com")),a()};return{adId:0,currentStep:0,isAutoSyncList:[{value:0,label:"开启"},{value:1,label:"关闭"}],intervalList:[{value:0,label:"15分钟"},{value:1,label:"1小时"},{value:2,label:"6小时"},{value:3,label:"12小时"},{value:4,label:"24小时"}],syncTarget:[],syncOu:"1",formdata:{isAutoSync:1,syncTarget:"",autoSyncDate:"00:00:00",interval:0,adAutoSyncInfo:{},adMap2LocalDomainList:[{adKey:"userPrincipalName",localVal:"accountNumber"},{adKey:"givenName",localVal:"userName"},{adKey:"mail",localVal:"mail"},{adKey:"mobile",localVal:"phoneNumber"},{adKey:"title",localVal:"title"},{adKey:"ID",localVal:"ID"},{adKey:"sex",localVal:"sex"}],ip:"",password:"",port:389,userName:"",syncOu:"1"},ruleValidate:{ip:[{required:!0,message:"输入ip地址",trigger:"blur"}],port:[{required:!0,message:"输入端口号"}],userName:[{required:!0,trigger:"blur",validator:t}],password:[{required:!0,message:"输入密码",trigger:"blur"}],syncTarget:[{required:!0,message:"请选择同步目标",trigger:"blur"}]},keyword:"",OUModal:!1,OUData:[],OUDataBak:[],OUSDataBak:""}},created:function(){this.adId=this.$route.query.adId},watch:{keyword:function(t,e){o["a"].keyword(this)}},mounted:function(){var t=this,e={id:t.adId};t.finddata(e)},methods:{radiaChange:function(t){"1"===t&&(this.formdata.syncTarget=this.OUSDataBak),"2"===t&&(this.OUSDataBak=this.formdata.syncTarget,this.formdata.syncTarget="")},changeState:function(t){console.log(t),this.formdata.interval=t.value,console.log(this.formdata.interval)},finddata:function(t){var e=this;this.axios({method:"post",url:"/cipher/ldap/queryOne",data:t}).then(function(t){e.formdata=t.data,e.formdata.syncTarget=JSON.parse(t.data.ous).join("\r\n"),e.syncTarget=JSON.parse(t.data.ous),e.formdata.isAutoSync=t.data.adAutoSyncInfo.isAutoSync,e.formdata.autoSyncDate=t.data.adAutoSyncInfo.autoSyncDate,e.formdata.interval=t.data.adAutoSyncInfo.interval,1===t.data.syncOu?e.formdata.syncOu="1":2===t.data.syncOu&&(e.formdata.syncOu="2")}).catch(function(t){console.log(t)}),this.isReaderOnly=!0},cancel:function(){this.$router.push("/userCatalogAD")},tonext:function(t){this.currentStep++},tolast:function(){this.currentStep--},testConnect:function(){var t=this,e={ip:this.formdata.ip,port:this.formdata.port,userName:this.formdata.userName,password:this.formdata.password};this.axios({method:"post",url:"/cipher/ldap/testConnect",data:e}).then(function(e){1===e.data.return_code?t.$myMessage.success(e.data.return_msg):t.$Modal.error({title:"提示",content:e.data.return_msg})}).catch(function(t){console.log(t)})},tosave:function(){var t=this,e=this,a={id:e.adId,ip:this.formdata.ip,port:this.formdata.port,userName:this.formdata.userName,password:this.formdata.password,ous:JSON.stringify(this.syncTarget),syncOu:Number(this.formdata.syncOu),isAutoSync:this.formdata.isAutoSync,autoSyncDate:this.formdata.autoSyncDate,interval:this.formdata.interval,"adMap2LocalDomainList[0].localVal":this.formdata.adMap2LocalDomainList[0].localVal,"adMap2LocalDomainList[0].adKey":this.formdata.adMap2LocalDomainList[0].adKey,"adMap2LocalDomainList[1].localVal":this.formdata.adMap2LocalDomainList[1].localVal,"adMap2LocalDomainList[1].adKey":this.formdata.adMap2LocalDomainList[1].adKey,"adMap2LocalDomainList[2].localVal":this.formdata.adMap2LocalDomainList[2].localVal,"adMap2LocalDomainList[2].adKey":this.formdata.adMap2LocalDomainList[2].adKey,"adMap2LocalDomainList[3].localVal":this.formdata.adMap2LocalDomainList[3].localVal,"adMap2LocalDomainList[3].adKey":this.formdata.adMap2LocalDomainList[3].adKey,"adMap2LocalDomainList[4].localVal":this.formdata.adMap2LocalDomainList[4].localVal,"adMap2LocalDomainList[4].adKey":this.formdata.adMap2LocalDomainList[4].adKey,"adMap2LocalDomainList[5].localVal":this.formdata.adMap2LocalDomainList[5].localVal,"adMap2LocalDomainList[5].adKey":this.formdata.adMap2LocalDomainList[5].adKey,"adMap2LocalDomainList[6].localVal":this.formdata.adMap2LocalDomainList[6].localVal,"adMap2LocalDomainList[6].adKey":this.formdata.adMap2LocalDomainList[6].adKey};this.axios({method:"post",url:"/cipher/ldap/update",data:a}).then(function(e){1===e.data.return_code&&(t.cancel(),t.$myMessage.success(e.data.return_msg))}).catch(function(t){console.log(t)})},showOUModal:function(){o["a"].showOUModal(this)},OUSave:function(){o["a"].OUSave(this)},OUCancel:function(){o["a"].OUCancel(this)},OUReset:function(){o["a"].OUReset(this)}}},n=r,l=(a("7de3"),a("2877")),c=Object(l["a"])(n,i,s,!1,null,"6b269c84",null);e["default"]=c.exports},e2ef:function(t,e,a){},e5d6:function(t,e,a){"use strict";var i={status:!0,class:"open",type:"md-checkmark-circle"},s={status:!1,class:"close",type:"md-remove-circle"};e["a"]={openIcon:i,closeIcon:s}},e5e8:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-detail wrap"},[a("div",{staticClass:"formed-header"},[a("div",{staticClass:"formed-header-title"},[t._v(t._s(t.appInfoData.applicationName))])]),t.isShowEdit?a("myButton",{staticClass:"app-detail-change__btn",attrs:{btnType:"info"},on:{click:t.changeStatus}},[t._v("编辑")]):t._e(),t.isGetData?a("myComplexTabs",{model:{value:t.appDetail,callback:function(e){t.appDetail=e},expression:"appDetail"}},[a("myPane",{attrs:{label:"基本信息",name:"base"}},[t.isGetData?a("AppBase",{ref:"base",attrs:{appInfoData:t.appInfoData},on:{getData:t.getDataAgain,statusChange:t.getChildStatus}}):t._e()],1),t.isShowSynConfig?a("myPane",{attrs:{label:"应用同步配置",name:"synConfig"}},[t.isGetData?a("AppSynConfig",{ref:"synConfig",attrs:{appData:t.appData},on:{getData:t.getDataAgain,statusChange:t.getChildStatus}}):t._e()],1):t._e(),a("myPane",{attrs:{label:"子账号管理",name:"subAccount"}},[t.isGetData?a("AppSubAccount",{ref:"subAccount",attrs:{appInfoData:t.appInfoData}}):t._e()],1)],1):t._e()],1)},s=[],o=(a("f751"),a("be94")),r=a("2f62"),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"formed-wrap"},[t.isEdit?a("div",{staticClass:"formed-form app-form clearfix"},[a("div",{staticClass:"choose-img"},[a("img",{staticClass:"default-img",attrs:{src:t.appInform.applicationIconUrl}}),a("div",{staticClass:"choose-img__text"},[a("div",{staticClass:"link",on:{click:t.showChooseIconList}},[t._v("系统图标")]),a("Upload",{ref:"upload",staticClass:"uploadClass",attrs:{"show-upload-list":!1,"on-success":t.handleSuccess,format:["jpg","jpeg","png"],"max-size":2048,"on-format-error":t.handleFormatError,"on-exceeded-size":t.handleMaxSize,type:"drag",action:"/cipher/app/imgUpload"}},[a("div",{staticClass:"link"},[t._v("本地上传")])])],1)]),a("div",{staticClass:"left",staticStyle:{width:"100%"}},[a("Form",{ref:"formValidate",staticClass:"left",attrs:{"label-width":225,model:t.appEditInform,rules:t.ruleValidate}},t._l(t.showAppList,function(e){return a("div",{key:e.name},["configInfo"===e.name?t._l(t.getConfigInfoList,function(e){return a("FormItem",{key:e.name,attrs:{label:e.label,prop:"configInfo."+e.name}},[a("Input",{attrs:{placeholder:"请输入"+e.label.substr(0,e.label.length-1)},model:{value:t.appEditInform.configInfo[e.name],callback:function(a){t.$set(t.appEditInform.configInfo,e.name,"string"===typeof a?a.trim():a)},expression:"appEditInform.configInfo[v.name]"}})],1)}):"applicationAuth"===e.name?a("FormItem",{attrs:{label:e.label,prop:e.name}},[t._v("\n            "+t._s(t.appInform[e.name])+"\n          ")]):"applicationDescription"===e.name?a("FormItem",{attrs:{label:e.label,prop:e.name}},[a("Input",{attrs:{disabled:!e.isEdit,placeholder:"请输入"+e.label.substr(0,e.label.length-1),maxlength:24},model:{value:t.appEditInform[e.name],callback:function(a){t.$set(t.appEditInform,e.name,"string"===typeof a?a.trim():a)},expression:"appEditInform[item.name]"}})],1):"input"===e.formType?a("FormItem",{attrs:{label:e.label,prop:e.name}},[a("Input",{attrs:{disabled:!e.isEdit,placeholder:"请输入"+e.label.substr(0,e.label.length-1)},model:{value:t.appEditInform[e.name],callback:function(a){t.$set(t.appEditInform,e.name,"string"===typeof a?a.trim():a)},expression:"appEditInform[item.name]"}})],1):"a"===e.formType?[a("div",{staticClass:"formed-form-item"},[a("span",[a("a",{staticStyle:{"font-size":"15px"},attrs:{href:t.metadataUrl}},[t._v(" 下载元数据")])])])]:"radio"===e.formType?a("FormItem",{attrs:{label:e.label,prop:e.name}},[a("RadioGroup",{model:{value:t.appEditInform[e.name],callback:function(a){t.$set(t.appEditInform,e.name,a)},expression:"appEditInform[item.name]"}},t._l(t.getRadioList(e),function(e){return a("Radio",{key:e.label,attrs:{label:e.value}},[a("span",[t._v(t._s(e.label))])])}),1)],1):t._e()],2)}),0)],1)]):a("div",{staticClass:"formed-form app-form clearfix"},[a("div",{staticClass:"choose-img"},[a("img",{attrs:{src:t.appInform.applicationIconUrl}})]),a("div",{staticClass:"left"},t._l(t.showAppList,function(e){return a("div",{key:e.name,staticClass:"formed-form-item"},["configInfo"===e.name?t._l(t.getConfigInfoList,function(e){return a("div",{key:e.name,staticClass:"formed-form-item"},[a("span",[t._v(t._s(e.label))]),a("span",[t._v(t._s(t.appInform.configInfo[e.name]))])])}):"a"===e.formType?[a("div",{staticClass:"formed-form-item"},[a("span",[a("a",{staticStyle:{"font-size":"15px"},attrs:{href:t.metadataUrl}},[t._v(" 下载元数据")])])])]:a("div",{staticClass:"formed-form-item"},[a("span",[t._v(t._s(e.label))]),"input"===e.formType?a("span",[t._v(t._s(t.appInform[e.name]))]):"applicationStatus"===e.name?a("span",[t._v("\n            "+t._s(t.appInform[e.name].status?"已启用":"已停用")+"\n            "),a("Icon",{class:t.appInform[e.name].class,attrs:{type:t.appInform[e.name].type}})],1):a("span",[t._v(t._s(t.getRadioLabel(e)))])])],2)}),0)]),t.isEdit?a("div",{staticClass:"formed-footer"},[a("myButton",{attrs:{btnType:"info"},on:{click:function(e){t.saveEdit("formValidate")}}},[t._v("保存")]),a("myButton",{on:{click:t.cancel}},[t._v("取消")])],1):t._e(),a("Modal",{attrs:{width:"700px"},model:{value:t.iconModal,callback:function(e){t.iconModal=e},expression:"iconModal"}},[a("p",{staticClass:"modalHeadr",attrs:{slot:"header"},slot:"header"},[a("Icon",{attrs:{type:"ios-add"}}),a("span",[t._v("选择图片")])],1),a("p",{staticClass:"addApplication"},[a("Row",{attrs:{gutter:16,align:"top"}},t._l(t.imageList,function(e,i){return a("div",{key:i,staticClass:"imgList",on:{click:function(e){t.chooseIcon(i)}}},[a("Col",{staticStyle:{height:"210px"},attrs:{span:"6"}},[a("div",[a("img",{staticClass:"app-col-class",attrs:{src:e.imageUrl,size:"30"}}),e.choose?a("Icon",{staticClass:"iconClass",attrs:{type:"md-checkmark",size:"30"}}):t._e()],1)])],1)}),0)],1),a("p",{staticClass:"footerDemo",attrs:{slot:"footer"},slot:"footer"},[a("myButton",{attrs:{btnType:"info"},on:{click:t.confirmIcon}},[t._v("确定")]),a("myButton",{staticStyle:{"margin-left":"8px","vertical-align":"top"},on:{click:function(e){t.iconModal=!1}}},[t._v("取消")])],1)])],1)},l=[],c=(a("6762"),a("2fdb"),a("ac4d"),a("8a81"),a("ac6a"),a("cadf"),a("551c"),a("097d"),[{value:1,label:"安全代理"},{value:2,label:"密码代填"},{value:3,label:"API接口"},{value:4,label:"API接口"},{value:5,label:"未定"},{value:6,label:"非SSO应用"},{value:7,label:"CAS应用"},{value:8,label:"C/S应用"},{value:9,label:"C/S应用"},{value:10,label:"saml应用"},{value:11,label:"oauth应用"}]),u=[{value:"可用",label:"启用"},{value:"禁用",label:"停用"}],d=[{label:"手动配置",value:"assManual"},{label:"账号",value:"assPrimaryAccount"},{label:"邮箱",value:"assEmail"},{label:"邮箱前缀",value:"assEmailPrefix"},{label:"手机号",value:"assTelephone"},{label:"工号",value:"assWorkers"}],m=[{label:"手动配置",value:"assPwdManual"},{label:"门户登录密码",value:"assPwdPrimaryAccount"}],p=[{appSysId:1,label:"企业邮箱域名:",name:"domain"},{appSysId:1,label:"企业标识（由网易提供）:",name:"product"},{appSysId:1,label:"私钥:",name:"secret"},{appSysId:2,label:"secretKey（由每刻管理员提供）:",name:"secretKey"},{appSysId:2,label:"entCode（企业代码）:",name:"entCode"},{appSysId:5,label:"CorpID（腾讯企业邮箱企业ID）:",name:"cropId"},{appSysId:5,label:"CorpSecret（应用的凭证密钥）:",name:"cropSecret"},{appSysId:5,label:"DeptMngId(腾讯部门秘钥) :",name:"deptMngId"},{appSysId:6,label:"WPS_API_PRE:",name:"apiId"},{appSysId:6,label:"SESSION_API_PRE:",name:"sessionId"},{appSysId:6,label:"WPS_APPID:",name:"appId"},{appSysId:6,label:"WPS_SECRET_KEY:",name:"secretKey"},{appSysId:6,label:"WPS_ACCESS_ID:",name:"accessId"}],h=[{value:"1",label:"NClient客户端"}];function f(t,e){var a=[{name:"applicationName",label:"应用名称:",show:!0,formType:"input",isEdit:!0,index:0},{name:"applicationDescription",label:"应用描述:",show:!0,formType:"input",isEdit:!0,index:1},{name:"applicationAuth",label:"认证方式:",show:!0,formType:"input",isEdit:!0,index:2},{name:"applicationStatus",label:"应用状态:",show:!0,formType:"radio",radioList:"applicationStatusList",isEdit:!0,index:3},{name:"applicationIndex",label:"应用序号:",show:!0,formType:"input",isEdit:!0,index:4},{name:"applicationId",label:"APP-ID:",show:!0,formType:"input",isEdit:!0,index:5},{name:"applicationSecrect",label:"APP-KEY:",show:!0,formType:"input",isEdit:!0,index:6},{name:"applicationUrl",label:"应用地址:",show:!1,formType:"input",isEdit:!0,index:7},{name:"casServerUrl",label:"CAS服务器地址:",show:!1,formType:"input",isEdit:!0,index:8},{name:"subAccountConfig",label:"从账号:",show:!0,formType:"radio",radioList:"subAccountConfigList",isEdit:!0,index:9},{name:"subAccountPwdConfig",label:"从账号密码:",show:!0,formType:"radio",radioList:"subAccountPwdConfigList",isEdit:!0,index:10},{name:"applicationUrl",label:"启动路径:",show:!1,formType:"input",isEdit:!0,index:11},{name:"server",label:"服务器地址:",show:!1,formType:"input",isEdit:!0,index:12},{name:"data",label:"账套名称:",show:!1,formType:"input",isEdit:!0,index:13},{name:"pos",label:"账套序号:",show:!1,formType:"input",isEdit:!0,index:14},{name:"loginType",label:"登陆方式:",show:!1,formType:"radio",radioList:"loginTypeList",isEdit:!0,index:15},{name:"configInfo",label:"无",show:!1,formType:"input",isEdit:!0,index:16},{name:"xdsgUrl",label:"DSG网关地址:",show:!0,formType:"input",isEdit:!0,index:17},{name:"applicationUrl",label:"应用登录地址:",show:!1,formType:"input",isEdit:!0,index:18},{name:"relayState",label:"relayState地址:",show:!1,formType:"input",isEdit:!0,index:19},{name:"assertionConsumerServiceUrl",label:"AssertionConsumerServiceUrl地址",show:!1,formType:"input",isEdit:!0,index:20},{name:"exitTime",label:"断言有效期:",show:!1,formType:"input",isEdit:!0,index:21},{name:"entityId",label:"idp的EntityeId:",show:!1,formType:"input",isEdit:!0,index:22},{name:"downloadXml",label:"下载元数据:",show:!1,formType:"a",isEdit:!1,index:23}];switch(t){case 6:a[7].show=!0;break;case 7:a[7].show=!0,a[8].show=!0,a[10].show=!1;break;case 8:a[11].show=!0,a[12].show=!0,a[13].show=!0,a[14].show=!0,a[17].isEdit=!1;break;case 9:a[10].show=!1,a[12].show=!0,a[13].show=!0,a[15].show=!1,a[17].isEdit=!1,a[12].label="应用地址：";break;case 10:a[10].show=!1,a[15].show=!1,a[17].show=!1,a[18].show=!0,a[19].show=!0,a[20].show=!0,a[21].show=!0,a[22].show=!0,a[23].show=!0;break;case 11:a[10].show=!1,a[7].show=!0,a[7].label="重定向地址:",a[17].show=!1;break}return 1!==e&&2!==e&&5!==e&&6!==e||(a[16].show=!0),a.filter(function(t){return!0===t.show})}var g={applicationAuthList:c,applicationStatusList:u,subAccountConfigList:d,subAccountPwdConfigList:m,configInfoList:p,loginTypeList:h,getShowAppList:f},v=a("e5d6"),b={props:["appInfoData"],data:function(){return{metadataUrl:"",appData:{},showAppList:[],isEdit:!1,appInform:{},appEditInform:{},chooseIconIndex:null,imageList:[],uploadList:[],iconModal:!1,appSysIdList:[1,2,5,6]}},computed:Object(o["a"])({},Object(r["c"])(["appId"]),{getConfigInfoList:function(){var t=this;return g.configInfoList.filter(function(e){return e.appSysId===t.appInform.appSysId})},getRadioList:function(){return function(t){return g[t.radioList]}},getRadioLabel:function(){return function(t){var e,a=g[t.radioList];if("subAccountConfig"!==t.name&&"subAccountPwdConfig"!==t.name){var i=this.appInform[t.name]-1;e=a[i].label}else{var s=!0,o=!1,r=void 0;try{for(var n,l=a[Symbol.iterator]();!(s=(n=l.next()).done);s=!0){var c=n.value;0===this.appInform.associatedAccount[c.value]&&(e=c.label)}}catch(u){o=!0,r=u}finally{try{s||null==l.return||l.return()}finally{if(o)throw r}}}return e}},ruleValidate:function(){var t={applicationName:[{required:!0,message:"请输入应用名称",trigger:"blur"}],applicationUrl:[{required:!0,message:"请输入应用地址",trigger:"blur"}]},e=!0,a=!1,i=void 0;try{for(var s,o=g.configInfoList[Symbol.iterator]();!(e=(s=o.next()).done);e=!0){var r=s.value;r.appSysId===this.appData.appSysId&&(t["configInfo."+r.name]=[{required:!0,message:"请输入"+r.label,trigger:"blur"}])}}catch(n){a=!0,i=n}finally{try{e||null==o.return||o.return()}finally{if(a)throw i}}return t}}),mounted:function(){this.appData=this.$props.appInfoData,this.init()},methods:{init:function(){var t=this.appData;this.metadataUrl="/cipher/saml/metadata?appId="+t.id,this.showAppList=g.getShowAppList(t.applicationType,t.appSysId),this.appInform=Object.assign({},t),this.appInform.applicationAuth=g.applicationAuthList[this.appInform.applicationType-1].label,this.appInform.applicationStatus="可用"===t.applicationStatus?v["a"].openIcon:v["a"].closeIcon,this.appSysIdList.includes(t.appSysId)&&(this.appInform.configInfo=JSON.parse(t.configInfo)||[]),this.appEditInform=Object.assign({},t),this.appSysIdList.includes(t.appSysId)&&(this.appEditInform.configInfo=JSON.parse(t.configInfo)||[]);var e=!0,a=!1,i=void 0;try{for(var s,o=g.subAccountConfigList[Symbol.iterator]();!(e=(s=o.next()).done);e=!0){var r=s.value;0===this.appInform.associatedAccount[r.value]&&(this.appEditInform.subAccountConfig=r.value)}}catch(p){a=!0,i=p}finally{try{e||null==o.return||o.return()}finally{if(a)throw i}}var n=!0,l=!1,c=void 0;try{for(var u,d=g.subAccountPwdConfigList[Symbol.iterator]();!(n=(u=d.next()).done);n=!0){var m=u.value;0===this.appInform.associatedAccount[m.value]&&(this.appEditInform.subAccountPwdConfig=m.value)}}catch(p){l=!0,c=p}finally{try{n||null==d.return||d.return()}finally{if(l)throw c}}t.applicationIconUrl||(this.appEditInform.applicationIconUrl=this.appInform.applicationIconUrl="/static/img/img-01.png")},editStatus:function(){this.isEdit=!0,this.$emit("statusChange",{isEdit:this.isEdit,name:"base"})},cancel:function(){this.isEdit=!1,this.$emit("statusChange",{isEdit:this.isEdit,name:"base"})},saveEdit:function(t){var e=this;this.$refs[t].validate(function(t){if(t){for(var a in e.appEditInform.associatedAccount)e.appEditInform.associatedAccount[a]=1;e.appEditInform.associatedAccount[e.appEditInform.subAccountConfig]=0,e.appEditInform.associatedAccount[e.appEditInform.subAccountPwdConfig]=0;var i={id:e.appId,applicationName:e.appEditInform.applicationName,applicationIconUrl:"/assets/img/img-01.png"===e.appEditInform.applicationIconUrl?"":e.appEditInform.applicationIconUrl,applicationStatus:e.appEditInform.applicationStatus,applicationIndex:e.appEditInform.applicationIndex,applicationUrl:e.appEditInform.applicationUrl||"",casServerUrl:e.appEditInform.casServerUrl,server:e.appEditInform.server||"",data:e.appEditInform.data||"",pos:parseInt(e.appEditInform.pos)||0,loginType:e.appEditInform.loginType,xdsgUrl:e.appEditInform.xdsgUrl,assManual:e.appEditInform.associatedAccount.assManual,assPrimaryAccount:e.appEditInform.associatedAccount.assPrimaryAccount,assEmail:e.appEditInform.associatedAccount.assEmail,assEmailPrefix:e.appEditInform.associatedAccount.assEmailPrefix,assTelephone:e.appEditInform.associatedAccount.assTelephone,assWorkers:e.appEditInform.associatedAccount.assWorkers,assPwdManual:e.appEditInform.associatedAccount.assPwdManual,assPwdPrimaryAccount:e.appEditInform.associatedAccount.assPwdPrimaryAccount,relayState:e.appEditInform.relayState,assertionConsumerServiceUrl:e.appEditInform.assertionConsumerServiceUrl,exitTime:e.appEditInform.exitTime,entityId:e.appEditInform.entityId,applicationDescription:e.appEditInform.applicationDescription};e.appSysIdList.includes(e.appData.appSysId)&&(i.configInfo=JSON.stringify(e.appEditInform.configInfo)),console.log(i),e.changeAppInform(i)}})},changeAppInform:function(t){var e=this;this.axios({method:"post",url:"/cipher/app/change?json",data:t}).then(function(t){0===t.data.code?(e.$myMessage.success("保存成功"),e.cancel(),e.$emit("getData")):e.$myModal.error({title:"错误",content:t.data.msg})}).catch(function(t){e.$Notice.warning({title:"网络未知错误！",desc:t})})},showChooseIconList:function(){var t=this;this.axios({method:"post",data:{},url:"/cipher/app/add"}).then(function(e){t.imageList=e.data.imageList,t.iconModal=!0}).catch(function(t){console.log(t)})},chooseIcon:function(t){Array.isArray(this.imageList)&&(this.imageList.forEach(function(e,a){e.choose=a===t}),this.$forceUpdate(),this.chooseIconIndex=t)},confirmIcon:function(){this.appInform.applicationIconUrl=this.imageList[this.chooseIconIndex].imageUrl,this.appEditInform.applicationIconUrl=this.appInform.applicationIconUrl,this.iconModal=!1},handleSuccess:function(t,e){0===t.status?(this.appInform.applicationIconUrl=t.imgName,this.appEditInform.applicationIconUrl=this.appInform.applicationIconUrl,this.$myModal.success({title:"上传成功",content:"图片上传成功"})):this.$myModal.error({title:"上传失败",content:"图片上传失败"})},handleFormatError:function(t){this.$Notice.warning({title:"请选择一张图片！",desc:"文件不正确！ "+t.name+" 该文件不是一个图片"})},handleMaxSize:function(t){this.$Notice.warning({title:"大小超过2M",desc:"该文件  "+t.name+"太大，不能超过2M"})}}},y=b,I=(a("02c1"),a("2877")),w=Object(I["a"])(y,n,l,!1,null,"156fb07b",null),A=w.exports,C=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"formed-wrap"},[t.isEdit?a("Form",{ref:"formValidate",staticClass:"formed-form",attrs:{"label-width":120,model:t.formItem,rules:t.ruleValidate}},[a("div",{staticClass:"formed-form-part"},[a("div",{staticClass:"formed-form-part-title"},[t._v("应用同步")]),a("div",{staticClass:"formed-form-item"},[a("Table",{attrs:{columns:t.tableEditTitle,data:t.tableData,width:"400"},scopedSlots:t._u([{key:"localKey",fn:function(e){var i=e.row,s=e.index;return["*应用账号"===i.syncKey?a("Select",{staticStyle:{width:"120px"},attrs:{size:"large",disabled:t.isSubConfig},model:{value:t.select[0],callback:function(e){t.$set(t.select,0,e)},expression:"select[0]"}},t._l(t.localAccountOptions,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}),1):"性别"===i.syncKey?a("Select",{staticStyle:{width:"120px"},attrs:{size:"large"},model:{value:t.select[s],callback:function(e){t.$set(t.select,s,e)},expression:"select[index]"}},t._l(t.localGenderOptions,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}),1):a("Select",{staticStyle:{width:"120px"},attrs:{size:"large"},model:{value:t.select[s],callback:function(e){t.$set(t.select,s,e)},expression:"select[index]"}},t._l(t.localCommonOptions,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}),1)]}}])})],1)]),a("div",{staticClass:"formed-form-part"},[a("div",{staticClass:"formed-form-part-title"},[t._v("密码设置")]),a("FormItem",{attrs:{label:"设置应用初始密码：",prop:"initPwd"}},[a("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输出初始密码",clearable:"",type:t.type},model:{value:t.ruleInfo.initPwd,callback:function(e){t.$set(t.ruleInfo,"initPwd",e)},expression:"ruleInfo.initPwd"}}),a("span",{staticClass:"link",staticStyle:{"margin-left":"8px"},on:{click:t.changePwdType}},[t._v(t._s(t.showPassword?"不显示":"显示"))])],1)],1),a("div",{staticClass:"formed-form-part"},[a("div",{staticClass:"formed-form-part-title"},[t._v("自动同步")]),a("FormItem",{attrs:{label:"自动同步：",prop:"isAutoSync"}},[a("RadioGroup",{model:{value:t.formItem.isAutoSync,callback:function(e){t.$set(t.formItem,"isAutoSync",e)},expression:"formItem.isAutoSync"}},t._l(t.isAutoSyncList,function(e){return a("Radio",{key:e.value,attrs:{label:e.value}},[t._v(t._s(e.label))])}),1)],1),a("FormItem",{attrs:{label:"同步开始时间：",prop:"autoSyncDate"}},[a("TimePicker",{staticStyle:{width:"200px"},attrs:{type:"time",placeholder:"请选择开始时间"},model:{value:t.formItem.autoSyncDate,callback:function(e){t.$set(t.formItem,"autoSyncDate",e)},expression:"formItem.autoSyncDate"}})],1),a("FormItem",{attrs:{label:"每隔：",prop:"interval"}},[a("Select",{staticStyle:{width:"200px"},model:{value:t.formItem.interval,callback:function(e){t.$set(t.formItem,"interval",e)},expression:"formItem.interval"}},t._l(t.intervalList,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}),1),a("span",{staticStyle:{"margin-left":"8px"}},[t._v("同步一次")])],1)],1)]):t._e(),t.isEdit?a("div",{staticClass:"formed-footer"},[a("myButton",{attrs:{btnType:"info"},on:{click:function(e){t.saveEdit("formValidate")}}},[t._v("保存")]),a("myButton",{on:{click:t.cancel}},[t._v("取消")])],1):a("div",{staticClass:"formed-form"},[a("div",{staticClass:"formed-form-part"},[a("div",{staticClass:"formed-form-part-title"},[t._v("应用同步")]),a("div",{staticClass:"formed-form-item"},[a("Table",{attrs:{columns:t.tableTitle,data:t.tableData,width:"400"}})],1)]),a("div",{staticClass:"formed-form-part"},[a("div",{staticClass:"formed-form-part-title"},[t._v("自动同步")]),a("div",{staticClass:"formed-form-item"},[a("span",[t._v("自动同步：")]),a("span",[t._v(t._s(t.showAutoSyn.isAutoSync?"关闭":"开启"))])]),a("div",{staticClass:"formed-form-item"},[a("span",[t._v("同步开始时间：")]),a("span",[t._v(t._s(t.showAutoSyn.autoSyncDate))])]),a("div",{staticClass:"formed-form-item"},[a("span",[t._v("每隔：")]),a("span",[t._v(t._s(t.getIntervalTime)+" "),a("span",[t._v("同步一次")])])])])])],1)},_=[],x=(a("20d6"),{name:"SynAppConfig",props:["appData"],data:function(){return{appDada:{},tableTitle:[{title:"本地属性",key:"localKey",align:"center"},{title:"同步属性",key:"syncKey",align:"center"}],tableEditTitle:[{title:"本地属性",key:"localKey",align:"center",slot:"localKey"},{title:"同步属性",key:"syncKey",align:"center"}],showPassword:!1,type:"password",isSubConfig:!1,select:[],isEdit:!1,appSysId:"",ruleInfo:{accountType:"",ruleValue:[],initPwd:""},showData:[],showAutoSyn:{isAutoSync:1,autoSyncDate:"00:00:00",interval:0},formItem:{isAutoSync:1,autoSyncDate:"00:00:00",interval:0},ruleValidate:{autoSyncDate:[{required:!0,message:"请输入自动同步开始时间",trigger:"blur"}]},localGenderOptions:[{value:"genderStr",label:"性别"}],localAccountOptions:[{value:"1",label:"赛赋身份平台账号"},{value:"2",label:"邮箱"},{value:"3",label:"邮箱前缀"},{value:"4",label:"手机号"},{value:"5",label:"工号"}],localCommonOptions:[{value:"accountNumber",label:"主账号"},{value:"userName",label:"姓名"},{value:"nickName",label:"昵称"},{value:"groupName",label:"部门"},{value:"mail",label:"邮箱"},{value:"job",label:"职位"},{value:"phoneNumber",label:"手机"},{value:"jobNo",label:"工号"},{value:"genderStr",label:"性别"}],isAutoSyncList:[{value:0,label:"开启"},{value:1,label:"关闭"}],intervalList:[{value:0,label:"15分钟"},{value:1,label:"1小时"},{value:2,label:"6小时"},{value:3,label:"12小时"},{value:4,label:"24小时"}]}},computed:Object(o["a"])({},Object(r["c"])(["appId"]),{tableData:function(){for(var t=[],e=0;e<this.getSynAttribute.length;e++){var a=this.showData[e],i=this.getSynAttribute[e];t.push({localKey:a,syncKey:i})}return t},tabledEditData:function(){for(var t=[],e=0;e<this.getSynAttribute.length;e++){var a=this.getSynAttribute[e];t.push({syncKey:a})}return t},getSynAttribute:function(){var t=[];switch(this.appSysId){case 1:t=["*应用账号","*姓名","手机","工号","性别"];break;case 2:t=["*应用账号","*姓名","*邮箱","*手机号","部门"];break;case 5:t=["*应用账号","*姓名","职位","手机","编号","性别"];break;case 6:t=["*应用账号","昵称","邮箱","手机号","性别"];break;case 7:t=["*应用账号","*昵称","*手机号","性别"];break;default:break}return t},getIntervalTime:function(){return"undefined"!==typeof this.showAutoSyn.interval?this.intervalList[this.showAutoSyn.interval].label:0}}),mounted:function(){this.appData=this.$props.appData,this.init()},methods:{init:function(){var t=this,e=this.appData;this.appSysId=e.app.appSysId,1===e.app.associatedAccount.assManual&&(this.isSubConfig=!0),null===e.app.accountType&&""===e.app.accountType||(this.select=[],this.showData=[],this.select.push(e.app.accountType),this.ruleInfo.accountType=e.app.accountType,this.showData.push(this.localAccountOptions[this.ruleInfo.accountType-1].label));var a=JSON.parse(e.ruleInfo.ruleValue)||[];a.forEach(function(e,a){t.select.push(e.localValue);var i=t.localCommonOptions.findIndex(function(t){return t.value===e.localValue}),s=-1!==i?t.localCommonOptions[i].label:"";t.showData.push(s)}),this.ruleInfo.initPwd=e.ruleInfo.initPwd||"",null!==e.app.autoSync&&(this.showAutoSyn=JSON.parse(JSON.stringify(e.app.autoSync)),this.formItem=JSON.parse(JSON.stringify(e.app.autoSync)))},validate1:function(){return""===this.select[0]||null===this.select[0]||""===this.select[1]||null===this.select[1]?(this.$Modal.error({title:"必填项未选择",content:"姓名未选择"}),!1):null!==this.ruleInfo.initPwd&&""!==this.ruleInfo.initPwd||(this.$Modal.error({title:"初始密码为空",content:"初始密码不能为空"}),!1)},validate3:function(){return null!==this.ruleInfo.initPwd&&""!==this.ruleInfo.initPwd||(this.$Modal.error({title:"初始密码为空",content:"初始密码不能为空"}),!1)},validate2:function(){return""!==this.select[0]&&null!==this.select[0]&&""!==this.select[1]&&null!==this.select[1]&&""!==this.select[2]&&null!==this.select[2]&&""!==this.select[3]&&null!==this.select[3]||(this.$Modal.error({title:"必填项未选择",content:"请选择必填项"}),!1)},validate4:function(){return""===this.select[0]||null===this.select[0]||""===this.select[1]||null===this.select[1]?(this.$Modal.error({title:"必填项未选择",content:"姓名未选择"}),!1):""===this.select[2]||null===this.select[2]?(this.$Modal.error({title:"必填项未选择",content:"手机未选择"}),!1):null!==this.ruleInfo.initPwd&&""!==this.ruleInfo.initPwd||(this.$Modal.error({title:"初始密码为空",content:"初始密码不能为空"}),!1)},saveEdit:function(t){var e=this;this.$refs[t].validate(function(t){if(t){var a;if(1===e.appSysId){if(!e.validate1())return;a={applicationId:e.appId,"subSynLocalDomainList[0].subKey":"nickname","subSynLocalDomainList[0].localValue":e.select[1],"subSynLocalDomainList[1].subKey":"mobile","subSynLocalDomainList[1].localValue":e.select[2],"subSynLocalDomainList[2].subKey":"job_no","subSynLocalDomainList[2].localValue":e.select[3],"subSynLocalDomainList[3].subKey":"genderStr","subSynLocalDomainList[3].localValue":e.select[4],initPwd:e.ruleInfo.initPwd}}else if(2===e.appSysId){if(!e.validate2())return;a={applicationId:e.appId,"subSynLocalDomainList[0].subKey":"name","subSynLocalDomainList[0].localValue":e.select[1],"subSynLocalDomainList[1].subKey":"email","subSynLocalDomainList[1].localValue":e.select[2],"subSynLocalDomainList[2].subKey":"mobile","subSynLocalDomainList[2].localValue":e.select[3],"subSynLocalDomainList[3].subKey":"department","subSynLocalDomainList[3].localValue":e.select[4],initPwd:e.ruleInfo.initPwd}}else if(5===e.appSysId){if(!e.validate1())return;a={applicationId:e.appId,"subSynLocalDomainList[0].subKey":"name","subSynLocalDomainList[0].localValue":e.select[1],"subSynLocalDomainList[1].subKey":"position","subSynLocalDomainList[1].localValue":e.select[2],"subSynLocalDomainList[2].subKey":"mobile","subSynLocalDomainList[2].localValue":e.select[3],"subSynLocalDomainList[3].subKey":"extid","subSynLocalDomainList[3].localValue":e.select[4],"subSynLocalDomainList[4].subKey":"genderStr","subSynLocalDomainList[4].localValue":e.select[5],initPwd:e.ruleInfo.initPwd}}else if(6===e.appSysId){if(!e.validate3())return;a={applicationId:e.appId,"subSynLocalDomainList[0].subKey":"nick_name","subSynLocalDomainList[0].localValue":e.select[1],"subSynLocalDomainList[1].subKey":"email","subSynLocalDomainList[1].localValue":e.select[2],"subSynLocalDomainList[2].subKey":"phone_number","subSynLocalDomainList[2].localValue":e.select[3],"subSynLocalDomainList[3].subKey":"sex","subSynLocalDomainList[3].localValue":e.select[4],initPwd:e.ruleInfo.initPwd}}else if(7===e.appSysId){if(!e.validate4())return;a={applicationId:e.appId,"subSynLocalDomainList[0].subKey":"profileName","subSynLocalDomainList[0].localValue":e.select[1],"subSynLocalDomainList[1].subKey":"mobile","subSynLocalDomainList[1].localValue":e.select[2],initPwd:e.ruleInfo.initPwd}}e.axios({method:"post",url:"/cipher/app/change",data:{id:e.appId,applicationName:e.appData.app.applicationName,accountType:e.select[0],isAutoSync:e.formItem.isAutoSync,autoSyncDate:e.formItem.autoSyncDate,interval:e.formItem.interval}}).then(function(t){0===t.data.code?e.saveSynRule(a):e.$Modal.error({title:"错误",content:t.data.msg})}).catch(function(t){e.$Notice.warning({title:"网络未知错误",desc:t})})}})},saveSynRule:function(t){var e=this;this.axios({method:"post",url:"/cipher/app/ruleAdd",data:t}).then(function(t){1===t.data.return_code?(e.$Modal.success({title:"成功",content:t.data.return_msg}),e.cancel(),e.$emit("getData")):e.$Modal.error({title:"错误",content:t.data.return_msg})}).catch(function(t){e.$Notice.warning({title:"网络未知错误",desc:t})})},changePwdType:function(){this.showPassword=!this.showPassword,this.type="password"===this.type?"text":"password"},cancel:function(){this.isEdit=!1,this.$emit("statusChange",{isEdit:this.isEdit,name:"synConfig"})},editStatus:function(){this.isEdit=!0,this.$emit("statusChange",{isEdit:this.isEdit,name:"synConfig"})}}}),S=x,D=(a("ea25"),Object(I["a"])(S,C,_,!1,null,"15422074",null)),k=D.exports,T=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tabled-wrap"},[a("div",{staticClass:"tabled-header"},[a("div",{staticClass:"tabled-header-search"},[a("myInput",{attrs:{placeholder:"请输入姓名 / 账号",radius:"half",search:!0},on:{handleClick:t.searchApplicatioName},model:{value:t.searchAppInput,callback:function(e){t.searchAppInput=e},expression:"searchAppInput"}})],1),a("div",{staticClass:"tabled-header-right"},[a("myButton",{on:{click:function(e){t.authrization()}}},[t._v("授权")]),t.isShowSyn?[a("myButton",{on:{click:t.synSelectSubAccount}},[t._v("同步")]),a("mySelect",{attrs:{dataList:t.statusList,showString:"选择"},on:{"on-change":t.changeSynStatus},model:{value:t.synStatus,callback:function(e){t.synStatus=e},expression:"synStatus"}})]:t._e(),a("Dropdown",{attrs:{trigger:"click"}},[a("myDropBtn",[t._v("更多操作")]),a("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[t.isShowSyn?a("DropdownItem",{nativeOn:{click:function(e){return t.synAllNumber(e)}}},[t._v("全部同步")]):t._e(),a("DropdownItem",[a("Upload",{ref:"upload",staticClass:"uploadClass",attrs:{"show-upload-list":!1,"on-success":t.handleSuccess,"on-error":t.handleError,format:["xls","xlsx","docx"],"on-format-error":t.handleFormatError,"before-upload":t.handleBeforeUpload,type:"drag",data:{applicationId:t.appId},action:"/cipher/subaccount/upload"}},[t._v("导入应用从账号")])],1),a("DropdownItem",[a("p",{on:{click:t.sampleDownload}},[t._v("下载导入样表")])])],1)],1)],2)]),a("div",{staticClass:"tabled-table"},[a("Table",{ref:"selection",attrs:{data:t.tableData,border:"",columns:t.getTableColumns},on:{"on-selection-change":function(e){t.handleSelectRow()}},scopedSlots:t._u([{key:"sonAccountNumber",fn:function(e){var i=e.row;return[null===i.sonAccountNumber?a("div",[t._v("未下发或配置从账号")]):a("div",[t._v(t._s(i.sonAccountNumber))])]}}])})],1),a("Page",{staticClass:"tabled-page",attrs:{total:t.total,current:t.currentPage,"show-elevator":"","show-sizer":"","show-total":""},on:{"on-change":t.changePage,"on-page-size-change":t.pageSizeChange}}),a("Modal",{staticClass:"modal",attrs:{title:"demo"},on:{"on-ok":function(e){t.confimSubConfig()}},model:{value:t.showSubConfigModal,callback:function(e){t.showSubConfigModal=e},expression:"showSubConfigModal"}},[a("p",{attrs:{slot:"header"},slot:"header"},[a("span",[t._v("配置从账号")]),a("span",{staticClass:"sub-title"},[t._v(t._s(t.info.userName)+"("+t._s(t.info.accountNumber)+")")])]),a("div",{staticClass:"addApplication"},[a("Form",{ref:"formValidate",attrs:{model:t.formValidate,"label-width":100}},[a("Row",[a("Col",{staticClass:"fromInput",attrs:{span:"24"}},[a("FormItem",{staticClass:"appInputDemo",attrs:{label:"从账号："}},[t.isSubConfig?a("Input",{staticClass:"inputdemo",staticStyle:{width:"200px"},model:{value:t.formValidate.sonAccountNumber,callback:function(e){t.$set(t.formValidate,"sonAccountNumber","string"===typeof e?e.trim():e)},expression:"formValidate.sonAccountNumber"}}):a("Input",{staticClass:"inputdemo",staticStyle:{width:"200px"},attrs:{readonly:""},model:{value:t.formValidate.sonAccountNumber,callback:function(e){t.$set(t.formValidate,"sonAccountNumber","string"===typeof e?e.trim():e)},expression:"formValidate.sonAccountNumber"}})],1),7!==t.applicationType?a("FormItem",{staticClass:"appInputDemo",attrs:{label:"从账号密码："}},[t.isSubPwdConfig?a("Input",{staticClass:"inputdemo",staticStyle:{width:"200px"},attrs:{type:"password"},model:{value:t.formValidate.password,callback:function(e){t.$set(t.formValidate,"password","string"===typeof e?e.trim():e)},expression:"formValidate.password"}}):a("Input",{staticClass:"inputdemo",staticStyle:{width:"200px"},attrs:{type:"password",readonly:""},model:{value:t.formValidate.password,callback:function(e){t.$set(t.formValidate,"password","string"===typeof e?e.trim():e)},expression:"formValidate.password"}})],1):t._e()],1)],1)],1)],1)]),a("Modal",{staticClass:"tree-transfer",attrs:{width:"668"},on:{"on-cancel":t.closeAuthModal},model:{value:t.showAuthMadal,callback:function(e){t.showAuthMadal=e},expression:"showAuthMadal"}},[a("myComplexTabs",{staticClass:"tabs",on:{"on-click":t.changetabs},model:{value:t.authType,callback:function(e){t.authType=e},expression:"authType"}},[a("myPane",{attrs:{label:"用户",name:"authUserTab"}},[a("TreeTransfer",{attrs:{leftTreeData:t.authUserData,leftDataType:t.dataType,placeholder:"请输入用户或部门"},on:{rightData:t.getRightData}},[a("span",{attrs:{slot:"leftText"},slot:"leftText"},[t._v("授权用户")]),a("span",{attrs:{slot:"rightText"},slot:"rightText"},[t._v("已授权用户")])])],1),a("myPane",{attrs:{label:"部门",name:"authGroupTab"}},[a("TreeTransfer",{attrs:{leftTreeData:t.authGroupData,leftDataType:t.dataType,placeholder:"请输入部门"},on:{rightData:t.getRightData}},[a("span",{attrs:{slot:"leftText"},slot:"leftText"},[t._v("授权部门")]),a("span",{attrs:{slot:"rightText"},slot:"rightText"},[t._v("已授权部门")])])],1),a("myPane",{attrs:{label:"安全组",name:"authTeamTab"}},[a("TreeTransfer",{attrs:{leftTreeData:t.authTeamData,leftDataType:t.dataType,placeholder:"请输入安全组"},on:{rightData:t.getRightData}},[a("span",{attrs:{slot:"leftText"},slot:"leftText"},[t._v("授权安全组")]),a("span",{attrs:{slot:"rightText"},slot:"rightText"},[t._v("已授权安全组")])])],1)],1),a("div",{staticClass:"textAlain",attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"info"},on:{click:t.saveAuth}},[t._v("保存")]),a("Button",{on:{click:t.resetAuth}},[t._v("重置")])],1)],1),a("Modal",{staticClass:"synModal",attrs:{"footer-hide":!0,width:"360"},model:{value:t.showSynModal,callback:function(e){t.showSynModal=e},expression:"showSynModal"}},[a("div",{staticClass:"header"},[a("Icon",{attrs:{type:"ios-help-circle"}}),a("span",[t._v("是否同步")])],1),a("div",{staticClass:"center"},[a("span",{staticClass:"simpleModalContent"},[t._v("将同步"+t._s(t.length)+"\n        条账号数据，点击「确定」继续操作。")]),a("span",[t._v(" 你还要继续吗？")])]),a("div",{staticClass:"footer"},[a("Button",{attrs:{type:"primary"},on:{click:t.cofirmSynModal}},[t._v("确定")]),a("Button",{on:{click:function(e){t.showSynModal=!1}}},[t._v("取消")])],1)]),t._l(t.uploadList,function(e,i){return a("div",{key:i},[e.showProgress?a("FixedCircle",{attrs:{percent:e.percentage,"hide-info":""}}):t._e()],1)})],2)},L=[],M=(a("96cf"),a("1da1")),N=a("c791"),E={title:{target:"title",original:"text"},children:{target:"children",original:"nodes"}},O={name:"User",components:{TreeTransfer:N["a"]},props:["appInfoData"],data:function(){var t=this;return{appData:{},applicationType:"",appSysId:"",isSubConfig:!0,isSubPwdConfig:!0,synStatus:"0",showAuthMadal:!1,authType:"authUserTab",authUserData:[],authGroupData:[],authTeamData:[],dataType:0,secret:"",info:{accountNumber:"",userName:"",uuid:""},uploadData:{},accountNumber:"",uuids:"",showSubConfigModal:!1,accountNumbers:"",showSynModal:!1,statusList:[{value:0,label:"全部"},{value:1,label:"已同步"},{value:2,label:"未同步"}],isDownsubAccount:!1,appClientId:"",length:"",selection:[],formValidate:{sonAccountNumber:"",password:""},uploadList:[],size:10,total:1,tableData:[],searchAppInput:"",currentPage:1,tableColumns:[{type:"selection",width:60,align:"center"},{title:"姓名",key:"userName",width:240,align:"center",render:function(e,a){return e("a",{on:{click:function(){t.toUserDetail(a.index)}}},"".concat(a.row.userName,"(").concat(a.row.accountNumber,")"))}},{title:"子账号",slot:"sonAccountNumber",align:"center"},{title:"授权路径",key:"pathInfo",align:"center",render:function(e,a){var i=a.row.pathInfo,s="个人授权",o=null===a.row.pathInfo;if(null!==i){var r=null!==i.groupList,n=i.groupList;s=r?n.parentPathName.substring(0,n.parentPathName.length-1):i.teamList.teamName}return e("a",{class:{normal:o},on:{click:function(){t.skipAuthPath(i)}}},s)}},{title:"最近同步时间",key:"isSyschronTime",align:"center",render:function(t,e){var a=e.row.isSyschronTime||"未同步";return t("div",a)}},{title:"操作",key:"edit",width:180,align:"center",render:function(e,a){var i=null===a.row.pathInfo;return e("div",[e("a",{on:{click:function(){t.configSonAccount(a.row.accountNumber,a.row.userName,a.row.uuid)}}},"配置从账号"),e("a",{class:{disabled:!i},on:{click:function(){i&&t.cancelAuth(a.row.accountNumber,a.row.uuid)}}},"取消授权")])}}]}},computed:Object(o["a"])({},Object(r["c"])(["appId"]),{isShowSyn:function(){var t=[1,2,5,6,7];return t.includes(this.appSysId)},getTableColumns:function(){var t=this.tableColumns;return this.isShowSyn||(t=this.tableColumns.filter(function(t,e){return 4!==e})),t}}),mounted:function(){this.appData=this.$props.appInfoData,this.init(),this.uploadList=this.$refs.upload.fileList},methods:Object(o["a"])({},Object(r["b"])(["changeGroup"]),{skipAuthPath:function(t){null!==t.groupList?this.toGroupList(t.groupList):this.toTeamDetail(t.teamList)},toGroupList:function(t){this.$router.push({path:"/userCatalogOS"}),this.changeGroup(t)},toTeamDetail:function(t){this.$router.push({path:"/userCatalogSGM/detail",query:{teamId:t.id,teamName:t.teamName,dsgTeamId:t.dsgTeamId}})},authrization:function(){this.showAuthMadal=!0,this.authType="authUserTab",this.dataType=1,this.changeAuthUser()},getRightData:function(t){this.AuthData=t},closeAuthModal:function(){this.showAuthMadal=!1,this.dataType=0,this.currentPage=1,this.getUserList()},saveAuth:function(){switch(this.authType){case"authUserTab":this.authUser();break;case"authGroupTab":this.authGroup();break;case"authTeamTab":this.authTeam();break;default:break}},authUser:function(){for(var t=this,e=[],a=[],i=0;i<this.AuthData.length;i++)e.push(this.AuthData[i].accountNumber),a.push(this.AuthData[i].uuid);var s=e.join(",");a=a.join(",");var o={applicationId:this.appId,accountNumber:s,uuid:a};this.axios({method:"post",url:"/cipher/appAuth/addUser",data:o}).then(function(e){0===e.data.code?t.$myModal.success({title:"授权成功",content:"授权用户成功"}).then(function(){t.changeAuthUser()}):t.$myModal.error({title:"授权失败",content:"请稍后重试"})}).catch(function(){})},authGroup:function(){for(var t=this,e=[],a=0;a<this.AuthData.length;a++)e.push(this.AuthData[a].groupId);var i=e.join(","),s={applicationId:this.appId,groupId:i};this.axios({method:"post",url:"/cipher/appAuth/addGroup",data:s}).then(function(e){0===e.data.code?t.$myModal.success({title:"授权成功",content:"授权部门成功"}).then(function(){t.changeAuthGroup()}):t.$myModal.error({title:"授权失败",content:"请稍后重试"})}).catch(function(){})},authTeam:function(){for(var t=this,e=[],a=0;a<this.AuthData.length;a++)e.push(this.AuthData[a].id);var i=e.join(","),s={applicationId:this.appId,teamId:i};this.axios({method:"post",url:"/cipher/appAuth/addTeam",data:s}).then(function(e){0===e.data.code?t.$myModal.success({title:"授权成功",content:"授权安全组成功"}).then(function(){t.changeAuthTeam()}):t.$myModal.error({title:"授权失败",content:"请稍后重试"})}).catch(function(){})},changeAuthUser:function(){var t=this;this.dataType=1;var e={applicationId:this.appId};this.axios({method:"post",url:"/cipher/app/authorizationUser",data:e}).then(function(e){var a=t.$common.cloneAssemblyAssignData(e.data.trees,E,!0);t.authUserData=t.$common.initSelect(a)}).catch(function(){})},changeAuthGroup:function(){var t=this;this.dataType=4;var e={applicationId:this.appId};this.axios({method:"post",url:"/cipher/app/getAuthGroup",data:e}).then(function(e){var a=t.$common.cloneAssemblyAssignData(e.data.trees,E,!0);t.authGroupData=t.$common.initSelect(a)}).catch(function(){})},changeAuthTeam:function(){var t=this;this.dataType=3;var e={applicationId:this.appId};this.axios({method:"post",url:"/cipher/app/getAuthTeam",data:e}).then(function(e){t.authTeamData=e.data.msg.list}).catch(function(){})},changetabs:function(t){"authUserTab"===t?this.changeAuthUser():"authGroupTab"===t?this.changeAuthGroup():"authTeamTab"===t&&this.changeAuthTeam()},resetAuth:function(){switch(this.dataType=0,this.authType){case"authUserTab":this.changeAuthUser();break;case"authGroupTab":this.changeAuthGroup();break;case"authTeamTab":this.changeAuthTeam();break;default:break}},confimSubConfig:function(){var t=this;if(null===this.formValidate.sonAccountNumber||""===this.formValidate.sonAccountNumber)this.$myModal.error({title:"错误",content:"从账号不能为空！"});else if(null!==this.formValidate.password&&""!==this.formValidate.password||!this.isSubPwdConfig||7===this.applicationType){this.showSubConfigModal=!1;var e={appClientId:this.appClientId,accountNumber:this.info.accountNumber,uuid:this.info.uuid,subAccount:this.formValidate.sonAccountNumber,password:this.formValidate.password};this.axios({method:"post",url:"/cipher/subdown/dowmSingleSubAccount",data:e}).then(function(e){0===e.data.return_code?(t.$myModal.success({title:"配置成功",content:e.data.return_msg+e.data.successed+"条，失败"+e.data.fail+"条"}),t.currentPage=1,t.getUserList()):t.$myModal.error({title:"配置失败",content:e.data.return_msg})}).catch(function(e){t.$Notice.warning({title:"网络未知错误！",desc:e})})}else this.$myModal.error({title:"错误",content:"从账号密码不能为空！"})},cancelAuth:function(t,e){var a=this;this.accountNumber=t,this.uuid=e,this.$myModal.confirm({title:"取消授权",content:"确认取消该用户"+this.accountNumber+"的权限吗?"}).then(function(){var t=Object(M["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:a.cancelAuthUser();case 1:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()).catch(function(){})},cancelAuthUser:function(){var t=this,e={accountNumber:this.accountNumber,uuid:this.uuid,applicationId:this.appId};this.axios({method:"post",url:"/cipher/appAuth/deleteUserAuth",data:e}).then(function(e){if(0!==e.data.return_code){if(1===e.data.return_code&&0===e.data.depatment.length&&0===e.data.teams.length)t.$myModal.success({title:"操作成功",content:"取消授权成功"}).then(function(){var e=Math.ceil((t.total-1)/t.size);t.currentPage=e<t.currentPage?e:t.currentPage,t.getUserList()});else if(1===e.data.return_code&&e.data.depatment.length>0&&e.data.teams.length>0){var a=[],i=[];a=e.data.depatment,i=e.data.teams;for(var s="",o="",r=0;r<a.length;r++)s+=a[r].groupName+" ";for(var n=0;n<i.length;n++)o+=i[n].teamName+" ";t.$myModal.error({title:"取消授权失败",content:"该用户在"+s+"部门以及"+o+"安全组下。"})}else if(1===e.data.return_code&&e.data.depatment.length>0&&0===e.data.teams.length){var l=[];l=e.data.depatment;for(var c="",u=0;u<l.length;u++)c+=l[u].groupName+" ";t.$myModal.error({title:"取消授权失败",content:"该用户在"+c+"部门下。"})}else if(1===e.data.return_code&&0===e.data.depatment.length&&e.data.teams.length>0){var d=[];d=e.data.teams;for(var m="",p=0;p<d.length;p++)m+=d[p].teamName+" ";t.$myModal.error({title:"取消授权失败",content:"该用户在"+m+"安全组下。"})}}else t.$myMessage.error(e.data.return_msg)}).catch(function(e){t.$Notice.warning({title:"网络未知错误！",desc:e})})},sampleDownload:function(){window.location.href="/cipher/download/subexport"},downLoadFeedback:function(){location.href="/cipher/subaccount/downloadReturnExcel?downloadSecret="+this.secret},handleBeforeUpload:function(){this.uploadData={applicationId:this.appId}},handleSuccess:function(t,e){var a=this;1===t.return_code?(this.secret=t.secret,this.$myModal.confirm({title:"导入从账号成功",content:t.return_msg,confirmVal:"下载反馈"}).then(function(){var t=Object(M["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:a.downLoadFeedback();case 1:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()).catch(function(){})):0===t.return_code&&this.$myModal.error({title:"Excel上传失败",content:t.return_msg})},handleError:function(t,e){this.$myModal.error({title:"Excel上传失败",content:t})},handleFormatError:function(t){this.$Notice.warning({title:"请选择表格文件",desc:"文件不正确！ "+t.name+" 该文件不是表格文件"})},handleSelectRow:function(t,e){this.selection=this.$refs.selection.getSelection()},synSelectSubAccount:function(){var t=this;if(0!==this.selection.length){var e=[];this.selection.forEach(function(t,a){e.push(t.uuid)}),this.uuids=e.join(",");var a={appClientId:this.appClientId,userIds:this.uuids};this.axios({method:"post",url:"/cipher/subdown/downSelectsubAccountNum",data:a}).then(function(e){0===e.data.return_code&&(t.length=e.data.num,t.showSynModal=!0,t.isDownsubAccount=!1)}).catch(function(e){t.$Notice.warning({title:"网络未知错误！",desc:e})})}else this.$myModal.error({title:"同步数据为空",content:"请先选择需要同步的数据"})},synAllSubAccount:function(){var t=this,e={appClientId:this.appClientId};this.axios({method:"post",url:"/cipher/subdown/downAllsubAccountNum",data:e}).then(function(e){0===e.data.return_code&&(t.length=e.data.num,t.showSynModal=!0,t.isDownsubAccount=!0)}).catch(function(e){t.$Notice.warning({title:"网络未知错误！",desc:e})})},cofirmSynModal:function(){this.showSynModal=!1,this.isDownsubAccount?this.downAllsubAccount():this.downSelectsubAccount()},downSelectsubAccount:function(){var t=this,e={appClientId:this.appClientId,userIds:this.uuids};this.axios({method:"post",url:"/cipher/subdown/downSelectsubAccount",data:e}).then(function(e){0===e.data.return_code?(t.returnDemo=e.data,t.$myModal.success({title:"同步成功",content:"成功".concat(t.returnDemo.successed,"条,失败").concat(t.returnDemo.fail,"条,").concat(t.returnDemo.return_msg)}),t.currentPage=1,t.getUserList()):t.$myModal.error({title:"同步失败",content:e.data.return_msg})}).catch(function(e){t.$Notice.warning({title:"网络未知错误！",desc:e})})},downAllsubAccount:function(){var t=this,e={appClientId:this.appClientId};this.axios({method:"post",url:"/cipher/subdown/downAllsubAccount",data:e}).then(function(e){0===e.data.return_code?(t.returnDemo=e.data,t.$myModal.success({title:"同步成功",content:"成功".concat(t.returnDemo.successed,"条,失败").concat(t.returnDemo.fail,"条,").concat(t.returnDemo.return_msg)}),t.currentPage=1,t.getUserList()):t.$myModal.error({title:"同步失败",content:e.data.return_msg})}).catch(function(e){t.$Notice.warning({title:"网络未知错误！",desc:e})})},changeSynStatus:function(){this.currentPage=1,this.getUserList()},pageSizeChange:function(t){this.size=t,this.currentPage=1,this.getUserList()},changePage:function(t){this.currentPage=t,this.getUserList()},configSonAccount:function(t,e,a){var i=this;this.info.accountNumber=t,this.info.userName=e,this.info.uuid=a;var s={appClientId:this.appClientId,accountNumber:this.info.accountNumber,uuid:this.info.uuid};this.axios({method:"post",url:"/cipher/subdown/recomendSubAccount",data:s}).then(function(t){1===t.data.return_code?i.formValidate.sonAccountNumber=t.data.userName:i.$myModal.error({title:"操作失败",content:"请联系管理员"})}).catch(function(t){i.$Notice.warning({title:"网络未知错误！",desc:t})}),this.showSubConfigModal=!0},searchApplicatioName:function(){this.currentPage=1,this.getUserList()},init:function(t){var e=this.appData;this.applicationType=e.applicationType,this.appClientId=e.applicationId,this.appSysId=e.appSysId,1===e.associatedAccount.assManual&&(this.isSubConfig=!1),1===e.associatedAccount.assPwdManual&&(this.isSubPwdConfig=!1),this.getUserList()},getUserList:function(){var t=this,e={applicationId:this.appId,rows:this.size,page:this.currentPage,queryName:this.searchAppInput,isSynchron:this.synStatus};this.axios({method:"post",url:"/cipher/appAuth/authList?json",data:e}).then(function(e){t.tableData=e.data.rows,t.total=e.data.total}).catch(function(e){t.$Notice.warning({title:"网络未知错误！",desc:e})})},toUserDetail:function(t){this.$router.push({path:"/userCatalogOS/detail",query:{accountNumber:this.tableData[t].accountNumber,groupId:this.tableData[t].id,uuid:this.tableData[t].uuid}})}})},$=O,P=(a("7d44"),Object(I["a"])($,T,L,!1,null,"df4533b6",null)),F=P.exports,B={components:{AppBase:A,AppSynConfig:k,AppSubAccount:F},data:function(){return{appDetail:"base",componentStatus:{isAppBaseEdit:!1,isAppSynConfigEdit:!1},isGetData:!1,appData:{},appInfoData:{}}},computed:Object(o["a"])({},Object(r["c"])(["appId"]),{isShowSynConfig:function(){return 3===this.appInfoData.applicationType||4===this.appInfoData.applicationType},isShowEdit:function(){var t;switch(this.appDetail){case"base":t=!this.componentStatus.isAppBaseEdit;break;case"synConfig":t=!this.componentStatus.isAppSynConfigEdit;break;case"subAccount":t=!1;break}return t}}),mounted:function(){this.getData()},methods:{changeStatus:function(){this.$refs[this.appDetail].editStatus()},getChildStatus:function(t){"base"===t.name?this.componentStatus.isAppBaseEdit=t.isEdit:"synConfig"===t.name&&(this.componentStatus.isAppSynConfigEdit=t.isEdit)},getData:function(){var t=this;this.axios({method:"post",url:"/cipher/app/synConfig",data:{id:this.appId}}).then(function(e){t.appData=Object.assign({},e.data),t.appInfoData=Object.assign({},e.data.app),t.isGetData=!0}).catch(function(e){t.$Notice.warning({title:"网络未知错误",desc:e})})},getDataAgain:function(){this.isGetData=!1,this.getData()}}},V=B,R=(a("76b5"),Object(I["a"])(V,i,s,!1,null,"623a4b8f",null));e["default"]=R.exports},e656:function(t,e,a){},e6a9:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tabled-wrap"},[a("div",{staticClass:"tabled-header"},[a("div",{staticClass:"tabled-header-search"},[a("myInput",{attrs:{placeholder:"请输入姓名 / 账号",radius:"half",search:!0},on:{handleClick:t.searchUser},model:{value:t.searchName,callback:function(e){t.searchName=e},expression:"searchName"}})],1),a("div",{staticClass:"tabled-header-right"},[a("mySelect",{attrs:{showString:"选择状态",dataList:t.statusList},on:{"on-change":t.changeStatus},model:{value:t.status,callback:function(e){t.status=e},expression:"status"}}),a("myButton",{attrs:{btnType:"info"},on:{click:t.showTreeMadal}},[t._v("批量下发")])],1)]),a("div",{staticClass:"tabled-table"},[a("Table",{attrs:{border:"",columns:t.title,data:t.list}})],1),a("Page",{staticClass:"tabled-page",attrs:{total:t.total,current:t.currentPage,"show-elevator":"","show-sizer":"","show-total":""},on:{"on-change":t.changePage,"on-page-size-change":t.changePageSize}}),t.confirm.flag?a("Confirm",{attrs:{flag:t.confirm.flag,title:t.confirm.title,content:t.confirm.content,okString:t.confirm.okString,onOk:t.confirm.onOk,onClose:t.confirm.onClose}}):t._e(),a("Modal",{staticClass:"tree-transfer",attrs:{width:"668"},on:{"on-cancel":t.cancel},model:{value:t.isShowTreeMadal,callback:function(e){t.isShowTreeMadal=e},expression:"isShowTreeMadal"}},[a("p",{staticClass:"header",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("批量下发种子密钥")])]),a("TreeTransfer",{attrs:{leftTreeData:t.leftTreeData,leftDataType:t.treeDataType,placeholder:"输入用户"},on:{rightData:t.getRightData}},[a("span",{attrs:{slot:"leftText"},slot:"leftText"},[t._v("待选用户")]),a("span",{attrs:{slot:"rightText"},slot:"rightText"},[t._v("已选用户")])]),a("Checkbox",{staticClass:"tree-transfer-check",on:{"on-change":t.changeHideSented},model:{value:t.isHideSented,callback:function(e){t.isHideSented=e},expression:"isHideSented"}},[t._v("隐藏已下发种子密钥的账号")]),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"primary"},on:{click:t.sentDownBatch}},[t._v("下发")]),a("Button",{on:{click:t.resetTree}},[t._v("重置")])],1)],1)],1)},s=[],o=(a("ac6a"),a("be94")),r=a("c791"),n=a("6a6b"),l=a("2f62"),c={title:{target:"title",original:"text"},children:{target:"children",original:"nodes"}},u={components:{Confirm:n["a"],TreeTransfer:r["a"]},data:function(){var t=this;return{name:"",count:0,confirm:{flag:!1,title:"",content:"",okString:"继续",onOk:this.onConfirmOk,onClose:this.onConfirmClose},isReset:!1,isShowTreeMadal:!1,treeData:[],leftTreeData:[],treeDataType:0,isHideSented:!0,searchName:"",queryName:"",total:0,currentPage:1,size:10,accountNumber:"",scratchCode:[],status:0,statusList:[{value:0,label:"全部"},{value:1,label:"已下发"},{value:2,label:"未下发"}],userId:"",userIds:"",title:[{title:"账号",key:"userName",align:"center",render:function(e,a){return e("a",{on:{click:function(){t.toUserDetail(a.index)}}},a.row.userName)}},{title:"部门",key:"groupNames",align:"center",render:function(e,a){return e("a",{on:{click:function(){a.row.groupList&&t.toGroupList(a.row.groupList[0])}}},a.row.groupNames)}},{title:"种子密钥状态",key:"issueStatusDescribe",align:"center"},{title:"操作",key:"edit",width:200,align:"center",render:function(e,a){var i="未下发"===a.row.issueStatusDescribe;return e("div",[e("a",{class:{disabled:i},on:{click:function(){i||(t.isReset=!0,t.onConfirm("重置",a.row.userId))}}},"重置"),e("a",{on:{click:function(){t.isReset=!1,t.onConfirm(a.row.issueStatusDescribe,a.row.userId)}}},"下发种子")])}}],list:[]}},mounted:function(){this.getList()},methods:Object(o["a"])({searchUser:function(){this.queryName=this.searchName,this.currentPage=1,this.getList()},changeStatus:function(){this.currentPage=1,this.getList()},changePageSize:function(t){this.size=t,this.currentPage=1,this.getList()},changePage:function(t){this.currentPage=t,this.getList()},getList:function(){var t=this,e={rows:this.size,page:this.currentPage,queryName:this.queryName,issueStatus:this.status};this.axios({method:"post",url:"/cipher/dynamic/list",data:e}).then(function(e){0===e.data.return_code&&(t.list=e.data.rows,t.total=e.data.total)}).catch(function(t){console.log(t)})},toUserDetail:function(t){this.$router.push({path:"/userCatalogOS/detail",query:{accountNumber:this.list[t].accountNumber,groupId:this.list[t].groupId,uuid:this.list[t].userId}})},toGroupList:function(t){this.$router.push({path:"/userCatalogOS"}),this.changeGroup(t)},onConfirm:function(t,e){this.confirm.title="重置"===t?"本次操作将重置该用户的种子密钥":"本次操作将向用户下发种子密钥",this.confirm.content="重置"===t?"该用户在绑定新的种子密钥前将无法登录，你还要继续吗？":"用户扫码绑定后可以使用动态密码。",this.confirm.flag=!0,this.userId=e},onConfirmClose:function(){this.confirm.flag=!1},onConfirmOk:function(){this.confirm.flag=!1,this.sentDown()},sentDown:function(){var t=this,e=this.isReset?"/cipher/dynamic/reset":"/cipher/dynamic/issue",a={userId:this.userId};this.axios({method:"post",url:e,data:a}).then(function(e){0===e.data.return_code?(t.getList(),t.$myModal.success({title:t.isReset?"重置成功":"下发成功",content:e.data.return_msg})):t.$myModal.error({title:t.isReset?"重置失败":"下发失败",content:"请稍后重试"})}).catch(function(e){t.$Notice.warning({title:"网络未知错误！",desc:e})})},initHideTree:function(t,e){for(var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=t.length-1;i>=0;i--){var s=t[i];s[e]===a&&t.splice(i,1),Array.isArray(s.children)&&this.initHideTree(s.children,e)}return t},changeHideSented:function(){var t=this.$common.clone(this.treeData);this.isHideSented?this.leftTreeData=this.initHideTree(t,"checked"):this.leftTreeData=t},getTreeData:function(){var t=this;this.axios({method:"post",url:"/cipher/dynamic/getUser",data:{}}).then(function(e){if(0===e.data.return_code){var a=t.$common.cloneAssemblyAssignData(e.data.trees,c,!0);t.treeData=t.$common.initSelect(a),t.changeHideSented()}}).catch(function(t){console.log(t)})},showTreeMadal:function(){this.isShowTreeMadal=!0,this.treeDataType=1,this.getTreeData()},resetTree:function(){this.changeHideSented()},cancel:function(){this.isShowTreeMadal=!1},getRightData:function(t){var e=[];t.forEach(function(t){e.push(t.uuid)}),this.userIds=e.join(",")},sentDownBatch:function(){var t=this,e={userIds:this.userIds};this.axios({method:"post",url:"/cipher/dynamic/batch",data:e}).then(function(e){0===e.data.return_code?(t.getList(),t.$myModal.success({title:"下发成功",content:e.data.return_msg})):t.$myModal.error({title:"下发失败",content:"请稍后重试"})}).catch(function(e){t.$Notice.warning({title:"网络未知错误！",desc:e})})}},Object(l["b"])(["changeGroup"]))},d=u,m=(a("7ffd"),a("2877")),p=Object(m["a"])(d,i,s,!1,null,"3e98bec5",null);e["default"]=p.exports},e764:function(t,e,a){},ea25:function(t,e,a){"use strict";var i=a("91eb"),s=a.n(i);s.a},eb10:function(t,e,a){"use strict";var i=a("b49a"),s=a.n(i);s.a},eb71:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"example"},[a("div",[a("Button",{on:{click:t.confirmNotice}},[t._v("确认提示框")])],1),a("div",[a("Button",{on:{click:t.error}},[t._v("错误提示框")])],1),a("div",[a("Button",{on:{click:function(e){t.modal2=!0}}},[t._v("标准模态框")]),a("Modal",{model:{value:t.modal2,callback:function(e){t.modal2=e},expression:"modal2"}},[a("p",{staticClass:"header",attrs:{slot:"header"},slot:"header"},[a("span",{staticClass:"left"},[t._v("弹窗标题")]),a("span",{staticClass:"right"},[t._v("辅助信息，如果必要")])]),a("div",{staticClass:"center"},[a("Form",{attrs:{model:t.formItem}},[a("FormItem",{attrs:{label:"应用名称："}},[a("Input",{attrs:{placeholder:"请输入应用名称"},model:{value:t.formItem.input,callback:function(e){t.$set(t.formItem,"input",e)},expression:"formItem.input"}})],1),a("FormItem",{attrs:{label:"应用描述："}},[a("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"请输入应用描述"},model:{value:t.formItem.textarea,callback:function(e){t.$set(t.formItem,"textarea",e)},expression:"formItem.textarea"}})],1)],1)],1)])],1),a("div",[a("Button",{on:{click:t.toggle}},[t._v("定时关闭提示框")]),t.message.show?a("Notice",{attrs:{text:t.message.text,show:t.message.show,duration:t.message.duration,onClose:t.message.onClose},on:{close:t.close}}):t._e()],1),a("div",[a("Button",{on:{click:t.toggleDel}},[t._v("删除模态框")]),t.delModal.flag?a("DelModal",{attrs:{flag:t.delModal.flag,title:t.delModal.title,content:t.delModal.content,onOk:t.delModal.onOk}}):t._e()],1),a("div",[a("Button",{on:{click:t.toggleConfirm}},[t._v("确认模态框")]),t.confirm.flag?a("Confirm",{attrs:{flag:t.confirm.flag,title:t.confirm.title,content:t.confirm.content,onOk:t.confirm.onOk,onClose:t.confirm.onClose}}):t._e()],1)])},s=[],o=a("2c82"),r=a("faeb"),n=a("62c4"),l=a("6a6b"),c={data:function(){return{modal2:!1,formItem:{input:"",textarea:""},message:{text:"这是一条提示消息!",show:!1,duration:1,onClose:this.close},delModal:{flag:!1,title:"删除失败",content:"请稍后重试",onOk:this.onOk},confirm:{flag:!1,title:"确认。。。",content:"确认。。。。",onOk:this.onConfirmOK,onClose:this.onConfirmClose}}},components:{Notice:r["a"],DelModal:n["a"],Confirm:l["a"]},methods:{confirmNotice:function(){this.$Modal.confirm({title:"这是进行一项操作时必须了解的信息",content:'<span class="simpleModalContent">用户须知的信息，</span><span> 你还要继续吗？</span>',width:o["a"].simpleModal.width,onOk:function(){console.log("Clicked ok")},onCancel:function(){console.log("Clicked cancel")}})},error:function(){this.$Modal.error({title:"保存失败",content:"请稍后重试",width:o["a"].simpleModal.width})},close:function(){this.message.show=!1},toggle:function(){this.message.show=!0},toggleDel:function(){this.delModal.flag=!0},toggleConfirm:function(){this.confirm.flag=!0},onOk:function(){this.delModal.flag=!1},onConfirmOK:function(){this.confirm.flag=!1},onConfirmClose:function(){this.confirm.flag=!1}}},u=c,d=(a("c222"),a("2877")),m=Object(d["a"])(u,i,s,!1,null,"6f8c0b4e",null);e["default"]=m.exports},ec1a:function(t,e,a){},edf3:function(t,e,a){"use strict";var i=a("aa94"),s=a.n(i);s.a},eeb0:function(t,e,a){"use strict";var i=a("7123"),s=a.n(i);s.a},eed9:function(t,e,a){},efaa:function(t,e,a){},f0de:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"formed-wrap"},[a("div",{staticClass:"formed-header"},[a("div",{staticClass:"formed-header-title"},[t._v("异常登录设置")]),a("myButton",{staticClass:"formed-header-btn",attrs:{btnType:"info"},on:{click:t.toedit}},[t._v("编辑")])],1),a("div",{staticClass:"formed-container"},[a("div",{staticClass:"formed-form"},[a("div",{staticClass:"formed-form-item"},[a("span",[t._v("异地登录验证：")]),t.statusIcon?a("span",[t._v("\n          "+t._s(t.statusIcon.status?"已开启":"已关闭")+"\n          "),a("Icon",{class:t.statusIcon.class,attrs:{type:t.statusIcon.type}})],1):t._e()]),a("div",{staticClass:"formed-form-item"},[a("span",[t._v("异地登录验证方式：")]),a("span",[t._v(t._s(t.isemailormessages))])])])])])},s=[],o=a("e5d6"),r={data:function(){return{isemailormessages:"",statusIcon:null}},mounted:function(){this.finddata()},methods:{toedit:function(){this.$router.push({name:"ALEdit"})},finddata:function(){var t=this;this.axios({method:"post",url:"/cipher/exceptionLogin/preList",data:{}}).then(function(e){t.statusIcon=1===e.data.exceptionLogin.status?o["a"].openIcon:o["a"].closeIcon,t.isemailormessages=1===e.data.exceptionLogin.type?"邮件随机码":"短信随机码"}).catch(function(t){console.log(t)})}}},n=r,l=(a("23e8"),a("2877")),c=Object(l["a"])(n,i,s,!1,null,"586d628a",null);e["default"]=c.exports},f103:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("transition",{attrs:{name:"fade",mode:"out-in"}},[a("router-view")],1)},s=[],o={},r=o,n=a("2877"),l=Object(n["a"])(r,i,s,!1,null,"10fb000e",null);e["default"]=l.exports},f371:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"addUser formed-wrap"},[a("div",{staticClass:"formed-header"},[a("span",{staticClass:"formed-header-title"},[t._v("添加用户")]),a("span",{staticClass:"formed-header-btn"},[a("router-link",{attrs:{to:"/userCatalogOS"}},[a("myButton",[t._v("取消")])],1)],1)]),a("div",{staticClass:"formed-container"},[a("Form",{ref:"formValidate",staticClass:"formed-form",attrs:{model:t.formValidate,rules:t.ruleValidate,"label-width":100}},[a("FormItem",{attrs:{label:"账号：",prop:"accountNumber"}},[a("Input",{attrs:{placeholder:"请输入账号"},model:{value:t.formValidate.accountNumber,callback:function(e){t.$set(t.formValidate,"accountNumber","string"===typeof e?e.trim():e)},expression:"formValidate.accountNumber"}})],1),a("FormItem",{attrs:{label:"姓名：",prop:"userName"}},[a("Input",{attrs:{placeholder:"请输入姓名"},model:{value:t.formValidate.userName,callback:function(e){t.$set(t.formValidate,"userName","string"===typeof e?e.trim():e)},expression:"formValidate.userName"}})],1),a("FormItem",{attrs:{label:"邮箱：",prop:"mail"}},[a("Input",{attrs:{placeholder:"请输入邮箱"},model:{value:t.formValidate.mail,callback:function(e){t.$set(t.formValidate,"mail","string"===typeof e?e.trim():e)},expression:"formValidate.mail"}})],1),a("FormItem",{attrs:{label:"手机号：",prop:"phoneNumber"}},[a("Input",{attrs:{placeholder:"请输入手机号"},model:{value:t.formValidate.phoneNumber,callback:function(e){t.$set(t.formValidate,"phoneNumber","string"===typeof e?e.trim():e)},expression:"formValidate.phoneNumber"}})],1),a("FormItem",{attrs:{label:"身份证号：",prop:"idNum"}},[a("Input",{attrs:{placeholder:"请输入身份证号"},model:{value:t.formValidate.idNum,callback:function(e){t.$set(t.formValidate,"idNum","string"===typeof e?e.trim():e)},expression:"formValidate.idNum"}})],1),a("FormItem",{attrs:{label:"性别：",prop:"gender"}},[a("Select",{attrs:{placeholder:"请输入性别"},model:{value:t.formValidate.gender,callback:function(e){t.$set(t.formValidate,"gender",e)},expression:"formValidate.gender"}},[a("Option",{attrs:{value:"未知"}},[t._v("未知")]),a("Option",{attrs:{value:"男"}},[t._v("男")]),a("Option",{attrs:{value:"女"}},[t._v("女")])],1)],1),a("FormItem",{attrs:{label:"生日：",prop:"birthday"}},[a("DatePicker",{staticStyle:{width:"300px"},attrs:{type:"date",placeholder:"请选择生日"},model:{value:t.formValidate.birthday,callback:function(e){t.$set(t.formValidate,"birthday",e)},expression:"formValidate.birthday"}})],1),a("FormItem",{attrs:{label:"职位：",prop:"job"}},[a("Input",{attrs:{placeholder:"请输入职位"},model:{value:t.formValidate.job,callback:function(e){t.$set(t.formValidate,"job","string"===typeof e?e.trim():e)},expression:"formValidate.job"}})],1),a("FormItem",{attrs:{label:"工号：",prop:"jobNo"}},[a("Input",{attrs:{placeholder:"请输入工号"},model:{value:t.formValidate.jobNo,callback:function(e){t.$set(t.formValidate,"jobNo","string"===typeof e?e.trim():e)},expression:"formValidate.jobNo"}})],1),a("FormItem",{staticClass:"tag",attrs:{label:"工作部门：",prop:"department"}},[a("div",t._l(t.selectDepartment,function(e,i){return a("Tag",{key:i,attrs:{closable:""},on:{"on-close":function(e){t.closeDepartment(i)}}},[t._v(t._s(e.title))])}),1),a("span",{staticClass:"link",on:{click:function(e){t.editDepartment()}}},[t._v("编辑")])]),a("FormItem",{staticClass:"tag",attrs:{label:"安全组：",prop:"securityGroup"}},[a("div",t._l(t.selectSecurityGroup,function(e,i){return a("Tag",{key:i,attrs:{closable:""},on:{"on-close":function(e){t.closeSecurityGroup(i)}}},[t._v(t._s(e.teamName))])}),1),a("span",{staticClass:"link",on:{click:function(e){t.editSecurityGroup()}}},[t._v("编辑")])]),a("FormItem",{attrs:{label:"设置密码：",prop:"password"}},[a("RadioGroup",{model:{value:t.password,callback:function(e){t.password=e},expression:"password"}},[a("Radio",{attrs:{label:"default"}},[t._v("使用默认密码")]),a("Radio",{attrs:{label:"singal"}},[t._v("单独设置密码")])],1),"default"!==t.password?a("Input",{attrs:{type:"password",placeholder:"请输入密码"},model:{value:t.formValidate.password,callback:function(e){t.$set(t.formValidate,"password",e)},expression:"formValidate.password"}}):t._e()],1),"default"!==t.password?a("FormItem",{attrs:{prop:"checkPassword"}},[a("Input",{attrs:{type:"password",placeholder:"请确认密码"},model:{value:t.formValidate.checkPassword,callback:function(e){t.$set(t.formValidate,"checkPassword",e)},expression:"formValidate.checkPassword"}})],1):t._e()],1),a("div",{staticClass:"formed-footer"},[a("myButton",{attrs:{btnType:"info",disabled:t.isDisable},on:{click:function(e){t.handleSubmitSave("formValidate")}}},[t._v("保存")]),a("router-link",{attrs:{to:"/userCatalogOS"}},[a("myButton",[t._v("取消")])],1)],1)],1),a("Modal",{staticClass:"tree-transfer",attrs:{width:"668"},model:{value:t.editDepartmentFlag,callback:function(e){t.editDepartmentFlag=e},expression:"editDepartmentFlag"}},[a("p",{attrs:{slot:"header"},slot:"header"},[a("span",[t._v("设置用户部门")])]),a("div",[a("TreeTransfer",{attrs:{leftTreeData:t.departmentList,leftDataType:t.dataType,placeholder:t.placeholder},on:{rightData:t.getDepartmentData}},[a("span",{attrs:{slot:"leftText"},slot:"leftText"},[t._v("选择部门")]),a("span",{attrs:{slot:"rightText"},slot:"rightText"},[t._v("已选择部门")])])],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"primary",disabled:t.isDisable},on:{click:function(e){t.updateDepartment()}}},[t._v("保存")]),a("Button",{staticStyle:{"margin-left":"10px"},on:{click:t.handleResetDepartment}},[t._v("重置")])],1)]),a("Modal",{attrs:{width:"668"},model:{value:t.securityGroupFlag,callback:function(e){t.securityGroupFlag=e},expression:"securityGroupFlag"}},[a("p",{attrs:{slot:"header"},slot:"header"},[a("span",[t._v("设置安全组")])]),a("div",[a("TreeTransfer",{attrs:{leftTreeData:t.securityGroupList,leftDataType:t.dataType,placeholder:t.placeholder},on:{rightData:t.getSecurityGroup}},[a("span",{attrs:{slot:"leftText"},slot:"leftText"},[t._v("选择安全组")]),a("span",{attrs:{slot:"rightText"},slot:"rightText"},[t._v("已选择安全组")])])],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"primary"},on:{click:function(e){t.updateSecurityGroup()}}},[t._v("保存")]),a("Button",{staticStyle:{"margin-left":"10px"},on:{click:t.handleResetSecurityGroup}},[t._v("重置")])],1)]),t.message.show?a("Notice",{attrs:{text:t.message.text,show:t.message.show,duration:t.message.duration,onClose:t.message.onClose}}):t._e()],1)},s=[],o=(a("ac6a"),a("6b54"),a("28a5"),a("a481"),a("7340")),r=a("c791"),n=a("faeb"),l=a("2c82"),c=a("8f5b"),u={title:{target:"title",original:"text"},children:{target:"children",original:"nodes"}},d={title:{original:"title"},groupId:{original:"groupId"}},m={components:{TreeTransfer:r["a"],Notice:n["a"]},data:function(){var t=this,e=function(t,e,a){(!e.replace(/^ +| +$/,"")||e.length>50)&&a(new Error("请输入不超过50位账号"));var i=c["a"].accountNumber;i.test(e)||a(new Error("请输入包含英文字符，数字或特殊符号的账号")),a()},a=function(t,e,a){(!e.replace(/^ +| +$/,"")||e.length>100)&&a(new Error("请输入不超过100位的姓名")),a()},i=function(t,e,a){var i={11:"北京",12:"天津",13:"河北",14:"山西",15:"内蒙古",21:"辽宁",22:"吉林",23:"黑龙江 ",31:"上海",32:"江苏",33:"浙江",34:"安徽",35:"福建",36:"江西",37:"山东",41:"河南",42:"湖北 ",43:"湖南",44:"广东",45:"广西",46:"海南",50:"重庆",51:"四川",52:"贵州",53:"云南",54:"西藏 ",61:"陕西",62:"甘肃",63:"青海",64:"宁夏",65:"新疆",71:"台湾",81:"香港",82:"澳门",91:"国外 "},s=c["a"].identity;if(null===e||0===e.length)a();else if(s.test(e))if(i[e.substr(0,2)]){if(18===e.length){e=e.split("");for(var o=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2],r=[1,0,"X",9,8,7,6,5,4,3,2],n=0,l=0,u=0,d=0;d<17;d++)l=e[d],u=o[d],n+=l*u;r[n%11].toString()!==e[17]&&a(new Error("身份证格式不正确"))}}else a(new Error("身份证格式不正确"));else a(new Error("身份证格式不正确"));a()},s=function(t,e,a){(0===e.length||e.length>30||e.length<6)&&a(new Error("请输入不少于6位，不超过30位的密码"));var i=c["a"].accountNumber;i.test(e)||a(new Error("请输入包含英文字符，数字或特殊符号的密码")),a()},o=function(e,a,i){a!==t.formValidate.password&&i(new Error("两次输入密码不一致")),i()};return{dataType:0,editDepartmentFlag:!1,departmentList:[],departmentListBak:[],placeholder:"搜索应用",userIds:"",selectDepartment:[],selectDepartmentBak:[],securityGroupFlag:!1,securityGroupList:[],selectSecurityGroup:[],selectSecurityGroupBak:[],password:"singal",pwDefault:"******",uuid:0,formValidate:{accountNumber:"",userName:"",mail:"",phoneNumber:"",idNum:"",gender:"",job:"",jobNo:"",birthday:"",department:[],securityGroup:[],password:"",checkPassword:""},ruleValidate:{accountNumber:[{required:!0,validator:e,trigger:"blur"}],userName:[{required:!0,validator:a,trigger:"blur"}],mail:[{required:!0,message:"请输入邮箱",trigger:"blur"},{type:"email",message:"邮箱格式不正确",trigger:"blur"}],idNum:[{validator:i,trigger:"blur"}],password:[{required:!0,validator:s,trigger:"blur"}],checkPassword:[{required:!0,message:"确认密码不能为空",trigger:"blur"},{required:!0,validator:o,trigger:"blur"}]},message:{text:"保存成功!",show:!1,duration:1,onClose:this.close},isDisable:!1}},watch:{password:function(){"default"===this.password?(this.formValidate.password=this.pwDefault,this.$refs["formValidate"].validate()):this.formValidate.password=""}},methods:{getRightData:function(t){console.log(t);var e=[];t.forEach(function(t){e.push(t.accountNumber)}),console.log(e),this.userIds=e.join(",")},editDepartment:function(){var t=this;this.dataType=2,this.editDepartmentFlag=!0;var e={accountNumber:"",uuid:""};this.axios({method:"post",data:e,url:o["a"].groupTreeList}).then(function(e){if(e.status!==o["a"].statusOk)throw new Error("请求失败");var a=t.$common.cloneAssemblyAssignData(e.data,u,!0);t.departmentList=t.$common.initSelect(a),t.departmentListBak=t.$common.clone(t.departmentList)}).catch(function(t){this.axios.error.handlingErrors(t)})},getDepartmentData:function(t){this.selectDepartmentBak=this.$common.cloneAssemblyAssignData(t,d,!1)},updateDepartment:function(){this.editDepartmentFlag=!1,this.selectDepartment=this.selectDepartmentBak},handleResetDepartment:function(){this.departmentList=this.$common.clone(this.departmentListBak)},editSecurityGroup:function(){var t=this;this.dataType=3,this.securityGroupFlag=!0;var e={accountNumber:""};this.axios({method:"post",data:e,url:o["a"].securityGroup}).then(function(e){if(e.status!==o["a"].statusOk)throw new Error("请求失败");t.securityGroupList=e.data,t.securityGroupListBak=t.$common.clone(t.securityGroupList)}).catch(function(t){this.axios.error.handlingErrors(t)})},getSecurityGroup:function(t){this.selectSecurityGroupBak=t},updateSecurityGroup:function(){this.securityGroupFlag=!1,this.selectSecurityGroup=this.selectSecurityGroupBak},handleResetSecurityGroup:function(){this.securityGroupList=this.$common.clone(this.securityGroupListBak)},dealParam:function(){var t=this.selectDepartment.map(function(t,e,a){return t.groupId});t=t.join(",");var e=this.selectSecurityGroup.map(function(t,e,a){return t.id});e=e.join(",");var a,i=this.$common.formatDate(this.formValidate.birthday);a="default"===this.password?"":this.formValidate.password;var s={accountNumber:this.formValidate.accountNumber,userName:this.formValidate.userName,mail:this.formValidate.mail,phoneNumber:this.formValidate.phoneNumber,idNum:this.formValidate.idNum,gender:this.formValidate.gender,birthday:i,job:this.formValidate.job,jobNo:this.formValidate.jobNo,department:t,securityGroup:e,password:a};return s},handleSubmitSave:function(t){var e=this;this.$refs[t].validate(function(t){if(t){var a=e.dealParam();e.setUnderway(),e.axios({method:"post",data:a,url:o["a"].add}).then(function(t){e.setCompleted(),t.data.return_code===o["a"].returnOk?(e.uuid=t.data.uuid,e.success()):e.error(t.data.msg)}).catch(function(t){this.setCompleted(),this.axios.error.handlingErrors(t)})}})},closeDepartment:function(t){this.selectDepartment.splice(t,1)},closeSecurityGroup:function(t){this.selectSecurityGroup.splice(t,1)},close:function(){this.message.show=!1,this.$router.push({path:"/userCatalogOS/detail",query:{accountNumber:this.formValidate.accountNumber,uuid:this.uuid}})},success:function(){this.message.show=!0,this.$router.push({path:"/userCatalogOS/detail",query:{accountNumber:this.formValidate.accountNumber,groupId:"",uuid:this.uuid}})},error:function(t){this.$Modal.error({title:"保存失败",content:t,width:l["a"].simpleModal.width})},setUnderway:function(){this.isDisable=!0},setCompleted:function(){this.isDisable=!1}}},p=m,h=(a("1ab1"),a("2877")),f=Object(h["a"])(p,i,s,!1,null,"3b94d88b",null);e["default"]=f.exports},f4bd:function(t,e,a){},f54e:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tabled-wrap"},[a("div",{staticClass:"tabled-header"},[a("div",{staticClass:"tabled-header-search"},[a("myInput",{attrs:{placeholder:"姓名,邮箱",radius:"half",search:!0},on:{handleClick:t.queryUser},model:{value:t.queryName,callback:function(e){t.queryName=e},expression:"queryName"}})],1),a("div",{staticClass:"tabled-header-btn"},[a("myButton",{attrs:{btnType:"info"},on:{click:t.showCode}},[t._v("邀请码")])],1)]),a("div",{staticClass:"tabled-table"},[a("Table",{attrs:{columns:t.columns1,data:t.data1}})],1),a("Page",{staticClass:"tabled-page",attrs:{total:t.total,current:t.curentPage,"show-elevator":"","show-sizer":"","show-total":""},on:{"on-change":t.changePage,"on-page-size-change":t.pageSizeChange}}),a("Modal",{staticClass:"create-modal",attrs:{width:"528"},model:{value:t.createModal,callback:function(e){t.createModal=e},expression:"createModal"}},[a("p",{staticClass:"invite-create-modal-header",attrs:{slot:"header"},slot:"header"},[a("span",[t._v("生成邀请码")])]),a("div",{staticClass:"create-modal-content"},[a("span",[t._v("邀请码：")]),a("myInput",{attrs:{width:"326px"},model:{value:t.codelist,callback:function(e){t.codelist=e},expression:"codelist"}})],1),a("div",{staticClass:"invite-create-modal-footer",attrs:{slot:"footer"},slot:"footer"},[a("myButton",{attrs:{btnType:"info"},on:{click:function(e){t.createCode()}}},[t._v("获取")]),a("myButton",{staticClass:"cancel__btn ",on:{click:function(e){t.close()}}},[t._v("取消")])],1)])],1)},s=[],o={data:function(){var t=this;return{codelist:"",createModal:!1,queryName:"",curentPage:1,total:0,size:10,columns1:[{title:"姓名",key:"userName"},{title:"邮箱",key:"mail"},{title:"加入时间",key:"createTime"},{title:"加入方式",key:"invitCode",render:function(e,a){return null!==t.data1[a.index].invitCode?e("div",[e("span","邀请码:"+t.data1[a.index].invitCode)]):e("div",[e("span","邀请链接加入")])}}],data1:[]}},mounted:function(){var t={rows:this.size,page:1};this.finddata(t)},methods:{createCode:function(){var t=this,e={};this.axios({method:"post",url:"/cipher/invit/create",data:e}).then(function(e){200===e.status&&(t.codelist=e.data.codelist.join(""))}).catch(function(t){console.log(t)})},close:function(){this.createModal=!1},getOldCode:function(){var t=this,e={};this.axios({method:"post",url:"/cipher/invit/oldCode",data:e}).then(function(e){t.codelist=e.data.codelist.join("")}).catch(function(t){console.log(t)})},showCode:function(){this.getOldCode(),this.createModal=!0},queryUser:function(){var t={queryName:this.queryName,rows:this.size,page:1};this.finddata(t)},finddata:function(t){var e=this;this.axios({method:"post",url:"/cipher/invit/list?json",data:t}).then(function(t){e.data1=t.data.rows,e.total=t.data.total}).catch(function(t){console.log(t)})},pageSizeChange:function(t){var e={queryName:this.queryName,rows:t,page:1};this.finddata(e),this.size=t},changePage:function(t){var e={queryName:this.queryName,rows:this.size,page:t};this.curentPage=t,this.finddata(e)}}},r=o,n=(a("beeb"),a("2877")),l=Object(n["a"])(r,i,s,!1,null,"b99a2d24",null);e["default"]=l.exports},f622:function(t,e,a){},f679:function(t,e,a){"use strict";var i=a("f87f"),s=a.n(i);s.a},f80e:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wfd-add formed-wrap"},[a("div",{staticClass:"formed-header"},[a("div",{staticClass:"formed-header-title"},[t._v("添加设备")]),a("div",{staticClass:"formed-header-btn"},[a("myButton",{on:{click:t.cancel}},[t._v("取消")])],1)]),a("div",{staticClass:"formed-container"},[a("Form",{ref:"formValidate",staticClass:"formed-form",attrs:{model:t.formItem,"label-width":120,rules:t.ruleValidate}},[a("FormItem",{attrs:{label:"设备名称：",prop:"devicename"}},[a("Input",{attrs:{placeholder:"请输入"},model:{value:t.formItem.devicename,callback:function(e){t.$set(t.formItem,"devicename","string"===typeof e?e.trim():e)},expression:"formItem.devicename"}})],1),a("FormItem",{attrs:{label:"设备地址：",prop:"equipAddr"}},[a("Input",{attrs:{placeholder:"请输入"},model:{value:t.formItem.equipAddr,callback:function(e){t.$set(t.formItem,"equipAddr","string"===typeof e?e.trim():e)},expression:"formItem.equipAddr"}})],1),a("FormItem",{attrs:{label:"描述：",prop:"describee"}},[a("Input",{attrs:{placeholder:"请输入",type:"textarea",rows:4},model:{value:t.formItem.describee,callback:function(e){t.$set(t.formItem,"describee","string"===typeof e?e.trim():e)},expression:"formItem.describee"}})],1),a("FormItem",{attrs:{label:"状态：",prop:"status"}},[a("RadioGroup",{model:{value:t.formItem.status,callback:function(e){t.$set(t.formItem,"status",e)},expression:"formItem.status"}},t._l(t.statusList,function(e){return a("Radio",{key:e.value,attrs:{label:e.value}},[t._v(t._s(e.label))])}),1)],1),a("FormItem",{attrs:{label:"认证源：",prop:"authOrigin"}},[a("Select",{model:{value:t.formItem.authOrigin,callback:function(e){t.$set(t.formItem,"authOrigin",e)},expression:"formItem.authOrigin"}},t._l(t.authOriginList,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}),1)],1),a("FormItem",{attrs:{label:"认证方式：",prop:"authType"}},[a("Select",{model:{value:t.formItem.authType,callback:function(e){t.$set(t.formItem,"authType",e)},expression:"formItem.authType"}},t._l(t.authTypeList,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}),1)],1),a("FormItem",{attrs:{label:"二次认证：",prop:"towAuthWay"}},[a("Checkbox",{model:{value:t.formItem.towAuthWay,callback:function(e){t.$set(t.formItem,"towAuthWay",e)},expression:"formItem.towAuthWay"}},[t._v("钉钉Push认证")])],1),a("FormItem",{attrs:{label:"Radius服务器：",prop:"radiusServer"}},[a("Input",{attrs:{placeholder:"请输入"},model:{value:t.formItem.radiusServer,callback:function(e){t.$set(t.formItem,"radiusServer","string"===typeof e?e.trim():e)},expression:"formItem.radiusServer"}})],1),a("FormItem",{attrs:{label:"认证端口：",prop:"authPort"}},[a("Input",{attrs:{placeholder:"请输入"},model:{value:t.formItem.authPort,callback:function(e){t.$set(t.formItem,"authPort","string"===typeof e?e.trim():e)},expression:"formItem.authPort"}})],1),a("FormItem",{attrs:{label:"shareKey：",prop:"shareKey"}},[a("Input",{attrs:{placeholder:"请输入"},model:{value:t.formItem.shareKey,callback:function(e){t.$set(t.formItem,"shareKey","string"===typeof e?e.trim():e)},expression:"formItem.shareKey"}})],1)],1),a("div",{staticClass:"formed-footer"},[a("myButton",{attrs:{btnType:"info"},on:{click:function(e){t.handleSubmit("formValidate")}}},[t._v("保存")]),a("myButton",{on:{click:t.cancel}},[t._v("取消")])],1)],1)])},s=[],o=a("8f5b"),r=a("5118"),n={name:"WFDAdd",data:function(){var t=function(t,e,a){e.length>15&&a(new Error("请输入长度少于15个字的名称")),a()},e=function(t,e,a){if(e.length>0){var i=o["a"].IPv4,s=o["a"].IPv6;i.test(e)||s.test(e)||""===e||a(new Error("IP格式不正确"))}a()},a=function(t,e,a){length&&e.length>50&&a(new Error("请输入长度少于50个字的描述")),a()};return{formItem:{devicename:"",equipAddr:"",describee:"",status:0,authOrigin:0,authType:1,towAuthWay:!0,radiusServer:"",authPort:"",shareKey:""},ruleValidate:{devicename:[{required:!0,message:"设备名不能为空",trigger:"blur"},{validator:t,trigger:"blur"}],equipAddr:[{validator:e,trigger:"blur"}],describee:[{validator:a,trigger:"blur"}],radiusServer:[{required:!0,message:"radius服务器不能为空",trigger:"blur"}],authPort:[{required:!0,message:"认证端口不能为空",trigger:"blur"}],shareKey:[{required:!0,message:"shareKey不能为空",trigger:"blur"}]},statusList:[{value:0,label:"启用"},{value:1,label:"停用"}],authOriginList:[{value:0,label:"本地认证"},{value:1,label:"AD认证"},{value:2,label:"JLT"}],authTypeList:[{value:1,label:"用户名+密码+动态密码"},{value:2,label:"用户名+密码"},{value:3,label:"用户名+动态密码"}]}},methods:{cancel:function(){this.$router.push({path:"/resourceManageDM"})},handleSubmit:function(t){var e=this;this.$refs[t].validate(function(t){t?e.saveData():e.$myMessage.error("表单验证失败，请重试")})},saveData:function(){var t=this,e={devicename:this.formItem.devicename,equipAddr:this.formItem.equipAddr,describee:this.formItem.describee,status:this.formItem.status,authOrigin:this.formItem.authOrigin,authType:this.formItem.authType,towAuthWay:this.formItem.towAuthWay?0:1,radiusServer:this.formItem.radiusServer,authPort:this.formItem.authPort,shareKey:this.formItem.shareKey};this.axios({method:"post",url:"/cipher/equip/compile",data:e}).then(function(e){0===e.data.return_code?(t.$myMessage.success(e.data.return_msg),Object(r["setTimeout"])(function(){t.$router.push("/resourceManageDM")},1e3)):t.$myMessage.error(e.data.return_msg)}).catch(function(e){t.$Notice.warning({title:"网络未知错误！",desc:e})})}}},l=n,c=(a("4f14"),a("2877")),u=Object(c["a"])(l,i,s,!1,null,"4a5aa5e6",null);e["default"]=u.exports},f850:function(t,e,a){},f87f:function(t,e,a){},f89c:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wvm tabled-wrap"},[a("div",{staticClass:"tabled-header"},[a("div",{staticClass:"tabled-header-search"},[a("myInput",{attrs:{placeholder:"输入姓名/手机号",radius:"half",search:!0},on:{handleClick:t.getSearchList},model:{value:t.searchWord,callback:function(e){t.searchWord=e},expression:"searchWord"}})],1),a("div",{staticClass:"tabled-header-btn"},[a("myButton",{attrs:{btnType:"info"},on:{click:function(e){t.$router.push({path:"/netAccessServiceWVM/VisitorAdd"})}}},[t._v("添加访客")])],1)]),a("div",{staticClass:"tabled-table"},[a("Table",{attrs:{columns:t.title,data:t.list}})],1),a("div",{staticClass:"tabled-page"},[a("Page",{attrs:{total:t.total,"page-size":t.pageSize,current:t.current,"show-sizer":"","show-elevator":"","show-toatl":""},on:{"on-change":t.changePage,"on-page-size-change":t.changePageSize}})],1)])},s=[],o={data:function(){return{title:[{title:"外部ID",key:"id"},{title:"姓名",key:"loginName"},{title:"手机号",key:"mobile"},{title:"登录密码",key:"password"},{title:"单位",key:"unit"},{title:"开始时间",key:"startTime"},{title:"结束时间",key:"endTime"}],list:[],searchWord:"",total:0,pageSize:10,current:1,searchWord2:""}},created:function(){this.getAllList()},methods:{getAllList:function(){var t={queryName:"",page:this.current,rows:this.pageSize};this.getWEDList(t)},getSearchList:function(){var t={queryName:this.searchWord,page:1,rows:this.pageSize};this.getWEDList(t),this.current=1,this.searchWord2=this.searchWord},changePageSize:function(t){var e={queryName:this.searchWord2,rows:t,page:1};this.pageSize=t,this.getWEDList(e)},changePage:function(t){var e={queryName:this.searchWord2,rows:this.pageSize,page:t};this.current=t,this.getWEDList(e)},getWEDList:function(t){var e=this;this.axios({method:"post",url:"/cipher/vistor/list?json",data:t}).then(function(t){e.total=t.data.total,e.list=t.data.rows}).catch(function(t){e.$Notice.warning({title:"网络未知错误！",desc:t})})}}},r=o,n=(a("ae7f"),a("2877")),l=Object(n["a"])(r,i,s,!1,null,"53113cb9",null);e["default"]=l.exports},f9fb:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"command formed-wrap"},[a("div",{staticClass:"formed-header"},[a("span",{staticClass:"formed-header-title"},[t._v("密码策略")]),t.isEdit?t._e():a("myButton",{staticClass:"formed-header-btn",attrs:{btnType:"info"},on:{click:t.toEdit}},[t._v("编辑")])],1),a("div",{staticClass:"formed-container"},[t.isEdit?a("div",{staticClass:"formed-form"},[a("Form",{ref:"setting",attrs:{model:t.setting,rules:t.ruleValidate,"label-width":130}},[a("FormItem",{attrs:{label:"密码策略：",prop:"passwordType"}},[a("RadioGroup",{attrs:{vertical:""},model:{value:t.setting.passwordType,callback:function(e){t.$set(t.setting,"passwordType",e)},expression:"setting.passwordType"}},[a("div",{staticClass:"text"},[a("Radio",{attrs:{label:"1"}},[a("span",[t._v("简单（6位及6位以上密码，无特殊要求）")])])],1),a("div",{staticClass:"text"},[a("Radio",{attrs:{label:"2"}},[a("span",[t._v("中等（8位及8位以上密码，至少包含数字+字母）")])])],1),a("div",{staticClass:"text"},[a("Radio",{attrs:{label:"3"}},[a("span",[t._v("复杂 （8位及8位以上密码，至少包含数字+大写字母+小写字母）")])])],1)])],1),a("FormItem",{attrs:{label:"初始密码：",prop:"init"}},[a("Input",{staticClass:"initpassword",attrs:{type:t.pwdType,maxlength:30},model:{value:t.setting.init,callback:function(e){t.$set(t.setting,"init",e)},expression:"setting.init"}}),a("img",{staticClass:"img",attrs:{src:t.src,draggable:"false"},on:{click:t.changeType}})],1)],1)],1):a("div",{staticClass:"formed-form"},[a("div",{staticClass:"formed-form-item"},[a("span",[t._v("密码策略：")]),a("span",[t._v(t._s(t.passwordtext))])]),a("div",{staticClass:"formed-form-item"},[a("span",[t._v("初始密码：")]),a("span",[t._v(t._s(t.init))])])]),t.isEdit?a("div",{staticClass:"formed-footer"},[a("myButton",{attrs:{btnType:"info"},on:{click:function(e){t.tosave("setting")}}},[t._v("保存")]),a("myButton",{on:{click:t.cancelEdit}},[t._v("取消")])],1):t._e()])])},s=[],o={data:function(){return{passwordtext:"",init:"",isEdit:!1,pwdType:"password",src:a("bf8b"),setting:{pageData:null,id:0,length:0,init:"",passwordType:""},ruleValidate:{init:[]}}},watch:{"setting.passwordType":function(t,e){"1"===t&&(this.ruleValidate={init:[{validator:function(t,e,a){e.length<6?a(new Error("请输入6位及6位以上密码")):/[\u4E00-\u9FA5\uF900-\uFA2D]/.test(e)&&a(new Error("密码不能是中文")),a()},trigger:"blur"}]}),"2"===t&&(this.ruleValidate={init:[{validator:function(t,e,a){var i=/[\d]/.test(e)+/[a-z]/i.test(e);e.length<8||i<2?a(new Error("8位及8位以上密码，至少包含数字+字母")):/[\u4E00-\u9FA5\uF900-\uFA2D]/.test(e)&&a(new Error("密码不能是中文")),a()},trigger:"blur"}]}),"3"===t&&(this.ruleValidate={init:[{validator:function(t,e,a){var i=/[\d]/.test(e)+/[a-z]/.test(e)+/[A-Z]/.test(e);e.length<8||i<3?a(new Error("8位及8位以上密码，至少包含数字+大写字母+小写字母")):/[\u4E00-\u9FA5\uF900-\uFA2D]/.test(e)&&a(new Error("密码不能是中文")),a()},trigger:"blur"}]})}},mounted:function(){var t=this;t.finddata()},methods:{toEdit:function(){this.isEdit=!0},cancelEdit:function(){this.isEdit=!1,this.$refs["setting"].resetFields(),this.pwdType="password"},finddata:function(){var t=this;this.axios({method:"post",url:"/cipher/auth/management/password/info",data:{}}).then(function(e){0===e.data.code&&(t.init=e.data.msg.setting.init,"1"===e.data.msg.setting.passwordType?t.passwordtext="简单（6位及6位以上密码，无特殊要求）":"2"===e.data.msg.setting.passwordType?t.passwordtext="中等（8位及8位以上密码，至少包含数字+字母）":"3"===e.data.msg.setting.passwordType&&(t.passwordtext="复杂 （8位及8位以上密码，至少包含数字+大写字母+小写字母）"),t.setting=e.data.msg.setting)}).catch(function(t){console.log(t)})},changeType:function(){this.pwdType="password"===this.pwdType?"text":"password",this.src=this.src===a("bf8b")?a("9864"):a("bf8b")},tosave:function(t){var e=this;this.$refs[t].validate(function(t){t?e.save():e.$myMessage.error("表单验证失败")})},save:function(){var t=this,e={init:this.setting.init,passwordType:this.setting.passwordType};this.axios({method:"post",url:"/cipher/auth/management/password/save",data:e}).then(function(e){0===e.data.code?(t.finddata(),t.$myMessage.success(e.data.msg),t.cancelEdit()):1===e.data.code&&t.$Modal.error({title:"提示",content:e.data.msg})}).catch(function(t){console.log(t)})}}},r=o,n=(a("b541"),a("2877")),l=Object(n["a"])(r,i,s,!1,null,"08906a50",null);e["default"]=l.exports},faeb:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"notice"},[a("Icon",{attrs:{type:"md-checkmark-circle"}}),a("span",[t._v(t._s(t.text))])],1)},s=[],o=(a("c5f6"),{props:{text:{type:String,default:"成功!"},show:{type:Boolean,default:!0},duration:{type:Number,default:1.5},onClose:{type:Function}},methods:{clearCloseTimer:function(){this.closeTimer&&(clearTimeout(this.closeTimer),this.closeTimer=null)},close:function(){this.clearCloseTimer(),this.onClose()}},mounted:function(){var t=this;this.clearCloseTimer(),0!==this.duration&&(this.closeTimer=setTimeout(function(){t.close()},1e3*this.duration))}}),r=o,n=(a("cce6"),a("2877")),l=Object(n["a"])(r,i,s,!1,null,"34c955a2",null);e["a"]=l.exports},fb6e:function(t,e,a){"use strict";var i=a("94d1"),s=a.n(i);s.a},fb8a:function(t,e,a){},fb96:function(t,e,a){"use strict";var i=a("9e1ec"),s=a.n(i);s.a},fbed:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("transition",[a("router-view")],1)],1)},s=[],o={},r=o,n=a("2877"),l=Object(n["a"])(r,i,s,!1,null,"5a1a5319",null);e["default"]=l.exports},fce7:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"formed-wrap"},[t._m(0),a("div",{staticClass:"formed-container"},[a("Form",{staticClass:"formed-form",attrs:{"label-width":130}},[a("FormItem",{attrs:{label:"锁定账号："}},[a("RadioGroup",{model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}},[a("Radio",{attrs:{label:"1"}},[t._v("开启")]),a("Radio",{attrs:{label:"0"}},[t._v("关闭")])],1)],1),a("FormItem",{attrs:{label:"账号锁定策略："}},[a("div",{staticClass:"formed-form-item-part"},[a("InputNumber",{attrs:{min:0,precision:0},model:{value:t.formItem.timeRang,callback:function(e){t.$set(t.formItem,"timeRang",e)},expression:"formItem.timeRang"}}),t._v("分钟内，身份认证连接失败\n        ")],1),a("div",{staticClass:"formed-form-item-part"},[a("InputNumber",{attrs:{min:1,step:1,precision:0},model:{value:t.formItem.failCount,callback:function(e){t.$set(t.formItem,"failCount",e)},expression:"formItem.failCount"}}),t._v("次后，将账号锁定\n        ")],1),a("div",{staticClass:"formed-form-item-part"},[a("InputNumber",{attrs:{min:0,precision:0},model:{value:t.formItem.freezingTime,callback:function(e){t.$set(t.formItem,"freezingTime",e)},expression:"formItem.freezingTime"}}),t._v("分钟。\n        ")],1)])],1),a("div",{staticClass:"formed-footer"},[a("myButton",{attrs:{btnType:"info"},on:{click:t.saveset}},[t._v("保存")]),a("myButton",{on:{click:t.cancel}},[t._v("取消")])],1)],1)])},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"formed-header"},[a("div",{staticClass:"formed-header-title"},[t._v("账号锁定编辑")])])}],o={data:function(){return{buttonSize:"large",formItem:{timeRang:0,failCount:0,freezingTime:0},selected:"1"}},mounted:function(){this.finddata()},methods:{cancel:function(){this.$router.go(-1)},finddata:function(){var t=this;this.axios({method:"post",url:"/cipher/loginfail/list",data:{}}).then(function(e){t.formItem=e.data,1===e.data.status?t.selected="1":0===e.data.status&&(t.selected="0")}).catch(function(t){console.log(t)})},saveset:function(){var t=this,e={failCount:t.formItem.failCount,freezingTime:t.formItem.freezingTime,id:t.formItem.id,status:t.selected,timeRang:t.formItem.timeRang};this.axios({method:"post",url:"/cipher/loginfail/update",data:e}).then(function(e){t.cancel(),1===e.data.return_code?t.$myMessage.success(e.data.return_msg):t.$Modal.error({title:"提示",content:e.data.return_msg})}).catch(function(t){console.log(t)})}}},r=o,n=(a("fb96"),a("2877")),l=Object(n["a"])(r,i,s,!1,null,"7c3ec526",null);e["default"]=l.exports},fef5:function(t,e,a){}}]);