(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["audit"],{"1b55":function(t,e,a){},2853:function(t,e,a){},"368e":function(t,e,a){"use strict";var i=a("2853"),s=a.n(i);s.a},4970:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ua tabled-wrap"},[a("div",{staticClass:"tabled-header"},[a("div",{staticClass:"tabled-header-search"},[a("myInput",{attrs:{placeholder:"请输入姓名 / 账号",radius:"half",search:!0},on:{handleClick:t.queryUserAudit},model:{value:t.queryName,callback:function(e){t.queryName=e},expression:"queryName"}})],1),a("div",{staticClass:"tabled-header-left"},[a("mySelect",{attrs:{dataList:t.options,showString:"事件类型",valueKey:"type",labelKey:"desc"},on:{"on-change":t.queryUserAudit},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}}),a("DatePicker",{staticClass:"user-header__data",attrs:{type:"daterange","split-panels":"",placeholder:"选择日期"},on:{"on-change":t.queryUserAudit},model:{value:t.data,callback:function(e){t.data=e},expression:"data"}})],1),a("div",{staticClass:"tabled-header-btn"},[a("myButton",{attrs:{btnType:"info"},on:{click:t.exportExcel}},[t._v("导出报表")])],1)]),a("div",{staticClass:"tabled-table"},[a("Table",{ref:"table",attrs:{columns:t.columns1,data:t.data1}})],1),a("Page",{staticClass:"tabled-page",attrs:{total:t.total,current:t.curentPage,"show-elevator":"","show-sizer":"","show-total":""},on:{"on-change":t.changePage,"on-page-size-change":t.pageSizeChange}})],1)},s=[],n={data:function(){var t=this;return{data:"",queryName:"",curentPage:1,total:0,size:10,options:[],selected:"",columns1:[{align:"center",title:"姓名",key:"userInfo"},{align:"center",title:"事件类型",key:"typeStr"},{align:"center",title:"事件简介",key:"msg",render:function(e,a){return e("div",[e("span",{style:{diaplay:"inline-block",width:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},domProps:{title:t.data1[a.index].msg}},t.data1[a.index].msg)])}},{align:"center",title:"时间",key:"createTime"},{align:"center",title:"IP",key:"ip"}],data1:[]}},mounted:function(){this.initoption();var t={rows:this.size,page:1,sord:"DESC"};this.finddata(t)},methods:{queryUserAudit:function(){var t={startTime:this.data[0],endTime:this.data[1],queryName:this.queryName,type:this.selected,rows:this.size,page:1,sord:"DESC"};this.finddata(t),this.curentPage=1},finddata:function(t){var e=this;this.axios({method:"post",url:"/cipher/userbehavior/list?json",data:t}).then(function(t){e.data1=t.data.rows,e.total=t.data.total}).catch(function(t){console.log(t)})},initoption:function(){var t=this;this.axios({method:"post",url:"/cipher/userbehavior/content",data:{}}).then(function(e){var a={type:0,desc:"所有"};t.options=[a].concat(e.data)}).catch(function(t){console.log(t)})},pageSizeChange:function(t){var e={rows:t,page:1,queryName:this.queryName,type:this.selected,startTime:this.data[0],endTime:this.data[1],sord:"DESC"};this.finddata(e),this.size=t},changePage:function(t){var e={rows:this.size,page:t,queryName:this.queryName,type:this.selected,startTime:this.data[0],endTime:this.data[1],sord:"DESC"};this.curentPage=t,this.finddata(e)},exportExcel:function(){window.location.href="/cipher/userbehavior/exportExcle?startTime="+this.data[0]+"&endTime="+this.data[1]+"&queryName="+this.queryName+"&type="+this.selected}}},r=n,o=(a("eff7"),a("2877")),l=Object(o["a"])(r,i,s,!1,null,"23973478",null);e["default"]=l.exports},"4f88":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tabled-wrap"},[a("div",{staticClass:"tabled-header"},[a("div",{staticClass:"tabled-header-search"},[a("myInput",{attrs:{placeholder:"输入姓名，账号",radius:"half",search:!0},on:{handleClick:t.searchFacility},model:{value:t.queryName,callback:function(e){t.queryName="string"===typeof e?e.trim():e},expression:"queryName"}})],1),a("div",{staticClass:"tabled-header-left"},[a("DatePicker",{attrs:{type:"daterange","split-panels":"",placeholder:"选择日期"},on:{"on-change":t.dateChange}})],1),a("div",{staticClass:"tabled-header-btn"},[a("mySelect",{attrs:{dataList:t.eventTypeList,showString:"事件类型"},on:{"on-change":t.eventTypeChange},model:{value:t.eventType,callback:function(e){t.eventType=e},expression:"eventType"}}),a("myButton",{staticClass:"visitor-audit-header__btn",attrs:{btnType:"info"},on:{click:t.downLoadExcel}},[t._v("导出报表")])],1)]),a("div",{staticClass:"tabled-table"},[a("Table",{ref:"table",attrs:{columns:t.columns4,data:t.data6}})],1),a("Page",{staticClass:"tabled-page",attrs:{total:t.total,current:t.currentPage,"show-elevator":"","show-sizer":"","show-total":""},on:{"on-change":t.changePage,"on-page-size-change":t.changePageSize}})],1)},s=[],n=a("e773"),r={data:function(){return{vpnId:0,queryName:"",current:1,startTime:"",endTime:"",total:0,currentPage:1,pageSize:10,eventType:0,eventTypeList:[{value:"",label:"全部"},{value:0,label:"设备访问"},{value:1,label:"设备维护"}],columns4:[{title:"账号",key:"userInfo",align:"center"},{title:"事件简介",key:"intro",align:"center"},{title:"事件内容",key:"msg",align:"center"},{title:"时间",key:"createTime",align:"center"}],data6:[]}},mounted:function(){this.init()},computed:{params:function(){return{page:this.current,rows:this.pageSize,vpnId:this.vpnId}}},methods:{init:function(){this.vpnId=this.$route.query.vpnId,this.getData(this.params)},getData:function(t){var e=this;this.axios({method:"post",url:n["a"].equipBehaviorLogList,data:t}).then(function(t){var a=t.data;0===a.return_code?(e.data6=a.rows,e.total=a.total):e.$myMessage.error("数据错误")}).catch(function(t){e.axios.error.handlingErrors(t)})},searchFacility:function(){this.params.userInfo=this.queryName,console.log(this.params),this.getData(this.params)},changePage:function(t){this.params.page=t,this.getData(this.params)},changePageSize:function(t){this.params.rows=t,this.getData(this.params)},dateChange:function(t){this.params.startTime=t[0],this.params.endTime=t[1],this.getData(this.params)},eventTypeChange:function(t){this.params.type=t.value,this.getData(this.params)},downLoadExcel:function(){window.location.href="/cipher/equipBehavior/exportExcle"}}},o=r,l=(a("79de"),a("2877")),c=Object(l["a"])(o,i,s,!1,null,"56178755",null);e["default"]=c.exports},"4ffa":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"admin-audit tabled-wrap"},[a("div",{staticClass:"tabled-header"},[a("div",{staticClass:"tabled-header-search"},[a("myInput",{attrs:{placeholder:"请输入姓名 / 账号",radius:"half",search:!0},on:{handleClick:t.queryAdminAudit},model:{value:t.queryName,callback:function(e){t.queryName=e},expression:"queryName"}})],1),a("div",{staticClass:"tabled-header-left"},[a("mySelect",{attrs:{dataList:t.options,showString:"事件类型",valueKey:"type",labelKey:"desc"},on:{"on-change":t.queryAdminAudit},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}}),a("DatePicker",{staticClass:"admin-header__data",attrs:{type:"daterange","split-panels":"",placeholder:"选择日期"},on:{"on-change":t.queryAdminAudit},model:{value:t.data,callback:function(e){t.data=e},expression:"data"}})],1),a("div",{staticClass:"tabled-header-btn"},[a("myButton",{attrs:{btnType:"info"},on:{click:t.exportExcel}},[t._v("导出报表")])],1)]),a("div",{staticClass:"tabled-table"},[a("Table",{ref:"table",attrs:{columns:t.columns1,data:t.data1}})],1),a("Page",{staticClass:"tabled-page",attrs:{total:t.total,current:t.curentPage,"show-elevator":"","show-sizer":"","show-total":""},on:{"on-change":t.changePage,"on-page-size-change":t.pageSizeChange}})],1)},s=[],n={data:function(){return{data:[],total:0,queryName:"",curentPage:1,size:10,options:[],selected:0,columns1:[{title:"姓名",key:"userName",align:"center"},{title:"事件",key:"typeStr",align:"center"},{title:"事件简介",key:"operation",align:"center"},{title:"时间",key:"createTime",align:"center"}],data1:[]}},mounted:function(){this.initoption();var t={rows:this.size,page:1};this.finddata(t)},methods:{queryAdminAudit:function(){var t={startTime:this.data[0],endTime:this.data[1],queryName:this.queryName,type:this.selected,rows:this.size,page:1};this.finddata(t),this.curentPage=1},finddata:function(t){var e=this;this.axios({method:"post",url:"/cipher/adminbehavior/list?json",data:t}).then(function(t){e.data1=t.data.rows,e.total=t.data.total}).catch(function(t){console.log(t)})},initoption:function(){var t=this;this.axios({method:"post",url:"/cipher/adminbehavior/content",data:{}}).then(function(e){var a={type:0,desc:"所有类型"};t.options=[a].concat(e.data)}).catch(function(t){console.log(t)})},pageSizeChange:function(t){var e={rows:t,page:1,queryName:this.queryName,type:this.selected,startTime:this.data[0],endTime:this.data[1]};this.finddata(e),this.size=t,this.curentPage=1},changePage:function(t){var e={rows:this.size,page:t,queryName:this.queryName,type:this.selected,startTime:this.data[0],endTime:this.data[1]};this.curentPage=t,this.finddata(e)},exportExcel:function(){window.location.href="/cipher/adminbehavior/exportExcle?startTime="+this.data[0]+"&endTime="+this.data[1]+"&queryName="+this.queryName+"&type="+this.selected}}},r=n,o=(a("368e"),a("2877")),l=Object(o["a"])(r,i,s,!1,null,"81a18d82",null);e["default"]=l.exports},"51bf":function(t,e,a){},"583d":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("transition",{attrs:{name:"fade",mode:"out-in"}},[a("router-view")],1)},s=[],n={},r=n,o=a("2877"),l=Object(o["a"])(r,i,s,!1,null,"250e5176",null);e["default"]=l.exports},"5fa9":function(t,e,a){},"78e6":function(t,e,a){},"79de":function(t,e,a){"use strict";var i=a("51bf"),s=a.n(i);s.a},"80f7":function(t,e,a){},"8fd0":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"visitor-audit tabled-wrap"},[a("div",{staticClass:"tabled-header"},[t.flag?[a("div",{staticClass:"tabled-header-search"},[a("myInput",{attrs:{placeholder:"请输入姓名 / 账号",radius:"half",search:!0},on:{handleClick:t.queryVisitorAudit},model:{value:t.queryName,callback:function(e){t.queryName=e},expression:"queryName"}})],1),a("div",{staticClass:"tabled-header-left"},[a("DatePicker",{attrs:{type:"daterange","split-panels":"",placeholder:"选择日期"},on:{"on-change":t.queryVisitorAudit},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1)]:a("div",{staticClass:"visitor-audit-chat-header"},[a("div",{staticClass:"visitor-audit-chat-header-item"},[a("b",[t._v("统计维度：")]),a("RadioGroup",{on:{"on-change":t.CustomChange},model:{value:t.customType,callback:function(e){t.customType=e},expression:"customType"}},[a("Radio",{staticClass:"TableRadio",attrs:{label:"全部"}},[t._v("账户类型（员工/访客）")]),a("Radio",{staticClass:"TableRadio TableRadioMagin",attrs:{label:"SSID"}},[t._v("SSID(Potal描述)")])],1)],1),a("div",{staticClass:"visitor-audit-chat-header-item"},[a("b",[t._v("时间粒度：")]),a("DatePicker",{attrs:{type:"daterange",placeholder:"选择日期"},on:{"on-change":t.DateSearch},model:{value:t.dateTime,callback:function(e){t.dateTime=e},expression:"dateTime"}})],1)]),a("div",{staticClass:"tabled-header-btn"},[t.flag?[a("mySelect",{attrs:{dataList:t.visitorTypeList,showString:"选择"},on:{"on-change":t.queryVisitorAudit},model:{value:t.visitorType,callback:function(e){t.visitorType=e},expression:"visitorType"}}),a("myButton",{attrs:{btnType:"info"},on:{click:t.downLoadExcel}},[t._v("导出报表")])]:t._e(),a("myButton",{attrs:{btnType:"info"},on:{click:t.viewTabs}},[t._v(t._s(t.toggleButtonText))])],2)],2),t.flag?[a("div",{staticClass:"tabled-table"},[a("Table",{ref:"table",attrs:{columns:t.columns4,data:t.data6},scopedSlots:t._u([{key:"visitorType",fn:function(e){var a=e.row;return[t._v("\n          "+t._s(0===a.visitorType?"员工":"访客")+"\n        ")]}}])})],1),a("Page",{staticClass:"tabled-page",attrs:{total:t.total,current:t.curentPage,"show-elevator":"","show-sizer":"","show-total":""},on:{"on-change":t.changePage,"on-page-size-change":t.pageSizeChange}})]:[a("div",{staticClass:"visitor-audit-chatType"},[a("span",{class:{Tableactive:0==t.isactive},staticStyle:{cursor:"pointer"},on:{click:t.lineChange}},[t._v("折线图")]),t._v("/\n      "),a("span",{class:{Tableactive:1==t.isactive},staticStyle:{cursor:"pointer"},on:{click:t.barChange}},[t._v("柱状图")])]),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.flag,expression:"!flag"}],staticClass:"myChart",attrs:{id:"myChart"}})]],2)},s=[];function n(t,e,a,i){var s=[];for(var n in e.series)s.push(Math.max.apply(null,e.series[n].data)),n++;var r=this.MaxNumber(Math.max.apply(null,s)),o=t,l={title:{text:"WIFI使用无线人数",textStyle:{color:"#333333",fontStyle:"normal",fontWeight:"normal",fontFamily:"Lucida Grande",fontSize:18},left:"center",padding:[5,10]},grid:{backgroundColor:"F3F3F3"},tooltip:{trigger:"axis"},legend:{right:"100",x:"center",y:"bottom",padding:[0,40,0,0],itemGap:40,itemWidth:40,itemHeight:20,data:e.portalName},calculable:!0,xAxis:[{type:"category",name:e.xName,data:e.timeList,axisLabel:{interval:i,textStyle:{color:"#666666",fontSize:"11"}},axisLine:{lineStyle:{color:"DFE4EF",width:"2"}},splitLine:{show:!1}}],yAxis:[{min:0,max:r,height:300,splitNumber:a,type:"value",name:e.yName,nameLocation:"middle",nameGap:35,axisLabel:{interval:0,rotate:0,textStyle:{color:"#666666",fontSize:"11"}},axisLine:{lineStyle:{color:"DFE4EF",width:"2"}},splitLine:{show:!0,lineStyle:{type:"dashed",color:"#DFE4EF"}}}],series:e.series};o.clear(),o.setOption(l,!0)}function r(t){return t>=0&&t<=10?t+=2:t>=10&&t<=100?t+=5:t>=100&&t<=1e3&&(t+=100),t=t%2===0?t:t+1,t}var o={drawLine:n,MaxNumber:r},l={data:function(){return{demo:"日",toggleButtonText:"图表展示",monthDate2:"",monthDate1:"",dateTime:[],flag:!0,date:[],queryName:"",visitorType:null,visitorTypeList:[{value:"",label:"全部"},{value:0,label:"员工"},{value:1,label:"访客"}],total:0,curentPage:1,size:10,columns4:[{title:"姓名",key:"vistorName",align:"center"},{title:"类型",slot:"visitorType",align:"center"},{title:"无线Portal 描述",key:"msg",align:"center"},{title:"上线时间",key:"createTime",align:"center"}],data6:[],TableType:"line",isactive:0,isRadioactive:0,demo1:"全部",totalPage:0,customType:"全部",legendName:[],dimension:0,granularity:0,startTime:"",endTime:"",portal:{data:[],timeList:[],portalName:[],series:[]},seriesColor:["#ff9933","#1890ff","#eaff56","#9ed048","#9d2933"]}},mounted:function(){var t=this,e={rows:t.size,page:1};t.finddata(e)},methods:{queryVisitorAudit:function(){var t={startTime:this.date[0],endTime:this.date[1],name:this.queryName,visitorType:this.visitorType,rows:this.size,page:1};this.finddata(t),this.curentPage=1},finddata:function(t){var e=this;this.axios({method:"post",url:"/cipher/vistorLoginLog/list?json",data:t}).then(function(t){e.data6=t.data.rows,e.total=t.data.total}).catch(function(t){console.log(t)})},changePage:function(t){var e={rows:this.size,page:t,name:this.queryName,visitorType:this.visitorType,startTime:this.date[0],endTime:this.date[1]};this.curentPage=t,this.finddata(e)},pageSizeChange:function(t){var e={rows:t,page:1,name:this.queryName,visitorType:this.visitorType,startTime:this.date[0],endTime:this.date[1]};this.finddata(e),this.size=t,this.curentPage=1},downLoadExcel:function(){window.location.href="/cipher/vistorLoginLog/downloadExcelLog"},viewTabs:function(){this.flag=!this.flag,this.toggleButtonText=!0===this.flag?"图表展示":"表格展示",!1===this.flag&&this.axiosDrawLine()},axiosDrawLine:function(){var t=this;this.axios({method:"post",url:"/cipher/vistor/chartData",data:{dimension:this.dimension,granularity:this.granularity,startTime:this.startTime,endTime:this.endTime}}).then(function(e){0===t.dimension?t.accountData(e.data,t.TableType):t.assemblyData(e.data.portal,t.TableType)}).catch(function(e){t.$Notice.warning({title:"网络未知错误！",desc:e}),t.portal={},t.drawLine(t.portal,t.tableType)})},drawLine:function(t,e){var a=this.$echarts.init(document.getElementById("myChart"));o.drawLine(a,t,5,1,e)},DateSearch:function(t){this.startTime=t[0],this.endTime=t[1];var e=new Date(this.endTime),a=new Date(this.startTime),i=e-a,s=i/1e3/60/60/24;s>30?this.$Modal.error({title:"选择日期错误",content:"日期相差大于30天,最多只能显示30天"}):s<2?this.$Modal.error({title:"选择日期错误",content:"日期相差小于2天"}):this.axiosDrawLine()},echartChange:function(){for(var t in this.portal.series)this.portal.series[t].type=this.TableType,t++;this.drawLine(this.portal,this.TableType)},lineChange:function(){this.isactive=0,this.TableType="line",this.echartChange()},barChange:function(){this.isactive=1,this.TableType="bar",this.echartChange()},CustomChange:function(){"全部"===this.customType?(this.dimension=0,this.granularity=0,this.axiosDrawLine()):(this.customType="SSID",this.dimension=1,this.axiosDrawLine())},colorCreate:function(){for(var t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],e="#",a=0;a<6;a++)e+=t[Math.floor(15*Math.random())];return console.log(e),e},accountData:function(t,e){var a=["员工使用量","访客使用量"];this.portal.yName="使用人数",this.portal.xName="日期";var i=[];for(var s in this.portal.timeList=t.timeList,t)-1!==s.indexOf("data")&&i.push(t[s]);for(var n in i){var r={};r.name=a[n],r.icon="stack",this.portal.portalName[n]=r;var o={};o.name=a[n],o.type=e,o.color=n>this.seriesColor.length-1?this.colorCreate():this.seriesColor[n],o.data=i[n],this.portal.series[n]=o,n++}this.drawLine(this.portal,this.TableType)},assemblyData:function(t,e){for(var a in this.portal.yName="Potal人数",this.portal.xName="日期",t){var i=t[a],s={};s.name=i.portalName,s.icon="stack",this.portal.portalName[a]=s,this.portal.data[a]=i.data;var n={};n.name=i.portalName,n.type=e,n.data=i.data,n.color=a>this.seriesColor.length-1?this.colorCreate():this.seriesColor[a],this.portal.series[a]=n,a++}this.portal.timeList=t[0].timeList,this.drawLine(this.portal,this.TableType)}}},c=l,d=(a("9349"),a("2877")),h=Object(d["a"])(c,i,s,!1,null,"67e7c17a",null);e["default"]=h.exports},9349:function(t,e,a){"use strict";var i=a("78e6"),s=a.n(i);s.a},b91d:function(t,e,a){"use strict";var i=a("f23c"),s=a.n(i);s.a},c1f1:function(t,e,a){"use strict";var i=a("80f7"),s=a.n(i);s.a},c9df:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-audit tabled-wrap",style:t.bgColor},[a("div",{staticClass:"tabled-header app-audit-header"},[t.displayModelFlag?a("div",{staticClass:"tabled-header-search"},[a("myInput",{attrs:{placeholder:"请输入应用名称",radius:"half",search:!0},on:{handleClick:t.querynamebtn},model:{value:t.queryName,callback:function(e){t.queryName=e},expression:"queryName"}})],1):t._e(),t.displayModelFlag?a("div",{staticClass:"tabled-header-left"},[a("DatePicker",{attrs:{type:"daterange","split-panels":"",placeholder:"选择日期"},on:{"on-change":t.querynamebtn},model:{value:t.data,callback:function(e){t.data=e},expression:"data"}})],1):t._e(),a("div",{staticClass:"tabled-header-btn"},[a("myButton",{attrs:{btnType:"info"},on:{click:t.selDisplayModel}},[t._v(t._s(t.displayModelText))])],1)]),t.displayModelFlag?[a("div",{staticClass:"tabled-table"},[a("Table",{attrs:{border:"",columns:t.columns7,data:t.data6}})],1),a("Page",{staticClass:"tabled-page",attrs:{total:t.total,current:t.curentPage,"show-elevator":"","show-sizer":"","show-total":""},on:{"on-change":t.changePage,"on-page-size-change":t.pageSizeChange}})]:t._e(),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.displayModelFlag,expression:"!displayModelFlag"}],ref:"appAuditChart",staticClass:"auditChart"})],2)},s=[],n=(a("ac6a"),a("53ca")),r={data:function(){var t=this;return{conditionDay:"7天",displayModelText:"图表展示",displayModelFlag:!0,date:"",recently:1,recentlyData:{day7:[],day30:[],applicationName:[]},recently7DaysData:[],recently30DaysData:[],queryName:"",total:0,size:10,curentPage:1,columns7:[{title:"应用",key:"applicationName",render:function(e,a){return e("a",[e("span",{on:{click:function(){t.show(a.index)}}},a.row.applicationName)])}},{title:"访问次数",key:"visitTimes"},{title:"占比",key:"proportion"},{title:"状态",key:"applicationStatus"},{title:"操作",key:"action",width:150,align:"center",render:function(e,a){return e("a",[e("span",{on:{click:function(){t.show(a.index)}}},"查看详情")])}}],data6:[]}},mounted:function(){var t=this,e={rows:t.size,recently:this.recently,page:1};t.finddata(e)},methods:{querynamebtn:function(){var t={rows:this.size,page:1,startTime:this.data[0],endTime:this.data[1],applicationName:this.queryName};this.finddata(t),this.curentPage=1},finddata:function(t){var e=this;this.axios({method:"post",url:"/cipher/applyAudit/list?json",data:t}).then(function(t){return e.data6=t.data.rows,e.total=t.data.total,t.data.rows}).catch(function(t){console.log(t)})},pageSizeChange:function(t){var e={rows:t,page:1,startTime:this.data[0],endTime:this.data[1],applicationName:this.queryName};this.finddata(e),this.size=t},changePage:function(t){var e={rows:this.size,page:t,startTime:this.data[0],endTime:this.data[1],applicationName:this.queryName};this.curentPage=t,this.finddata(e)},show:function(t){this.$router.push({name:"appAuditDetail",query:{id:this.data6[t].id,applicationName:this.data6[t].applicationName}})},selDisplayModel:function(){this.displayModelFlag?(this.displayModelFlag=!1,this.displayModelText="表格展示",this.getRecentlyData()):(this.displayModelFlag=!0,this.displayModelText="图表展示")},initChart:function(){var t=this.$echarts.init(this.$refs.appAuditChart),e={backgroundColor:"#fff",title:{text:"应用审计图表"},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{left:"right",data:["近7天","近30天"]},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",data:this.recentlyData.applicationName,axisLabel:{interval:0,rotate:40,textStyle:{color:"#666666",fontSize:"11"}},axisLine:{lineStyle:{color:"DFE4EF",width:"2"}}}],yAxis:[{type:"value"}],series:[{name:"近7天",type:"bar",data:this.recentlyData.day7,itemStyle:{color:"#FF9900"}},{name:"近30天",type:"bar",stack:"广告",data:this.recentlyData.day30,itemStyle:{color:"#61A5E8"}}]};e&&"object"===Object(n["a"])(e)&&t.setOption(e,!0)},getRecentlyData:function(){var t=this,e={days:JSON.stringify([7,30])};this.axios({method:"post",url:"/cipher/applyAudit/chart",data:e}).then(function(e){var a=e.data.rows;a.forEach(function(e,a,i){a<30&&(t.recentlyData.day7[a]=e.day7,t.recentlyData.day30[a]=e.day30,t.recentlyData.applicationName[a]=e.applicationName)}),t.initChart()}).catch(function(t){console.log(t)})}}},o=r,l=(a("fb8f"),a("2877")),c=Object(l["a"])(o,i,s,!1,null,"46e495cc",null);e["default"]=c.exports},cd8a:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-list-audit tabled-wrap"},[a("div",{staticClass:"tabled-header"},[a("div",{staticClass:"tabled-header-search"},[a("myInput",{attrs:{placeholder:"请输入姓名",radius:"half",search:!0},on:{handleClick:t.queryUserAudit},model:{value:t.queryName,callback:function(e){t.queryName=e},expression:"queryName"}})],1),a("div",{staticClass:"tabled-header-right"},[a("mySelect",{attrs:{dataList:t.options,showString:"事件类型",valueKey:"type",labelKey:"desc"},on:{"on-change":t.queryUserAudit},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}}),a("DatePicker",{staticClass:"app-list-header__data",attrs:{type:"daterange","split-panels":"",placeholder:"选择日期"},on:{"on-change":t.queryUserAudit},model:{value:t.data,callback:function(e){t.data=e},expression:"data"}}),a("myButton",{attrs:{btnType:"info"},on:{click:t.exportExcel}},[t._v("导出报表")])],1)]),a("div",{staticClass:"tabled-table"},[a("Table",{ref:"table",attrs:{columns:t.columns1,data:t.data1}})],1),a("Page",{staticClass:"tabled-page",attrs:{total:t.total,current:t.curentPage,"show-elevator":"","show-sizer":"","show-total":""},on:{"on-change":t.changePage,"on-page-size-change":t.pageSizeChange}})],1)},s=[],n={data:function(){var t=this;return{data:"",queryName:"",curentPage:1,total:0,size:10,options:[],optionsapp:[],selected:0,selectedapp:"",id:"",applicationName:"",columns1:[{title:"操作主体",key:"userName"},{title:"事件类型",key:"typeStr"},{title:"事件简介",key:"msg",render:function(e,a){return e("div",[e("span",{style:{diaplay:"inline-block",width:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},domProps:{title:t.data1[a.index].msg}},t.data1[a.index].msg)])}},{title:"时间",key:"createTime"}],data1:[]}},created:function(){this.id=this.$route.query.id,this.applicationName=this.$route.query.applicationName,this.selectedapp=this.id},mounted:function(){this.initoptions(),this.initoptionsapp();var t={applicationId:this.id,page:1,rows:this.size,sidx:"",sord:"asc"};this.finddata(t)},methods:{queryUserAudit:function(){var t={applicationId:this.selectedapp,rows:this.size,page:1,userName:this.queryName,sidx:"",sord:"asc",startTime:this.data[0],endTime:this.data[1],type:this.selected};this.finddata(t)},finddata:function(t){var e=this;this.axios({method:"post",url:"/cipher/applyAudit/getAuditInfo?json",data:t}).then(function(t){e.data1=t.data.rows,e.total=t.data.total}).catch(function(t){console.log(t)})},initoptions:function(){var t=this;this.axios({method:"post",url:"/cipher/applyAudit/content",data:{}}).then(function(e){var a={type:0,desc:"所有类型"};t.options=[a].concat(e.data)}).catch(function(t){console.log(t)})},initoptionsapp:function(){var t=this,e={applicationId:this.id};this.axios({method:"post",url:"/cipher/applyAudit/getList",data:e}).then(function(e){t.optionsapp=e.data}).catch(function(t){console.log(t)})},pageSizeChange:function(t){var e={rows:t,page:1,queryName:this.queryName,type:this.selected,applicationId:this.selectedapp,startTime:this.data[0],endTime:this.data[1]};this.finddata(e),this.size=t},changePage:function(t){var e={applicationId:this.selectedapp,rows:this.size,page:t,queryName:this.queryName,type:this.selected,startTime:this.data[0],endTime:this.data[1],sidx:"",sord:"asc"};this.curentPage=t,this.finddata(e)},exportExcel:function(){window.location.href="/cipher/applyAudit/exportExcle?startTime="+this.data[0]+"&endTime="+this.data[1]+"&queryName="+this.queryName+"&type="+this.selected+"&applicationId="+this.selectedapp}}},r=n,o=(a("b91d"),a("2877")),l=Object(o["a"])(r,i,s,!1,null,"40d80b34",null);e["default"]=l.exports},dd6e:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tabled-wrap"},[a("div",{staticClass:"tabled-header"},[a("div",{staticClass:"tabled-header-search"},[a("myInput",{attrs:{placeholder:"输入设备名称",radius:"half",search:!0},on:{handleClick:t.searchFacility},model:{value:t.queryName,callback:function(e){t.queryName="string"===typeof e?e.trim():e},expression:"queryName"}})],1)]),a("div",{staticClass:"tabled-table"},[a("Table",{ref:"table",attrs:{columns:t.columns4,data:t.data6},scopedSlots:t._u([{key:"devicename",fn:function(e){var i=e.row;return[a("router-link",{attrs:{to:{path:"/auditReportFacility/detailList",query:{vpnId:i.vpnId}}}},[t._v(t._s(i.devicename))])]}},{key:"status",fn:function(e){var a=e.row;return[t._v("\n        "+t._s(0===a.status?"启用":"停用")+"\n      ")]}},{key:"action",fn:function(e){var i=e.row;return[a("router-link",{attrs:{to:{path:"/auditReportFacility/detailList",query:{vpnId:i.vpnId}}}},[t._v("查看详情")])]}}])})],1),a("Page",{staticClass:"tabled-page",attrs:{total:t.total,current:t.currentPage,"show-elevator":"","show-sizer":"","show-total":""},on:{"on-change":t.changePage,"on-page-size-change":t.changePageSize}})],1)},s=[],n=a("e773"),r={data:function(){return{queryName:"",current:1,total:0,currentPage:1,pageSize:3,columns4:[{title:"设备",slot:"devicename",align:"center"},{title:"最近7天访问次数",key:"recentlySeven",align:"center"},{title:"最近30天访问次数",key:"recentlyThirty",align:"center"},{title:"状态",slot:"status",align:"center"},{title:"操作",slot:"action",align:"center"}],data6:[]}},mounted:function(){this.init()},methods:{init:function(){var t={page:1,rows:10};this.getData(t)},getData:function(t){var e=this;this.axios({method:"post",url:n["a"].facilityAuditList,data:t}).then(function(t){var a=t.data;0===a.return_code?(e.data6=a.rows,e.total=a.total):e.$myMessage.error("数据错误")}).catch(function(t){e.axios.error.handlingErrors(t)})},searchFacility:function(){var t={page:1,rows:10,devicename:this.queryName};this.getData(t)},changePage:function(t){this.currentPage=t;var e={page:this.currentPage,rows:10};this.getData(e)},changePageSize:function(t){this.pageSize=t;var e={page:this.currentPage,rows:this.pageSize};this.getData(e)}}},o=r,l=(a("c1f1"),a("2877")),c=Object(l["a"])(o,i,s,!1,null,"1ebb823f",null);e["default"]=c.exports},e773:function(t,e,a){"use strict";e["a"]={facilityAuditList:"/cipher/equipBehavior/list",equipBehaviorLogList:"/cipher/equipBehavior/logList",equipBehaviorExportExcle:"/cipher/equipBehavior/exportExcle"}},e9e1:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("transition",{attrs:{name:"fade",mode:"out-in"}},[a("router-view")],1)},s=[],n={},r=n,o=a("2877"),l=Object(o["a"])(r,i,s,!1,null,"117762f6",null);e["default"]=l.exports},eff7:function(t,e,a){"use strict";var i=a("1b55"),s=a.n(i);s.a},f23c:function(t,e,a){},fb8f:function(t,e,a){"use strict";var i=a("5fa9"),s=a.n(i);s.a}}]);